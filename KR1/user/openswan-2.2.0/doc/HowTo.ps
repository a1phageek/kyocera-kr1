%!PS-Adobe-3.0
%%BoundingBox: 0 0 595 792
%%LanguageLevel: 2
%%Creator: htmldoc 1.8.23 Copyright 1997-2002 Easy Software Products, All Rights Reserved.
%%CreationDate: D:20040606174424+0400
%%Title: Introduction to FreeS/WAN
%%Keywords: Linux, IPsec, VPN, security, FreeSWAN, introduction
%%Pages: 336
%%DocumentNeededResources:
%%+ font Courier
%%+ font Times-Roman
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-BoldItalic
%%+ font Helvetica
%%+ font Helvetica-Bold
%%+ font Helvetica-Oblique
%%+ font Helvetica-BoldOblique
%%+ font Symbol
%%DocumentData: Clean7bit
%%EndComments
%%BeginProlog
%%BeginResource: procset htmldoc-page 1.8 22
/BD{bind def}bind def/B{dup 0 exch rlineto exch 0 rlineto neg 0 exch rlineto
closepath stroke}BD/C{setrgbcolor}BD
/CM{concat}BD/DF{findfont dup length dict begin{1 index/FID ne{def}{pop pop}
ifelse}forall/Encoding fontencoding def currentdict end definefont pop}BD
/F{dup 0 exch rlineto exch 0 rlineto neg 0 exch rlineto closepath fill}BD
/FS{/hdFontSize exch def}BD/GS{gsave}BD/GR{grestore}BD/J{0 exch ashow}BD
/L{0 rlineto stroke}BD/M{moveto}BD/RO{rotate}BD/S{show}BD/SC{dup scale}BD
/SF{findfont hdFontSize scalefont setfont}BD/SP{showpage}BD/T{translate}BD
%%EndResource
/fontencoding[
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent/ampersand
/quotesingle/parenleft/parenright/asterisk/plus/comma/minus/period/slash/zero
/one/two/three/four/five/six/seven/eight/nine/colon/semicolon/less/equal/greater
/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft
/backslash/bracketright/asciicircum/underscore/grave/a/b/c/d/e/f/g/h/i/j/k/l/m/n
/o/p/q/r/s/t/u/v/w/x/y/z/braceleft/bar/braceright/asciitilde/.notdef/Euro
/.notdef/quotesinglbase/florin/quotedblbase/ellipsis/dagger/daggerdbl/circumflex
/perthousand/Scaron/guilsinglleft/OE/.notdef/.notdef/.notdef/.notdef/quoteleft
/quoteright/quotedblleft/quotedblright/bullet/endash/emdash/tilde/trademark
/scaron/guilsinglright/oe/.notdef/.notdef/Ydieresis/space/exclamdown/cent
/sterling/currency/yen/brokenbar/section/dieresis/copyright/ordfeminine
/guillemotleft/logicalnot/hyphen/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guillemotright/onequarter/onehalf/threequarters/questiondown
/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE/Ccedilla/Egrave/Eacute
/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex/Idieresis/Eth/Ntilde/Ograve
/Oacute/Ocircumflex/Otilde/Odieresis/multiply/Oslash/Ugrave/Uacute/Ucircumflex
/Udieresis/Yacute/Thorn/germandbls/agrave/aacute/acircumflex/atilde/adieresis
/aring/ae/ccedilla/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex
/idieresis/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/F0/Courier DF
/F4/Times-Roman DF
/F5/Times-Bold DF
/F6/Times-Italic DF
/F7/Times-BoldItalic DF
/F8/Helvetica DF
/F9/Helvetica-Bold DF
/Fa/Helvetica-Oblique DF
/Fb/Helvetica-BoldOblique DF
/Fc/Symbol findfont definefont pop
%%EndProlog
%%Page: title 15
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 115.72 354.6 M(Introduction to FreeS/WAN)S
GR
SP
%%Page: i 16
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 159.05 674 M(Table of Contents)S
11 FS/F5 SF 0 650 M(Introduction)S
58 650 M(.........................................................................................................................................................1)S
/F4 SF 36 636.8 M(IPsec,)S
62.576 636.8 M( Security)S
101.989 636.8 M( for)S
117.565 636.8 M( the)S
133.757 636.8 M( Internet)S
170.717 636.8 M( Protocol)S
209.25 636.8 M(..................................................................................................1)S
54 623.6 M(Interoperating)S
116.315 623.6 M( with)S
138.623 623.6 M( other)S
163.978 623.6 M( IPsec)S
190.554 623.6 M( implementations)S
264.25 623.6 M(..............................................................................2)S
54 610.4 M(Advantages)S
105.931 610.4 M( of)S
117.844 610.4 M( IPsec)S
143.25 610.4 M(..........................................................................................................................2)S
54 597.2 M(Applications)S
110.221 597.2 M( of)S
122.134 597.2 M( IPsec)S
146 597.2 M(.........................................................................................................................2)S
54 584 M(The)S
71.105 584 M( need)S
94.623 584 M( to)S
105.931 584 M( authenticate)S
161.833 584 M( gateways)S
203.75 584 M(....................................................................................................4)S
36 570.8 M(The)S
53.105 570.8 M( FreeS/WAN)S
110.844 570.8 M( project)S
143.25 570.8 M(..........................................................................................................................5)S
54 557.6 M(Project)S
85.163 557.6 M( goals)S
110.25 557.6 M(......................................................................................................................................5)S
54 544.4 M(Project)S
85.163 544.4 M( team)S
107.5 544.4 M(.......................................................................................................................................6)S
36 531.2 M(Products)S
74.5 531.2 M( containing)S
123.692 531.2 M( FreeS/WAN)S
179 531.2 M(.............................................................................................................6)S
54 518 M(Full)S
71.732 518 M( Linux)S
100.761 518 M( distributions)S
157 518 M(.....................................................................................................................6)S
54 504.8 M(Linux)S
80.279 504.8 M( kernel)S
110.518 504.8 M( distributions)S
168 504.8 M(.................................................................................................................7)S
54 491.6 M(Office)S
82.094 491.6 M( server)S
111.717 491.6 M( distributions)S
168 491.6 M(.................................................................................................................7)S
54 478.4 M(Firewall)S
90.663 478.4 M( distributions)S
146 478.4 M(.........................................................................................................................7)S
54 465.2 M(Firewall)S
90.663 465.2 M( and)S
109.297 465.2 M( VPN)S
134.047 465.2 M( products)S
173.5 465.2 M(...............................................................................................................7)S
36 452 M(Information)S
88.547 452 M( sources)S
124 452 M(.................................................................................................................................8)S
54 438.8 M(This)S
73.558 438.8 M( HowTo,)S
112.663 438.8 M( in)S
123.971 438.8 M( multiple)S
163.395 438.8 M( formats)S
198.25 438.8 M(......................................................................................................8)S
54 425.6 M(RTFM)S
83.953 425.6 M( \(please)S
117.855 425.6 M( Read)S
143.21 425.6 M( The)S
163.065 425.6 M( Fine)S
185.373 425.6 M( Manuals\))S
228.5 425.6 M(...........................................................................................8)S
54 412.4 M(Other)S
79.047 412.4 M( documents)S
129.46 412.4 M( in)S
140.768 412.4 M( the)S
156.96 412.4 M( distribution)S
209.25 412.4 M(..................................................................................................9)S
54 399.2 M(Background)S
107.768 399.2 M( material)S
146 399.2 M(.........................................................................................................................9)S
54 386 M(Archives)S
93.71 386 M( of)S
105.623 386 M( the)S
121.815 386 M( project)S
155.112 386 M( mailing)S
191.478 386 M( list)S
206.5 386 M(.................................................................................................10)S
54 372.8 M(User-written)S
112.135 372.8 M( HowTo)S
148.49 372.8 M( information)S
201 372.8 M(...................................................................................................10)S
54 359.6 M(Papers)S
83.326 359.6 M( on)S
97.076 359.6 M( FreeS/WAN)S
154.25 359.6 M(....................................................................................................................10)S
54 346.4 M(License)S
88.21 346.4 M( and)S
106.844 346.4 M( copyright)S
151.757 346.4 M( information)S
203.75 346.4 M(..................................................................................................11)S
36 333.2 M(Distribution)S
89.174 333.2 M( sites)S
110.25 333.2 M(....................................................................................................................................11)S
54 320 M(Primary)S
89.442 320 M( site)S
104.75 320 M(......................................................................................................................................11)S
54 306.8 M(Mirrors)S
85.5 306.8 M(.............................................................................................................................................11)S
54 293.6 M(The)S
71.105 293.6 M( "munitions")S
126.842 293.6 M( archive)S
161.965 293.6 M( of)S
173.878 293.6 M( Linux)S
202.907 293.6 M( crypto)S
233.762 293.6 M( software)S
272.5 293.6 M(.........................................................................12)S
36 280.4 M(Links)S
61.058 280.4 M( to)S
72.366 280.4 M( other)S
97.721 280.4 M( sections)S
135 280.4 M(...........................................................................................................................12)S
/F5 SF 0 254 M(Upgrading)S
50.732 254 M( to)S
62.645 254 M( FreeS/WAN)S
122.826 254 M( 2.x)S
137.75 254 M(..........................................................................................................................13)S
/F4 SF 36 240.8 M(New!)S
60.431 240.8 M( Built)S
85.192 240.8 M( in)S
96.5 240.8 M( Opportunistic)S
159.75 240.8 M( connections)S
214.75 240.8 M(..............................................................................................13)S
54 227.6 M(Upgrading)S
101.047 227.6 M( Opportunistic)S
164.297 227.6 M( Encryption)S
215.931 227.6 M( to)S
227.239 227.6 M( 2.01)S
249.239 227.6 M( \(or)S
264.815 227.6 M( later\))S
289 227.6 M(...................................................................13)S
36 214.4 M(New!)S
60.431 214.4 M( Policy)S
91.297 214.4 M( Groups)S
124 214.4 M(...............................................................................................................................13)S
36 201.2 M(New!)S
60.431 201.2 M( Packetdefault)S
123.054 201.2 M( Connection)S
176.25 201.2 M(............................................................................................................14)S
36 188 M(FreeS/WAN)S
90.989 188 M( now)S
112.681 188 M( disables)S
150.873 188 M( Reverse)S
189.054 188 M( Path)S
211.362 188 M( Filtering)S
250.5 188 M(.................................................................................14)S
36 174.8 M(Revised)S
71.442 174.8 M( ipsec.conf)S
118.5 174.8 M(.................................................................................................................................14)S
54 161.6 M(No)S
67.442 161.6 M( promise)S
105.634 161.6 M( of)S
117.547 161.6 M( compatibility)S
176.25 161.6 M(............................................................................................................14)S
54 148.4 M(Most)S
76.616 148.4 M( ipsec.conf)S
124.268 148.4 M( files)S
145.96 148.4 M( will)S
165.826 148.4 M( work)S
191.181 148.4 M( fine)S
209.25 148.4 M(................................................................................................14)S
54 135.2 M(Backward)S
98.594 135.2 M( compatibility)S
160.018 135.2 M( patch)S
184.5 135.2 M(.........................................................................................................15)S
54 122 M(Details)S
82.75 122 M(..............................................................................................................................................15)S
54 108.8 M(Upgrading)S
101.047 108.8 M( from)S
125.181 108.8 M( 1.x)S
141.681 108.8 M( RPMs)S
171.942 108.8 M( to)S
183.25 108.8 M( 2.x)S
199.75 108.8 M( RPMs)S
228.5 108.8 M(.........................................................................................15)S
/F5 SF 0 82.4 M(Quickstart)S
50.721 82.4 M( Guide)S
82.203 82.4 M( to)S
94.116 82.4 M( Opportunistic)S
162.877 82.4 M( Encryption)S
217.5 82.4 M(.............................................................................................17)S
/F4 SF 36 69.2 M(Purpose)S
69 69.2 M(...................................................................................................................................................17)S
54 56 M(OE)S
68.663 56 M( "flag)S
93.006 56 M( day")S
115.75 56 M(..................................................................................................................................17)S
36 42.8 M(Requirements)S
96.5 42.8 M(.........................................................................................................................................17)S
36 29.6 M(RPM)S
59.232 29.6 M( install)S
88.25 29.6 M(............................................................................................................................................17)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
484.558 0 M(i)S
GR
SP
%%Page: ii 17
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 159.05 674 M(Table of Contents)S
11 FS/F5 SF 0 650 M(Quickstart)S
50.721 650 M( Guide)S
82.203 650 M( to)S
94.116 650 M( Opportunistic)S
162.877 650 M( Encryption)S
/F4 SF 54 636.8 M(Download)S
99.826 636.8 M( RPMs)S
129.5 636.8 M(.............................................................................................................................17)S
54 623.6 M(Check)S
82.105 623.6 M( signatures)S
126.75 623.6 M(..............................................................................................................................18)S
54 610.4 M(Install)S
81.5 610.4 M( the)S
97.692 610.4 M( RPMs)S
126.75 610.4 M(..............................................................................................................................18)S
54 597.2 M(Test)S
71.75 597.2 M(..................................................................................................................................................18)S
36 584 M(Our)S
53.105 584 M( Opportunistic)S
116.355 584 M( Setups)S
146 584 M(.......................................................................................................................19)S
54 570.8 M(Full)S
71.732 570.8 M( or)S
83.645 570.8 M( partial)S
114.5 570.8 M( opportunism?)S
176.25 570.8 M(............................................................................................................19)S
36 557.6 M(Initiate-only)S
92.925 557.6 M( setup)S
118.5 557.6 M(.................................................................................................................................19)S
54 544.4 M(Restrictions)S
104.75 544.4 M(......................................................................................................................................19)S
54 531.2 M(Create)S
82.71 531.2 M( and)S
101.344 531.2 M( publish)S
136.489 531.2 M( a)S
144.123 531.2 M( forward)S
181.688 531.2 M( DNS)S
206.438 531.2 M( record)S
236.75 531.2 M(......................................................................................19)S
54 518 M(Test)S
72.942 518 M( that)S
92.192 518 M( your)S
115.105 518 M( key)S
133.739 518 M( has)S
151.152 518 M( been)S
174.67 518 M( published)S
217.5 518 M(.............................................................................................20)S
54 504.8 M(Configure,)S
101.355 504.8 M( if)S
110.826 504.8 M( necessary)S
154.25 504.8 M(....................................................................................................................20)S
54 491.6 M(Test)S
71.75 491.6 M(..................................................................................................................................................21)S
36 478.4 M(Full)S
53.732 478.4 M( Opportunism)S
113 478.4 M(...................................................................................................................................21)S
54 465.2 M(Put)S
68.674 465.2 M( a)S
76.308 465.2 M( TXT)S
100.442 465.2 M( record)S
131.286 465.2 M( in)S
142.594 465.2 M( a)S
150.228 465.2 M( Forward)S
190.246 465.2 M( Domain)S
225.75 465.2 M(..........................................................................................21)S
54 452 M(Put)S
68.674 452 M( a)S
76.308 452 M( TXT)S
100.442 452 M( record)S
131.286 452 M( in)S
142.594 452 M( Reverse)S
180.775 452 M( DNS)S
203.75 452 M(..................................................................................................21)S
54 438.8 M(Test)S
72.942 438.8 M( your)S
95.855 438.8 M( DNS)S
120.605 438.8 M( record)S
148.75 438.8 M(......................................................................................................................21)S
54 425.6 M(No)S
67.442 425.6 M( Configuration)S
131.913 425.6 M( Needed)S
168 425.6 M(...............................................................................................................22)S
54 412.4 M(Consider)S
93.721 412.4 M( Firewalling)S
146 412.4 M(.......................................................................................................................22)S
54 399.2 M(Test)S
71.75 399.2 M(..................................................................................................................................................22)S
54 386 M(Test)S
71.75 386 M(..................................................................................................................................................22)S
36 372.8 M(Testing)S
69 372.8 M( opportunistic)S
129.808 372.8 M( connections)S
184.5 372.8 M(.........................................................................................................22)S
36 359.6 M(Now)S
57.384 359.6 M( what?)S
85.5 359.6 M(.............................................................................................................................................23)S
36 346.4 M(Notes)S
60.75 346.4 M(......................................................................................................................................................23)S
36 333.2 M(Troubleshooting)S
108.721 333.2 M( OE)S
124 333.2 M(...............................................................................................................................23)S
36 320 M(Known)S
68.384 320 M( Issues)S
96.5 320 M(.........................................................................................................................................23)S
/F5 SF 0 293.6 M(How)S
22 293.6 M( to)S
33.913 293.6 M( Configure)S
84.326 293.6 M( Linux)S
115.203 293.6 M( FreeS/WAN)S
175.384 293.6 M( with)S
198.913 293.6 M( Policy)S
230.384 293.6 M( Groups)S
267 293.6 M(...........................................................................24)S
/F4 SF 36 280.4 M(What)S
59.826 280.4 M( are)S
76.007 280.4 M( Policy)S
106.873 280.4 M( Groups?)S
146 280.4 M(.......................................................................................................................24)S
54 267.2 M(Built-In)S
91.378 267.2 M( Security)S
130.791 267.2 M( Options)S
168 267.2 M(...............................................................................................................24)S
36 254 M(Using)S
62.279 254 M( Policy)S
93.145 254 M( Groups)S
126.75 254 M(..............................................................................................................................25)S
54 240.8 M(Example)S
93.105 240.8 M( 1:)S
104.413 240.8 M( Using)S
133.442 240.8 M( a)S
141.076 240.8 M( Base)S
165.21 240.8 M( Policy)S
196.076 240.8 M( Group)S
225.75 240.8 M(..........................................................................................25)S
54 227.6 M(Example)S
93.105 227.6 M( 2:)S
104.413 227.6 M( Defining)S
146.268 227.6 M( IPsec)S
172.844 227.6 M( Security)S
212.257 227.6 M( Policy)S
243.123 227.6 M( with)S
265.431 227.6 M( Groups)S
300 227.6 M(...............................................................25)S
54 214.4 M(Example)S
93.105 214.4 M( 3:)S
104.413 214.4 M( Creating)S
145.047 214.4 M( a)S
152.681 214.4 M( Simple)S
186.605 214.4 M( IPsec)S
213.181 214.4 M( VPN)S
237.931 214.4 M( with)S
260.239 214.4 M( the)S
276.431 214.4 M( private)S
309.728 214.4 M( Group)S
338.5 214.4 M(.................................................26)S
54 201.2 M(Example)S
93.105 201.2 M( 4:)S
104.413 201.2 M( New)S
127.931 201.2 M( Policy)S
158.797 201.2 M( Groups)S
193.931 201.2 M( to)S
205.239 201.2 M( Protect)S
239.152 201.2 M( a)S
246.786 201.2 M( Subnet)S
278 201.2 M(.......................................................................27)S
54 188 M(Example)S
93.105 188 M( 5:)S
104.413 188 M( Adding)S
140.163 188 M( a)S
147.797 188 M( Subnet)S
181.105 188 M( to)S
192.413 188 M( the)S
208.605 188 M( VPN)S
231.25 188 M(........................................................................................28)S
36 174.8 M(Appendix)S
77.25 174.8 M(................................................................................................................................................29)S
54 161.6 M(Our)S
71.105 161.6 M( Hidden)S
106.239 161.6 M( Connections)S
162.5 161.6 M(.................................................................................................................29)S
54 148.4 M(Custom)S
88.232 148.4 M( Policy)S
119.098 148.4 M( Groups)S
151.5 148.4 M(.....................................................................................................................29)S
54 135.2 M(Disabling)S
96.779 135.2 M( Opportunistic)S
160.029 135.2 M( Encryption)S
209.25 135.2 M(................................................................................................29)S
/F5 SF 0 108.8 M(FreeS/WAN)S
57.431 108.8 M( FAQ)S
82.75 108.8 M(..............................................................................................................................................30)S
/F4 SF 36 95.6 M(Index)S
61.047 95.6 M( of)S
72.96 95.6 M( FAQ)S
97.71 95.6 M( questions)S
140.5 95.6 M(.........................................................................................................................30)S
36 82.4 M(What)S
59.826 82.4 M( is)S
69.913 82.4 M( FreeS/WAN?)S
132.25 82.4 M(............................................................................................................................32)S
36 69.2 M(How)S
57.384 69.2 M( do)S
71.134 69.2 M( I)S
77.547 69.2 M( report)S
106.565 69.2 M( a)S
114.199 69.2 M( problem)S
153.612 69.2 M( or)S
165.525 69.2 M( seek)S
187.822 69.2 M( help?)S
212 69.2 M(...............................................................................................32)S
36 56 M(Can)S
53.721 56 M( I)S
60.134 56 M( get)S
76.326 56 M( ...)S
85.5 56 M(.............................................................................................................................................33)S
54 42.8 M(Can)S
71.721 42.8 M( I)S
78.134 42.8 M( get)S
94.326 42.8 M( an)S
107.46 42.8 M( off-the-shelf)S
170.27 42.8 M( system)S
203.578 42.8 M( that)S
222.828 42.8 M( includes)S
262.241 42.8 M( FreeS/WAN?)S
324.75 42.8 M(......................................................33)S
54 29.6 M(Can)S
71.721 29.6 M( I)S
78.134 29.6 M( hire)S
97.989 29.6 M( consultants)S
150.239 29.6 M( or)S
162.152 29.6 M( staff)S
184.449 29.6 M( who)S
206.141 29.6 M( know)S
233.333 29.6 M( FreeS/WAN?)S
294.5 29.6 M(.................................................................33)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
482.116 0 M(ii)S
GR
SP
%%Page: iii 18
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 159.05 674 M(Table of Contents)S
11 FS/F5 SF 0 650 M(FreeS/WAN)S
57.431 650 M( FAQ)S
/F4 SF 54 636.8 M(Can)S
71.721 636.8 M( I)S
78.134 636.8 M( get)S
94.326 636.8 M( commercial)S
149.007 636.8 M( support?)S
187.25 636.8 M(........................................................................................................33)S
36 623.6 M(Release)S
70.21 623.6 M( questions)S
113 623.6 M(...................................................................................................................................33)S
54 610.4 M(What)S
77.826 610.4 M( is)S
87.913 610.4 M( the)S
104.105 610.4 M( current)S
138.007 610.4 M( release?)S
173.5 610.4 M(.............................................................................................................33)S
54 597.2 M(When)S
80.268 597.2 M( is)S
90.355 597.2 M( the)S
106.547 597.2 M( next)S
128.239 597.2 M( release?)S
165.25 597.2 M(................................................................................................................33)S
54 584 M(Are)S
70.489 584 M( there)S
95.228 584 M( known)S
127.92 584 M( bugs)S
151.449 584 M( in)S
162.757 584 M( the)S
178.949 584 M( current)S
212.851 584 M( release?)S
250.5 584 M(.................................................................................34)S
36 570.8 M(Modifications)S
97.721 570.8 M( and)S
116.355 570.8 M( contributions)S
176.25 570.8 M(............................................................................................................34)S
54 557.6 M(Can)S
71.721 557.6 M( I)S
78.134 557.6 M( modify)S
112.663 557.6 M( FreeS/WAN)S
170.402 557.6 M( to)S
181.71 557.6 M( ...?)S
195.5 557.6 M(.....................................................................................................34)S
54 544.4 M(Can)S
71.721 544.4 M( I)S
78.134 544.4 M( contribute)S
125.489 544.4 M( to)S
136.797 544.4 M( the)S
152.989 544.4 M( project?)S
190 544.4 M(.......................................................................................................34)S
54 531.2 M(Is)S
61.942 531.2 M( there)S
86.681 531.2 M( detailed)S
124.257 531.2 M( design)S
155.728 531.2 M( documentation?)S
228.5 531.2 M(.........................................................................................34)S
36 518 M(Will)S
55.558 518 M( FreeS/WAN)S
113.297 518 M( work)S
138.652 518 M( in)S
149.96 518 M( my)S
166.768 518 M( environment?)S
228.5 518 M(.........................................................................................35)S
54 504.8 M(Can)S
71.721 504.8 M( FreeS/WAN)S
129.46 504.8 M( talk)S
148.71 504.8 M( to)S
160.018 504.8 M( ...?)S
173.5 504.8 M(.............................................................................................................35)S
54 491.6 M(Can)S
71.721 491.6 M( different)S
112.344 491.6 M( FreeS/WAN)S
170.083 491.6 M( versions)S
209.496 491.6 M( talk)S
228.746 491.6 M( to)S
240.054 491.6 M( each)S
262.956 491.6 M( other?)S
291.75 491.6 M(..................................................................35)S
54 478.4 M(Is)S
61.942 478.4 M( there)S
86.681 478.4 M( a)S
94.315 478.4 M( limit)S
117.855 478.4 M( on)S
131.605 478.4 M( throughput?)S
187.25 478.4 M(........................................................................................................35)S
54 465.2 M(Is)S
61.942 465.2 M( there)S
86.681 465.2 M( a)S
94.315 465.2 M( limit)S
117.855 465.2 M( on)S
131.605 465.2 M( number)S
167.96 465.2 M( of)S
179.873 465.2 M( tunnels?)S
217.5 465.2 M(.............................................................................................35)S
54 452 M(Is)S
61.942 452 M( a)S
69.576 452 M( ...)S
80.576 452 M( fast)S
99.21 452 M( enough)S
134.344 452 M( to)S
145.652 452 M( handle)S
177.728 452 M( FreeS/WAN)S
235.467 452 M( with)S
257.775 452 M( my)S
274.583 452 M( loads?)S
302.75 452 M(..............................................................35)S
36 438.8 M(Will)S
55.558 438.8 M( FreeS/WAN)S
113.297 438.8 M( work)S
138.652 438.8 M( on)S
152.402 438.8 M( ...)S
163.402 438.8 M( ?)S
170.75 438.8 M(..............................................................................................................36)S
54 425.6 M(Will)S
73.558 425.6 M( FreeS/WAN)S
131.297 425.6 M( run)S
148.71 425.6 M( on)S
162.46 425.6 M( my)S
179.268 425.6 M( version)S
214.402 425.6 M( of)S
226.315 425.6 M( Linux?)S
258.75 425.6 M(..............................................................................36)S
54 412.4 M(Will)S
73.558 412.4 M( FreeS/WAN)S
131.297 412.4 M( run)S
148.71 412.4 M( on)S
162.46 412.4 M( non-Intel)S
208.077 412.4 M( CPUs?)S
239.5 412.4 M(.....................................................................................36)S
54 399.2 M(Will)S
73.558 399.2 M( FreeS/WAN)S
131.297 399.2 M( run)S
148.71 399.2 M( on)S
162.46 399.2 M( multiprocessors?)S
239.5 399.2 M(.....................................................................................36)S
54 386 M(Will)S
73.558 386 M( FreeS/WAN)S
131.297 386 M( work)S
156.652 386 M( on)S
170.402 386 M( an)S
183.536 386 M( older)S
208.891 386 M( kernel?)S
242.25 386 M(....................................................................................36)S
54 372.8 M(Will)S
73.558 372.8 M( FreeS/WAN)S
131.297 372.8 M( run)S
148.71 372.8 M( on)S
162.46 372.8 M( the)S
178.652 372.8 M( latest)S
204.623 372.8 M( kernel)S
234.862 372.8 M( version?)S
272.5 372.8 M(.........................................................................36)S
54 359.6 M(Will)S
73.558 359.6 M( FreeS/WAN)S
131.297 359.6 M( work)S
156.652 359.6 M( on)S
170.402 359.6 M( unusual)S
207.373 359.6 M( network)S
246.17 359.6 M( hardware?)S
294.5 359.6 M(.................................................................37)S
54 346.4 M(Will)S
73.558 346.4 M( FreeS/WAN)S
131.297 346.4 M( work)S
156.652 346.4 M( on)S
170.402 346.4 M( a)S
178.036 346.4 M( VLAN)S
211.333 346.4 M( \(802.1q\))S
251.659 346.4 M( network?)S
294.5 346.4 M(.................................................................37)S
36 333.2 M(Does)S
58.605 333.2 M( FreeS/WAN)S
116.344 333.2 M( support)S
152.094 333.2 M( ...)S
162.5 333.2 M(.................................................................................................................38)S
54 320 M(Does)S
76.605 320 M( FreeS/WAN)S
134.344 320 M( support)S
170.094 320 M( site-to-site)S
224.368 320 M( VPN)S
249.118 320 M( \()S
255.531 320 M(Virtual)S
286.694 320 M( Private)S
320.607 320 M( Network)S
361.846 320 M(\))S
365.509 320 M( applications?)S
423.75 320 M(..................38)S
54 306.8 M(Does)S
76.605 306.8 M( FreeS/WAN)S
134.344 306.8 M( support)S
170.094 306.8 M( remote)S
203.391 306.8 M( users)S
228.746 306.8 M( connecting)S
279.764 306.8 M( to)S
291.072 306.8 M( a)S
298.706 306.8 M( LAN?)S
327.5 306.8 M(.....................................................38)S
54 293.6 M(Does)S
76.605 293.6 M( FreeS/WAN)S
134.344 293.6 M( support)S
170.094 293.6 M( remote)S
203.391 293.6 M( users)S
228.746 293.6 M( using)S
255.333 293.6 M( shared)S
286.793 293.6 M( secret)S
315.195 293.6 M( authentication?)S
382.5 293.6 M(.................................38)S
54 280.4 M(Does)S
76.605 280.4 M( FreeS/WAN)S
134.344 280.4 M( support)S
170.094 280.4 M( wireless)S
208.891 280.4 M( networks?)S
256 280.4 M(...............................................................................38)S
54 267.2 M(Does)S
76.605 267.2 M( FreeS/WAN)S
134.344 267.2 M( support)S
170.094 267.2 M( X.509)S
200.036 267.2 M( or)S
211.949 267.2 M( other)S
237.304 267.2 M( PKI)S
257.775 267.2 M( certificates?)S
311 267.2 M(...........................................................38)S
54 254 M(Does)S
76.605 254 M( FreeS/WAN)S
134.344 254 M( support)S
170.094 254 M( user)S
191.17 254 M( authentication)S
256.246 254 M( \(Radius,)S
295.967 254 M( SecureID,)S
343.003 254 M( Smart)S
372.032 254 M( Card...\)?)S
412.75 254 M(......................39)S
54 240.8 M(Does)S
76.605 240.8 M( FreeS/WAN)S
134.344 240.8 M( support)S
170.094 240.8 M( NAT)S
195.449 240.8 M( traversal?)S
239.5 240.8 M(.....................................................................................39)S
54 227.6 M(Does)S
76.605 227.6 M( FreeS/WAN)S
134.344 227.6 M( support)S
170.094 227.6 M( assigning)S
214.402 227.6 M( a)S
222.036 227.6 M( "virtual)S
257.995 227.6 M( identity")S
298.849 227.6 M( to)S
310.157 227.6 M( a)S
317.791 227.6 M( remote)S
351.088 227.6 M( system?)S
388 227.6 M(...............................39)S
54 214.4 M(Does)S
76.605 214.4 M( FreeS/WAN)S
134.344 214.4 M( support)S
170.094 214.4 M( single)S
199.123 214.4 M( DES)S
222.652 214.4 M( encryption?)S
275.25 214.4 M(........................................................................40)S
54 201.2 M(Does)S
76.605 201.2 M( FreeS/WAN)S
134.344 201.2 M( support)S
170.094 201.2 M( AES)S
193.623 201.2 M( encryption?)S
247.75 201.2 M(..................................................................................40)S
54 188 M(Does)S
76.605 188 M( FreeS/WAN)S
134.344 188 M( support)S
170.094 188 M( other)S
195.449 188 M( encryption)S
245.246 188 M( algorithms?)S
297.25 188 M(................................................................40)S
36 174.8 M(Can)S
53.721 174.8 M( I)S
60.134 174.8 M( ...)S
69 174.8 M(...................................................................................................................................................40)S
54 161.6 M(Can)S
71.721 161.6 M( I)S
78.134 161.6 M( use)S
95.547 161.6 M( policy)S
125.797 161.6 M( groups)S
158.489 161.6 M( along)S
185.681 161.6 M( with)S
207.989 161.6 M( explicitly)S
252.297 161.6 M( configured)S
302.699 161.6 M( connections?)S
360.5 161.6 M(.........................................40)S
54 148.4 M(Can)S
71.721 148.4 M( I)S
78.134 148.4 M( turn)S
98.605 148.4 M( off)S
114.181 148.4 M( policy)S
144.431 148.4 M( groups?)S
181.75 148.4 M(..........................................................................................................41)S
54 135.2 M(Can)S
71.721 135.2 M( I)S
78.134 135.2 M( reload)S
108.373 135.2 M( connection)S
159.391 135.2 M( info)S
179.862 135.2 M( without)S
216.228 135.2 M( restarting?)S
264.25 135.2 M(............................................................................41)S
54 122 M(Can)S
71.721 122 M( I)S
78.134 122 M( use)S
95.547 122 M( several)S
129.449 122 M( masqueraded)S
190.235 122 M( subnets?)S
228.5 122 M(.........................................................................................41)S
54 108.8 M(Can)S
71.721 108.8 M( I)S
78.134 108.8 M( use)S
95.547 108.8 M( subnets)S
131.297 108.8 M( masqueraded)S
192.083 108.8 M( to)S
203.391 108.8 M( the)S
219.583 108.8 M( same)S
244.938 108.8 M( addresses?)S
294.5 108.8 M(.................................................................42)S
54 95.6 M(Can)S
71.721 95.6 M( I)S
78.134 95.6 M( assign)S
108.384 95.6 M( a)S
116.018 95.6 M( road)S
138.315 95.6 M( warrior)S
173.438 95.6 M( an)S
186.572 95.6 M( address)S
222.311 95.6 M( on)S
236.061 95.6 M( my)S
252.869 95.6 M( net)S
269.061 95.6 M( \(a)S
280.358 95.6 M( virtual)S
311.829 95.6 M( identity\)?)S
355 95.6 M(...........................................43)S
54 82.4 M(Can)S
71.721 82.4 M( I)S
78.134 82.4 M( support)S
113.884 82.4 M( many)S
141.076 82.4 M( road)S
163.373 82.4 M( warriors)S
202.775 82.4 M( with)S
225.083 82.4 M( one)S
243.717 82.4 M( gateway?)S
286.25 82.4 M(....................................................................44)S
54 69.2 M(Can)S
71.721 69.2 M( I)S
78.134 69.2 M( have)S
101.652 69.2 M( many)S
128.844 69.2 M( road)S
151.141 69.2 M( warriors)S
190.543 69.2 M( using)S
217.13 69.2 M( shared)S
248.59 69.2 M( secret)S
276.992 69.2 M( authentication?)S
346.75 69.2 M(..............................................44)S
54 56 M(Can)S
71.721 56 M( I)S
78.134 56 M( use)S
95.547 56 M( Quality)S
131.297 56 M( of)S
143.21 56 M( Service)S
178.949 56 M( routing)S
213.478 56 M( with)S
235.786 56 M( FreeS/WAN?)S
297.25 56 M(................................................................45)S
54 42.8 M(Can)S
71.721 42.8 M( I)S
78.134 42.8 M( recognise)S
123.036 42.8 M( dead)S
146.554 42.8 M( tunnels)S
181.083 42.8 M( and)S
199.717 42.8 M( shut)S
220.804 42.8 M( them)S
245.554 42.8 M( down?)S
275.25 42.8 M(........................................................................45)S
54 29.6 M(Can)S
71.721 29.6 M( I)S
78.134 29.6 M( build)S
103.5 29.6 M( IPsec)S
130.076 29.6 M( tunnels)S
164.605 29.6 M( over)S
186.902 29.6 M( a)S
194.536 29.6 M( demand-dialed)S
265.2 29.6 M( link?)S
289 29.6 M(...................................................................47)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
479.674 0 M(iii)S
GR
SP
%%Page: iv 19
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 159.05 674 M(Table of Contents)S
11 FS/F5 SF 0 650 M(FreeS/WAN)S
57.431 650 M( FAQ)S
/F4 SF 54 636.8 M(Can)S
71.721 636.8 M( I)S
78.134 636.8 M( build)S
103.5 636.8 M( GRE,)S
131 636.8 M( L2TP)S
158.808 636.8 M( or)S
170.721 636.8 M( PPTP)S
198.54 636.8 M( tunnels)S
233.069 636.8 M( over)S
255.366 636.8 M( IPsec?)S
286.25 636.8 M(....................................................................47)S
54 623.6 M(...)S
62.25 623.6 M( use)S
79.663 623.6 M( Network)S
120.902 623.6 M( Neighborhood)S
187.199 623.6 M( \(Samba,)S
226.304 623.6 M( NetBIOS\))S
273.659 623.6 M( over)S
295.956 623.6 M( IPsec?)S
324.75 623.6 M(......................................................48)S
36 610.4 M(Life's)S
60.585 610.4 M( little)S
83.509 610.4 M( mysteries)S
126.75 610.4 M(..............................................................................................................................48)S
54 597.2 M(I)S
57.663 597.2 M( cannot)S
89.739 597.2 M( ping)S
112.047 597.2 M( ....)S
124 597.2 M(...............................................................................................................................48)S
54 584 M(It)S
60.721 584 M( takes)S
86.076 584 M( forever)S
120.583 584 M( to)S
131.891 584 M( ...)S
140.5 584 M(.........................................................................................................................49)S
54 570.8 M(I)S
57.663 570.8 M( send)S
80.576 570.8 M( packets)S
116.315 570.8 M( to)S
127.623 570.8 M( the)S
143.815 570.8 M( tunnel)S
174.065 570.8 M( with)S
196.373 570.8 M( route\(8\))S
234.554 570.8 M( but)S
251.362 570.8 M( they)S
273.054 570.8 M( vanish)S
302.75 570.8 M(..............................................................50)S
54 557.6 M(When)S
80.268 557.6 M( a)S
87.902 557.6 M( tunnel)S
118.152 557.6 M( goes)S
141.065 557.6 M( down,)S
171.007 557.6 M( packets)S
206.746 557.6 M( vanish)S
236.75 557.6 M(......................................................................................51)S
54 544.4 M(The)S
71.105 544.4 M( firewall)S
108.065 544.4 M( ate)S
123.641 544.4 M( my)S
140.449 544.4 M( packets!)S
179 544.4 M(...........................................................................................................52)S
54 531.2 M(Dropped)S
92.489 531.2 M( connections)S
146 531.2 M(.......................................................................................................................52)S
54 518 M(Disappearing)S
112.652 518 M( %defaultroute)S
176.25 518 M(............................................................................................................53)S
54 504.8 M(TCPdump)S
99.232 504.8 M( on)S
112.982 504.8 M( the)S
129.174 504.8 M( gateway)S
168.576 504.8 M( shows)S
198.826 504.8 M( strange)S
233.344 504.8 M( things)S
261.5 504.8 M(.............................................................................53)S
54 491.6 M(Traceroute)S
101.641 491.6 M( does)S
124.554 491.6 M( not)S
141.362 491.6 M( show)S
167.333 491.6 M( anything)S
208.583 491.6 M( between)S
247.985 491.6 M( the)S
264.177 491.6 M( gateways)S
305.5 491.6 M(.............................................................54)S
36 478.4 M(Testing)S
69 478.4 M( in)S
80.308 478.4 M( stages)S
107.5 478.4 M(.....................................................................................................................................55)S
54 465.2 M(Manually)S
96.163 465.2 M( keyed)S
125.181 465.2 M( connections)S
180.478 465.2 M( don't)S
204.766 465.2 M( work)S
228.5 465.2 M(.........................................................................................55)S
54 452 M(One)S
72.326 452 M( manual)S
107.46 452 M( connection)S
158.478 452 M( works,)S
190.862 452 M( but)S
207.67 452 M( second)S
240.967 452 M( one)S
259.601 452 M( fails)S
280.75 452 M(......................................................................55)S
54 438.8 M(Manual)S
87.605 438.8 M( connections)S
142.902 438.8 M( work,)S
171.007 438.8 M( but)S
187.815 438.8 M( automatic)S
233.949 438.8 M( keying)S
266.641 438.8 M( doesn't)S
300 438.8 M(...............................................................56)S
54 425.6 M(IPsec)S
77.826 425.6 M( works,)S
110.21 425.6 M( but)S
127.018 425.6 M( connections)S
182.315 425.6 M( using)S
208.902 425.6 M( compression)S
267.257 425.6 M( fail)S
283.5 425.6 M(.....................................................................56)S
54 412.4 M(Small)S
79.674 412.4 M( packets)S
115.413 412.4 M( work,)S
143.518 412.4 M( but)S
160.326 412.4 M( large)S
185.065 412.4 M( transfers)S
225.688 412.4 M( fail)S
242.25 412.4 M(....................................................................................56)S
54 399.2 M(Subnet-to-subnet)S
134.245 399.2 M( works,)S
166.629 399.2 M( but)S
183.437 399.2 M( tests)S
205.745 399.2 M( from)S
229.879 399.2 M( the)S
246.071 399.2 M( gateways)S
289.752 399.2 M( don't)S
313.75 399.2 M(..........................................................56)S
36 386 M(Compilation)S
91.011 386 M( problems)S
132.25 386 M(............................................................................................................................56)S
54 372.8 M(gmp.h:)S
84.866 372.8 M( No)S
101.058 372.8 M( such)S
123.971 372.8 M( file)S
141.384 372.8 M( or)S
153.297 372.8 M( directory)S
195.5 372.8 M(.....................................................................................................56)S
54 359.6 M(...)S
62.25 359.6 M( virtual)S
93.721 359.6 M( memory)S
133.134 359.6 M( exhausted)S
179 359.6 M(...........................................................................................................57)S
36 346.4 M(Interpreting)S
87.931 346.4 M( error)S
112.054 346.4 M( messages)S
154.25 346.4 M(....................................................................................................................57)S
54 333.2 M(route-client)S
107.251 333.2 M( \(or)S
122.827 333.2 M( host\))S
147.577 333.2 M( exited)S
177.211 333.2 M( with)S
199.519 333.2 M( status)S
227.327 333.2 M( 7)S
234 333.2 M(.......................................................................................57)S
54 320 M(SIOCADDRT:Network)S
158.489 320 M( is)S
168.576 320 M( unreachable)S
223 320 M(...........................................................................................59)S
54 306.8 M(ipsec_setup:)S
108.384 306.8 M( modprobe:)S
158.797 306.8 M( Can't)S
184.306 306.8 M( locate)S
213.324 306.8 M( module)S
249.074 306.8 M( ipsec)S
272.5 306.8 M(.........................................................................59)S
54 293.6 M(ipsec_setup:)S
108.384 293.6 M( Fatal)S
133.134 293.6 M( error,)S
160.007 293.6 M( kernel)S
190.246 293.6 M( appears)S
226.59 293.6 M( to)S
237.898 293.6 M( lack)S
258.974 293.6 M( KLIPS)S
291.75 293.6 M(..................................................................59)S
54 280.4 M(ipsec_setup:)S
108.384 280.4 M( ...)S
119.384 280.4 M( failure)S
150.844 280.4 M( to)S
162.152 280.4 M( fetch)S
186.891 280.4 M( key)S
205.525 280.4 M( for)S
221.101 280.4 M( ...)S
232.101 280.4 M( from)S
256.235 280.4 M( DNS)S
280.75 280.4 M(......................................................................60)S
54 267.2 M(ipsec_setup:)S
108.384 267.2 M( ...)S
119.384 267.2 M( interfaces)S
164.891 267.2 M( ...)S
175.891 267.2 M( and)S
194.525 267.2 M( ...)S
205.525 267.2 M( share)S
231.485 267.2 M( address)S
267.224 267.2 M( ...)S
278 267.2 M(.......................................................................61)S
54 254 M(ipsec_setup:)S
108.384 254 M( Cannot)S
142.913 254 M( adjust)S
171.942 254 M( kernel)S
202.181 254 M( flags)S
225.75 254 M(..........................................................................................61)S
54 240.8 M(Message)S
92.489 240.8 M( numbers)S
133.123 240.8 M( \(MI3,)S
161.228 240.8 M( QR1,)S
187.507 240.8 M( et)S
198.199 240.8 M( cetera\))S
230.869 240.8 M( in)S
242.177 240.8 M( Pluto)S
268.159 240.8 M( messages)S
311 240.8 M(...........................................................62)S
54 227.6 M(Connection)S
104.721 227.6 M( names)S
135.576 227.6 M( in)S
146.884 227.6 M( Pluto)S
172.866 227.6 M( error)S
196.989 227.6 M( messages)S
239.5 227.6 M(.....................................................................................62)S
54 214.4 M(Pluto:)S
80.29 214.4 M( ...)S
91.29 214.4 M( can't)S
114.346 214.4 M( orient)S
142.759 214.4 M( connection)S
192.75 214.4 M(......................................................................................................62)S
54 201.2 M(...)S
62.25 201.2 M( we)S
77.826 201.2 M( have)S
101.344 201.2 M( no)S
115.094 201.2 M( ipsecN)S
148.391 201.2 M( interface)S
189.619 201.2 M( for)S
205.195 201.2 M( either)S
232.992 201.2 M( end)S
251.626 201.2 M( of)S
263.539 201.2 M( this)S
282.184 201.2 M( connection)S
333 201.2 M(...................................................62)S
54 188 M(Pluto:)S
80.29 188 M( ...)S
91.29 188 M( no)S
105.04 188 M( connection)S
156.058 188 M( is)S
166.145 188 M( known)S
198.25 188 M(....................................................................................................63)S
54 174.8 M(Pluto:)S
80.29 174.8 M( ...)S
91.29 174.8 M( no)S
105.04 174.8 M( suitable)S
142.011 174.8 M( connection)S
193.029 174.8 M( ...)S
203.75 174.8 M(..................................................................................................63)S
54 161.6 M(Pluto:)S
80.29 161.6 M( ...)S
91.29 161.6 M( no)S
105.04 161.6 M( connection)S
156.058 161.6 M( has)S
173.471 161.6 M( been)S
196.989 161.6 M( authorized)S
245 161.6 M(...................................................................................64)S
54 148.4 M(Pluto:)S
80.29 148.4 M( ...)S
91.29 148.4 M( OAKLEY_DES_CBC)S
193.04 148.4 M( is)S
203.127 148.4 M( not)S
219.935 148.4 M( supported.)S
267 148.4 M(...........................................................................65)S
54 135.2 M(Pluto:)S
80.29 135.2 M( ...)S
91.29 135.2 M( no)S
105.04 135.2 M( acceptable)S
154.21 135.2 M( transform)S
198.25 135.2 M(....................................................................................................65)S
54 122 M(rsasigkey)S
95.547 122 M( dumps)S
127.634 122 M( core)S
148.75 122 M(......................................................................................................................66)S
54 108.8 M(!Pluto)S
80.895 108.8 M( failure!:)S
119.076 108.8 M( ...)S
130.076 108.8 M( exited)S
159.71 108.8 M( with)S
182.018 108.8 M( ...)S
193.018 108.8 M( signal)S
222.047 108.8 M( 4)S
228.5 108.8 M(.........................................................................................66)S
54 95.6 M(ECONNREFUSED)S
140.779 95.6 M( error)S
164.902 95.6 M( message)S
203.75 95.6 M(..................................................................................................66)S
54 82.4 M(klips_debug:)S
110.837 82.4 M( ...)S
121.837 82.4 M( no)S
135.587 82.4 M( eroute!)S
168 82.4 M(...............................................................................................................66)S
54 69.2 M(...)S
62.25 69.2 M( trouble)S
96.163 69.2 M( writing)S
130.692 69.2 M( to)S
142 69.2 M( /dev/ipsec)S
189.355 69.2 M( ...)S
200.355 69.2 M( SA)S
217.163 69.2 M( already)S
252.286 69.2 M( in)S
263.594 69.2 M( use)S
280.75 69.2 M(......................................................................68)S
54 56 M(...)S
62.25 56 M( ignoring)S
102.279 56 M( ...)S
113.279 56 M( payload)S
148.75 56 M(......................................................................................................................68)S
54 42.8 M(unknown)S
94.942 42.8 M( parameter)S
141.67 42.8 M( name)S
168.246 42.8 M( "rightcert")S
214.75 42.8 M(..............................................................................................68)S
36 29.6 M(Why)S
57.384 29.6 M( don't)S
81.672 29.6 M( you)S
100.922 29.6 M( restrict)S
134.219 29.6 M( the)S
150.411 29.6 M( mailing)S
186.777 29.6 M( lists)S
207.259 29.6 M( to)S
218.567 29.6 M( reduce)S
250.632 29.6 M( spam?)S
280.75 29.6 M(......................................................................68)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
479.058 0 M(iv)S
GR
SP
%%Page: v 20
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 159.05 674 M(Table of Contents)S
11 FS/F5 SF 0 650 M(FreeS/WAN)S
57.431 650 M( manual)S
95.634 650 M( pages)S
124 650 M(...............................................................................................................................72)S
/F4 SF 36 636.8 M(Files)S
55.25 636.8 M(........................................................................................................................................................72)S
36 623.6 M(Commands)S
85.5 623.6 M(.............................................................................................................................................72)S
36 610.4 M(Library)S
68.989 610.4 M( routines)S
104.75 610.4 M(......................................................................................................................................73)S
/F5 SF 0 584 M(FreeS/WAN)S
57.431 584 M( and)S
77.913 584 M( firewalls)S
118.5 584 M(.................................................................................................................................75)S
/F4 SF 36 570.8 M(Filtering)S
73.895 570.8 M( rules)S
98.029 570.8 M( for)S
113.605 570.8 M( IPsec)S
140.181 570.8 M( packets)S
173.5 570.8 M(.............................................................................................................75)S
36 557.6 M(Firewall)S
72.663 557.6 M( configuration)S
134.681 557.6 M( at)S
145.373 557.6 M( boot)S
165.25 557.6 M(................................................................................................................75)S
54 544.4 M(A)S
61.942 544.4 M( simple)S
94.029 544.4 M( set)S
109 544.4 M( of)S
120.913 544.4 M( rules)S
143.25 544.4 M(........................................................................................................................76)S
54 531.2 M(Other)S
79.047 531.2 M( rules)S
102 531.2 M(.......................................................................................................................................76)S
54 518 M(Published)S
97.395 518 M( rule)S
117.25 518 M( sets)S
135 518 M(...........................................................................................................................77)S
36 504.8 M(Calling)S
68.395 504.8 M( firewall)S
105.355 504.8 M( scripts,)S
139.576 504.8 M( named)S
171.652 504.8 M( in)S
182.96 504.8 M( ipsec.conf\(5\))S
242.25 504.8 M(....................................................................................78)S
54 491.6 M(Scripts)S
84.558 491.6 M( called)S
113.576 491.6 M( at)S
124.268 491.6 M( IPsec)S
150.844 491.6 M( start)S
172.536 491.6 M( and)S
191.17 491.6 M( stop)S
212 491.6 M(...............................................................................................78)S
54 478.4 M(Scripts)S
84.558 478.4 M( called)S
113.576 478.4 M( at)S
124.268 478.4 M( connection)S
175.286 478.4 M( up)S
189.036 478.4 M( and)S
207.67 478.4 M( down)S
234 478.4 M(.......................................................................................78)S
54 465.2 M(Scripts)S
84.558 465.2 M( for)S
100.134 465.2 M( ipchains)S
139.547 465.2 M( or)S
151.46 465.2 M( iptables)S
187.25 465.2 M(........................................................................................................79)S
36 452 M(A)S
43.942 452 M( complication:)S
107.192 452 M( IPsec)S
133.768 452 M( vs.)S
149.047 452 M( NAT)S
173.5 452 M(.............................................................................................................80)S
54 438.8 M(NAT)S
76.605 438.8 M( on)S
90.355 438.8 M( or)S
102.268 438.8 M( behind)S
134.96 438.8 M( the)S
151.152 438.8 M( IPsec)S
177.728 438.8 M( gateway)S
217.13 438.8 M( works)S
245 438.8 M(...................................................................................80)S
54 425.6 M(NAT)S
76.605 425.6 M( between)S
116.007 425.6 M( gateways)S
159.688 425.6 M( is)S
169.775 425.6 M( problematic)S
223 425.6 M(...........................................................................................81)S
54 412.4 M(Other)S
79.047 412.4 M( references)S
126.985 412.4 M( on)S
140.735 412.4 M( NAT)S
166.09 412.4 M( and)S
184.724 412.4 M( IPsec)S
209.25 412.4 M(................................................................................................81)S
36 399.2 M(Other)S
61.047 399.2 M( complications)S
124 399.2 M(...............................................................................................................................81)S
54 386 M(IPsec)S
77.826 386 M( through)S
114.797 386 M( the)S
130.989 386 M( gateway)S
168 386 M(...............................................................................................................81)S
54 372.8 M(Preventing)S
101.663 372.8 M( non-IPsec)S
150.943 372.8 M( traffic)S
179 372.8 M(...........................................................................................................82)S
54 359.6 M(Filtering)S
91.895 359.6 M( packets)S
127.634 359.6 M( from)S
151.768 359.6 M( unknown)S
195.46 359.6 M( gateways)S
236.75 359.6 M(......................................................................................82)S
36 346.4 M(Other)S
61.047 346.4 M( packet)S
92.507 346.4 M( filters)S
118.5 346.4 M(.................................................................................................................................83)S
54 333.2 M(ICMP)S
80.895 333.2 M( filtering)S
118.5 333.2 M(.................................................................................................................................83)S
54 320 M(UDP)S
76 320 M( packets)S
111.739 320 M( for)S
127.315 320 M( traceroute)S
173.5 320 M(.............................................................................................................84)S
54 306.8 M(UDP)S
76 306.8 M( for)S
91.576 306.8 M( L2TP)S
118.5 306.8 M(.................................................................................................................................84)S
36 293.6 M(How)S
57.384 293.6 M( it)S
66.25 293.6 M( all)S
80 293.6 M( works:)S
112.692 293.6 M( IPsec)S
139.268 293.6 M( packet)S
170.728 293.6 M( details)S
201 293.6 M(...................................................................................................84)S
54 280.4 M(ESP)S
72.953 280.4 M( and)S
91.587 280.4 M( AH)S
110.221 280.4 M( do)S
123.971 280.4 M( not)S
140.779 280.4 M( have)S
164.297 280.4 M( ports)S
187.25 280.4 M(........................................................................................................85)S
54 267.2 M(Header)S
85.757 267.2 M( layout)S
115.75 267.2 M(..................................................................................................................................85)S
54 254 M(DHR)S
77.221 254 M( on)S
90.971 254 M( the)S
107.163 254 M( updown)S
145.355 254 M( script)S
170.75 254 M(..............................................................................................................86)S
/F5 SF 0 227.6 M(Linux)S
28.127 227.6 M( FreeS/WAN)S
88.308 227.6 M( Troubleshooting)S
168.685 227.6 M( Guide)S
198.25 227.6 M(....................................................................................................88)S
/F4 SF 36 214.4 M(Overview)S
77.25 214.4 M(................................................................................................................................................88)S
36 201.2 M(1.)S
44.25 201.2 M( During)S
78.163 201.2 M( Install)S
107.5 201.2 M(.....................................................................................................................................88)S
54 188 M(1.1)S
67.75 188 M( RPM)S
93.732 188 M( install)S
123.377 188 M( gotchas)S
157 188 M(...................................................................................................................88)S
54 174.8 M(1.2)S
67.75 174.8 M( Problems)S
112.058 174.8 M( installing)S
155.761 174.8 M( from)S
179.895 174.8 M( source)S
209.25 174.8 M(................................................................................................88)S
54 161.6 M(1.3)S
67.75 161.6 M( Install)S
98 161.6 M( checks)S
129.5 161.6 M(.............................................................................................................................88)S
54 148.4 M(1.3)S
67.75 148.4 M( Troubleshooting)S
143.221 148.4 M( OE)S
159.75 148.4 M(..................................................................................................................89)S
36 135.2 M(2.)S
44.25 135.2 M( During)S
78.163 135.2 M( Negotiation)S
132.25 135.2 M(............................................................................................................................91)S
54 122 M(2.1)S
67.75 122 M( Determine)S
116.931 122 M( Connection)S
170.402 122 M( State)S
192.75 122 M(......................................................................................................91)S
54 108.8 M(2.2)S
67.75 108.8 M( Finding)S
104.732 108.8 M( error)S
128.855 108.8 M( text)S
146 108.8 M(.......................................................................................................................92)S
54 95.6 M(2.3)S
67.75 95.6 M( Interpreting)S
122.431 95.6 M( a)S
130.065 95.6 M( Negotiation)S
184.757 95.6 M( Error)S
209.25 95.6 M(................................................................................................93)S
36 82.4 M(3.)S
44.25 82.4 M( Using)S
73.279 82.4 M( a)S
80.913 82.4 M( Connection)S
132.25 82.4 M(............................................................................................................................93)S
54 69.2 M(3.1)S
67.75 69.2 M( Orienting)S
112.663 69.2 M( yourself)S
148.75 69.2 M(......................................................................................................................93)S
54 56 M(3.2)S
67.75 56 M( Those)S
97.384 56 M( pesky)S
125.797 56 M( configuration)S
187.815 56 M( errors)S
214.75 56 M(..............................................................................................94)S
54 42.8 M(3.3)S
67.75 42.8 M( Check)S
98.605 42.8 M( Routing)S
136.808 42.8 M( and)S
155.442 42.8 M( Firewalling)S
206.5 42.8 M(.................................................................................................94)S
54 29.6 M(3.4)S
67.75 29.6 M( When)S
96.768 29.6 M( in)S
108.076 29.6 M( doubt,)S
138.634 29.6 M( sniff)S
161.547 29.6 M( it)S
170.413 29.6 M( out)S
184.5 29.6 M(.........................................................................................................95)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
481.5 0 M(v)S
GR
SP
%%Page: vi 21
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 159.05 674 M(Table of Contents)S
11 FS/F5 SF 0 650 M(Linux)S
28.127 650 M( FreeS/WAN)S
88.308 650 M( Troubleshooting)S
168.685 650 M( Guide)S
/F4 SF 54 636.8 M(3.5)S
67.75 636.8 M( Check)S
98.605 636.8 M( your)S
121.518 636.8 M( logs)S
140.5 636.8 M(.........................................................................................................................96)S
54 623.6 M(3.6)S
67.75 623.6 M( More)S
94.326 623.6 M( testing)S
126.413 623.6 M( for)S
141.989 623.6 M( the)S
158.181 623.6 M( truly)S
181.71 623.6 M( thorough)S
223 623.6 M(...........................................................................................96)S
36 610.4 M(4.)S
44.25 610.4 M( Problem)S
84.279 610.4 M( Reporting)S
129.5 610.4 M(.............................................................................................................................96)S
54 597.2 M(4.1)S
67.75 597.2 M( How)S
91.884 597.2 M( to)S
103.192 597.2 M( ask)S
120.605 597.2 M( for)S
136.181 597.2 M( help)S
157 597.2 M(...................................................................................................................96)S
54 584 M(4.2)S
67.75 584 M( Where)S
99.815 584 M( to)S
111.123 584 M( ask)S
126.75 584 M(..............................................................................................................................97)S
36 570.8 M(5.)S
44.25 570.8 M( Additional)S
94.058 570.8 M( Notes)S
122.471 570.8 M( on)S
136.221 570.8 M( Troubleshooting)S
209.25 570.8 M(................................................................................................97)S
54 557.6 M(5.1)S
67.75 557.6 M( Information)S
123.047 557.6 M( available)S
165.507 557.6 M( on)S
179.257 557.6 M( your)S
202.17 557.6 M( system)S
234 557.6 M(.......................................................................................97)S
54 544.4 M( 5.2)S
70.5 544.4 M( Testing)S
106.25 544.4 M( between)S
145.652 544.4 M( security)S
183.228 544.4 M( gateways)S
225.75 544.4 M(..........................................................................................98)S
54 531.2 M(5.3)S
67.75 531.2 M( ifconfig)S
105.326 531.2 M( reports)S
138.623 531.2 M( for)S
154.199 531.2 M( KLIPS)S
187.507 531.2 M( debugging)S
234 531.2 M(.......................................................................................99)S
54 518 M( 5.4)S
70.5 518 M( Using)S
99.529 518 M( GDB)S
125.5 518 M( on)S
139.25 518 M( Pluto)S
162.5 518 M(...............................................................................................................100)S
/F5 SF 0 491.6 M(Linux)S
28.127 491.6 M( FreeS/WAN)S
88.308 491.6 M( Compatibility)S
156.453 491.6 M( Guide)S
187.25 491.6 M(......................................................................................................101)S
/F4 SF 36 478.4 M(Implemented)S
94.047 478.4 M( parts)S
118.181 478.4 M( of)S
130.094 478.4 M( the)S
146.286 478.4 M( IPsec)S
172.862 478.4 M( Specification)S
231.25 478.4 M(......................................................................................101)S
54 465.2 M(In)S
63.163 465.2 M( Linux)S
92.192 465.2 M( FreeS/WAN)S
148.75 465.2 M(....................................................................................................................101)S
54 452 M(Deliberately)S
108.373 452 M( omitted)S
143.25 452 M(......................................................................................................................102)S
54 438.8 M(Not)S
70.5 438.8 M( \(yet\))S
94.018 438.8 M( in)S
105.326 438.8 M( Linux)S
134.355 438.8 M( FreeS/WAN)S
190 438.8 M(.....................................................................................................102)S
36 425.6 M(Our)S
53.105 425.6 M( PF-Key)S
92.617 425.6 M( implementation)S
162.5 425.6 M(...............................................................................................................103)S
54 412.4 M(PF-Key)S
90.762 412.4 M( portability)S
137.75 412.4 M(........................................................................................................................103)S
36 399.2 M(Kernels)S
70.21 399.2 M( other)S
95.565 399.2 M( than)S
117.257 399.2 M( the)S
133.449 399.2 M( latest)S
159.42 399.2 M( 2.2.x)S
184.17 399.2 M( and)S
202.804 399.2 M( 2.4.y)S
225.75 399.2 M(........................................................................................103)S
54 386 M(2.0.x)S
76 386 M( kernels)S
110.25 386 M(..................................................................................................................................104)S
54 372.8 M(2.2)S
67.75 372.8 M( and)S
86.384 372.8 M( 2.4)S
102.884 372.8 M( kernels)S
135 372.8 M(.........................................................................................................................104)S
36 359.6 M(Intel)S
56.163 359.6 M( Linux)S
85.192 359.6 M( distributions)S
142.953 359.6 M( other)S
168.308 359.6 M( than)S
190 359.6 M( Redhat)S
223 359.6 M(.........................................................................................104)S
54 346.4 M(Redhat)S
85.163 346.4 M( 7.0)S
99.25 346.4 M(......................................................................................................................................104)S
54 333.2 M(SuSE)S
78.453 333.2 M( Linux)S
104.75 333.2 M(....................................................................................................................................105)S
54 320 M(Slackware)S
99.25 320 M(......................................................................................................................................106)S
54 306.8 M(Debian)S
85.5 306.8 M(...........................................................................................................................................106)S
54 293.6 M(Caldera)S
85.5 293.6 M(...........................................................................................................................................107)S
36 280.4 M(CPUs)S
61.674 280.4 M( other)S
87.029 280.4 M( than)S
108.721 280.4 M( Intel)S
129.5 280.4 M(...........................................................................................................................107)S
54 267.2 M(Corel)S
78.442 267.2 M( Netwinder)S
127.623 267.2 M( \(StrongARM)S
188.431 267.2 M( CPU\))S
214.75 267.2 M(............................................................................................107)S
54 254 M(Yellow)S
86.384 254 M( Dog)S
108.076 254 M( Linux)S
137.105 254 M( on)S
150.855 254 M( Power)S
181.71 254 M( PC)S
195.5 254 M(...................................................................................................107)S
54 240.8 M(Mklinux)S
91 240.8 M(.........................................................................................................................................109)S
54 227.6 M(Alpha)S
80.884 227.6 M( 64-bit)S
112.454 227.6 M( processors)S
159.75 227.6 M(................................................................................................................109)S
54 214.4 M(Sun)S
71.116 214.4 M( SPARC)S
108.714 214.4 M( processors)S
157 214.4 M(.................................................................................................................110)S
54 201.2 M(MIPS)S
79.674 201.2 M( processors)S
126.75 201.2 M(............................................................................................................................110)S
54 188 M(Transmeta)S
100.431 188 M( Crusoe)S
132.25 188 M(..........................................................................................................................110)S
54 174.8 M(Motorola)S
94.942 174.8 M( Coldfire)S
132.25 174.8 M(..........................................................................................................................110)S
36 161.6 M(Multiprocessor)S
102.605 161.6 M( machines)S
146 161.6 M(.....................................................................................................................111)S
36 148.4 M(Support)S
70.837 148.4 M( for)S
86.413 148.4 M( crypto)S
117.268 148.4 M( hardware)S
159.75 148.4 M(................................................................................................................111)S
36 135.2 M(IP)S
45.779 135.2 M( version)S
80.913 135.2 M( 6)S
89.163 135.2 M( \(IPng\))S
118.5 135.2 M(...............................................................................................................................112)S
54 122 M(IPv6)S
74.779 122 M( background)S
126.75 122 M(............................................................................................................................112)S
/F5 SF 0 95.6 M(Interoperating)S
69.047 95.6 M( with)S
92.576 95.6 M( FreeS/WAN)S
151.5 95.6 M(...................................................................................................................114)S
/F4 SF 36 82.4 M(Interop)S
67.768 82.4 M( at)S
78.46 82.4 M( a)S
86.094 82.4 M( Glance)S
118.5 82.4 M(...............................................................................................................................114)S
54 69.2 M(Key)S
71.75 69.2 M(................................................................................................................................................115)S
36 56 M(Basic)S
60.442 56 M( Interop)S
94.96 56 M( Rules)S
121.25 56 M(..............................................................................................................................115)S
36 42.8 M(Longer)S
67.768 42.8 M( Stories)S
99.25 42.8 M(......................................................................................................................................116)S
54 29.6 M(For)S
69.279 29.6 M( More)S
95.855 29.6 M( Compatible)S
149.942 29.6 M( Implementations)S
225.75 29.6 M(........................................................................................116)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
479.058 0 M(vi)S
GR
SP
%%Page: vii 22
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 159.05 674 M(Table of Contents)S
11 FS/F5 SF 0 650 M(Interoperating)S
69.047 650 M( with)S
92.576 650 M( FreeS/WAN)S
/F4 SF 54 636.8 M(For)S
69.279 636.8 M( Other)S
97.076 636.8 M( Implementations)S
173.5 636.8 M(...........................................................................................................118)S
/F5 SF 0 610.4 M(Performance)S
61.083 610.4 M( of)S
72.996 610.4 M( FreeS/WAN)S
132.25 610.4 M(..........................................................................................................................126)S
/F4 SF 36 597.2 M(Published)S
79.395 597.2 M( material)S
115.75 597.2 M(................................................................................................................................126)S
36 584 M(Estimating)S
83.674 584 M( CPU)S
107.819 584 M( overheads)S
154.25 584 M(..................................................................................................................126)S
54 570.8 M(Higher)S
84.547 570.8 M( performance)S
142.88 570.8 M( alternatives)S
195.5 570.8 M(...................................................................................................127)S
54 557.6 M(Other)S
79.047 557.6 M( considerations)S
143.25 557.6 M(......................................................................................................................128)S
36 544.4 M(Many)S
61.663 544.4 M( tunnels)S
96.192 544.4 M( from)S
120.326 544.4 M( a)S
127.96 544.4 M( single)S
156.989 544.4 M( gateway)S
195.5 544.4 M(...................................................................................................128)S
36 531.2 M(Low-end)S
78.251 531.2 M( systems)S
115.75 531.2 M(................................................................................................................................129)S
36 518 M(Measuring)S
83.047 518 M( KLIPS)S
115.75 518 M(................................................................................................................................130)S
36 504.8 M(Speed)S
62.884 504.8 M( with)S
85.192 504.8 M( compression)S
143.25 504.8 M(......................................................................................................................131)S
36 491.6 M(Methods)S
74.5 491.6 M( of)S
86.413 491.6 M( measuring)S
132.25 491.6 M(..........................................................................................................................132)S
/F5 SF 0 465.2 M(Testing)S
34.837 465.2 M( FreeS/WAN)S
93.75 465.2 M(........................................................................................................................................134)S
/F4 SF 36 452 M(Testing)S
69 452 M( opportunistic)S
129.808 452 M( connections)S
184.5 452 M(.......................................................................................................134)S
54 438.8 M(Basic)S
78.442 438.8 M( OE)S
95.855 438.8 M( Test)S
115.75 438.8 M(................................................................................................................................134)S
54 425.6 M(OE)S
68.663 425.6 M( Gateway)S
110.507 425.6 M( Test)S
129.5 425.6 M(...........................................................................................................................135)S
54 412.4 M(Additional)S
101.058 412.4 M( OE)S
118.471 412.4 M( tests)S
140.5 412.4 M(.......................................................................................................................135)S
36 399.2 M(Testing)S
69 399.2 M( with)S
91.308 399.2 M( User)S
114.826 399.2 M( Mode)S
143.239 399.2 M( Linux)S
170.75 399.2 M(............................................................................................................136)S
36 386 M(Configuration)S
97.721 386 M( for)S
113.297 386 M( a)S
120.931 386 M( testbed)S
154.844 386 M( network)S
192.75 386 M(....................................................................................................136)S
54 372.8 M(Testbed)S
88.826 372.8 M( network)S
126.75 372.8 M(............................................................................................................................136)S
54 359.6 M(Using)S
80.279 359.6 M( packet)S
111.739 359.6 M( sniffers)S
147.478 359.6 M( in)S
158.786 359.6 M( testing)S
190 359.6 M(.....................................................................................................137)S
36 346.4 M(Verifying)S
78.768 346.4 M( encryption)S
126.75 346.4 M(............................................................................................................................138)S
36 333.2 M(Mailing)S
70.837 333.2 M( list)S
87.04 333.2 M( pointers)S
124 333.2 M(.............................................................................................................................139)S
/F5 SF 0 306.8 M(Kernel)S
32.384 306.8 M( configuration)S
98.692 306.8 M( for)S
115.489 306.8 M( FreeS/WAN)S
173.5 306.8 M(...........................................................................................................140)S
/F4 SF 36 293.6 M(Not)S
52.5 293.6 M( everyone)S
95.565 293.6 M( needs)S
123.362 293.6 M( to)S
134.67 293.6 M( worry)S
163.688 293.6 M( about)S
190.88 293.6 M( kernel)S
221.119 293.6 M( configuration)S
280.75 293.6 M(....................................................................140)S
36 280.4 M(Assumptions)S
93.453 280.4 M( and)S
112.087 280.4 M( notation)S
148.75 280.4 M(....................................................................................................................140)S
54 267.2 M(Labels)S
83.326 267.2 M( used)S
104.75 267.2 M(....................................................................................................................................140)S
36 254 M(Kernel)S
65.931 254 M( options)S
101.076 254 M( for)S
116.652 254 M( FreeS/WAN)S
173.5 254 M(...........................................................................................................141)S
/F5 SF 0 227.6 M(Other)S
28.105 227.6 M( configuration)S
94.413 227.6 M( possibilities)S
151.5 227.6 M(...................................................................................................................146)S
/F4 SF 36 214.4 M(Some)S
61.058 214.4 M( rules)S
85.192 214.4 M( of)S
97.105 214.4 M( thumb)S
127.971 214.4 M( about)S
155.163 214.4 M( configuration)S
214.75 214.4 M(............................................................................................146)S
54 201.2 M(Tunnels)S
89.442 201.2 M( are)S
105.623 201.2 M( cheap)S
132.25 201.2 M(..........................................................................................................................146)S
54 188 M(Subnet)S
84.558 188 M( sizes)S
107.5 188 M(...................................................................................................................................147)S
54 174.8 M(Other)S
79.047 174.8 M( network)S
117.844 174.8 M( layouts)S
151.5 174.8 M(...................................................................................................................148)S
36 161.6 M(Choosing)S
78.174 161.6 M( connection)S
129.192 161.6 M( types)S
154.25 161.6 M(..................................................................................................................149)S
54 148.4 M(Manual)S
87.605 148.4 M( vs.)S
102.884 148.4 M( automatic)S
149.018 148.4 M( keying)S
179 148.4 M(.........................................................................................................150)S
54 135.2 M(Authentication)S
119.384 135.2 M( methods)S
159.413 135.2 M( for)S
174.989 135.2 M( auto-keying)S
231.25 135.2 M(......................................................................................150)S
54 122 M(Advantages)S
105.931 122 M( of)S
117.844 122 M( public)S
148.094 122 M( key)S
166.728 122 M( methods)S
206.5 122 M(...............................................................................................151)S
36 108.8 M(Using)S
62.279 108.8 M( shared)S
93.739 108.8 M( secrets)S
126.42 108.8 M( in)S
137.728 108.8 M( production)S
187.25 108.8 M(......................................................................................................152)S
54 95.6 M(Putting)S
85.79 95.6 M( secrets)S
118.471 95.6 M( in)S
129.779 95.6 M( ipsec.secrets\(5\))S
198.25 95.6 M(..................................................................................................152)S
54 82.4 M(File)S
71.116 82.4 M( security)S
107.5 82.4 M(...................................................................................................................................153)S
54 69.2 M(Shared)S
84.547 69.2 M( secrets)S
117.228 69.2 M( for)S
132.804 69.2 M( road)S
155.101 69.2 M( warriors)S
192.75 69.2 M(....................................................................................................153)S
36 56 M(Using)S
62.279 56 M( manual)S
97.413 56 M( keying)S
130.105 56 M( in)S
141.413 56 M( production)S
190 56 M(.....................................................................................................154)S
54 42.8 M(Creating)S
91.884 42.8 M( keys)S
114.797 42.8 M( with)S
137.105 42.8 M( ranbits)S
168 42.8 M(.............................................................................................................156)S
36 29.6 M(Setting)S
67.174 29.6 M( up)S
80.924 29.6 M( connections)S
136.221 29.6 M( at)S
146.913 29.6 M( boot)S
169.221 29.6 M( time)S
190 29.6 M(.....................................................................................................156)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
476.616 0 M(vii)S
GR
SP
%%Page: viii 23
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 159.05 674 M(Table of Contents)S
11 FS/F5 SF 0 650 M(Other)S
28.105 650 M( configuration)S
94.413 650 M( possibilities)S
/F4 SF 36 636.8 M(Multiple)S
73.895 636.8 M( tunnels)S
108.424 636.8 M( between)S
147.826 636.8 M( the)S
164.018 636.8 M( same)S
189.373 636.8 M( two)S
208.623 636.8 M( gateways)S
250.5 636.8 M(...............................................................................158)S
54 623.6 M(One)S
72.326 623.6 M( tunnel)S
102.576 623.6 M( plus)S
123.663 623.6 M( advanced)S
167.949 623.6 M( routing)S
201 623.6 M(.................................................................................................159)S
36 610.4 M(An)S
49.442 610.4 M( Opportunistic)S
112.692 610.4 M( Gateway)S
154.25 610.4 M(..................................................................................................................160)S
54 597.2 M(Start)S
74.779 597.2 M( from)S
98.913 597.2 M( full)S
116.942 597.2 M( opportunism)S
173.5 597.2 M(...........................................................................................................160)S
54 584 M(Reverse)S
89.431 584 M( DNS)S
114.181 584 M( TXT)S
138.315 584 M( records)S
173.438 584 M( for)S
189.014 584 M( each)S
211.916 584 M( protected)S
255.597 584 M( machine)S
294.5 584 M(...............................................................160)S
54 570.8 M(Publish)S
87.011 570.8 M( your)S
109.924 570.8 M( records)S
143.25 570.8 M(......................................................................................................................161)S
54 557.6 M(...and)S
78.134 557.6 M( test)S
96.163 557.6 M( them)S
118.5 557.6 M(...............................................................................................................................161)S
54 544.4 M(No)S
67.442 544.4 M( Configuration)S
131.913 544.4 M( Needed)S
168 544.4 M(.............................................................................................................161)S
36 531.2 M(Extruded)S
76.326 531.2 M( Subnets)S
113 531.2 M(.................................................................................................................................162)S
36 518 M(Road)S
59.221 518 M( Warrior)S
96.786 518 M( with)S
119.094 518 M( virtual)S
150.565 518 M( IP)S
163.094 518 M( address)S
198.25 518 M(..................................................................................................163)S
36 504.8 M(Dynamic)S
76.326 504.8 M( Network)S
117.565 504.8 M( Interfaces)S
162.5 504.8 M(...............................................................................................................165)S
54 491.6 M(Basics)S
80 491.6 M(.............................................................................................................................................165)S
54 478.4 M(Boot)S
75.395 478.4 M( Time)S
99.25 478.4 M(......................................................................................................................................166)S
54 465.2 M(Change)S
87.605 465.2 M( Time)S
113 465.2 M(.................................................................................................................................166)S
36 452 M(Unencrypted)S
92.815 452 M( tunnels)S
126.75 452 M(............................................................................................................................166)S
/F5 SF 0 425.6 M(Installing)S
44.627 425.6 M( FreeS/WAN)S
104.75 425.6 M(....................................................................................................................................168)S
/F4 SF 36 412.4 M(Requirements)S
96.5 412.4 M(.......................................................................................................................................168)S
36 399.2 M(Choose)S
69 399.2 M( your)S
91.913 399.2 M( install)S
121.558 399.2 M( method)S
157 399.2 M(.................................................................................................................168)S
36 386 M(FreeS/WAN)S
90.989 386 M( ships)S
116.355 386 M( with)S
138.663 386 M( some)S
164.634 386 M( Linuxes)S
201 386 M(.................................................................................................168)S
54 372.8 M(FreeS/WAN)S
108.989 372.8 M( may)S
130.681 372.8 M( be)S
143.815 372.8 M( altered...)S
184.5 372.8 M(.......................................................................................................168)S
54 359.6 M(You)S
72.942 359.6 M( might)S
101.366 359.6 M( need)S
124.884 359.6 M( to)S
136.192 359.6 M( create)S
165.199 359.6 M( an)S
178.333 359.6 M( authentication)S
243.409 359.6 M( keypair)S
278 359.6 M(.....................................................................168)S
54 346.4 M(Start)S
74.779 346.4 M( and)S
93.413 346.4 M( test)S
111.442 346.4 M( FreeS/WAN)S
168 346.4 M(.............................................................................................................169)S
36 333.2 M(RPM)S
59.232 333.2 M( install)S
88.25 333.2 M(..........................................................................................................................................169)S
54 320 M(Download)S
99.826 320 M( RPMs)S
129.5 320 M(...........................................................................................................................169)S
54 306.8 M(For)S
69.279 306.8 M( freeswan.org)S
129.141 306.8 M( RPMs:)S
162.46 306.8 M( check)S
190.862 306.8 M( signatures)S
236.75 306.8 M(....................................................................................170)S
54 293.6 M(Install)S
81.5 293.6 M( the)S
97.692 293.6 M( RPMs)S
126.75 293.6 M(............................................................................................................................170)S
54 280.4 M(Start)S
74.779 280.4 M( and)S
93.413 280.4 M( Test)S
115.105 280.4 M( FreeS/WAN)S
170.75 280.4 M(............................................................................................................171)S
36 267.2 M(Install)S
63.5 267.2 M( from)S
87.634 267.2 M( Source)S
118.5 267.2 M(...............................................................................................................................171)S
54 254 M(Decide)S
85.152 254 M( what)S
109.286 254 M( functionality)S
168.257 254 M( you)S
187.507 254 M( need)S
209.25 254 M(..............................................................................................171)S
54 240.8 M(Download)S
99.826 240.8 M( FreeS/WAN)S
157 240.8 M(.................................................................................................................171)S
54 227.6 M(For)S
69.279 227.6 M( freeswan.org)S
129.141 227.6 M( source:)S
163.659 227.6 M( check)S
192.061 227.6 M( its)S
205.206 227.6 M( signature)S
247.75 227.6 M(................................................................................171)S
54 214.4 M(Untar,)S
81.797 214.4 M( unzip)S
107.5 214.4 M(...................................................................................................................................171)S
54 201.2 M(Patch)S
78.442 201.2 M( if)S
87.913 201.2 M( desired)S
121.25 201.2 M(..............................................................................................................................172)S
54 188 M(...)S
62.25 188 M( and)S
80.884 188 M( Make)S
107.5 188 M(...................................................................................................................................172)S
36 174.8 M(Start)S
56.779 174.8 M( FreeS/WAN)S
114.518 174.8 M( and)S
133.152 174.8 M( test)S
151.181 174.8 M( your)S
174.094 174.8 M( install)S
201 174.8 M(.................................................................................................173)S
36 161.6 M(Test)S
54.942 161.6 M( your)S
77.855 161.6 M( install)S
107.5 161.6 M(...................................................................................................................................173)S
36 148.4 M(Making)S
70.221 148.4 M( FreeS/WAN)S
127.96 148.4 M( play)S
149.652 148.4 M( well)S
171.344 148.4 M( with)S
193.652 148.4 M( others)S
223 148.4 M(.........................................................................................173)S
36 135.2 M(Configure)S
80.605 135.2 M( for)S
96.181 135.2 M( your)S
119.094 135.2 M( needs)S
146 135.2 M(.....................................................................................................................173)S
/F5 SF 0 108.8 M(How)S
22 108.8 M( to)S
33.913 108.8 M( configure)S
81.268 108.8 M( FreeS/WAN)S
140.5 108.8 M(.......................................................................................................................174)S
/F4 SF 36 95.6 M(Requirements)S
96.5 95.6 M(.......................................................................................................................................174)S
36 82.4 M(Net-to-Net)S
88.734 82.4 M( connection)S
137.75 82.4 M(........................................................................................................................174)S
54 69.2 M(Gather)S
83.931 69.2 M( information)S
137.75 69.2 M(........................................................................................................................174)S
54 56 M(Edit)S
72.337 56 M( /etc/ipsec.conf)S
137.75 56 M(........................................................................................................................175)S
54 42.8 M(Start)S
74.779 42.8 M( your)S
97.692 42.8 M( connection)S
146 42.8 M(.....................................................................................................................176)S
54 29.6 M(Do)S
67.442 29.6 M( not)S
84.25 29.6 M( MASQ)S
118.779 29.6 M( or)S
130.692 29.6 M( NAT)S
156.047 29.6 M( packets)S
191.786 29.6 M( to)S
203.094 29.6 M( be)S
216.228 29.6 M( tunneled)S
256 29.6 M(.............................................................................176)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
474.174 0 M(viii)S
GR
SP
%%Page: ix 24
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 159.05 674 M(Table of Contents)S
11 FS/F5 SF 0 650 M(How)S
22 650 M( to)S
33.913 650 M( configure)S
81.268 650 M( FreeS/WAN)S
/F4 SF 54 636.8 M(Test)S
72.942 636.8 M( your)S
95.855 636.8 M( connection)S
146 636.8 M(.....................................................................................................................176)S
54 623.6 M(Finishing)S
95.569 623.6 M( touches)S
129.5 623.6 M(...........................................................................................................................177)S
36 610.4 M(Road)S
59.221 610.4 M( Warrior)S
96.786 610.4 M( Configuration)S
159.75 610.4 M(................................................................................................................177)S
54 597.2 M(Gather)S
83.931 597.2 M( information)S
137.75 597.2 M(........................................................................................................................177)S
54 584 M(Customize)S
101.058 584 M( /etc/ipsec.conf)S
165.25 584 M(..............................................................................................................178)S
54 570.8 M(Start)S
74.779 570.8 M( your)S
97.692 570.8 M( connection)S
146 570.8 M(.....................................................................................................................178)S
54 557.6 M(Do)S
67.442 557.6 M( not)S
84.25 557.6 M( MASQ)S
118.779 557.6 M( or)S
130.692 557.6 M( NAT)S
156.047 557.6 M( packets)S
191.786 557.6 M( to)S
203.094 557.6 M( be)S
216.228 557.6 M( tunneled)S
256 557.6 M(.............................................................................179)S
54 544.4 M(Test)S
72.942 544.4 M( your)S
95.855 544.4 M( connection)S
146 544.4 M(.....................................................................................................................179)S
54 531.2 M(Finishing)S
95.569 531.2 M( touches)S
129.5 531.2 M(...........................................................................................................................179)S
54 518 M(Multiple)S
91.895 518 M( Road)S
117.866 518 M( Warriors)S
157 518 M(.................................................................................................................180)S
36 504.8 M(What)S
59.826 504.8 M( next?)S
85.5 504.8 M(...........................................................................................................................................180)S
/F5 SF 0 478.4 M(Linux)S
28.127 478.4 M( FreeS/WAN)S
88.308 478.4 M( background)S
146 478.4 M(.....................................................................................................................181)S
/F4 SF 36 465.2 M(Some)S
61.058 465.2 M( DNS)S
85.808 465.2 M( background)S
137.75 465.2 M(........................................................................................................................181)S
54 452 M(Forward)S
91.268 452 M( and)S
109.902 452 M( reverse)S
144.409 452 M( maps)S
168 452 M(.............................................................................................................181)S
54 438.8 M(Hierarchy)S
97.978 438.8 M( and)S
116.612 438.8 M( delegation)S
162.5 438.8 M(...............................................................................................................182)S
54 425.6 M(Syntax)S
84.558 425.6 M( of)S
96.471 425.6 M( DNS)S
121.221 425.6 M( records)S
154.25 425.6 M(..................................................................................................................182)S
54 412.4 M(Cacheing,)S
98.297 412.4 M( TTL)S
121.21 412.4 M( and)S
139.844 412.4 M( propagation)S
195.141 412.4 M( delay)S
220.25 412.4 M(..........................................................................................182)S
36 399.2 M(Problems)S
77.558 399.2 M( with)S
99.866 399.2 M( packet)S
131.326 399.2 M( fragmentation)S
195.5 399.2 M(...................................................................................................183)S
36 386 M(Network)S
74.489 386 M( address)S
110.228 386 M( translation)S
159.42 386 M( \(NAT\))S
190 386 M(.....................................................................................................185)S
54 372.8 M(NAT)S
76.605 372.8 M( to)S
87.913 372.8 M( non-routable)S
149.414 372.8 M( addresses)S
192.75 372.8 M(....................................................................................................185)S
54 359.6 M(NAT)S
76.605 359.6 M( to)S
87.913 359.6 M( routable)S
126.71 359.6 M( addresses)S
170.75 359.6 M(............................................................................................................186)S
/F5 SF 0 333.2 M(FreeS/WAN)S
57.431 333.2 M( script)S
87.065 333.2 M( examples)S
132.25 333.2 M(..........................................................................................................................187)S
/F4 SF 36 320 M(Poltorak's)S
79.538 320 M( Firewall)S
118.951 320 M( script)S
146 320 M(.....................................................................................................................187)S
/F5 SF 0 293.6 M(How)S
22 293.6 M( to)S
33.913 293.6 M( configure)S
81.268 293.6 M( to)S
93.181 293.6 M( use)S
111.21 293.6 M( "make)S
145.728 293.6 M( check")S
179 293.6 M(.........................................................................................................192)S
/F4 SF 36 280.4 M(What)S
59.826 280.4 M( is)S
69.913 280.4 M( "make)S
100.977 280.4 M( check")S
132.25 280.4 M(..........................................................................................................................192)S
36 267.2 M(Running)S
73.895 267.2 M( "make)S
104.959 267.2 M( check")S
137.75 267.2 M(........................................................................................................................192)S
/F5 SF 0 240.8 M(How)S
22 240.8 M( to)S
33.913 240.8 M( write)S
61.094 240.8 M( a)S
69.344 240.8 M( "make)S
103.862 240.8 M( check")S
139.601 240.8 M( test)S
157 240.8 M(.................................................................................................................193)S
/F4 SF 36 227.6 M(Structure)S
76.326 227.6 M( of)S
88.239 227.6 M( a)S
95.873 227.6 M( test)S
113 227.6 M(.................................................................................................................................193)S
36 214.4 M(The)S
53.105 214.4 M( TESTLIST)S
104.75 214.4 M(....................................................................................................................................193)S
36 201.2 M(Test)S
54.942 201.2 M( kinds)S
80 201.2 M(.............................................................................................................................................193)S
36 188 M(Common)S
76.953 188 M( parameters)S
126.75 188 M(............................................................................................................................194)S
36 174.8 M(KLIPStest)S
81.837 174.8 M( paramaters)S
132.25 174.8 M(..........................................................................................................................195)S
36 161.6 M(mkinsttest)S
81.232 161.6 M( paramaters)S
129.5 161.6 M(...........................................................................................................................196)S
36 148.4 M(rpm_build_install_test)S
135.011 148.4 M( paramaters)S
184.5 148.4 M(.......................................................................................................197)S
36 135.2 M(libtest)S
62.895 135.2 M( paramaters)S
113 135.2 M(.................................................................................................................................197)S
36 122 M(umlplutotest)S
91.011 122 M( paramaters)S
140.5 122 M(.......................................................................................................................197)S
36 108.8 M(umlXhost)S
79.395 108.8 M( parameters)S
129.5 108.8 M(...........................................................................................................................197)S
36 95.6 M(kernel_patch_test)S
113.594 95.6 M( paramaters)S
162.5 95.6 M(...............................................................................................................199)S
36 82.4 M(module_compile)S
109.942 82.4 M( paramaters)S
159.75 82.4 M(................................................................................................................199)S
/F5 SF 0 56 M(Current)S
38.489 56 M( pitfalls)S
71.75 56 M(................................................................................................................................................201)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
479.058 0 M(ix)S
GR
SP
%%Page: x 25
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 159.05 674 M(Table of Contents)S
11 FS/F5 SF 0 650 M(User-Mode-Linux)S
89.54 650 M( Testing)S
127.127 650 M( guide)S
154.25 650 M(..................................................................................................................202)S
/F4 SF 36 636.8 M(Preliminary)S
87.942 636.8 M( Notes)S
116.355 636.8 M( on)S
130.105 636.8 M( BIND)S
157 636.8 M(.................................................................................................................202)S
36 623.6 M(Steps)S
59.837 623.6 M( to)S
71.145 623.6 M( Install)S
101.395 623.6 M( UML)S
128.587 623.6 M( for)S
144.163 623.6 M( FreeS/WAN)S
201 623.6 M(.................................................................................................202)S
/F5 SF 0 597.2 M(Debugging)S
50.732 597.2 M( the)S
68.145 597.2 M( kernel)S
100.837 597.2 M( with)S
124.366 597.2 M( GDB)S
148.75 597.2 M(....................................................................................................................205)S
/F4 SF 36 584 M(Other)S
61.047 584 M( notes)S
87.018 584 M( about)S
114.21 584 M( debugging)S
162.5 584 M(...............................................................................................................205)S
/F5 SF 0 557.6 M(User-Mode-Linux)S
89.54 557.6 M( mysteries)S
135 557.6 M(.........................................................................................................................206)S
0 531.2 M(Getting)S
35.442 531.2 M( more)S
62.623 531.2 M( info)S
83.71 531.2 M( from)S
109.67 531.2 M( uml_netjig)S
162.5 531.2 M(...............................................................................................................207)S
0 504.8 M(History)S
35.442 504.8 M( and)S
55.924 504.8 M( politics)S
92.29 504.8 M( of)S
104.203 504.8 M( cryptography)S
170.75 504.8 M(............................................................................................................208)S
/F4 SF 36 491.6 M(Introduction)S
88.25 491.6 M(..........................................................................................................................................208)S
54 478.4 M(History)S
85.5 478.4 M(...........................................................................................................................................208)S
54 465.2 M(Politics)S
85.5 465.2 M(...........................................................................................................................................211)S
54 452 M(Links)S
77.25 452 M(..............................................................................................................................................212)S
54 438.8 M(Outline)S
87 438.8 M( of)S
98.913 438.8 M( this)S
117.558 438.8 M( section)S
148.75 438.8 M(....................................................................................................................212)S
36 425.6 M(From)S
59.837 425.6 M( our)S
77.25 425.6 M( project)S
110.547 425.6 M( leader)S
137.75 425.6 M(........................................................................................................................213)S
54 412.4 M(Swan:)S
81.5 412.4 M( Securing)S
123.355 412.4 M( the)S
139.547 412.4 M( Internet)S
176.507 412.4 M( against)S
210.42 412.4 M( Wiretapping)S
267 412.4 M(.........................................................................213)S
54 399.2 M(Stopping)S
93.732 399.2 M( wholesale)S
140.471 399.2 M( monitoring)S
190 399.2 M(.....................................................................................................216)S
36 386 M(Government)S
90.989 386 M( promotion)S
139.576 386 M( of)S
151.489 386 M( weak)S
177.449 386 M( crypto)S
206.5 386 M(...............................................................................................217)S
54 372.8 M(Escrowed)S
97.373 372.8 M( encryption)S
146 372.8 M(.....................................................................................................................217)S
54 359.6 M(Limited)S
88.837 359.6 M( key)S
107.471 359.6 M( lengths)S
140.5 359.6 M(.......................................................................................................................218)S
36 346.4 M(Cryptography)S
97.105 346.4 M( Export)S
129.797 346.4 M( Laws)S
154.25 346.4 M(..................................................................................................................220)S
54 333.2 M(US)S
68.058 333.2 M( Law)S
88.25 333.2 M(..........................................................................................................................................220)S
54 320 M(What's)S
84.085 320 M( wrong)S
114.94 320 M( with)S
137.248 320 M( restrictions)S
188.882 320 M( on)S
202.632 320 M( cryptography)S
261.5 320 M(...........................................................................221)S
54 306.8 M(The)S
71.105 306.8 M( Wassenaar)S
121.496 306.8 M( Arrangement)S
181.75 306.8 M(........................................................................................................222)S
54 293.6 M(Export)S
83.942 293.6 M( status)S
111.75 293.6 M( of)S
123.663 293.6 M( Linux)S
152.692 293.6 M( FreeS/WAN)S
209.25 293.6 M(..............................................................................................222)S
54 280.4 M(Help)S
75.384 280.4 M( spread)S
106.844 280.4 M( IPsec)S
133.42 280.4 M( around)S
165.25 280.4 M(..............................................................................................................223)S
36 267.2 M(DES)S
56.779 267.2 M( is)S
66.866 267.2 M( Not)S
86.116 267.2 M( Secure)S
118.5 267.2 M(...............................................................................................................................224)S
54 254 M(Dedicated)S
98.594 254 M( hardware)S
142.264 254 M( breaks)S
173.724 254 M( DES)S
197.253 254 M( in)S
208.561 254 M( a)S
216.195 254 M( few)S
235.434 254 M( days)S
256 254 M(.............................................................................224)S
54 240.8 M(Spooks)S
86.395 240.8 M( may)S
108.087 240.8 M( break)S
135.268 240.8 M( DES)S
158.797 240.8 M( faster)S
185.978 240.8 M( yet)S
201 240.8 M(.................................................................................................224)S
54 227.6 M(Networks)S
96.768 227.6 M( break)S
123.949 227.6 M( DES)S
147.478 227.6 M( in)S
158.786 227.6 M( a)S
166.42 227.6 M( few)S
185.659 227.6 M( weeks)S
214.75 227.6 M(............................................................................................225)S
54 214.4 M(We)S
69.268 214.4 M( disable)S
103.181 214.4 M( DES)S
124 214.4 M(.............................................................................................................................226)S
54 201.2 M(40-bits)S
87.099 201.2 M( is)S
97.186 201.2 M( laughably)S
143.32 201.2 M( weak)S
168 201.2 M(.............................................................................................................226)S
54 188 M(Triple)S
80.884 188 M( DES)S
104.413 188 M( is)S
114.5 188 M( almost)S
146.587 188 M( certainly)S
187.826 188 M( secure)S
217.5 188 M(...........................................................................................226)S
54 174.8 M(AES)S
74.779 174.8 M( in)S
86.087 174.8 M( IPsec)S
110.25 174.8 M(..................................................................................................................................226)S
36 161.6 M(Press)S
59.221 161.6 M( coverage)S
101.67 161.6 M( of)S
113.583 161.6 M( Linux)S
142.612 161.6 M( FreeS/WAN:)S
201 161.6 M(.................................................................................................227)S
54 148.4 M(FreeS/WAN)S
108.989 148.4 M( 1.0)S
125.489 148.4 M( press)S
148.75 148.4 M(....................................................................................................................227)S
54 135.2 M(Press)S
77.221 135.2 M( release)S
110.507 135.2 M( for)S
126.083 135.2 M( version)S
161.217 135.2 M( 1.0)S
176.25 135.2 M(..........................................................................................................227)S
/F5 SF 0 108.8 M(The)S
18.337 108.8 M( IPsec)S
46.134 108.8 M( protocols)S
91 108.8 M(.........................................................................................................................................229)S
/F4 SF 36 95.6 M(Protocols)S
77.558 95.6 M( and)S
96.192 95.6 M( phases)S
126.75 95.6 M(............................................................................................................................229)S
36 82.4 M(Applying)S
77.558 82.4 M( IPsec)S
102 82.4 M(.....................................................................................................................................229)S
54 69.2 M(Advantages)S
105.931 69.2 M( of)S
117.844 69.2 M( IPsec)S
143.25 69.2 M(......................................................................................................................230)S
54 56 M(Limitations)S
104.732 56 M( of)S
116.645 56 M( IPsec)S
140.5 56 M(.......................................................................................................................230)S
54 42.8 M(IPsec)S
77.826 42.8 M( is)S
87.913 42.8 M( a)S
95.547 42.8 M( general)S
130.67 42.8 M( mechanism)S
183.525 42.8 M( for)S
199.101 42.8 M( securing)S
239.119 42.8 M( IP)S
250.5 42.8 M(...............................................................................231)S
54 29.6 M(Using)S
80.279 29.6 M( authentication)S
145.355 29.6 M( without)S
181.721 29.6 M( encryption)S
231.25 29.6 M(......................................................................................232)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
481.5 0 M(x)S
GR
SP
%%Page: xi 26
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 159.05 674 M(Table of Contents)S
11 FS/F5 SF 0 650 M(The)S
18.337 650 M( IPsec)S
46.134 650 M( protocols)S
/F4 SF 54 636.8 M(Encryption)S
102.884 636.8 M( without)S
139.25 636.8 M( authentication)S
204.326 636.8 M( is)S
214.413 636.8 M( dangerous)S
261.5 636.8 M(...........................................................................233)S
54 623.6 M(Multiple)S
91.895 623.6 M( layers)S
120.913 623.6 M( of)S
132.826 623.6 M( IPsec)S
159.402 623.6 M( processing)S
209.199 623.6 M( are)S
225.38 623.6 M( possible)S
261.5 623.6 M(...........................................................................234)S
54 610.4 M(Resisting)S
94.953 610.4 M( traffic)S
124.576 610.4 M( analysis)S
162.5 610.4 M(...............................................................................................................234)S
36 597.2 M(Cryptographic)S
99.547 597.2 M( components)S
154.25 597.2 M(..................................................................................................................236)S
54 584 M(Block)S
80.279 584 M( ciphers)S
113 584 M(.................................................................................................................................236)S
54 570.8 M(Hash)S
76.605 570.8 M( functions)S
118.5 570.8 M(...............................................................................................................................236)S
54 557.6 M(Diffie-Hellman)S
124.356 557.6 M( key)S
142.99 557.6 M( agreement)S
190 557.6 M(.....................................................................................................237)S
54 544.4 M(RSA)S
75.395 544.4 M( authentication)S
137.75 544.4 M(........................................................................................................................237)S
36 531.2 M(Structure)S
76.326 531.2 M( of)S
88.239 531.2 M( IPsec)S
113 531.2 M(.................................................................................................................................237)S
54 518 M(IKE)S
72.326 518 M( \(Internet)S
112.949 518 M( Key)S
134.025 518 M( Exchange\))S
181.75 518 M(........................................................................................................237)S
54 504.8 M(IPsec)S
77.826 504.8 M( Services,)S
120.594 504.8 M( AH)S
139.228 504.8 M( and)S
157.862 504.8 M( ESP)S
179 504.8 M(.........................................................................................................240)S
54 491.6 M(The)S
71.105 491.6 M( Authentication)S
139.239 491.6 M( Header)S
173.746 491.6 M( \(AH\))S
198.25 491.6 M(..................................................................................................241)S
54 478.4 M(Encapsulated)S
112.652 478.4 M( Security)S
152.065 478.4 M( Payload)S
190.257 478.4 M( \(ESP\))S
217.5 478.4 M(...........................................................................................242)S
36 465.2 M(IPsec)S
59.826 465.2 M( modes)S
91 465.2 M(.........................................................................................................................................243)S
54 452 M(Tunnel)S
85.163 452 M( mode)S
110.25 452 M(..................................................................................................................................243)S
54 438.8 M(Transport)S
96.768 438.8 M( mode)S
121.25 438.8 M(..............................................................................................................................243)S
36 425.6 M(FreeS/WAN)S
90.989 425.6 M( parts)S
113 425.6 M(.................................................................................................................................243)S
54 412.4 M(KLIPS:)S
87.616 412.4 M( Kernel)S
120.297 412.4 M( IPsec)S
146.873 412.4 M( Support)S
181.75 412.4 M(........................................................................................................243)S
54 399.2 M(The)S
71.105 399.2 M( Pluto)S
97.087 399.2 M( daemon)S
132.25 399.2 M(..........................................................................................................................243)S
54 386 M(The)S
71.105 386 M( ipsec\(8\))S
109.286 386 M( command)S
154.25 386 M(..................................................................................................................244)S
54 372.8 M(Linux)S
80.279 372.8 M( FreeS/WAN)S
138.018 372.8 M( configuration)S
200.036 372.8 M( file)S
214.75 372.8 M(............................................................................................244)S
36 359.6 M(Key)S
54.326 359.6 M( management)S
113 359.6 M(.................................................................................................................................244)S
54 346.4 M(Currently)S
96.163 346.4 M( Implemented)S
156.96 346.4 M( Methods)S
195.5 346.4 M(...................................................................................................244)S
54 333.2 M(Methods)S
92.5 333.2 M( not)S
109.308 333.2 M( yet)S
125.5 333.2 M( implemented)S
184.5 333.2 M(.......................................................................................................245)S
/F5 SF 0 306.8 M(Mailing)S
36.674 306.8 M( lists)S
57.761 306.8 M( and)S
78.243 306.8 M( newsgroups)S
135 306.8 M(.........................................................................................................................247)S
/F4 SF 36 293.6 M(Mailing)S
70.837 293.6 M( lists)S
91.319 293.6 M( about)S
118.511 293.6 M( FreeS/WAN)S
176.25 293.6 M(..........................................................................................................247)S
54 280.4 M(The)S
71.105 280.4 M( project)S
104.402 280.4 M( mailing)S
140.768 280.4 M( lists)S
159.75 280.4 M(................................................................................................................247)S
54 267.2 M(Archives)S
93.71 267.2 M( of)S
105.623 267.2 M( the)S
121.815 267.2 M( lists)S
140.5 267.2 M(.......................................................................................................................248)S
36 254 M(Indexes)S
70.21 254 M( of)S
82.123 254 M( mailing)S
118.489 254 M( lists)S
137.75 254 M(........................................................................................................................248)S
36 240.8 M(Lists)S
57.395 240.8 M( for)S
72.971 240.8 M( related)S
105.652 240.8 M( software)S
146.275 240.8 M( and)S
164.909 240.8 M( topics)S
192.75 240.8 M(....................................................................................................248)S
54 227.6 M(Products)S
92.5 227.6 M( that)S
111.75 227.6 M( include)S
146.884 227.6 M( FreeS/WAN)S
203.75 227.6 M(................................................................................................249)S
54 214.4 M(Linux)S
80.279 214.4 M( mailing)S
116.645 214.4 M( lists)S
135 214.4 M(.........................................................................................................................249)S
54 201.2 M(Lists)S
75.395 201.2 M( for)S
90.971 201.2 M( IETF)S
116.942 201.2 M( working)S
156.355 201.2 M( groups)S
187.25 201.2 M(......................................................................................................249)S
54 188 M(Other)S
79.047 188 M( mailing)S
115.413 188 M( lists)S
135 188 M(.........................................................................................................................249)S
36 174.8 M(Usenet)S
66.547 174.8 M( newsgroups)S
121.25 174.8 M(..............................................................................................................................249)S
/F5 SF 0 148.4 M(Web)S
22 148.4 M( links)S
47 148.4 M(.........................................................................................................................................................250)S
/F4 SF 36 135.2 M(The)S
53.105 135.2 M( Linux)S
82.134 135.2 M( FreeS/WAN)S
139.873 135.2 M( Project)S
173.5 135.2 M(...........................................................................................................250)S
54 122 M(Add-ons)S
94.425 122 M( and)S
113.059 122 M( patches)S
148.798 122 M( for)S
164.374 122 M( FreeS/WAN)S
220.25 122 M(..........................................................................................250)S
54 108.8 M(Distributions)S
111.453 108.8 M( including)S
155.761 108.8 M( FreeS/WAN)S
212 108.8 M(.............................................................................................251)S
54 95.6 M(Things)S
84.558 95.6 M( FreeS/WAN)S
142.297 95.6 M( uses)S
163.989 95.6 M( or)S
175.902 95.6 M( could)S
203.094 95.6 M( use)S
220.25 95.6 M(..........................................................................................251)S
54 82.4 M(Other)S
79.047 82.4 M( approaches)S
131.275 82.4 M( to)S
142.583 82.4 M( VPNs)S
171.612 82.4 M( for)S
187.188 82.4 M( Linux)S
214.75 82.4 M(............................................................................................252)S
36 69.2 M(The)S
53.105 69.2 M( IPsec)S
79.681 69.2 M( Protocols)S
121.25 69.2 M(..............................................................................................................................252)S
54 56 M(General)S
88.815 56 M( IPsec)S
115.391 56 M( or)S
127.304 56 M( VPN)S
152.054 56 M( information)S
206.5 56 M(...............................................................................................252)S
54 42.8 M(IPsec)S
77.826 42.8 M( overview)S
121.507 42.8 M( documents)S
171.92 42.8 M( or)S
183.833 42.8 M( slide)S
207.362 42.8 M( sets)S
225.75 42.8 M(........................................................................................252)S
54 29.6 M(IPsec)S
77.826 29.6 M( information)S
132.518 29.6 M( in)S
143.826 29.6 M( languages)S
190.565 29.6 M( other)S
215.92 29.6 M( than)S
237.612 29.6 M( English)S
272.5 29.6 M(.......................................................................252)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
479.058 0 M(xi)S
GR
SP
%%Page: xii 27
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 159.05 674 M(Table of Contents)S
11 FS/F5 SF 0 650 M(Web)S
22 650 M( links)S
/F4 SF 54 636.8 M(RFCs)S
79.069 636.8 M( and)S
97.703 636.8 M( other)S
123.058 636.8 M( reference)S
166.717 636.8 M( documents)S
214.75 636.8 M(............................................................................................252)S
54 623.6 M(Analysis)S
92.5 623.6 M( and)S
111.134 623.6 M( critiques)S
151.768 623.6 M( of)S
163.681 623.6 M( IPsec)S
190.257 623.6 M( protocols)S
231.25 623.6 M(......................................................................................253)S
54 610.4 M(Background)S
107.768 610.4 M( information)S
162.46 610.4 M( on)S
176.21 610.4 M( IP)S
187.25 610.4 M(......................................................................................................253)S
36 597.2 M(IPsec)S
59.826 597.2 M( Implementations)S
135 597.2 M(.........................................................................................................................253)S
54 584 M(Linux)S
80.279 584 M( products)S
118.5 584 M(...............................................................................................................................253)S
54 570.8 M(IPsec)S
77.826 570.8 M( in)S
89.134 570.8 M( router)S
118.152 570.8 M( products)S
157 570.8 M(.................................................................................................................253)S
54 557.6 M(IPsec)S
77.826 557.6 M( in)S
89.134 557.6 M( firewall)S
126.094 557.6 M( products)S
165.25 557.6 M(..............................................................................................................254)S
54 544.4 M(Operating)S
97.989 544.4 M( systems)S
135.576 544.4 M( with)S
157.884 544.4 M( IPsec)S
184.46 544.4 M( support)S
217.5 544.4 M(...........................................................................................254)S
54 531.2 M(IPsec)S
77.826 531.2 M( on)S
91.576 531.2 M( network)S
130.373 531.2 M( cards)S
154.25 531.2 M(..................................................................................................................254)S
54 518 M(Open)S
77.826 518 M( source)S
109.286 518 M( IPsec)S
135.862 518 M( implementations)S
209.25 518 M(..............................................................................................254)S
54 504.8 M(Interoperability)S
121.25 504.8 M(..............................................................................................................................255)S
36 491.6 M(Linux)S
62.279 491.6 M( links)S
85.5 491.6 M(...........................................................................................................................................255)S
54 478.4 M(Basic)S
78.442 478.4 M( and)S
97.076 478.4 M( tutorial)S
131.605 478.4 M( Linux)S
160.634 478.4 M( information)S
214.75 478.4 M(............................................................................................255)S
54 465.2 M(General)S
88.815 465.2 M( Linux)S
117.844 465.2 M( sites)S
137.75 465.2 M(........................................................................................................................255)S
54 452 M(Documentation)S
121.25 452 M(..............................................................................................................................256)S
54 438.8 M(Advanced)S
98.594 438.8 M( routing)S
132.25 438.8 M(..........................................................................................................................256)S
54 425.6 M(Security)S
90.663 425.6 M( for)S
106.239 425.6 M( Linux)S
135 425.6 M(.........................................................................................................................256)S
54 412.4 M(Linux)S
80.279 412.4 M( firewalls)S
121.25 412.4 M(..............................................................................................................................256)S
54 399.2 M(Miscellaneous)S
117.547 399.2 M( Linux)S
146.576 399.2 M( information)S
201 399.2 M(.................................................................................................257)S
36 386 M(Crypto)S
66.558 386 M( and)S
85.192 386 M( security)S
122.768 386 M( links)S
146 386 M(.....................................................................................................................257)S
54 372.8 M(Crypto)S
84.558 372.8 M( and)S
103.192 372.8 M( security)S
140.768 372.8 M( resources)S
184.5 372.8 M(.......................................................................................................257)S
54 359.6 M(Cryptography)S
115.105 359.6 M( law)S
133.739 359.6 M( and)S
152.373 359.6 M( policy)S
181.75 359.6 M(........................................................................................................258)S
54 346.4 M(Cryptography)S
115.105 346.4 M( technical)S
157.565 346.4 M( information)S
212 346.4 M(.............................................................................................258)S
54 333.2 M(Computer)S
98 333.2 M( and)S
116.634 333.2 M( network)S
155.431 333.2 M( security)S
192.75 333.2 M(....................................................................................................259)S
54 320 M(Links)S
79.058 320 M( to)S
90.366 320 M( home)S
117.558 320 M( pages)S
143.25 320 M(......................................................................................................................260)S
/F5 SF 0 293.6 M(Glossary)S
41.558 293.6 M( for)S
58.355 293.6 M( the)S
75.768 293.6 M( Linux)S
106.645 293.6 M( FreeS/WAN)S
166.826 293.6 M( project)S
201 293.6 M(.................................................................................................261)S
/F4 SF 36 280.4 M(Jump)S
59.837 280.4 M( to)S
71.145 280.4 M( a)S
78.779 280.4 M( letter)S
104.134 280.4 M( in)S
115.442 280.4 M( the)S
131.634 280.4 M( glossary)S
170.75 280.4 M(............................................................................................................261)S
36 267.2 M(Other)S
61.047 267.2 M( glossaries)S
104.75 267.2 M(....................................................................................................................................261)S
36 254 M(Definitions)S
85.5 254 M(...........................................................................................................................................262)S
/F5 SF 0 227.6 M(Bibliography)S
61.743 227.6 M( for)S
78.54 227.6 M( the)S
95.953 227.6 M( Linux)S
126.83 227.6 M( FreeS/WAN)S
187.011 227.6 M( project)S
223 227.6 M(.........................................................................................292)S
0 201.2 M(IPsec)S
25.047 201.2 M( RFCs)S
54.681 201.2 M( and)S
75.163 201.2 M( related)S
110.902 201.2 M( documents)S
162.5 201.2 M(...............................................................................................................297)S
/F4 SF 36 188 M(The)S
53.105 188 M( RFCs.tar.gz)S
108.413 188 M( Distribution)S
164.337 188 M( File)S
181.75 188 M(........................................................................................................297)S
36 174.8 M(Other)S
61.047 174.8 M( sources)S
96.786 174.8 M( for)S
112.362 174.8 M( RFCs)S
140.181 174.8 M( &)S
151.489 174.8 M( Internet)S
188.449 174.8 M( drafts)S
214.75 174.8 M(............................................................................................297)S
54 161.6 M(RFCs)S
77.25 161.6 M(..............................................................................................................................................297)S
54 148.4 M(Internet)S
88.21 148.4 M( Drafts)S
115.75 148.4 M(................................................................................................................................297)S
54 135.2 M(FIPS)S
76.011 135.2 M( standards)S
118.5 135.2 M(...............................................................................................................................297)S
36 122 M(What's)S
66.085 122 M( in)S
77.393 122 M( the)S
93.585 122 M( RFCs.tar.gz)S
148.893 122 M( bundle?)S
184.5 122 M(.......................................................................................................298)S
54 108.8 M(Overview)S
97.373 108.8 M( RFCs)S
124 108.8 M(.............................................................................................................................298)S
54 95.6 M(Basic)S
78.442 95.6 M( protocols)S
121.25 95.6 M(..............................................................................................................................298)S
54 82.4 M(Key)S
72.326 82.4 M( management)S
129.5 82.4 M(...........................................................................................................................298)S
54 69.2 M(Details)S
85.163 69.2 M( of)S
97.076 69.2 M( various)S
132.21 69.2 M( things)S
161.855 69.2 M( used)S
184.5 69.2 M(.......................................................................................................298)S
54 56 M(Older)S
79.047 56 M( RFCs)S
106.866 56 M( which)S
136.5 56 M( may)S
158.192 56 M( be)S
171.326 56 M( referenced)S
220.25 56 M(..........................................................................................298)S
54 42.8 M(RFCs)S
79.069 42.8 M( for)S
94.645 42.8 M( secure)S
125.489 42.8 M( DNS)S
150.239 42.8 M( service,)S
186.891 42.8 M( which)S
216.525 42.8 M( IPsec)S
243.101 42.8 M( may)S
264.793 42.8 M( use)S
280.75 42.8 M(....................................................................298)S
54 29.6 M(RFCs)S
79.069 29.6 M( labelled)S
116.645 29.6 M( "experimental")S
184.5 29.6 M(.......................................................................................................299)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
476.616 0 M(xii)S
GR
SP
%%Page: xiii 28
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 159.05 674 M(Table of Contents)S
11 FS/F5 SF 0 650 M(IPsec)S
25.047 650 M( RFCs)S
54.681 650 M( and)S
75.163 650 M( related)S
110.902 650 M( documents)S
/F4 SF 54 636.8 M(Related)S
87.605 636.8 M( RFCs)S
113 636.8 M(.................................................................................................................................299)S
/F5 SF 0 610.4 M(Distribution)S
57.453 610.4 M( Roadmap:)S
109.703 610.4 M( What's)S
146.069 610.4 M( Where)S
180.587 610.4 M( in)S
192.511 610.4 M( Linux)S
223.388 610.4 M( FreeS/WAN)S
283.5 610.4 M(...................................................................300)S
/F4 SF 36 597.2 M(Top)S
53.721 597.2 M( directory)S
93.75 597.2 M(........................................................................................................................................300)S
36 584 M(Documentation)S
102 584 M(.....................................................................................................................................300)S
36 570.8 M(KLIPS:)S
69.616 570.8 M( kernel)S
99.855 570.8 M( IP)S
112.384 570.8 M( security)S
148.75 570.8 M(....................................................................................................................300)S
36 557.6 M(Pluto)S
59.232 557.6 M( key)S
77.866 557.6 M( and)S
96.5 557.6 M( connection)S
147.518 557.6 M( management)S
206.478 557.6 M( daemon)S
242.25 557.6 M(..................................................................................301)S
36 544.4 M(Utils)S
55.25 544.4 M(......................................................................................................................................................301)S
36 531.2 M(Libraries)S
74.5 531.2 M(...............................................................................................................................................302)S
54 518 M(FreeS/WAN)S
108.989 518 M( Library)S
143.25 518 M(......................................................................................................................302)S
54 504.8 M(Imported)S
94.326 504.8 M( Libraries)S
135 504.8 M(.........................................................................................................................302)S
/F5 SF 0 478.4 M(User-Mode-Linux)S
89.54 478.4 M( Testing)S
127.127 478.4 M( guide)S
154.25 478.4 M(..................................................................................................................303)S
/F4 SF 36 465.2 M(Preliminary)S
87.942 465.2 M( Notes)S
116.355 465.2 M( on)S
130.105 465.2 M( BIND)S
157 465.2 M(.................................................................................................................303)S
36 452 M(Steps)S
59.837 452 M( to)S
71.145 452 M( Install)S
101.395 452 M( UML)S
128.587 452 M( for)S
144.163 452 M( FreeS/WAN)S
201 452 M(.................................................................................................303)S
/F5 SF 0 425.6 M(Debugging)S
50.732 425.6 M( the)S
68.145 425.6 M( kernel)S
100.837 425.6 M( with)S
124.366 425.6 M( GDB)S
148.75 425.6 M(....................................................................................................................306)S
/F4 SF 36 412.4 M(Other)S
61.047 412.4 M( notes)S
87.018 412.4 M( about)S
114.21 412.4 M( debugging)S
162.5 412.4 M(...............................................................................................................306)S
/F5 SF 0 386 M(User-Mode-Linux)S
89.54 386 M( mysteries)S
135 386 M(.........................................................................................................................307)S
0 359.6 M(Getting)S
35.442 359.6 M( more)S
62.623 359.6 M( info)S
83.71 359.6 M( from)S
109.67 359.6 M( uml_netjig)S
162.5 359.6 M(...............................................................................................................308)S
0 333.2 M(How)S
22 333.2 M( to)S
33.913 333.2 M( configure)S
81.268 333.2 M( to)S
93.181 333.2 M( use)S
111.21 333.2 M( "make)S
145.728 333.2 M( check")S
179 333.2 M(.........................................................................................................309)S
/F4 SF 36 320 M(What)S
59.826 320 M( is)S
69.913 320 M( "make)S
100.977 320 M( check")S
132.25 320 M(..........................................................................................................................309)S
36 306.8 M(Running)S
73.895 306.8 M( "make)S
104.959 306.8 M( check")S
137.75 306.8 M(........................................................................................................................309)S
/F5 SF 0 280.4 M(How)S
22 280.4 M( to)S
33.913 280.4 M( write)S
61.094 280.4 M( a)S
69.344 280.4 M( "make)S
103.862 280.4 M( check")S
139.601 280.4 M( test)S
157 280.4 M(.................................................................................................................310)S
/F4 SF 36 267.2 M(Structure)S
76.326 267.2 M( of)S
88.239 267.2 M( a)S
95.873 267.2 M( test)S
113 267.2 M(.................................................................................................................................310)S
36 254 M(The)S
53.105 254 M( TESTLIST)S
104.75 254 M(....................................................................................................................................310)S
36 240.8 M(Test)S
54.942 240.8 M( kinds)S
80 240.8 M(.............................................................................................................................................310)S
36 227.6 M(Common)S
76.953 227.6 M( parameters)S
126.75 227.6 M(............................................................................................................................311)S
36 214.4 M(KLIPStest)S
81.837 214.4 M( paramaters)S
132.25 214.4 M(..........................................................................................................................312)S
36 201.2 M(mkinsttest)S
81.232 201.2 M( paramaters)S
129.5 201.2 M(...........................................................................................................................313)S
36 188 M(rpm_build_install_test)S
135.011 188 M( paramaters)S
184.5 188 M(.......................................................................................................314)S
36 174.8 M(libtest)S
62.895 174.8 M( paramaters)S
113 174.8 M(.................................................................................................................................314)S
36 161.6 M(umlplutotest)S
91.011 161.6 M( paramaters)S
140.5 161.6 M(.......................................................................................................................314)S
36 148.4 M(umlXhost)S
79.395 148.4 M( parameters)S
129.5 148.4 M(...........................................................................................................................314)S
36 135.2 M(kernel_patch_test)S
113.594 135.2 M( paramaters)S
162.5 135.2 M(...............................................................................................................316)S
36 122 M(module_compile)S
109.942 122 M( paramaters)S
159.75 122 M(................................................................................................................316)S
/F5 SF 0 95.6 M(Current)S
38.489 95.6 M( pitfalls)S
71.75 95.6 M(................................................................................................................................................318)S
0 69.2 M(Nightly)S
34.837 69.2 M( regression)S
85.855 69.2 M( testing)S
118.5 69.2 M(...............................................................................................................................319)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
474.174 0 M(xiii)S
GR
SP
%%Page: xiv 29
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 159.05 674 M(Table of Contents)S
11 FS/F5 SF 0 650 M(How)S
22 650 M( to)S
33.913 650 M( setup)S
61.721 650 M( the)S
79.134 650 M( nightly)S
114.895 650 M( build)S
140.5 650 M(.......................................................................................................................320)S
/F4 SF 36 636.8 M( Files)S
60.145 636.8 M( you)S
79.395 636.8 M( need)S
102.913 636.8 M( to)S
114.221 636.8 M( know)S
141.413 636.8 M( about)S
168 636.8 M(.............................................................................................................320)S
36 623.6 M(Configuring)S
89.779 623.6 M( freeswan-regress-env.sh)S
203.75 623.6 M(................................................................................................320)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
473.558 0 M(xiv)S
GR
SP
%%Page: 1 30
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(Introduction)S
11 FS/F4 SF 0 649.8 M(This section gives an overview of:)S
36 623.4 M(what IP Security \(IPsec\) does)S
/Fc SF 28.19 623.4 M(\267 )S
/F4 SF 36 610.2 M(how IPsec works)S
/Fc SF 28.19 610.2 M(\267 )S
/F4 SF 36 597 M(why we are implementing it for Linux)S
/Fc SF 28.19 597 M(\267 )S
/F4 SF 36 583.8 M(how this implementation works)S
/Fc SF 28.19 583.8 M(\267 )S
/F4 SF 0 557.4 M(This section is intended to cover only the essentials,)S
/F6 SF ( things you should know before trying to use FreeS/WAN.)S
/F4 SF 0 531 M(For more detailed background information, see the history and politics and IPsec protocols sections.)S
17 FS/F9 SF 0 498.6 M(IPsec, Security for the Internet Protocol)S
11 FS/F4 SF 0 471 M(FreeS/WAN is a Linux implementation of the IPsec \(IP security\) protocols. IPsec provides encryption and)S
0 457.8 M(authentication services at the IP \(Internet Protocol\) level of the network protocol stack.)S
0 431.4 M(Working at this level, IPsec can protect any traffic carried over IP, unlike other encryption which generally)S
0 418.2 M(protects only a particular higher-level protocol -- PGP for mail, SSH for remote login, SSL for web work,)S
0 405 M(and so on. This approach has both considerable advantages and some limitations. For discussion, see our)S
0 391.8 M(IPsec section)S
0 365.4 M(IPsec can be used on any machine which does IP networking. Dedicated IPsec gateway machines can be)S
0 352.2 M(installed wherever required to protect traffic. IPsec can also run on routers, on firewall machines, on various)S
0 339 M(application servers, and on end-user desktop or laptop machines.)S
0 312.6 M(Three protocols are used)S
36 286.2 M(AH \(Authentication Header\) provides a packet-level authentication service)S
/Fc SF 28.19 286.2 M(\267 )S
/F4 SF 36 273 M(ESP \(Encapsulating Security Payload\) provides encryption plus authentication)S
/Fc SF 28.19 273 M(\267 )S
/F4 SF 36 259.8 M(IKE \(Internet Key Exchange\) negotiates connection parameters, including keys, for the other two)S
/Fc SF 28.19 259.8 M(\267 )S
/F4 SF 0 233.4 M(Our implementation has three main parts:)S
36 207 M(KLIPS \(kernel IPsec\) implements AH, ESP, and packet handling within the kernel)S
/Fc SF 28.19 207 M(\267 )S
/F4 SF 36 193.8 M(Pluto \(an IKE daemon\) implements IKE, negotiating connections with other systems)S
/Fc SF 28.19 193.8 M(\267 )S
/F4 SF 36 180.6 M(various scripts provide an adminstrator's interface to the machinery)S
/Fc SF 28.19 180.6 M(\267 )S
/F4 SF 0 154.2 M(IPsec is optional for the current \(version 4\) Internet Protocol. FreeS/WAN adds IPsec to the Linux IPv4)S
0 141 M(network stack. Implementations of IP version 6 are required to include IPsec. Work toward integrating)S
0 127.8 M(FreeS/WAN into the Linux IPv6 stack has started.)S
0 101.4 M(For more information on IPsec, see our IPsec protocols section, our collection of IPsec links or the RFCs)S
0 88.2 M(which are the official definitions of these protocols.)S
/F8 SF 0 0 M(Introduction)S
480.884 0 M(1)S
GR
SP
%%Page: 2 31
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(Interoperating with other IPsec implementations)S
11 FS/F4 SF 0 657 M(IPsec is designed to let different implementations work together. We provide:)S
36 630.6 M(a list of some other implementations)S
/Fc SF 28.19 630.6 M(\267 )S
/F4 SF 36 617.4 M(information on using FreeS/WAN with other implementations)S
/Fc SF 28.19 617.4 M(\267 )S
/F4 SF 0 591 M(The VPN Consortium fosters cooperation among implementers and interoperability among implementations.)S
0 577.8 M(Their web site has much more information.)S
14 FS/F9 SF 0 548.4 M(Advantages of IPsec)S
11 FS/F4 SF 0 521.4 M(IPsec has a number of security advantages. Here are some independently written articles which discuss these:)S
0 495 M(SANS institute papers. See the section on Encryption &VPNs.)S
0 481.8 M(Cisco's white papers on "Networking Solutions".)S
0 468.6 M(Advantages of ISCS \(Linux Integrated Secure Communications System; includes FreeS/WAN and other)S
0 455.4 M(software\).)S
14 FS/F9 SF 0 426 M(Applications of IPsec)S
11 FS/F4 SF 0 399 M(Because IPsec operates at the network layer, it is remarkably flexible and can be used to secure nearly any)S
0 385.8 M(type of Internet traffic. Two applications, however, are extremely widespread:)S
36 359.4 M(a Virtual Private Network, or VPN, allows multiple sites to communicate securely over an insecure)S
36 346.2 M(Internet by encrypting all communication between the sites.)S
/Fc SF 28.19 359.4 M(\267 )S
/F4 SF 36 333 M("Road Warriors" connect to the office from home, or perhaps from a hotel somewhere)S
/Fc SF 28.19 333 M(\267 )S
/F4 SF 0 306.6 M(There is enough opportunity in these applications that vendors are flocking to them. IPsec is being built into)S
0 293.4 M(routers, into firewall products, and into major operating systems, primarily to support these applications. See)S
0 280.2 M(our list of implementations for details.)S
0 253.8 M(We support both of those applications, and various less common IPsec applications as well, but we also add)S
0 240.6 M(one of our own:)S
36 214.2 M(opportunistic encryption, the ability to set up FreeS/WAN gateways so that any two of them can)S
36 201 M(encrypt to each other, and will do so whenever packets pass between them.)S
/Fc SF 28.19 214.2 M(\267 )S
/F4 SF 0 174.6 M(This is an extension we are adding to the protocols. FreeS/WAN is the first prototype implementation, though)S
0 161.4 M(we hope other IPsec implementations will adopt the technique once we demonstrate it. See project goals)S
0 148.2 M(below for why we think this is important.)S
0 121.8 M(A somewhat more detailed description of each of these applications is below. Our quickstart section will show)S
0 108.6 M(you how to build each of them.)S
/F9 SF 0 82.2 M(Using secure tunnels to create a VPN)S
/F4 SF 0 55.8 M(A VPN, or)S
/F7 SF ( V)S
/F4 SF (irtual)S
/F7 SF ( P)S
/F4 SF (rivate)S
/F7 SF ( N)S
/F4 SF (etwork lets two networks communicate securely when the only connection)S
0 42.6 M(between them is over a third network which they do not trust.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Interoperating with other IPsec implementations)S
480.884 0 M(2)S
GR
SP
%%Page: 3 32
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(The method is to put a security gateway machine between each of the communicating networks and the)S
0 673.8 M(untrusted network. The gateway machines encrypt packets entering the untrusted net and decrypt packets)S
0 660.6 M(leaving it, creating a secure tunnel through it.)S
0 634.2 M(If the cryptography is strong, the implementation is careful, and the administration of the gateways is)S
0 621 M(competent, then one can reasonably trust the security of the tunnel. The two networks then behave like a)S
0 607.8 M(single large private network, some of whose links are encrypted tunnels through untrusted nets.)S
0 581.4 M(Actual VPNs are often more complex. One organisation may have fifty branch offices, plus some suppliers)S
0 568.2 M(and clients, with whom it needs to communicate securely. Another might have 5,000 stores, or 50,000)S
0 555 M(point-of-sale devices. The untrusted network need not be the Internet. All the same issues arise on a)S
0 541.8 M(corporate or institutional network whenever two departments want to communicate privately with each other.)S
0 515.4 M(Administratively, the nice thing about many VPN setups is that large parts of them are static. You know the IP)S
0 502.2 M(addresses of most of the machines involved. More important, you know they will not change on you. This)S
0 489 M(simplifies some of the admin work. For cases where the addresses do change, see the next section.)S
/F9 SF 0 462.6 M(Road Warriors)S
/F4 SF 0 436.2 M(The prototypical "Road Warrior" is a traveller connecting to home base from a laptop machine.)S
0 423 M(Administratively, most of the same problems arise for a telecommuter connecting from home to the office,)S
0 409.8 M(especially if the telecommuter does not have a static IP address.)S
0 383.4 M(For purposes of this document:)S
36 357 M(anyone with a dynamic IP address is a "Road Warrior".)S
/Fc SF 28.19 357 M(\267 )S
/F4 SF 36 343.8 M(any machine doing IPsec processing is a "gateway". Think of the single-user road warrior machine as)S
36 330.6 M(a gateway with a degenerate subnet \(one machine, itself\) behind it.)S
/Fc SF 28.19 343.8 M(\267 )S
/F4 SF 0 304.2 M(These require somewhat different setup than VPN gateways with static addresses and with client systems)S
0 291 M(behind them, but are basically not problematic.)S
0 264.6 M(There are some difficulties which appear for some road warrior connections:)S
36 238.2 M(Road Wariors who get their addresses via DHCP may have a problem. FreeS/WAN can quite happily)S
36 225 M(build and use a tunnel to such an address, but when the DHCP lease expires, FreeS/WAN does not)S
36 211.8 M(know that. The tunnel fails, and the only recovery method is to tear it down and re-build it.)S
/Fc SF 28.19 238.2 M(\267 )S
/F4 SF 36 198.6 M(If Network Address Translation \(NAT\) is applied between the two IPsec Gateways, this breaks IPsec.)S
36 185.4 M(IPsec authenticates packets on an end-to-end basis, to ensure they are not altered en route. NAT)S
36 172.2 M(rewrites packets as they go by. See our firewalls document for details.)S
/Fc SF 28.19 198.6 M(\267 )S
/F4 SF 0 145.8 M(In most situations, however, FreeS/WAN supports road warrior connections just fine.)S
/F9 SF 0 119.4 M(Opportunistic encryption)S
/F4 SF 0 93 M(One of the reasons we are working on FreeS/WAN is that it gives us the opportunity to add what we call)S
0 79.8 M(opportuntistic encryption. This means that any two FreeS/WAN gateways will be able to encrypt their traffic,)S
0 66.6 M(even if the two gateway administrators have had no prior contact and neither system has any preset)S
0 53.4 M(information about the other.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Applications of IPsec)S
480.884 0 M(3)S
GR
SP
%%Page: 4 33
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(Both systems pick up the authentication information they need from the DNS \(domain name service\), the)S
0 673.8 M(service they already use to look up IP addresses. Of course the administrators must put that information in the)S
0 660.6 M(DNS, and must set up their gateways with opportunistic encryption enabled. Once that is done, everything is)S
0 647.4 M(automatic. The gateways look for opportunities to encrypt, and encrypt whatever they can. Whether they also)S
0 634.2 M(accept unencrypted communication is a policy decision the administrator can make.)S
0 607.8 M(This technique can give two large payoffs:)S
36 581.4 M(It reduces the administrative overhead for IPsec enormously. You configure your gateway and)S
36 568.2 M(thereafter everything is automatic. The need to configure the system on a per-tunnel basis disappears.)S
36 555 M(Of course, FreeS/WAN allows specifically configured tunnels to co-exist with opportunistic)S
36 541.8 M(encryption, but we hope to make them unnecessary in most cases.)S
/Fc SF 28.19 581.4 M(\267 )S
/F4 SF 36 528.6 M(It moves us toward a more secure Internet, allowing users to create an environment where message)S
36 515.4 M(privacy is the default. All messages can be encrypted, provided the other end is willing to co-operate.)S
36 502.2 M(See our history and politics of cryptography section for discussion of why we think this is needed.)S
/Fc SF 28.19 528.6 M(\267 )S
/F4 SF 0 475.8 M(Opportunistic encryption is not \(yet?\) a standard part of the IPsec protocols, but an extension we are)S
0 462.6 M(proposing and demonstrating. For details of our design, see links below.)S
0 436.2 M(Only one current product we know of implements a form of opportunistic encryption. Secure sendmail will)S
0 423 M(automatically encrypt server-to-server mail transfers whenever possible.)S
14 FS/F9 SF 0 393.6 M(The need to authenticate gateways)S
11 FS/F4 SF 0 366.6 M(A complication, which applies to any type of connection -- VPN, Road Warrior or opportunistic -- is that a)S
0 353.4 M(secure connection cannot be created magically.)S
/F6 SF ( There must be some mechanism which enables the gateways to)S
0 340.2 M(reliably identify each other.)S
/F4 SF ( Without this, they cannot sensibly trust each other and cannot create a genuinely)S
0 327 M(secure link.)S
0 300.6 M(Any link they do create without some form of authentication will be vulnerable to a man-in-the-middle)S
0 287.4 M(attack. If Alice and Bob are the people creating the connection, a villian who can re-route or intercept the)S
0 274.2 M(packets can pose as Alice while talking to Bob and pose as Bob while talking to Alice. Alice and Bob then)S
0 261 M(both talk to the man in the middle, thinking they are talking to each other, and the villain gets everything sent)S
0 247.8 M(on the bogus "secure" connection.)S
0 221.4 M(There are two ways to build links securely, both of which exclude the man-in-the middle:)S
36 195 M(with)S
/F7 SF ( manual keying)S
/F4 SF (, Alice and Bob share a secret key \(which must be transmitted securely, perhaps)S
36 181.8 M(in a note or via PGP or SSH\) to encrypt their messages. For FreeS/WAN, such keys are stored in the)S
36 168.6 M(ipsec.conf\(5\) file. Of course, if an enemy gets the key, all is lost.)S
/Fc SF 28.19 195 M(\267 )S
/F4 SF 36 155.4 M(with)S
/F7 SF ( automatic keying)S
/F4 SF (, the two systems authenticate each other and negotiate their own secret keys.)S
36 142.2 M(The keys are automatically changed periodically.)S
/Fc SF 28.19 155.4 M(\267 )S
/F4 SF 0 115.8 M(Automatic keying is much more secure, since if an enemy gets one key only messages between the previous)S
0 102.6 M(re-keying and the next are exposed. It is therefore the usual mode of operation for most IPsec deployment,)S
0 89.4 M(and the mode we use in our setup examples. FreeS/WAN does support manual keying for special)S
0 76.2 M(circumstanes. See this section.)S
0 49.8 M(For automatic keying, the two systems must authenticate each other during the negotiations. There is a choice)S
0 36.6 M(of methods for this:)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(The need to authenticate gateways)S
480.884 0 M(4)S
GR
SP
%%Page: 5 34
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(a)S
/F7 SF ( shared secret)S
/F4 SF ( provides authentication. If Alice and Bob are the only ones who know a secret and)S
36 673.8 M(Alice recives a message which could not have been created without that secret, then Alice can safely)S
36 660.6 M(believe the message came from Bob.)S
/Fc SF 28.19 687 M(\267 )S
/F4 SF 36 647.4 M(a public key can also provide authentication. If Alice receives a message signed with Bob's private)S
36 634.2 M(key \(which of course only he should know\) and she has a trustworthy copy of his public key \(so that)S
36 621 M(she can verify the signature\), then she can safely believe the message came from Bob.)S
/Fc SF 28.19 647.4 M(\267 )S
/F4 SF 0 594.6 M(Public key techniques are much preferable, for reasons discussed later, and will be used in all our setup)S
0 581.4 M(examples. FreeS/WAN does also support auto-keying with shared secret authentication. See this section.)S
17 FS/F9 SF 0 549 M(The FreeS/WAN project)S
11 FS/F4 SF 0 521.4 M(For complete information on the project, see our web site, freeswan.org.)S
0 495 M(In summary, we are implementing the IPsec protocols for Linux and extending them to do opportunistic)S
0 481.8 M(encryption.)S
14 FS/F9 SF 0 452.4 M(Project goals)S
11 FS/F4 SF 0 425.4 M(Our overall goal in FreeS/WAN is to make the Internet more secure and more private.)S
0 399 M(Our IPsec implementation supports VPNs and Road Warriors of course. Those are important applications.)S
0 385.8 M(Many users will want FreeS/WAN to build corporate VPNs or to provide secure remote access.)S
0 359.4 M(However, our goals in building it go beyond that. We are trying to help)S
/F7 SF ( build security into the fabric of the)S
0 346.2 M(Internet)S
/F4 SF ( so that anyone who choses to communicate securely can do so, as easily as they can do anything else)S
0 333 M(on the net.)S
0 306.6 M(More detailed objectives are:)S
36 280.2 M(extend IPsec to do opportunistic encryption so that)S
72 267 M(any two systems can secure their communications without a pre-arranged connection)S
/Fc SF 60.967 267 M(\250 )S
/F7 SF 72 253.8 M(secure connections can be the default)S
/F4 SF (, falling back to unencrypted connections only if:)S
/F6 SF 108 240.6 M(both)S
/F4 SF ( the partner is not set up to co-operate on securing the connection)S
/Fc SF 99.816 240.6 M(\340 )S
/F6 SF 108 227.4 M(and)S
/F4 SF ( your policy allows insecure connections)S
/Fc SF 99.816 227.4 M(\340 )S
60.967 253.8 M(\250 )S
/F4 SF 72 214.2 M(a significant fraction of all Internet traffic is encrypted)S
/Fc SF 60.967 214.2 M(\250 )S
/F4 SF 72 201 M(wholesale monitoring of the net \(examples\) becomes difficult or impossible)S
/Fc SF 60.967 201 M(\250 )S
28.19 280.2 M(\267 )S
/F4 SF 36 187.8 M(help make IPsec widespread by providing an implementation with no restrictions:)S
72 174.6 M(freely available in source code under the GNU General Public License)S
/Fc SF 60.967 174.6 M(\250 )S
/F4 SF 72 161.4 M(running on a range of readily available hardware)S
/Fc SF 60.967 161.4 M(\250 )S
/F4 SF 72 148.2 M(not subject to US or other nations' export restrictions.)S
72 135 M(Note that in order to avoid)S
/F6 SF ( even the appearance)S
/F4 SF ( of being subject to those laws, the project)S
72 121.8 M(cannot accept software contributions --)S
/F6 SF ( not even one-line bug fixes)S
/F4 SF ( -- from US residents or)S
72 108.6 M(citizens.)S
/Fc SF 60.967 148.2 M(\250 )S
28.19 187.8 M(\267 )S
/F4 SF 36 95.4 M(provide a high-quality IPsec implementation for Linux)S
72 82.2 M(portable to all CPUs Linux supports: \(current list\))S
/Fc SF 60.967 82.2 M(\250 )S
/F4 SF 72 69 M(interoperable with other IPsec implementations: \(current list\))S
/Fc SF 60.967 69 M(\250 )S
28.19 95.4 M(\267 )S
/F4 SF 0 42.6 M(If we can get opportunistic encryption implemented and widely deployed, then it becomes impossible for even)S
0 29.4 M(huge well-funded agencies to monitor the net.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(The FreeS/WAN project)S
480.884 0 M(5)S
GR
SP
%%Page: 6 35
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(See also our section on history and politics of cryptography, which includes our project leader's rationale for)S
0 673.8 M(starting the project.)S
14 FS/F9 SF 0 644.4 M(Project team)S
11 FS/F4 SF 0 617.4 M(Two of the team are from the US and can therefore contribute no code:)S
36 591 M(John Gilmore: founder and policy-maker \(home page\))S
/Fc SF 28.19 591 M(\267 )S
/F4 SF 36 577.8 M(Hugh Daniel: project manager, Most Demented Tester, and occasionally Pointy-Haired Boss)S
/Fc SF 28.19 577.8 M(\267 )S
/F4 SF 0 551.4 M(The rest of the team are Canadians, working in Canada. \(Why Canada?\))S
36 525 M(Hugh Redelmeier: Pluto daemon programmer)S
/Fc SF 28.19 525 M(\267 )S
/F4 SF 36 511.8 M(Richard Guy Briggs: KLIPS programmer)S
/Fc SF 28.19 511.8 M(\267 )S
/F4 SF 36 498.6 M(Michael Richardson: hacker without portfolio)S
/Fc SF 28.19 498.6 M(\267 )S
/F4 SF 36 485.4 M(Claudia Schmeing: documentation)S
/Fc SF 28.19 485.4 M(\267 )S
/F4 SF 36 472.2 M(Sam Sgro: technical support via the mailing lists)S
/Fc SF 28.19 472.2 M(\267 )S
/F4 SF 0 445.8 M(The project is funded by civil libertarians who consider our goals worthwhile. Most of the team are paid for)S
0 432.6 M(this work.)S
0 406.2 M(People outside this core team have made substantial contributions. See)S
36 379.8 M(our CREDITS file)S
/Fc SF 28.19 379.8 M(\267 )S
/F4 SF 36 366.6 M(the patches and add-ons section of our web references file)S
/Fc SF 28.19 366.6 M(\267 )S
/F4 SF 36 353.4 M(lists below of user-written HowTos and other papers)S
/Fc SF 28.19 353.4 M(\267 )S
/F4 SF 0 327 M(Additional contributions are welcome. See the FAQ for details.)S
17 FS/F9 SF 0 294.6 M(Products containing FreeS/WAN)S
11 FS/F4 SF 0 267 M(Unfortunately the export laws of some countries restrict the distribution of strong cryptography. FreeS/WAN)S
0 253.8 M(is therefore not in the standard Linux kernel and not in all CD or web distributions.)S
0 227.4 M(FreeS/WAN is, however, quite widely used. Products we know of that use it are listed below. We would)S
0 214.2 M(appreciate hearing, via the mailing lists, of any we don't know of.)S
14 FS/F9 SF 0 184.8 M(Full Linux distributions)S
11 FS/F4 SF 0 157.8 M(FreeS/WAN is included in various general-purpose Linux distributions, mostly from countries \(shown in)S
0 144.6 M(brackets\) with more sensible laws:)S
36 118.2 M(SuSE Linux \(Germany\))S
/Fc SF 28.19 118.2 M(\267 )S
/F4 SF 36 105 M(Conectiva \(Brazil\))S
/Fc SF 28.19 105 M(\267 )S
/F4 SF 36 91.8 M(Mandrake \(France\))S
/Fc SF 28.19 91.8 M(\267 )S
/F4 SF 36 78.6 M(Debian)S
/Fc SF 28.19 78.6 M(\267 )S
/F4 SF 36 65.4 M(the Polish\(ed\) Linux Distribution \(Poland\))S
/Fc SF 28.19 65.4 M(\267 )S
/F4 SF 36 52.2 M(Best Linux \(Finland\))S
/Fc SF 28.19 52.2 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Project team)S
480.884 0 M(6)S
GR
SP
%%Page: 7 36
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(For distributions which do not include FreeS/WAN and are not Redhat \(which we develop and test on\), there)S
0 673.8 M(is additional information in our compatibility section.)S
0 647.4 M(The server edition of Corel Linux \(Canada\) also had FreeS/WAN, but Corel have dropped that product line.)S
14 FS/F9 SF 0 618 M(Linux kernel distributions)S
11 FS/F4 SF 36 591 M(Working Overloaded Linux Kernel \(WOLK\))S
/Fc SF 28.19 591 M(\267 )S
14 FS/F9 SF 0 561.6 M(Office server distributions)S
11 FS/F4 SF 0 534.6 M(FreeS/WAN is also included in several distributions aimed at the market for turnkey business servers:)S
36 508.2 M(e-Smith \(Canada\), which has recently been acquired and become the Network Server Solutions group)S
36 495 M(of Mitel Networks \(Canada\))S
/Fc SF 28.19 508.2 M(\267 )S
/F4 SF 36 481.8 M(ClarkConnect from Point Clark Networks \(Canada\))S
/Fc SF 28.19 481.8 M(\267 )S
/F4 SF 36 468.6 M(Trustix Secure Linux \(Norway\))S
/Fc SF 28.19 468.6 M(\267 )S
14 FS/F9 SF 0 439.2 M(Firewall distributions)S
11 FS/F4 SF 0 412.2 M(Several distributions intended for firewall and router applications include FreeS/WAN:)S
36 385.8 M(The Linux Router Project produces a Linux distribution that will boot from a single floppy. The)S
36 372.6 M(LEAF firewall project provides several different LRP-based firewall packages. At least one of them,)S
36 359.4 M(Charles Steinkuehler's Dachstein, includes FreeS/WAN with X.509 patches.)S
/Fc SF 28.19 385.8 M(\267 )S
/F4 SF 36 346.2 M(there are several distributions bootable directly from CD-ROM, usable on a machine without hard)S
36 333 M(disk.)S
72 319.8 M(Dachstein \(see above\) can be used this way)S
/Fc SF 60.967 319.8 M(\250 )S
/F4 SF 72 306.6 M(Gibraltar is based on Debian GNU/Linux.)S
/Fc SF 60.967 306.6 M(\250 )S
/F4 SF 72 293.4 M(at time of writing, Xiloo is available only in Chinese. An English version is expected.)S
/Fc SF 60.967 293.4 M(\250 )S
28.19 346.2 M(\267 )S
/F4 SF 36 280.2 M(Astaro Security Linux includes FreeS/WAN. It has some web-based tools for managing the firewall)S
36 267 M(that include FreeS/WAN configuration management.)S
/Fc SF 28.19 280.2 M(\267 )S
/F4 SF 36 253.8 M(Linuxwall)S
/Fc SF 28.19 253.8 M(\267 )S
/F4 SF 36 240.6 M(Smoothwall)S
/Fc SF 28.19 240.6 M(\267 )S
/F4 SF 36 227.4 M(Devil Linux)S
/Fc SF 28.19 227.4 M(\267 )S
/F4 SF 36 214.2 M(Coyote Linux has a Wolverine firewall/VPN server)S
/Fc SF 28.19 214.2 M(\267 )S
/F4 SF 0 187.8 M(There are also several sets of scripts available for managing a firewall which is also acting as a FreeS/WAN)S
0 174.6 M(IPsec gateway. See this list.)S
14 FS/F9 SF 0 145.2 M(Firewall and VPN products)S
11 FS/F4 SF 0 118.2 M(Several vendors use FreeS/WAN as the IPsec component of a turnkey firewall or VPN product.)S
0 91.8 M(Software-only products:)S
36 65.4 M(Linux Magic offer a VPN/Firewall product using FreeS/WAN)S
/Fc SF 28.19 65.4 M(\267 )S
/F4 SF 36 52.2 M(The Software Group's Sentinet product uses FreeS/WAN)S
/Fc SF 28.19 52.2 M(\267 )S
/F4 SF 36 39 M(Merilus use FreeS/WAN in their Gateway Guardian firewall product)S
/Fc SF 28.19 39 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Linux kernel distributions)S
480.884 0 M(7)S
GR
SP
%%Page: 8 37
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(Products that include the hardware:)S
36 660.6 M(The LASAT SafePipe[tm] series. is an IPsec box based on an embedded MIPS running Linux with)S
36 647.4 M(FreeS/WAN and a web-config front end. This company also host our freeswan.org web site.)S
/Fc SF 28.19 660.6 M(\267 )S
/F4 SF 36 634.2 M(Merilus Firecard is a Linux firewall on a PCI card.)S
/Fc SF 28.19 634.2 M(\267 )S
/F4 SF 36 621 M(Kyzo have a "pizza box" product line with various types of server, all running from flash. One of)S
36 607.8 M(them is an IPsec/PPTP VPN server)S
/Fc SF 28.19 621 M(\267 )S
/F4 SF 36 594.6 M(PFN use FreeS/WAN in some of their products)S
/Fc SF 28.19 594.6 M(\267 )S
/F4 SF 0 568.2 M(Rebel.com, makers of the Netwinder Linux machines \(ARM or Crusoe based\), had a product that used)S
0 555 M(FreeS/WAN. The company is in receivership so the future of the Netwinder is at best unclear. PKIX patches)S
0 541.8 M(for FreeS/WAN developed at Rebel are listed in our web links document.)S
17 FS/F9 SF 0 509.4 M(Information sources)S
14 FS/F9 SF 0 478.8 M(This HowTo, in multiple formats)S
11 FS/F4 SF 0 451.8 M(FreeS/WAN documentation up to version 1.5 was available only in HTML. Now we ship two formats:)S
36 425.4 M(as HTML, one file for each doc section plus a global Table of Contents)S
/Fc SF 28.19 425.4 M(\267 )S
/F4 SF 36 412.2 M(one big HTML file for easy searching)S
/Fc SF 28.19 412.2 M(\267 )S
/F4 SF 0 385.8 M(and provide a Makefile to generate other formats if required:)S
36 359.4 M(PDF)S
/Fc SF 28.19 359.4 M(\267 )S
/F4 SF 36 346.2 M(Postscript)S
/Fc SF 28.19 346.2 M(\267 )S
/F4 SF 36 333 M(ASCII text)S
/Fc SF 28.19 333 M(\267 )S
/F4 SF 0 306.6 M(The Makefile assumes the htmldoc tool is available. You can download it from Easy Software.)S
0 280.2 M(All formats should be available at the following websites:)S
36 253.8 M(FreeS/WAN project)S
/Fc SF 28.19 253.8 M(\267 )S
/F4 SF 36 240.6 M(Linux Documentation Project)S
/Fc SF 28.19 240.6 M(\267 )S
/F4 SF 0 214.2 M(The distribution tarball has only the two HTML formats.)S
/F7 SF 0 187.8 M(Note:)S
/F4 SF ( If you need the latest doc version, for example to see if anyone has managed to set up interoperation)S
0 174.6 M(between FreeS/WAN and whatever, then you should download the current snapshot. What is on the web is)S
0 161.4 M(documentation as of the last release. Snapshots have all changes I've checked in to date.)S
14 FS/F9 SF 0 132 M(RTFM \(please Read The Fine Manuals\))S
11 FS/F4 SF 0 105 M(As with most things on any Unix-like system, most parts of Linux FreeS/WAN are documented in online)S
0 91.8 M(manual pages. We provide a list of FreeS/WAN man pages, with links to HTML versions of them.)S
0 65.4 M(The man pages describing configuration files are:)S
36 39 M(ipsec.conf\(5\))S
/Fc SF 28.19 39 M(\267 )S
/F4 SF 36 25.8 M(ipsec.secrets\(5\))S
/Fc SF 28.19 25.8 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Information sources)S
480.884 0 M(8)S
GR
SP
%%Page: 9 38
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(Man pages for common commands include:)S
36 660.6 M(ipsec\(8\))S
/Fc SF 28.19 660.6 M(\267 )S
/F4 SF 36 647.4 M(ipsec_pluto\(8\))S
/Fc SF 28.19 647.4 M(\267 )S
/F4 SF 36 634.2 M(ipsec_newhostkey\(8\))S
/Fc SF 28.19 634.2 M(\267 )S
/F4 SF 36 621 M(ipsec_auto\(8\))S
/Fc SF 28.19 621 M(\267 )S
/F4 SF 0 594.6 M(You can read these either in HTML using the links above or with the)S
/Fa SF ( man\(1\))S
/F4 SF ( command.)S
0 568.2 M(In the event of disagreement between this HTML documentation and the man pages, the man pages are more)S
0 555 M(likely correct since they are written by the implementers. Please report any such inconsistency on the mailing)S
0 541.8 M(list.)S
14 FS/F9 SF 0 512.4 M(Other documents in the distribution)S
11 FS/F4 SF 0 485.4 M(Text files in the main distribution directory are README, INSTALL, CREDITS, CHANGES, BUGS and)S
0 472.2 M(COPYING.)S
0 445.8 M(The Libdes encryption library we use has its own documentation. You can find it in the library directory..)S
14 FS/F9 SF 0 416.4 M(Background material)S
11 FS/F4 SF 0 389.4 M(Throughout this documentation, I write as if the reader had at least a general familiarity with Linux, with)S
0 376.2 M(Internet Protocol networking, and with the basic ideas of system and network security. Of course that will)S
0 363 M(certainly not be true for all readers, and quite likely not even for a majority.)S
0 336.6 M(However, I must limit amount of detail on these topics in the main text. For one thing, I don't understand all)S
0 323.4 M(the details of those topics myself. Even if I did, trying to explain everything here would produce extremely)S
0 310.2 M(long and almost completely unreadable documentation.)S
0 283.8 M(If one or more of those areas is unknown territory for you, there are plenty of other resources you could look)S
0 270.6 M(at:)S
/F6 SF 0 244.2 M(Linux)S
/F4 SF 36 231 M(the Linux Documentation Project or a local Linux User Group and these links)S
/F6 SF 0 217.8 M(IP networks)S
/F4 SF 36 204.6 M(Rusty Russell's Networking Concepts HowTo and these links)S
/F6 SF 0 191.4 M(Security)S
/F4 SF 36 178.2 M(Schneier's book Secrets and Lies and these links)S
0 151.8 M(Also, I do make an effort to provide some background material in these documents. All the basic ideas behind)S
0 138.6 M(IPsec and FreeS/WAN are explained here. Explanations that do not fit in the main text, or that not everyone)S
0 125.4 M(will need, are often in the glossary, which is the largest single file in this document set. There is also a)S
0 112.2 M(background file containing various explanations too long to fit in glossary definitions. All files are heavily)S
0 99 M(sprinkled with links to each other and to the glossary.)S
/F7 SF ( If some passage makes no sense to you, try the links)S
/F4 SF (.)S
0 72.6 M(For other reference material, see the bibliography and our collection of web links.)S
0 46.2 M(Of course, no doubt I get this \(and other things\) wrong sometimes. Feedback via the mailing lists is welcome.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Other documents in the distribution)S
480.884 0 M(9)S
GR
SP
%%Page: 10 39
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(Archives of the project mailing list)S
11 FS/F4 SF 0 657 M(Until quite recently, there was only one FreeS/WAN mailing list, and archives of it were:)S
36 630.6 M(Canada)S
/Fc SF 28.19 630.6 M(\267 )S
/F4 SF 36 617.4 M(Holland)S
/Fc SF 28.19 617.4 M(\267 )S
/F4 SF 0 591 M(The two archives use completely different search engines. You might want to try both.)S
0 564.6 M(More recently we have expanded to five lists, each with its own archive.)S
0 538.2 M(More information on mailing lists.)S
14 FS/F9 SF 0 508.8 M(User-written HowTo information)S
11 FS/F4 SF 0 481.8 M(Various user-written HowTo documents are available. The ones covering FreeS/WAN-to-FreeS/WAN)S
0 468.6 M(connections are:)S
36 442.2 M(Jean-Francois Nadeau's practical configurations document)S
/Fc SF 28.19 442.2 M(\267 )S
/F4 SF 36 429 M(Jens Zerbst's HowTo on Using FreeS/WAN with dynamic IP addresses.)S
/Fc SF 28.19 429 M(\267 )S
/F4 SF 36 415.8 M(an entry in Kurt Seifried's Linux Security Knowledge Base.)S
/Fc SF 28.19 415.8 M(\267 )S
/F4 SF 36 402.6 M(a section of David Ranch's Trinity OS Guide)S
/Fc SF 28.19 402.6 M(\267 )S
/F4 SF 36 389.4 M(a section in David Bander's book Linux Security Toolkit)S
/Fc SF 28.19 389.4 M(\267 )S
/F4 SF 0 363 M(User-wriiten HowTo material may be)S
/F7 SF ( especially helpful if you need to interoperate with another IPsec)S
0 349.8 M(implementation)S
/F4 SF (. We have neither the equipment nor the manpower to test such configurations. Users seem to)S
0 336.6 M(be doing an admirable job of filling the gaps.)S
36 310.2 M(list of user-written interoperation HowTos in our interop document)S
/Fc SF 28.19 310.2 M(\267 )S
/F4 SF 0 283.8 M(Check what version of FreeS/WAN user-written documents cover. The software is under active development)S
0 270.6 M(and the current version may be significantly different from what an older document describes.)S
14 FS/F9 SF 0 241.2 M(Papers on FreeS/WAN)S
11 FS/F4 SF 0 214.2 M(Two design documents show team thinking on new developments:)S
36 187.8 M(Opportunistic Encryption by technical lead Henry Spencer and Pluto programmer Hugh Redelemeier)S
/Fc SF 28.19 187.8 M(\267 )S
/F4 SF 36 174.6 M(discussion of KLIPS redesign)S
/Fc SF 28.19 174.6 M(\267 )S
/F4 SF 0 148.2 M(Both documents are works in progress and are frequently revised. For the latest version, see the design)S
0 135 M(mailing list. Comments should go to that list.)S
0 108.6 M(There is now an Internet Draft on Opportunistic Encryption by Michael Richardson, Hugh Redelmeier and)S
0 95.4 M(Henry Spencer. This is a first step toward getting the protocol standardised so there can be multiple)S
0 82.2 M(implementations of it. Discussion of it takes place on the IETF IPsec Working Group mailing list.)S
0 55.8 M(A number of papers giving further background on FreeS/WAN, or exploring its future or its applications, are)S
0 42.6 M(also available:)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Archives of the project mailing list)S
474.768 0 M(10)S
GR
SP
%%Page: 11 40
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(Both Henry and Richard gave talks on FreeS/WAN at the 2000 Ottawa Linux Symposium.)S
72 673.8 M(Richard's slides)S
/Fc SF 60.967 673.8 M(\250 )S
/F4 SF 72 660.6 M(Henry's paper)S
/Fc SF 60.967 660.6 M(\250 )S
/F4 SF 72 647.4 M(MP3 audio of their talks is available from the conference page)S
/Fc SF 60.967 647.4 M(\250 )S
28.19 687 M(\267 )S
/F6 SF 36 634.2 M(Moat: A Virtual Private Network Appliances and Services Platform)S
/F4 SF ( is a paper about large-scale \(a)S
36 621 M(few 100 links\) use of FreeS/WAN in a production application at AT&T Research. It is available in)S
36 607.8 M(Postscript or PDF from co-author Steve Bellovin's papers list page.)S
/Fc SF 28.19 634.2 M(\267 )S
/F4 SF 36 594.6 M(One of the Moat co-authors, John Denker, has also written)S
72 581.4 M(a proposal for how future versions of FreeS/WAN might interact with routing protocols)S
/Fc SF 60.967 581.4 M(\250 )S
/F4 SF 72 568.2 M(a wishlist of possible new features)S
/Fc SF 60.967 568.2 M(\250 )S
28.19 594.6 M(\267 )S
/F4 SF 36 555 M(Bart Trojanowski's web page has a draft design for hardware acceleration of FreeS/WAN)S
/Fc SF 28.19 555 M(\267 )S
/F4 SF 0 528.6 M(Several of these provoked interesting discussions on the mailing lists, worth searching for in the archives.)S
0 502.2 M(There are also several papers in languages other than English, see our web links.)S
14 FS/F9 SF 0 472.8 M(License and copyright information)S
11 FS/F4 SF 0 445.8 M(All code and documentation written for this project is distributed under either the GNU General Public)S
0 432.6 M(License \(GPL\) or the GNU Library General Public License. For details see the COPYING file in the)S
0 419.4 M(distribution.)S
0 393 M(Not all code in the distribution is ours, however. See the CREDITS file for details. In particular, note that the)S
0 379.8 M(Libdes library and the version of MD5 that we use each have their own license.)S
17 FS/F9 SF 0 347.4 M(Distribution sites)S
11 FS/F4 SF 0 319.8 M(FreeS/WAN is available from a number of sites.)S
14 FS/F9 SF 0 290.4 M(Primary site)S
11 FS/F4 SF 0 263.4 M(Our primary site, is at xs4all \(Thanks, folks!\) in Holland:)S
36 237 M(HTTP)S
/Fc SF 28.19 237 M(\267 )S
/F4 SF 36 223.8 M(FTP)S
/Fc SF 28.19 223.8 M(\267 )S
14 FS/F9 SF 0 194.4 M(Mirrors)S
11 FS/F4 SF 0 167.4 M(There are also mirror sites all over the world:)S
36 141 M(Eastern Canada \(limited resouces\))S
/Fc SF 28.19 141 M(\267 )S
/F4 SF 36 127.8 M(Eastern Canada \(has older versions too\))S
/Fc SF 28.19 127.8 M(\267 )S
/F4 SF 36 114.6 M(Eastern Canada \(has older versions too\))S
/Fc SF 28.19 114.6 M(\267 )S
/F4 SF 36 101.4 M(Japan)S
/Fc SF 28.19 101.4 M(\267 )S
/F4 SF 36 88.2 M(Hong Kong)S
/Fc SF 28.19 88.2 M(\267 )S
/F4 SF 36 75 M(Denmark)S
/Fc SF 28.19 75 M(\267 )S
/F4 SF 36 61.8 M(the UK)S
/Fc SF 28.19 61.8 M(\267 )S
/F4 SF 36 48.6 M(Slovak Republic)S
/Fc SF 28.19 48.6 M(\267 )S
/F4 SF 36 35.4 M(Australia)S
/Fc SF 28.19 35.4 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(License and copyright information)S
474.768 0 M(11)S
GR
SP
%%Page: 12 41
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(technolust)S
/Fc SF 28.19 687 M(\267 )S
/F4 SF 36 673.8 M(Germany)S
/Fc SF 28.19 673.8 M(\267 )S
/F4 SF 36 660.6 M(Ivan Moore's site)S
/Fc SF 28.19 660.6 M(\267 )S
/F4 SF 36 647.4 M(the Crypto Archive on the Security Portal site)S
/Fc SF 28.19 647.4 M(\267 )S
/F4 SF 36 634.2 M(Wiretapped.net in Australia)S
/Fc SF 28.19 634.2 M(\267 )S
/F4 SF 0 607.8 M(Thanks to those folks as well.)S
14 FS/F9 SF 0 578.4 M(The "munitions" archive of Linux crypto software)S
11 FS/F4 SF 0 551.4 M(There is also an archive of Linux crypto software called "munitions", with its own mirrors in a number of)S
0 538.2 M(countries. It includes FreeS/WAN, though not always the latest version. Some of its sites are:)S
36 511.8 M(Germany)S
/Fc SF 28.19 511.8 M(\267 )S
/F4 SF 36 498.6 M(Italy)S
/Fc SF 28.19 498.6 M(\267 )S
/F4 SF 36 485.4 M(Netherlands)S
/Fc SF 28.19 485.4 M(\267 )S
/F4 SF 0 459 M(Any of those will have a list of other "munitions" mirrors. There is also a CD available.)S
17 FS/F9 SF 0 426.6 M(Links to other sections)S
11 FS/F4 SF 0 399 M(For more detailed background information, see:)S
36 372.6 M(history and politics of cryptography)S
/Fc SF 28.19 372.6 M(\267 )S
/F4 SF 36 359.4 M(IPsec protocols)S
/Fc SF 28.19 359.4 M(\267 )S
/F4 SF 0 333 M(To begin working with FreeS/WAN, go to our quickstart guide.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(The "munitions" archive of Linux crypto software)S
474.768 0 M(12)S
GR
SP
%%Page: 13 42
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(Upgrading to FreeS/WAN 2.x)S
17 FS/F9 SF 0 643.8 M(New! Built in Opportunistic connections)S
11 FS/F4 SF 0 616.2 M(Out of the box, FreeS/WAN 2.x will attempt to encrypt all your IP traffic. It will try to establish IPsec)S
0 603 M(connections for:)S
36 576.6 M(IP traffic from the Linux box on which you have installed FreeS/WAN, and)S
/Fc SF 28.19 576.6 M(\267 )S
/F4 SF 36 563.4 M(outbound IP traffic routed through that Linux box \(eg. from a protected subnet\).)S
/Fc SF 28.19 563.4 M(\267 )S
/F4 SF 0 537 M(FreeS/WAN 2.x uses)S
/F7 SF ( hidden, automatically enabled)S
/Fb SF ( ipsec.conf)S
/F7 SF ( connections)S
/F4 SF ( to do this.)S
0 510.6 M(This behaviour is part of our campaign to get Opportunistic Encryption \(OE\) widespread in the Linux world,)S
0 497.4 M(so that any two Linux boxes can encrypt to one another without prearrangement. There's one catch, however:)S
0 484.2 M(you must set up a few DNS records to distribute RSA public keys and \(if applicable\) IPsec gateway)S
0 471 M(information.)S
0 444.6 M(If you start FreeS/WAN before you have set up these DNS records, your connectivity will be slow, and)S
0 431.4 M(messages relating to the built in connections will clutter your logs. If you are unable to set up DNS for OE,)S
0 418.2 M(you will wish to disable the hidden connections.)S
14 FS/F9 SF 0 375.6 M(Upgrading Opportunistic Encryption to 2.01 \(or later\))S
11 FS/F4 SF 0 348.6 M(As of FreeS/WAN 2.01, Opportunistic Encryption \(OE\) uses DNS TXT resource records \(RRs\) only \(rather)S
0 335.4 M(than TXT with KEY\). This change causes a "flag day". Users of FreeS/WAN 2.00 \(or earlier\) OE who are)S
0 322.2 M(upgrading may need to post additional resource records.)S
0 295.8 M(If you are running initiate-only OE, you)S
/F6 SF ( must)S
/F4 SF ( put up a TXT record in any forward domain as per our)S
0 282.6 M(quickstart instructions. This replaces your old forward KEY.)S
0 256.2 M(If you are running full OE, you require no updates. You already have the needed TXT record in the reverse)S
0 243 M(domain. However, to facilitate future features, you may also wish to publish that TXT record in a forward)S
0 229.8 M(domain as instructed here.)S
0 203.4 M(If you are running OE on a gateway \(and encrypting on behalf of subnetted boxes\) you require no updates.)S
0 190.2 M(You already have the required TXT record in your gateway's reverse map, and the TXT records for any)S
0 177 M(subnetted boxes require no updating. However, to facilitate future features, you may wish to publish your)S
0 163.8 M(gateway's TXT record in a forward domain as shown here.)S
0 137.4 M(During the transition, you may wish to leave any old KEY records up for some time. They will provide)S
0 124.2 M(limited backward compatibility.)S
17 FS/F9 SF 0 91.8 M(New! Policy Groups)S
11 FS/F4 SF 0 64.2 M(We want to make it easy for you to declare security policy as it applies to IPsec connections.)S
0 37.8 M(Policy Groups make it simple to say:)S
/F8 SF 0 0 M(Upgrading to FreeS/WAN 2.x)S
474.768 0 M(13)S
GR
SP
%%Page: 14 43
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(These are the folks I want to talk to in the clear.)S
/Fc SF 28.19 687 M(\267 )S
/F4 SF 36 673.8 M(These spammers' domains -- I don't want to talk to them at all.)S
/Fc SF 28.19 673.8 M(\267 )S
/F4 SF 36 660.6 M(To talk to the finance department, I must use IPsec.)S
/Fc SF 28.19 660.6 M(\267 )S
/F4 SF 36 647.4 M(For any other communication, try to encrypt, but it's okay if we can't.)S
/Fc SF 28.19 647.4 M(\267 )S
/F4 SF 0 621 M(FreeS/WAN then implements these policies, creating OE connections if and when needed. You can use Policy)S
0 607.8 M(Groups along with connections you explicitly define in ipsec.conf.)S
0 581.4 M(For more information, see our Policy Group HOWTO.)S
17 FS/F9 SF 0 549 M(New! Packetdefault Connection)S
11 FS/F4 SF 0 521.4 M(Free/SWAN 2.x ships with the)S
/F7 SF ( automatically enabled, hidden connection)S
/Fa SF ( packetdefault)S
/F4 SF (. This configures a)S
0 508.2 M(FreeS/WAN box as an OE gateway for any hosts located behind it. As mentioned above, you must configure)S
0 495 M(some DNS records for OE to work.)S
0 468.6 M(As the name implies, this connection functions as a default. If you have more specific connections, such as)S
0 455.4 M(policy groups which configure your FreeS/WAN box as an OE gateway for a local subnet, these will apply)S
0 442.2 M(before)S
/Fa SF ( packetdefault)S
/F4 SF (. You can view)S
/Fa SF ( packetdefault)S
/F4 SF ('s specifics in man ipsec.conf.)S
17 FS/F9 SF 0 409.8 M(FreeS/WAN now disables Reverse Path Filtering)S
11 FS/F4 SF 0 382.2 M(FreeS/WAN often doesn't work with reverse path filtering. At start time, FreeS/WAN now turns rp_filter off,)S
0 369 M(and logs a warning.)S
0 342.6 M(FreeS/WAN does not turn it back on again. You can do this yourself with a command like:)S
9 FS/F0 SF 0 318.2 M(   echo 1 > /proc/sys/net/ipv4/conf/eth0/rp_filter)S
11 FS/F4 SF 0 292.2 M(For eth0, substitute the interface which FreeS/WAN was affecting.)S
17 FS/F9 SF 0 246.6 M(Revised)S
/Fb SF ( ipsec.conf)S
14 FS/F9 SF 0 216 M(No promise of compatibility)S
11 FS/F4 SF 0 189 M(The FreeS/WAN team promised config-file compatibility throughout the 1.x series. That means a 1.5 config)S
0 175.8 M(file can be directly imported into a fresh 1.99 install with no problems.)S
0 149.4 M(With FreeS/WAN 2.x, we've given ourselves permission to make the config file easier to use. The cost: some)S
0 136.2 M(FreeS/WAN 1.x configurations will not work properly. Many of the new features are, however, backward)S
0 123 M(compatible.)S
14 FS/F9 SF 0 93.6 M(Most)S
/Fb SF ( ipsec.conf)S
/F9 SF ( files will work fine)S
11 FS/F4 SF 0 66.6 M(... so long as you paste this line,)S
/F7 SF ( with no preceding whitespace)S
/F4 SF (, at the top of your config file:)S
9 FS/F0 SF 0 42.2 M(    version 2)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(New! Packetdefault Connection)S
474.768 0 M(14)S
GR
SP
%%Page: 15 44
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(Backward compatibility patch)S
11 FS/F4 SF 0 657 M(If the new defaults bite you, use this)S
/Fa SF ( ipsec.conf)S
/F4 SF ( fragment to simulate the old default values.)S
14 FS/F9 SF 0 627.6 M(Details)S
11 FS/F4 SF 0 600.6 M(We've obsoleted various directives which almost no one was using:)S
9 FS/F0 SF 0 576.2 M(    dump)S
0 565.4 M(    plutobackgroundload)S
0 554.6 M(    no_eroute_pass)S
0 543.8 M(    lifetime)S
0 533 M(    rekeystart)S
0 522.2 M(    rekeytries)S
11 FS/F4 SF 0 496.2 M(For most of these, there is some other way to elicit the desired behaviour. See this post.)S
0 469.8 M(We've made some settings, which almost everyone was using, defaults. For example:)S
9 FS/F0 SF 0 445.4 M(    interfaces=%defaultroute)S
0 434.6 M(    plutoload=%search)S
0 423.8 M(    plutostart=%search)S
0 413 M(    uniqueids=yes)S
11 FS/F4 SF 0 387 M(We've also changed some default values to help with OE and Policy Groups:)S
9 FS/F0 SF 0 362.6 M(    authby=rsasig   ## not secret!!!)S
0 351.8 M(    leftrsasigkey=%dnsondemand ## looks up missing keys in DNS when needed.)S
0 341 M(    rightrsasigkey=%dnsondemand)S
11 FS/F4 SF 0 315 M(Of course, you can still override any defaults by explictly declaring something else in your connection.)S
0 288.6 M(A post with a list of many ipsec.conf changes.)S
0 275.4 M(Current ipsec.conf manual.)S
14 FS/F9 SF 0 232.8 M(Upgrading from 1.x RPMs to 2.x RPMs)S
11 FS/F4 SF 0 205.8 M(Note: When upgrading from 1-series to 2-series RPMs,)S
/Fa SF ( rpm -U)S
/F4 SF ( will not work.)S
0 179.4 M(You must instead erase the 1.x RPMs, then install the 2.x set:)S
9 FS/F0 SF 0 155 M(    rpm -e freeswan)S
0 131 M(    rpm -e freeswan-module)S
11 FS/F4 SF 0 105 M(On erasing, your old)S
/Fa SF ( ipsec.conf)S
/F4 SF ( should be moved to)S
/Fa SF ( ipsec.conf.rpmsave)S
/F4 SF (. Keep this. You will probably)S
0 91.8 M(want to copy your existing connections to the end of your new 2.x file.)S
0 65.4 M(Install the RPMs suitable for your kernel version, such as:)S
9 FS/F0 SF 0 41 M(    rpm -ivh freeswan-module-2.03_2.4.20_20.9-0.i386.rpm)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Backward compatibility patch)S
474.768 0 M(15)S
GR
SP
%%Page: 16 45
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(    rpm -ivh freeswan-userland-2.03_2.4.20_20.9-0.i386.rpm)S
11 FS/F4 SF 0 663 M(Or, to splice the files:)S
9 FS/F0 SF 0 638.6 M(    cat /etc/ipsec.conf /etc/ipsec.conf.rpmsave > /etc/ipsec.conf.tmp)S
0 627.8 M(    mv /etc/ipsec.conf.tmp /etc/ipsec.conf)S
11 FS/F4 SF 0 601.8 M(Then, remove the redundant)S
/Fa SF ( conn %default)S
/F4 SF ( and)S
/Fa SF ( config setup)S
/F4 SF ( sections. Unless you have done any special)S
0 588.6 M(configuring here, you'll likely want to remove the 1.x versions. Remove)S
/Fa SF ( conn OEself)S
/F4 SF (, if present.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Backward compatibility patch)S
474.768 0 M(16)S
GR
SP
%%Page: 17 46
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(Quickstart Guide to Opportunistic Encryption)S
17 FS/F9 SF 0 630.6 M(Purpose)S
11 FS/F4 SF 0 603 M(This page will get you started using Linux FreeS/WAN with opportunistic encryption \(OE\). OE enables you)S
0 589.8 M(to set up IPsec tunnels without co-ordinating with another site administrator, and without hand configuring)S
0 576.6 M(each tunnel. If enough sites support OE, a "FAX effect" occurs, and many of us can communicate without)S
0 563.4 M(eavesdroppers.)S
14 FS/F9 SF 0 534 M(OE "flag day")S
11 FS/F4 SF 0 507 M(As of FreeS/WAN 2.01, OE uses DNS TXT resource records \(RRs\) only \(rather than TXT with KEY\). This)S
0 493.8 M(change causes a "flag day". Users of FreeS/WAN 2.00 \(or earlier\) OE who are upgrading may require)S
0 480.6 M(additional resource records, as detailed in our upgrading document. OE setup instructions here are for 2.02 or)S
0 467.4 M(later.)S
17 FS/F9 SF 0 435 M(Requirements)S
11 FS/F4 SF 0 407.4 M(To set up opportunistic encryption, you will need:)S
36 381 M(a Linux box. For OE to the public Internet, this box must NOT be behind Network Address)S
36 367.8 M(Translation \(NAT\).)S
/Fc SF 28.19 381 M(\267 )S
/F4 SF 36 354.6 M(to install Linux FreeS/WAN 2.02 or later)S
/Fc SF 28.19 354.6 M(\267 )S
/F4 SF 36 341.4 M(either control over your reverse DNS \(for full opportunism\) or the ability to write to some forward)S
36 328.2 M(domain \(for initiator-only\). This free DNS service explicitly supports forward TXT records for)S
36 315 M(FreeS/WAN use.)S
/Fc SF 28.19 341.4 M(\267 )S
/F4 SF 36 301.8 M(\(for full opportunism\) a static IP)S
/Fc SF 28.19 301.8 M(\267 )S
/F4 SF 0 275.4 M(Note: Currently, only Linux FreeS/WAN supports opportunistic encryption.)S
17 FS/F9 SF 0 243 M(RPM install)S
11 FS/F4 SF 0 215.4 M(Our instructions are for a recent Red Hat with a 2.4-series stock or Red Hat updated kernel. For other ways to)S
0 202.2 M(install, see our install document.)S
14 FS/F9 SF 0 172.8 M(Download RPMs)S
11 FS/F4 SF 0 145.8 M(If we have prebuilt RPMs for your Red Hat system, this command will get them:)S
9 FS/F0 SF 0 121.4 M(    ncftpget ftp://ftp.xs4all.nl/pub/crypto/freeswan/binaries/RedHat-RPMs/`uname -r | tr -d 'a-wy-z'`/\\*)S
11 FS/F4 SF 0 95.4 M(If that fails, you will need to try another install method. Our kernel modules)S
/F5 SF ( will only work on the Red Hat)S
0 82.2 M(kernel they were built for)S
/F4 SF (, since they are very sensitive to small changes in the kernel.)S
0 55.8 M(If it succeeds, you will have userland tools, a kernel module, and an RPM signing key:)S
9 FS/F0 SF 0 31.4 M(    freeswan-module-2.03_2.4.20_20.9-0.i386.rpm)S
11 FS/F8 SF 0 0 M(Quickstart Guide to Opportunistic Encryption)S
474.768 0 M(17)S
GR
SP
%%Page: 18 47
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(    freeswan-userland-2.03_2.4.20_20.9-0.i386.rpm)S
0 678.2 M(    freeswan-rpmsign.asc)S
14 FS/F9 SF 0 649.2 M(Check signatures)S
11 FS/F4 SF 0 622.2 M(If you're running RedHat 8.x or later, import the RPM signing key into the RPM database:)S
9 FS/F0 SF 0 597.8 M(    rpm --import freeswan-rpmsign.asc)S
11 FS/F4 SF 0 571.8 M(For RedHat 7.x systems, you'll need to add it to your PGP keyring:)S
9 FS/F0 SF 0 547.4 M(    pgp -ka freeswan-rpmsign.asc)S
11 FS/F4 SF 0 521.4 M(Check the digital signatures on both RPMs using:)S
9 FS/F0 SF 0 497 M(    rpm --checksig freeswan*.rpm )S
11 FS/F4 SF 0 471 M(You should see that these signatures are good:)S
9 FS/F0 SF 0 446.6 M(    freeswan-module-2.03_2.4.20_20.9-0.i386.rpm: pgp md5 OK)S
0 435.8 M(    freeswan-userland-2.03_2.4.20_20.9-0.i386.rpm: pgp md5 OK)S
14 FS/F9 SF 0 406.8 M(Install the RPMs)S
11 FS/F4 SF 0 379.8 M(Become root:)S
9 FS/F0 SF 0 355.4 M(    su)S
11 FS/F4 SF 0 329.4 M(Install your RPMs with:)S
9 FS/F0 SF 0 305 M(    rpm -ivh freeswan*.rpm)S
11 FS/F4 SF 0 279 M(If you're upgrading from FreeS/WAN 1.x RPMs, and have problems with that command, see this note.)S
0 252.6 M(Then, start FreeS/WAN:)S
9 FS/F0 SF 0 228.2 M(    service ipsec start)S
14 FS/F9 SF 0 199.2 M(Test)S
11 FS/F4 SF 0 172.2 M(To check that you have a successful install, run:)S
9 FS/F0 SF 0 147.8 M(    ipsec verify)S
11 FS/F4 SF 0 121.8 M(You should see as part of the)S
/Fa SF ( verify)S
/F4 SF ( output:)S
9 FS/F0 SF 0 97.4 M(    Checking your system to see if IPsec got installed and started correctly)S
0 86.6 M(    Version check and ipsec on-path                             [OK])S
0 75.8 M(    Checking for KLIPS support in kernel                        [OK])S
0 65 M(    Checking for RSA private key \(/etc/ipsec.secrets\)           [OK])S
0 54.2 M(    Checking that pluto is running                              [OK])S
0 43.4 M(    ...)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Check signatures)S
474.768 0 M(18)S
GR
SP
%%Page: 19 48
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(If any of these first four checks fails, see our troubleshooting guide.)S
17 FS/F9 SF 0 654.6 M(Our Opportunistic Setups)S
14 FS/F9 SF 0 624 M(Full or partial opportunism?)S
11 FS/F4 SF 0 597 M(Determine the best form of opportunism your system can support.)S
36 570.6 M(For full opportunism, you'll need a static IP and and either control over your reverse DNS or an ISP)S
36 557.4 M(that can add the required TXT record for you.)S
/Fc SF 28.19 570.6 M(\267 )S
/F4 SF 36 544.2 M(If you have a dynamic IP, and/or write access to forward DNS only, you can do initiate-only)S
36 531 M(opportunism)S
/Fc SF 28.19 544.2 M(\267 )S
/F4 SF 36 517.8 M(To protect traffic bound for real IPs behind your gateway, use this form of full opportunism.)S
/Fc SF 28.19 517.8 M(\267 )S
17 FS/F9 SF 0 485.4 M(Initiate-only setup)S
14 FS/F9 SF 0 454.8 M(Restrictions)S
11 FS/F4 SF 0 427.8 M(When you set up initiate-only Opportunistic Encryption \(iOE\):)S
36 401.4 M(there will be)S
/F7 SF ( no incoming connection requests)S
/F4 SF (; you can initiate all the IPsec connections you need.)S
/Fc SF 28.19 401.4 M(\267 )S
/F7 SF 36 388.2 M(only one machine is visible)S
/F4 SF ( on your end of the connection.)S
/Fc SF 28.19 388.2 M(\267 )S
/F4 SF 36 375 M(iOE also protects traffic on behalf of NATted hosts behind the iOE box.)S
/Fc SF 28.19 375 M(\267 )S
/F4 SF 0 348.6 M(You cannot network a group of initiator-only machines if none of these is capable of responding to OE. If one)S
0 335.4 M(is capable of responding, you may be able to create a hub topology using routing.)S
14 FS/F9 SF 0 306 M(Create and publish a forward DNS record)S
11 FS/F9 SF 0 279 M(Find a domain you can use)S
/F4 SF 0 252.6 M(Find a DNS forward domain \(e.g. example.com\) where you can publish your key. You'll need access to the)S
0 239.4 M(DNS zone files for that domain. This is common for a domain you own. Some free DNS providers, such as)S
0 226.2 M(this one, also provide this service.)S
0 199.8 M(Dynamic IP users take note: the domain where you place your key need not be associated with the IP address)S
0 186.6 M(for your system, or even with your system's usual hostname.)S
/F9 SF 0 160.2 M(Choose your ID)S
/F4 SF 0 133.8 M(Choose a name within that domain which you will use to identify your machine. It's convenient if this can be)S
0 120.6 M(the same as your hostname:)S
9 FS/F0 SF 0 96.2 M(    [root@xy root]# hostname --fqdn)S
0 85.4 M(    xy.example.com)S
11 FS/F4 SF 0 59.4 M(This name in FQDN \(fully-qualified domain name\) format will be your ID, for DNS key lookup and IPsec)S
0 46.2 M(negotiation.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Our Opportunistic Setups)S
474.768 0 M(19)S
GR
SP
%%Page: 20 49
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F9 SF 0 687 M(Create a forward TXT record)S
/F4 SF 0 660.6 M(Generate a forward TXT record containing your system's public key with a command like:)S
9 FS/F0 SF 0 636.2 M(    ipsec showhostkey --txt @xy.example.com)S
11 FS/F4 SF 0 610.2 M(using your chosen ID in place of xy.example.com. This command takes the contents of /etc/ipsec.secrets and)S
0 597 M(reformats it into something usable by ISC's BIND. The result should look like this \(with the key data trimmed)S
0 583.8 M(down for clarity\):)S
9 FS/F0 SF 0 559.4 M(    ; RSA 2192 bits   xy.example.com   Thu Jan  2 12:41:44 2003)S
0 548.6 M(        IN      TXT     "X-IPsec-Server\(10\)=@xy.example.com" )S
0 537.8 M(    "AQOF8tZ2... ...+buFuFn/")S
11 FS/F9 SF 0 511.8 M(Publish the forward TXT record)S
/F4 SF 0 485.4 M(Insert the record into DNS, or have a system adminstrator do it for you. It may take up to 48 hours for the)S
0 472.2 M(record to propagate, but it's usually much quicker.)S
14 FS/F9 SF 0 442.8 M(Test that your key has been published)S
11 FS/F4 SF 0 415.8 M(Check your DNS work)S
9 FS/F0 SF 0 391.4 M(    ipsec verify --host xy.example.com)S
11 FS/F4 SF 0 365.4 M(As part of the)S
/Fa SF ( verify)S
/F4 SF ( output, you ought to see something like:)S
9 FS/F0 SF 0 341 M(    ...)S
0 330.2 M(    Looking for TXT in forward map: xy.example.com          [OK])S
0 319.4 M(    ...)S
11 FS/F4 SF 0 293.4 M(For this type of opportunism, only the forward test is relevant; you can ignore the tests designed to find)S
0 280.2 M(reverse records.)S
14 FS/F9 SF 0 250.8 M(Configure, if necessary)S
11 FS/F4 SF 0 223.8 M(If your ID is the same as your hostname, you're ready to go. FreeS/WAN will use its built-in connections to)S
0 210.6 M(create your iOE functionality.)S
0 184.2 M(If you have chosen a different ID, you must tell FreeS/WAN about it via)S
/Fa SF ( ipsec.conf)S
/F4 SF (:)S
9 FS/F0 SF 0 159.8 M(    config setup)S
0 149 M(        myid=@myname.freedns.example.com)S
11 FS/F4 SF 0 123 M(and restart FreeS/WAN:)S
9 FS/F0 SF 0 98.6 M(    service ipsec restart)S
11 FS/F4 SF 0 72.6 M(The new ID will be applied to the built-in connections.)S
0 46.2 M(Note: you can create more complex iOE configurations as explained in our policy groups document, or)S
0 33 M(disable OE using these instructions.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Create and publish a forward DNS record)S
474.768 0 M(20)S
GR
SP
%%Page: 21 50
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(Test)S
11 FS/F4 SF 0 657 M(That's it! Test your connections.)S
17 FS/F9 SF 0 611.4 M(Full Opportunism)S
11 FS/F4 SF 0 583.8 M(Full opportunism allows you to initiate and receive opportunistic connections on your machine.)S
14 FS/F9 SF 0 541.2 M(Put a TXT record in a Forward Domain)S
11 FS/F4 SF 0 514.2 M(To set up full opportunism, first set up a forward TXT record as for initiator-only OE, using an ID \(for)S
0 501 M(example, your hostname\) that resolves to your IP. Do not configure)S
/Fa SF ( /etc/ipsec.conf)S
/F4 SF (, but continue with the)S
0 487.8 M(instructions for full opportunism, below.)S
0 461.4 M(Note that this forward record is not currently necessary for full OE, but will facilitate future features.)S
14 FS/F9 SF 0 418.8 M(Put a TXT record in Reverse DNS)S
11 FS/F4 SF 0 391.8 M(You must be able to publish your DNS RR directly in the reverse domain. FreeS/WAN will not follow a PTR)S
0 378.6 M(which appears in the reverse, since a second lookup at connection start time is too costly.)S
/F9 SF 0 352.2 M(Create a Reverse DNS TXT record)S
/F4 SF 0 325.8 M(This record serves to publicize your FreeS/WAN public key. In addition, it lets others know that this machine)S
0 312.6 M(can receive opportunistic connections, and asserts that the machine is authorized to encrypt on its own behalf.)S
0 286.2 M(Use the command:)S
9 FS/F0 SF 0 261.8 M(    ipsec showhostkey --txt 192.0.2.11)S
11 FS/F4 SF 0 235.8 M(where you replace 192.0.2.11 with your public IP.)S
0 209.4 M(The record \(with key shortened\) looks like:)S
9 FS/F0 SF 0 185 M(    ; RSA 2048 bits  xy.example.com   Sat Apr 15 13:53:22 2000)S
0 174.2 M(    IN TXT  "X-IPsec-Server\(10\)=192.0.2.11" " AQOF8tZ2...+buFuFn/")S
11 FS/F9 SF 0 148.2 M(Publish your TXT record)S
/F4 SF 0 121.8 M(Send these records to your ISP, to be published in your IP's reverse map. It may take up to 48 hours for these)S
0 108.6 M(to propagate, but usually takes much less time.)S
14 FS/F9 SF 0 79.2 M(Test your DNS record)S
11 FS/F4 SF 0 52.2 M(Check your DNS work with)S
9 FS/F0 SF 0 27.8 M(    ipsec verify --host xy.example.com)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Test)S
474.768 0 M(21)S
GR
SP
%%Page: 22 51
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(As part of the)S
/Fa SF ( verify)S
/F4 SF ( output, you ought to see something like:)S
9 FS/F0 SF 0 662.6 M(    ...)S
0 651.8 M(    Looking for TXT in reverse map: 11.2.0.192.in-addr.arpa [OK])S
0 641 M(    ...)S
11 FS/F4 SF 0 615 M(which indicates that you've passed the reverse-map test.)S
14 FS/F9 SF 0 585.6 M(No Configuration Needed)S
11 FS/F4 SF 0 558.6 M(FreeS/WAN 2.x ships with full OE enabled, so you don't need to configure anything. To enable OE out of the)S
0 545.4 M(box, FreeS/WAN 2.x uses the policy group)S
/Fa SF ( private-or-clear)S
/F4 SF (, which creates IPsec connections if possible)S
0 532.2 M(\(using OE if needed\), and allows traffic in the clear otherwise. You can create more complex OE)S
0 519 M(configurations as described in our policy groups document, or disable OE using these instructions.)S
0 492.6 M(If you've previously configured for initiator-only opportunism, remove)S
/Fa SF ( myid=)S
/F4 SF ( from)S
/Fa SF ( config setup)S
/F4 SF (, so that)S
0 479.4 M(peer FreeS/WANs will look up your key by IP. Restart FreeS/WAN so that your change will take effect, with)S
9 FS/F0 SF 0 455 M(    service ipsec restart)S
14 FS/F9 SF 0 426 M(Consider Firewalling)S
11 FS/F4 SF 0 399 M(If you are running a default install of RedHat 8.x, take note: you will need to alter your iptables rule setup to)S
0 385.8 M(allow IPSec traffic through your firewall. See our firewall document for sample)S
/Fa SF ( iptables)S
/F4 SF ( rules.)S
14 FS/F9 SF 0 356.4 M(Test)S
11 FS/F4 SF 0 329.4 M(That's it. Now, test your connection.)S
14 FS/F9 SF 0 300 M(Test)S
11 FS/F4 SF 0 273 M(Instructions are in the next section.)S
17 FS/F9 SF 0 240.6 M(Testing opportunistic connections)S
11 FS/F4 SF 0 213 M(Be sure IPsec is running. You can see whether it is with:)S
9 FS/F0 SF 0 188.6 M(    ipsec setup status)S
11 FS/F4 SF 0 162.6 M(If need be, you can restart it with:)S
9 FS/F0 SF 0 138.2 M(    service ipsec restart)S
11 FS/F4 SF 0 112.2 M(Load a FreeS/WAN test website from the host on which you're running FreeS/WAN. Note: the feds may be)S
0 99 M(watching these sites. Type one of:)S
9 FS/F0 SF 0 74.6 M(   links oetest.freeswan.org)S
0 50.6 M(   links oetest.freeswan.nl)S
11 FS/F4 SF 0 24.6 M(A positive result looks like this:)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(No Configuration Needed)S
474.768 0 M(22)S
GR
SP
%%Page: 23 52
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(   You  seem  to  be  connecting  from:  192.0.2.11 which DNS says is:)S
0 678.2 M(   gateway.example.com)S
0 667.4 M(     _________________________________________________________________)S
0 645.8 M(   Status E-route)S
0 635 M(   OE    enabled    16    192.139.46.73/32    ->    192.0.2.11/32   =>)S
0 624.2 M(   tun0x2097@192.0.2.11)S
0 613.4 M(   OE    enabled    176    192.139.46.77/32    ->   192.0.2.11/32   =>)S
0 602.6 M(   tun0x208a@192.0.2.11)S
11 FS/F4 SF 0 576.6 M(If you see this, congratulations! Your OE host or gateway will now encrypt its own traffic whenever it can.)S
0 563.4 M(For more OE tests, please see our testing document. If you have difficulty, see our OE troubleshooting tips.)S
17 FS/F9 SF 0 531 M(Now what?)S
11 FS/F4 SF 0 503.4 M(Please see our policy groups document for more ways to set up Opportunistic Encryption.)S
0 477 M(You may also wish to make some pre-configured connections.)S
17 FS/F9 SF 0 444.6 M(Notes)S
11 FS/F4 SF 36 417 M(We assume some facts about your system in order to make Opportunistic Encryption easier to)S
36 403.8 M(configure. For example, we assume that you wish to have FreeS/WAN secure your default interface.)S
/Fc SF 28.19 417 M(\267 )S
/F4 SF 36 390.6 M(You may change this, and other settings, by altering the)S
/Fa SF ( config setup)S
/F4 SF ( section in)S
/Fa SF ( /etc/ipsec.conf)S
/F4 SF (.)S
/Fc SF 28.19 390.6 M(\267 )S
/F4 SF 36 377.4 M(Note that the built-in connections used to build policy groups do not inherit from)S
/Fa SF ( conn default)S
/F4 SF (.)S
/Fc SF 28.19 377.4 M(\267 )S
/F4 SF 36 351 M(If you fail to define your local identity and do not fill in your reverse DNS entry, you will not be able)S
36 337.8 M(to use OE.)S
/Fc SF 28.19 351 M(\267 )S
17 FS/F9 SF 0 292.2 M(Troubleshooting OE)S
11 FS/F4 SF 0 264.6 M(See the OE troubleshooting hints in our troubleshooting guide.)S
17 FS/F9 SF 0 219 M(Known Issues)S
11 FS/F4 SF 0 191.4 M(Please see this list of known issues with Opportunistic Encryption.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Now what?)S
474.768 0 M(23)S
GR
SP
%%Page: 24 53
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(How to Configure Linux FreeS/WAN with Policy)S
0 654 M(Groups)S
17 FS/F9 SF 0 606.6 M(What are Policy Groups?)S
11 FS/F7 SF 0 579 M(Policy Groups)S
/F4 SF ( are an elegant general mechanism to configure FreeS/WAN. They are useful for many)S
0 565.8 M(FreeS/WAN users.)S
0 539.4 M(In previous FreeS/WAN versions, you needed to configure each IPsec connection explicitly, on both local and)S
0 526.2 M(remote hosts. This could become complex.)S
0 499.8 M(By contrast, Policy Groups allow you to set local IPsec policy for lists of remote hosts and networks, simply)S
0 486.6 M(by listing the hosts and networks which you wish to have special treatment in one of several Policy Group)S
0 473.4 M(files. FreeS/WAN then internally creates the connections needed to implement each policy.)S
0 447 M(In the next section we describe our five Base Policy Groups, which you can use to configure IPsec in many)S
0 433.8 M(useful ways. Later, we will show you how to create an IPsec VPN using one line of configuration for each)S
0 420.6 M(remote host or network.)S
14 FS/F9 SF 0 378 M(Built-In Security Options)S
11 FS/F4 SF 0 351 M(FreeS/WAN offers these Base Policy Groups:)S
/F6 SF 0 324.6 M(private)S
/F4 SF 36 311.4 M(FreeS/WAN only communicates privately with the listed CIDR blocks. If needed, FreeS/WAN)S
36 298.2 M(attempts to create a connection opportunistically. If this fails, FreeS/WAN blocks communication.)S
36 285 M(Inbound blocking is assumed to be done by the firewall. FreeS/WAN offers firewall hooks but no)S
36 271.8 M(modern firewall rules to help with inbound blocking.)S
/F6 SF 0 258.6 M(private-or-clear)S
/F4 SF 36 245.4 M(FreeS/WAN prefers private communication with the listed CIDR blocks. If needed, FreeS/WAN)S
36 232.2 M(attempts to create a connection opportunistically. If this fails, FreeS/WAN allows traffic in the clear.)S
/F6 SF 0 219 M(clear-or-private)S
/F4 SF 36 205.8 M(FreeS/WAN communicates cleartext with the listed CIDR blocks, but also accepts inbound OE)S
36 192.6 M(connection requests from them. Also known as passive OE \(pOE\), this policy may be used to create)S
36 179.4 M(an opportunistic responder.)S
/F6 SF 0 166.2 M(clear)S
/F4 SF 36 153 M(FreeS/WAN only communicates cleartext with the listed CIDR blocks.)S
/F6 SF 0 139.8 M(block)S
/F4 SF 36 126.6 M(FreeS/WAN blocks traffic to and from and the listed CIDR blocks. Inbound blocking is assumed to be)S
36 113.4 M(done by the firewall. FreeS/WAN offers firewall hooks but no modern firewall rules to help with)S
36 100.2 M(inbound blocking.)S
0 60.6 M(Notes:)S
36 34.2 M(Base Policy Groups apply to communication with this host only.)S
/Fc SF 28.19 34.2 M(\267 )S
/F8 SF 0 0 M(How to Configure Linux FreeS/WAN with Policy Groups)S
474.768 0 M(24)S
GR
SP
%%Page: 25 54
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(The most specific rule \(whether policy or pre-configured connection\) applies. This has several)S
36 673.8 M(practical applications:)S
72 660.6 M(If CIDR blocks overlap, FreeS/WAN chooses the most specific applicable block.)S
/Fc SF 60.967 660.6 M(\250 )S
/F4 SF 72 647.4 M(This decision also takes into account any pre-configured connections you may have.)S
/Fc SF 60.967 647.4 M(\250 )S
/F4 SF 72 634.2 M(If the most specific connection is a pre-configured connection, the following procedure)S
72 621 M(applies. If that connection is up, it will be used. If it is routed, it will be brought up. If it is)S
72 607.8 M(added, no action will be taken.)S
/Fc SF 60.967 634.2 M(\250 )S
28.19 687 M(\267 )S
/F4 SF 36 594.6 M(Base Policy Groups are created using built-in connections. Details in man ipsec.conf.)S
/Fc SF 28.19 594.6 M(\267 )S
/F4 SF 36 581.4 M(All Policy Groups are bidirectional. This chart shows some technical details. FreeS/WAN does not)S
36 568.2 M(support one-way encryption, since it can give users a false sense of security.)S
/Fc SF 28.19 581.4 M(\267 )S
17 FS/F9 SF 0 535.8 M(Using Policy Groups)S
11 FS/F4 SF 0 508.2 M(The Base Policy Groups which build IPsec connections rely on Opportunistic Encryption. To use the)S
0 495 M(following examples, you must first become OE-capable, as described in our quickstart guide.)S
14 FS/F9 SF 0 465.6 M(Example 1: Using a Base Policy Group)S
11 FS/F4 SF 0 438.6 M(Simply place CIDR blocks \(names, IPs or IP ranges\) in /etc/ipsec.d/policies/)S
/Fa SF ([groupname])S
/F4 SF (, and reread the)S
0 425.4 M(policy group files.)S
0 399 M(For example, the)S
/Fa SF ( private-or-clear)S
/F4 SF ( policy tells FreeS/WAN to prefer encrypted communication to the listed)S
0 385.8 M(CIDR blocks. Failing that, it allows talk in the clear.)S
0 359.4 M(To make this your default policy, place fullnet in the)S
/Fa SF ( private-or-clear)S
/F4 SF ( policy group file:)S
9 FS/F0 SF 0 335 M(    [root@xy root]# cat /etc/ipsec.d/policies/private-or-clear)S
0 324.2 M(    # This file defines the set of CIDRs \(network/mask-length\) to which)S
0 313.4 M(    # communication should be private, if possible, but in the clear otherwise.)S
0 302.6 M(    ....)S
0 291.8 M(    0.0.0.0/0)S
11 FS/F4 SF 0 265.8 M(and reload your policies with)S
9 FS/F0 SF 0 241.4 M(    ipsec auto --rereadgroups)S
11 FS/F4 SF 0 215.4 M(Use this test to verify opportunistic connections.)S
14 FS/F9 SF 0 172.8 M(Example 2: Defining IPsec Security Policy with Groups)S
11 FS/F4 SF 0 145.8 M(Defining IPsec security policy with Base Policy Groups is like creating a shopping list: just put CIDR blocks)S
0 132.6 M(in the appropriate group files. For example:)S
9 FS/F0 SF 0 108.2 M(    [root@xy root]# cd /etc/ipsec.d/policies)S
0 97.4 M(    [root@xy policies]# cat private)S
0 86.6 M(        192.0.2.96/27              # The finance department)S
0 75.8 M(        192.0.2.192/29             # HR)S
0 65 M(        192.0.2.12                 # HR gateway)S
0 54.2 M(        irc.private.example.com    # Private IRC server)S
0 32.6 M(    [root@xy policies]# cat private-or-clear)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Using Policy Groups)S
474.768 0 M(25)S
GR
SP
%%Page: 26 55
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(        0.0.0.0/0                  # My default policy: try to encrypt.)S
0 667.4 M(    [root@xy policies]# cat clear)S
0 656.6 M(        192.0.2.18/32              # My POP3 server)S
0 645.8 M(        192.0.2.19/32              # My Web proxy)S
0 624.2 M(    [root@xy policies]# cat block)S
0 613.4 M(        spamsource.example.com)S
11 FS/F4 SF 0 587.4 M(To make these settings take effect, type:)S
9 FS/F0 SF 0 563 M(    ipsec auto --rereadgroups)S
11 FS/F4 SF 0 537 M(Notes:)S
36 510.6 M(For opportunistic connection attempts to succeed, all participating FreeS/WAN hosts and gateways)S
36 497.4 M(must be configured for OE.)S
/Fc SF 28.19 510.6 M(\267 )S
/F4 SF 36 484.2 M(Examples 3 through 5 show how to implement a detailed)S
/Fa SF ( private)S
/F4 SF ( policy.)S
/Fc SF 28.19 484.2 M(\267 )S
1.00 0.00 0.00 C /F4 SF 36 471 M(Warning:)S
0.00 0.00 0.00 C ( Using DNS names in policy files and ipsec.conf can be tricky. If the name does not resolve,)S
36 457.8 M(the policy will not be implemented for that name. It is therefore safer either to use IPs, or to put any)S
36 444.6 M(critical names in /etc/hosts. We plan to implement periodic DNS retry to help with this.)S
36 431.4 M(Names are resolved at FreeS/WAN startup, or when the policies are reloaded. Unfortunately, name)S
36 418.2 M(lookup can hold up the startup process. If you have fast DNS servers, the problem may be less severe.)S
/Fc SF 28.19 471 M(\267 )S
14 FS/F9 SF 0 388.8 M(Example 3: Creating a Simple IPsec VPN with the)S
/Fb SF ( private)S
/F9 SF ( Group)S
11 FS/F4 SF 0 361.8 M(You can create an IPsec VPN between several hosts, with only one line of configuration per host, using the)S
/Fa SF 0 348.6 M(private)S
/F4 SF ( policy group.)S
0 322.2 M(First, use our quickstart guide to set up each participating host with a FreeS/WAN install and OE.)S
0 295.8 M(In one host's)S
/Fa SF ( /etc/ipsec.d/policies/private)S
/F4 SF (, list the peers to which you wish to protect traffic. For example:)S
9 FS/F0 SF 0 271.4 M(    [root@xy root]# cd /etc/ipsec.d/policies)S
0 260.6 M(    [root@xy policies]# cat private)S
0 249.8 M(        192.0.2.9              # several hosts at example.com)S
0 239 M(        192.0.2.11             )S
0 228.2 M(        192.0.2.12                 )S
0 217.4 M(        irc.private.example.com )S
11 FS/F4 SF 0 191.4 M(Copy the)S
/Fa SF ( private)S
/F4 SF ( file to each host. Remove the local host, and add the initial host.)S
9 FS/F0 SF 0 167 M(    scp2 /etc/ipsec.d/policies/private root@192.0.2.12:/etc/ipsec.d/policies/private)S
11 FS/F4 SF 0 141 M(On each host, reread the policy groups with)S
9 FS/F0 SF 0 116.6 M(    ipsec auto --rereadgroups)S
11 FS/F4 SF 0 90.6 M(That's it! You're configured.)S
0 64.2 M(Test by pinging between two hosts. After a second or two, traffic should flow, and)S
9 FS/F0 SF 0 39.8 M(    ipsec eroute)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Example 3: Creating a Simple IPsec VPN with the private Group)S
474.768 0 M(26)S
GR
SP
%%Page: 27 56
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(should yield something like)S
9 FS/F0 SF 0 662.6 M(    192.0.2.11/32   -> 192.0.2.8/32  => tun0x149f@192.0.2.8)S
11 FS/F4 SF 0 636.6 M(where your host IPs are substituted for 192.0.2.11 and 192.0.2.8.)S
0 610.2 M(If traffic does not flow, there may be an error in your OE setup. Revisit our quickstart guide.)S
0 583.8 M(Our next two examples show you how to add subnets to this IPsec VPN.)S
14 FS/F9 SF 0 541.2 M(Example 4: New Policy Groups to Protect a Subnet)S
11 FS/F4 SF 0 514.2 M(To protect traffic to a subnet behind your FreeS/WAN gateway, you'll need additional DNS records, and new)S
0 501 M(policy groups. To set up the DNS, see our quickstart guide. To create five new policy groups for your subnet,)S
0 487.8 M(copy these connections to)S
/Fa SF ( /etc/ipsec.conf)S
/F4 SF (. Substitute your subnet's IPs for 192.0.2.128/29.)S
9 FS/F0 SF 0 463.4 M(conn private-net)S
0 452.6 M(    also=private  # inherits settings \(eg. auto=start\) from built in conn)S
0 441.8 M(    leftsubnet=192.0.2.128/29  # your subnet's IPs here)S
0 420.2 M(conn private-or-clear-net)S
0 409.4 M(    also=private-or-clear)S
0 398.6 M(    leftsubnet=192.0.2.128/29)S
0 377 M(conn clear-or-private-net)S
0 366.2 M(    also=clear-or-private)S
0 355.4 M(    leftsubnet=192.0.2.128/29)S
0 333.8 M(conn clear-net)S
0 323 M(    also=clear)S
0 312.2 M(    leftsubnet=192.0.2.128/29)S
0 290.6 M(conn block-net)S
0 279.8 M(    also=block)S
0 269 M(    leftsubnet=192.0.2.128/29)S
11 FS/F4 SF 0 243 M(Copy the gateway's files to serve as the initial policy group files for the new groups:)S
9 FS/F0 SF 0 218.6 M(    cp -p /etc/ipsec.d/policies/private /etc/ipsec.d/policies/private-net)S
0 207.8 M(    cp -p /etc/ipsec.d/policies/private-or-clear /etc/ipsec.d/policies/private-or-clear-net)S
0 197 M(    cp -p /etc/ipsec.d/policies/clear-or-private /etc/ipsec.d/policies/clear-or-private-net)S
0 186.2 M(    cp -p /etc/ipsec.d/policies/clear /etc/ipsec.d/policies/clear-net)S
0 175.4 M(    cp -p /etc/ipsec.d/policies/block /etc/ipsec.d/policies/block)S
11 FS/F7 SF 0 149.4 M(Tip: Since a missing policy group file is equivalent to a file with no entries, you need only create files for)S
0 136.2 M(the connections you'll use.)S
/F4 SF 0 109.8 M(To test one of your new groups, place the fullnet 0.0.0.0/0 in)S
/Fa SF ( private-or-clear-net)S
/F4 SF (. Perform the subnet test)S
0 96.6 M(in our quickstart guide. You should see a connection, and)S
9 FS/F0 SF 0 72.2 M(    ipsec eroute)S
11 FS/F4 SF 0 46.2 M(should include an entry which mentions the subnet node's IP and the OE test site IP, like this:)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Example 4: New Policy Groups to Protect a Subnet)S
474.768 0 M(27)S
GR
SP
%%Page: 28 57
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(    192.0.2.131/32   -> 192.139.46.77/32  => tun0x149f@192.0.2.11)S
14 FS/F9 SF 0 660 M(Example 5: Adding a Subnet to the VPN)S
11 FS/F4 SF 0 633 M(Suppose you wish to secure traffic to a subnet 192.0.2.192/29 behind a FreeS/WAN box 192.0.2.12.)S
0 606.6 M(First, add DNS entries to configure 192.0.2.12 as an opportunistic gateway for that subnet. Instructions are in)S
0 593.4 M(our quickstart guide. Next, create a)S
/Fa SF ( private-net)S
/F4 SF ( group on 192.0.2.12 as described in Example 4.)S
0 567 M(On each other host, add the subnet 192.0.2.192/29 to)S
/Fa SF ( private)S
/F4 SF (, yielding for example)S
9 FS/F0 SF 0 542.6 M(    [root@xy root]# cd /etc/ipsec.d/policies)S
0 531.8 M(    [root@xy policies]# cat private)S
0 521 M(        192.0.2.9              # several hosts at example.com)S
0 510.2 M(        192.0.2.11)S
0 499.4 M(        192.0.2.12             # HR department gateway)S
0 488.6 M(        192.0.2.192/29         # HR subnet)S
0 477.8 M(        irc.private.example.com)S
11 FS/F4 SF 0 451.8 M(and reread policy groups with)S
9 FS/F0 SF 0 427.4 M(    ipsec auto --rereadgroups)S
11 FS/F4 SF 0 401.4 M(That's all the configuration you need.)S
0 375 M(Test your VPN by pinging from a machine on 192.0.2.192/29 to any other host:)S
9 FS/F0 SF 0 350.6 M(    [root@192.0.2.194]# ping 192.0.2.11)S
11 FS/F4 SF 0 324.6 M(After a second or two, traffic should flow, and)S
9 FS/F0 SF 0 300.2 M(    ipsec eroute)S
11 FS/F4 SF 0 274.2 M(should yield something like)S
9 FS/F0 SF 0 249.8 M(    192.0.2.11/32   -> 192.0.2.194/32  => tun0x149f@192.0.2.12)S
11 FS/F4 SF 0 223.8 M(Key:)S
1.432 195.968 M(1.)S
13.384 195.968 M(192.0.2.11/32)S
83.394 195.968 M(Local start point of the protected traffic.)S
1.432 179.903 M(2.)S
13.384 179.903 M(192.0.2.194/32)S
83.394 179.903 M(Remote end point of the protected traffic.)S
1.432 163.838 M(3.)S
13.384 163.838 M(192.0.2.12)S
83.394 163.838 M(Remote FreeS/WAN node \(gateway or host\). May be the same as \(2\).)S
1.432 141.173 M(4.)S
13.384 141.173 M([not shown])S
83.394 147.773 M(Local FreeS/WAN node \(gateway or host\), where you've produced the output. May be the)S
83.394 134.573 M(same as \(1\).)S
0 106.741 M(For additional assurance, you can verify with a packet sniffer that the traffic is being encrypted.)S
0 80.341 M(Note)S
36 53.941 M(Because strangers may also connect via OE, this type of VPN may require a stricter firewalling policy)S
36 40.741 M(than a conventional VPN.)S
/Fc SF 28.19 53.941 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Example 5: Adding a Subnet to the VPN)S
474.768 0 M(28)S
GR
SP
%%Page: 29 58
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
17 FS/F9 SF 0 681 M(Appendix)S
14 FS/F9 SF 0 637.2 M(Our Hidden Connections)S
11 FS/F4 SF 0 610.2 M(Our Base Policy Groups are created using hidden connections. These are spelled out in man ipsec.conf and)S
0 597 M(defined in)S
/Fa SF ( /usr/local/lib/ipsec/_confread)S
/F4 SF (.)S
14 FS/F9 SF 0 554.4 M(Custom Policy Groups)S
11 FS/F4 SF 0 527.4 M(A policy group is built using a special connection description in)S
/Fa SF ( ipsec.conf)S
/F4 SF (, which:)S
36 501 M(is)S
/F7 SF ( generic)S
/F4 SF (. It uses)S
/Fa SF ( right=[%group|%opportunisticgroup])S
/F4 SF ( rather than specific IPs. The connection is)S
36 487.8 M(cloned for every name or IP range listed in its Policy Group file.)S
/Fc SF 28.19 501 M(\267 )S
/F4 SF 36 474.6 M(often has a)S
/F7 SF ( failure rule)S
/F4 SF (. This rule, written)S
/Fa SF ( failureshunt=[passthrough|drop|reject|none])S
/F4 SF (, tells)S
36 461.4 M(FreeS/WAN what to do with packets for these CIDRs if it fails to establish the connection. Default is)S
/Fa SF 36 448.2 M(none)S
/F4 SF (.)S
/Fc SF 28.19 474.6 M(\267 )S
/F4 SF 0 421.8 M(To create a new group:)S
36 395.4 M(Create its connection definition in)S
/Fa SF ( ipsec.conf)S
/F4 SF (.)S
25 395.4 M(1. )S
36 382.2 M(Create a Policy Group file in)S
/Fa SF ( /etc/ipsec.d/policies)S
/F4 SF ( with the same name as your connection.)S
25 382.2 M(2. )S
36 369 M(Put a CIDR block in that file.)S
25 369 M(3. )S
36 355.8 M(Reread groups with)S
/Fa SF ( ipsec auto --rereadgroups)S
/F4 SF (.)S
25 355.8 M(4. )S
36 342.6 M(Test:)S
/Fa SF ( ping)S
/F4 SF ( to activate any OE connection, and view results with)S
/Fa SF ( ipsec eroute)S
/F4 SF (.)S
25 342.6 M(5. )S
14 FS/F9 SF 0 300 M(Disabling Opportunistic Encryption)S
11 FS/F4 SF 0 273 M(To disable OE \(eg. policy groups and packetdefault\), cut and paste the following lines to)S
/Fa SF ( /etc/ipsec.conf)S
/F4 SF (:)S
9 FS/F0 SF 0 248.6 M(conn block)S
0 237.8 M(    auto=ignore)S
0 216.2 M(conn private)S
0 205.4 M(    auto=ignore)S
0 183.8 M(conn private-or-clear)S
0 173 M(    auto=ignore)S
0 151.4 M(conn clear-or-private)S
0 140.6 M(    auto=ignore)S
0 119 M(conn clear)S
0 108.2 M(    auto=ignore)S
0 86.6 M(conn packetdefault)S
0 75.8 M(    auto=ignore)S
11 FS/F4 SF 0 49.8 M(Restart FreeS/WAN so that the changes take effect:)S
9 FS/F0 SF 0 25.4 M(    ipsec setup restart)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Appendix)S
474.768 0 M(29)S
GR
SP
%%Page: 30 59
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
0 599.4 M 487.0 2.0 F
20 FS/F9 SF 0 678 M(FreeS/WAN FAQ)S
11 FS/F4 SF 0 649.8 M(This is a collection of questions and answers, mostly taken from the FreeS/WAN mailing list. See the project)S
0 636.6 M(web site for more information. All the FreeS/WAN documentation is online there.)S
0 610.2 M(Contributions to the FAQ are welcome. Please send them to the project mailing list.)S
17 FS/F9 SF 0 575.8 M(Index of FAQ questions)S
11 FS/F4 SF 36 548.2 M(What is FreeS/WAN?)S
/Fc SF 28.19 548.2 M(\267 )S
/F4 SF 36 535 M(How do I report a problem or seek help?)S
/Fc SF 28.19 535 M(\267 )S
/F4 SF 36 521.8 M(Can I get ...)S
72 508.6 M(... an off-the-shelf system that includes FreeS/WAN?)S
/Fc SF 60.967 508.6 M(\250 )S
/F4 SF 72 495.4 M(... contractors or staff who know FreeS/WAN?)S
/Fc SF 60.967 495.4 M(\250 )S
/F4 SF 72 482.2 M(... commercial support?)S
/Fc SF 60.967 482.2 M(\250 )S
28.19 521.8 M(\267 )S
/F4 SF 36 469 M(Release questions)S
72 455.8 M(What is the current release?)S
/Fc SF 60.967 455.8 M(\250 )S
/F4 SF 72 442.6 M(When is the next release?)S
/Fc SF 60.967 442.6 M(\250 )S
/F4 SF 72 429.4 M(Are there known bugs in the current release?)S
/Fc SF 60.967 429.4 M(\250 )S
28.19 469 M(\267 )S
/F4 SF 36 416.2 M(Modifications and contributions)S
72 403 M(Can I modify FreeS/WAN to ...?)S
/Fc SF 60.967 403 M(\250 )S
/F4 SF 72 389.8 M(Can I contribute to the project?)S
/Fc SF 60.967 389.8 M(\250 )S
/F4 SF 72 376.6 M(Is there detailed design documentation?)S
/Fc SF 60.967 376.6 M(\250 )S
28.19 416.2 M(\267 )S
/F4 SF 36 363.4 M(Will FreeS/WAN work in my environment?)S
72 350.2 M(Can FreeS/WAN talk to ... ?)S
/Fc SF 60.967 350.2 M(\250 )S
/F4 SF 72 337 M(Can different FreeS/WAN versions talk to each other?)S
/Fc SF 60.967 337 M(\250 )S
/F4 SF 72 323.8 M(Is there a limit on throughput?)S
/Fc SF 60.967 323.8 M(\250 )S
/F4 SF 72 310.6 M(Is there a limit on number of connections?)S
/Fc SF 60.967 310.6 M(\250 )S
/F4 SF 72 297.4 M(Is a ... fast enough to handle FreeS/WAN with my loads?)S
/Fc SF 60.967 297.4 M(\250 )S
28.19 363.4 M(\267 )S
/F4 SF 36 284.2 M(Will FreeS/WAN work on ...)S
72 271 M(... my version of Linux?)S
/Fc SF 60.967 271 M(\250 )S
/F4 SF 72 257.8 M(... non-Intel CPUs?)S
/Fc SF 60.967 257.8 M(\250 )S
/F4 SF 72 244.6 M(... multiprocessors?)S
/Fc SF 60.967 244.6 M(\250 )S
/F4 SF 72 231.4 M(... an older kernel?)S
/Fc SF 60.967 231.4 M(\250 )S
/F4 SF 72 218.2 M(... the latest kernel version?)S
/Fc SF 60.967 218.2 M(\250 )S
/F4 SF 72 205 M(... unusual network hardware?)S
/Fc SF 60.967 205 M(\250 )S
/F4 SF 72 191.8 M(... a VLAN \(802.1q\) network?)S
/Fc SF 60.967 191.8 M(\250 )S
28.19 284.2 M(\267 )S
/F4 SF 36 178.6 M(Does FreeS/WAN support ...)S
72 165.4 M(... site-to-site VPN applications)S
/Fc SF 60.967 165.4 M(\250 )S
/F4 SF 72 152.2 M(... remote users connecting to a LAN)S
/Fc SF 60.967 152.2 M(\250 )S
/F4 SF 72 139 M(... remote users using shared secret authentication?)S
/Fc SF 60.967 139 M(\250 )S
/F4 SF 72 125.8 M(... wireless networks)S
/Fc SF 60.967 125.8 M(\250 )S
/F4 SF 72 112.6 M(... X.509 or other PKI certificates?)S
/Fc SF 60.967 112.6 M(\250 )S
/F4 SF 72 99.4 M(... user authentication \(Radius, SecureID, Smart Card ...\)?)S
/Fc SF 60.967 99.4 M(\250 )S
/F4 SF 72 86.2 M(... NAT traversal)S
/Fc SF 60.967 86.2 M(\250 )S
/F4 SF 72 73 M(... assigning a "virtual identity" to a remote system?)S
/Fc SF 60.967 73 M(\250 )S
/F4 SF 72 59.8 M(... single DES encryption?)S
/Fc SF 60.967 59.8 M(\250 )S
/F4 SF 72 46.6 M(... AES encryption?)S
/Fc SF 60.967 46.6 M(\250 )S
/F4 SF 72 33.4 M(... other encryption algorithms?)S
/Fc SF 60.967 33.4 M(\250 )S
28.19 178.6 M(\267 )S
/F8 SF 0 0 M(FreeS/WAN FAQ)S
474.768 0 M(30)S
GR
SP
%%Page: 31 60
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(Can I ...)S
72 673.8 M(...use policy groups along with explicitly configured connections?)S
/Fc SF 60.967 673.8 M(\250 )S
/F4 SF 72 660.6 M(...turn off policy groups?)S
/Fc SF 60.967 660.6 M(\250 )S
/F4 SF 72 634.2 M(... reload connection info without restarting?)S
/Fc SF 60.967 634.2 M(\250 )S
/F4 SF 72 621 M(... use several masqueraded subnets?)S
/Fc SF 60.967 621 M(\250 )S
/F4 SF 72 607.8 M(... use subnets masqueraded to the same addresses?)S
/Fc SF 60.967 607.8 M(\250 )S
/F4 SF 72 594.6 M(... assign a road warrior an address on my net \(a virtual identity\)?)S
/Fc SF 60.967 594.6 M(\250 )S
/F4 SF 72 581.4 M(... support many road warriors with one gateway?)S
/Fc SF 60.967 581.4 M(\250 )S
/F4 SF 72 568.2 M(... have many road warriors using shared secret authentication?)S
/Fc SF 60.967 568.2 M(\250 )S
/F4 SF 72 555 M(... use Quality of Service routing with FreeS/WAN?)S
/Fc SF 60.967 555 M(\250 )S
/F4 SF 72 541.8 M(... recognise dead tunnels and shut them down?)S
/Fc SF 60.967 541.8 M(\250 )S
/F4 SF 72 528.6 M(... build IPsec tunnels over a demand-dialed link?)S
/Fc SF 60.967 528.6 M(\250 )S
/F4 SF 72 515.4 M(... build GRE, L2TP or PPTP tunnels over IPsec?)S
/Fc SF 60.967 515.4 M(\250 )S
/F4 SF 72 502.2 M(... use Network Neighborhood \(Samba, NetBIOS\) over IPsec?)S
/Fc SF 60.967 502.2 M(\250 )S
28.19 687 M(\267 )S
/F4 SF 36 489 M(Life's little mysteries)S
72 475.8 M(I cannot ping ....)S
/Fc SF 60.967 475.8 M(\250 )S
/F4 SF 72 462.6 M(It takes forever to ...)S
/Fc SF 60.967 462.6 M(\250 )S
/F4 SF 72 449.4 M(I send packets to the tunnel with route\(8\) but they vanish)S
/Fc SF 60.967 449.4 M(\250 )S
/F4 SF 72 436.2 M(When a tunnel goes down, packets vanish)S
/Fc SF 60.967 436.2 M(\250 )S
/F4 SF 72 423 M(The firewall ate my packets!)S
/Fc SF 60.967 423 M(\250 )S
/F4 SF 72 409.8 M(Dropped connections)S
/Fc SF 60.967 409.8 M(\250 )S
/F4 SF 72 396.6 M(Disappearing %defaultroute)S
/Fc SF 60.967 396.6 M(\250 )S
/F4 SF 72 383.4 M(TCPdump on the gateway shows strange things)S
/Fc SF 60.967 383.4 M(\250 )S
/F4 SF 72 370.2 M(Traceroute does not show anything between the gateways)S
/Fc SF 60.967 370.2 M(\250 )S
28.19 489 M(\267 )S
/F4 SF 36 357 M(Testing in stages \(or .... works but ... doesn't\))S
72 343.8 M(Manually keyed connections don't work)S
/Fc SF 60.967 343.8 M(\250 )S
/F4 SF 72 330.6 M(One manual connection works, but second one fails)S
/Fc SF 60.967 330.6 M(\250 )S
/F4 SF 72 317.4 M(Manual connections work, but automatic keying doesn't)S
/Fc SF 60.967 317.4 M(\250 )S
/F4 SF 72 304.2 M(IPsec works, but connections using compression fail)S
/Fc SF 60.967 304.2 M(\250 )S
/F4 SF 72 291 M(Small packets work, but large transfers fail)S
/Fc SF 60.967 291 M(\250 )S
/F4 SF 72 277.8 M(Subnet-to-subnet works, but tests from the gateways don't)S
/Fc SF 60.967 277.8 M(\250 )S
28.19 357 M(\267 )S
/F4 SF 36 264.6 M(Compilation problems)S
72 251.4 M(gmp.h: No such file or directory)S
/Fc SF 60.967 251.4 M(\250 )S
/F4 SF 72 238.2 M(... virtual memory exhausted)S
/Fc SF 60.967 238.2 M(\250 )S
28.19 264.6 M(\267 )S
/F4 SF 36 225 M(Interpreting error messages)S
72 211.8 M(route-client \(or host\) exited with status 7)S
/Fc SF 60.967 211.8 M(\250 )S
/F4 SF 72 198.6 M(SIOCADDRT:Network is unreachable)S
/Fc SF 60.967 198.6 M(\250 )S
/F4 SF 72 185.4 M(ipsec_setup: modprobe: Can't locate moduleipsec)S
/Fc SF 60.967 185.4 M(\250 )S
/F4 SF 72 172.2 M(ipsec_setup: Fatal error, kernel appears to lack KLIPS)S
/Fc SF 60.967 172.2 M(\250 )S
/F4 SF 72 159 M(ipsec_setup: ... failure to fetch key for ... from DNS)S
/Fc SF 60.967 159 M(\250 )S
/F4 SF 72 145.8 M(ipsec_setup: ... interfaces ... and ... share address ...)S
/Fc SF 60.967 145.8 M(\250 )S
/F4 SF 72 132.6 M(ipsec_setup: Cannot adjust kernel flags)S
/Fc SF 60.967 132.6 M(\250 )S
/F4 SF 72 119.4 M(Message numbers \(MI3, QR1, et cetera\) in Pluto messages)S
/Fc SF 60.967 119.4 M(\250 )S
/F4 SF 72 106.2 M(Connection names in Pluto error messages)S
/Fc SF 60.967 106.2 M(\250 )S
/F4 SF 72 93 M(Pluto: ... can't orient connection)S
/Fc SF 60.967 93 M(\250 )S
/F4 SF 72 79.8 M(... we have no ipsecN interface for either end of this connection)S
/Fc SF 60.967 79.8 M(\250 )S
/F4 SF 72 66.6 M(Pluto: ... no connection is known)S
/Fc SF 60.967 66.6 M(\250 )S
/F4 SF 72 53.4 M(Pluto: ... no suitable connection ...)S
/Fc SF 60.967 53.4 M(\250 )S
/F4 SF 72 40.2 M(Pluto: ... no connection has been authorized)S
/Fc SF 60.967 40.2 M(\250 )S
/F4 SF 72 27 M(Pluto: ... OAKLEY_DES_CBC is not supported.)S
/Fc SF 60.967 27 M(\250 )S
28.19 225 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(FreeS/WAN FAQ)S
474.768 0 M(31)S
GR
SP
%%Page: 32 61
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
0 570.6 M 487.0 2.0 F
11 FS/F4 SF 72 687 M(Pluto: ... no acceptable transform)S
/Fc SF 60.967 687 M(\250 )S
/F4 SF 72 673.8 M(rsasigkey dumps core)S
/Fc SF 60.967 673.8 M(\250 )S
/F4 SF 72 660.6 M(!Pluto failure!: ... exited with ... signal 4)S
/Fc SF 60.967 660.6 M(\250 )S
/F4 SF 72 647.4 M(ECONNREFUSED error message)S
/Fc SF 60.967 647.4 M(\250 )S
/F4 SF 72 634.2 M(klips_debug: ... no eroute!)S
/Fc SF 60.967 634.2 M(\250 )S
/F4 SF 72 621 M(... trouble writing to /dev/ipsec ... SA already in use)S
/Fc SF 60.967 621 M(\250 )S
/F4 SF 72 607.8 M(... ignoring ... payload)S
/Fc SF 60.967 607.8 M(\250 )S
/F4 SF 72 594.6 M(unknown parameter name "rightcert")S
/Fc SF 60.967 594.6 M(\250 )S
/F4 SF 36 581.4 M(Why don't you restrict the mailing lists to reduce spam?)S
/Fc SF 28.19 581.4 M(\267 )S
17 FS/F9 SF 0 547 M(What is FreeS/WAN?)S
11 FS/F4 SF 0 519.4 M(FreeS/WAN is a Linux implementation of the IPsec protocols, providing security services at the IP \(Internet)S
0 506.2 M(Protocol\) level of the network.)S
0 479.8 M(For more detail, see our introduction document or the FreeS/WAN project web site.)S
0 453.4 M(To start setting it up, go to our quickstart guide.)S
0 427 M(Our web links document has information on IPsec for other systems.)S
17 FS/F9 SF 0 394.6 M(How do I report a problem or seek help?)S
11 FS/F6 SF 0 367 M(Read our troubleshooting document.)S
/F4 SF 36 353.8 M(It may guide you to a solution. If not, see its problem reporting section.)S
36 327.4 M(Basically, what it says is)S
/F7 SF ( give us the output from)S
/Fb SF ( ipsec barf)S
/F7 SF ( from both gateways)S
/F4 SF (. Without full)S
36 314.2 M(information, we cannot diagnose a problem. However,)S
/Fa SF ( ipsec barf)S
/F4 SF ( produces a lot of output. If at all)S
36 301 M(possible,)S
/F7 SF ( please make barfs accessible via the web or FTP)S
/F4 SF ( rather than sending enormous mail)S
36 287.8 M(messages.)S
/F7 SF 0 274.6 M(Use the users mailing list for problem reports)S
/F6 SF (, rather than mailing developers directly.)S
/F4 SF 72 261.4 M(This gives you access to more expertise, including users who may have encountered and)S
72 248.2 M(solved the same problems.)S
/Fc SF 63.816 261.4 M(\340 )S
/F4 SF 72 235 M(It is more likely to get a quick response. Developers may get behind on email, or even ignore)S
72 221.8 M(it entirely for a while, but a list message \(given a reasonable Subject: line\) is certain to be)S
72 208.6 M(read by a fair number of people within hours.)S
/Fc SF 63.816 235 M(\340 )S
/F4 SF 72 195.4 M(It may also be important because of cryptography export laws. A US citizen who provides)S
72 182.2 M(technical assistance to foreign cryptographic work might be charged under the arms export)S
72 169 M(regulations. Such a charge would be easier to defend if the discussion took place on a public)S
72 155.8 M(mailing list than if it were done in private mail.)S
/Fc SF 63.816 195.4 M(\340 )S
/F6 SF 0 142.6 M(Try irc.freenode.net#freeswan.)S
/F4 SF 36 129.4 M(FreeS/WAN developers, volunteers and users can often be found there. Be patient and be prepared to)S
36 116.2 M(provide lots of information to support your question.)S
36 89.8 M(If your question was really interesting, and you found an answer, please share that with the class by)S
36 76.6 M(posting to the users mailing list. That way others with the same problem can find your answer in the)S
36 63.4 M(archives.)S
/F6 SF 0 50.2 M(Premium support is also available.)S
/F4 SF 36 37 M(See the next several questions.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(What is FreeS/WAN?)S
474.768 0 M(32)S
GR
SP
%%Page: 33 62
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
17 FS/F9 SF 0 681 M(Can I get ...)S
14 FS/F9 SF 0 650.4 M(Can I get an off-the-shelf system that includes FreeS/WAN?)S
11 FS/F4 SF 0 623.4 M(There are a number of Linux distributions or firewall products which include FreeS/WAN. See this list. Using)S
0 610.2 M(one of these, chosen to match your requirements and budget, may save you considerable time and effort.)S
0 583.8 M(If you don't know your requirements, start by reading Schneier's Secrets and Lies. That gives the best)S
0 570.6 M(overview of security issues I have seen. Then consider hiring a consultant \(see next question\) to help define)S
0 557.4 M(your requirements.)S
14 FS/F9 SF 0 528 M(Can I hire consultants or staff who know FreeS/WAN?)S
11 FS/F4 SF 0 501 M(If you want the help of a contractor, or to hire staff with FreeS/WAN expertise, you could:)S
36 474.6 M(check availability in your area through your local Linux User Group \(LUG Index\))S
/Fc SF 28.19 474.6 M(\267 )S
/F4 SF 36 461.4 M(try asking on our mailing list)S
/Fc SF 28.19 461.4 M(\267 )S
/F4 SF 0 435 M(For companies offerring support, see the next question.)S
14 FS/F9 SF 0 405.6 M(Can I get commercial support?)S
11 FS/F4 SF 0 378.6 M(Many of the distributions or firewall products which include FreeS/WAN \(see this list\) come with commercial)S
0 365.4 M(support or have it available as an option.)S
0 339 M(Various companies specialize in commercial support of open source software. Our project leader was a)S
0 325.8 M(founder of the first such company, Cygnus Support. It has since been bought by Redhat. Another such firm is)S
0 312.6 M(Linuxcare.)S
17 FS/F9 SF 0 280.2 M(Release questions)S
14 FS/F9 SF 0 249.6 M(What is the current release?)S
11 FS/F4 SF 0 222.6 M(The current release is the highest-numbered tarball on our distribution site. Almost always, any of the mirrors)S
0 209.4 M(will have the same file, though perhaps not for a day or so after a release.)S
0 183 M(Unfortunately, the web site is not always updated as quickly as it should be.)S
14 FS/F9 SF 0 153.6 M(When is the next release?)S
11 FS/F4 SF 0 126.6 M(We try to do a release approximately every six to eight weeks.)S
0 100.2 M(If pre-release tests fail and the fix appears complex, or more generally if the code does not appear stable)S
0 87 M(when a release is scheduled, we will just skip that release.)S
0 60.6 M(For serious bugs, we may bring out an extra bug-fix release. These get numbers in the normal release series.)S
0 47.4 M(For example, there was a bug found in FreeS/WAN 1.6, so we did another release less than two weeks later.)S
0 34.2 M(The bug-fix release was called 1.7.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Can I get ...)S
474.768 0 M(33)S
GR
SP
%%Page: 34 63
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(Are there known bugs in the current release?)S
11 FS/F4 SF 0 657 M(Any problems we are aware of at the time of a release are documented in the BUGS file for that release. You)S
0 643.8 M(should also look at the CHANGES file.)S
0 617.4 M(Bugs discovered after a release are discussed on the mailing lists. The easiest way to check for any problems)S
0 604.2 M(in the current code would be to peruse the List In Brief.)S
17 FS/F9 SF 0 571.8 M(Modifications and contributions)S
14 FS/F9 SF 0 541.2 M(Can I modify FreeS/WAN to ...?)S
11 FS/F4 SF 0 514.2 M(You are free to modify FreeS/WAN in any way. See the discussion of licensing in our introduction document.)S
0 487.8 M(Before investing much energy in any such project, we suggest that you)S
36 461.4 M(check the list of existing patches)S
/Fc SF 28.19 461.4 M(\267 )S
/F4 SF 36 448.2 M(post something about your project to the design mailing list)S
/Fc SF 28.19 448.2 M(\267 )S
/F4 SF 0 421.8 M(This may prevent duplicated effort, or lead to interesting collaborations.)S
14 FS/F9 SF 0 392.4 M(Can I contribute to the project?)S
11 FS/F4 SF 0 365.4 M(In general, we welcome contributions from the community. Various contributed patches, either to fix bugs or)S
0 352.2 M(to add features, have been incorporated into our distribution. Other patches, not yet included in the)S
0 339 M(distribution, are listed in our web links section.)S
0 312.6 M(Users have also contributed heavily to documentation, both by creating their own HowTos and by posting)S
0 299.4 M(things on the mailing lists which I have quoted in these HTML docs.)S
0 273 M(There are, however, some caveats.)S
0 246.6 M(FreeS/WAN is being implemented in Canada, by Canadians, largely to ensure that is it is entirely free of)S
0 233.4 M(export restrictions. See this discussion. We)S
/F7 SF ( cannot accept code contributions from US residents or citizens)S
/F4 SF (,)S
0 220.2 M(not even one-line bugs fixes. The reasons for this were recently discussed extensively on the mailing list, in a)S
0 207 M(thread starting here.)S
0 180.6 M(Not all contributions are of interest to us. The project has a set of fairly ambitious and quite specific goals,)S
0 167.4 M(described in our introduction. Contributions that lead toward these goals are likely to be welcomed)S
0 154.2 M(enthusiastically. Other contributions may be seen as lower priority, or even as a distraction.)S
0 127.8 M(Discussion of possible contributions takes place on the design mailing list.)S
14 FS/F9 SF 0 98.4 M(Is there detailed design documentation?)S
11 FS/F4 SF 0 71.4 M(There are:)S
36 45 M(RFCs specifying the protocols we implement)S
/Fc SF 28.19 45 M(\267 )S
/F4 SF 36 31.8 M(man pages for our utilities, library functions and file formats)S
/Fc SF 28.19 31.8 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Are there known bugs in the current release?)S
474.768 0 M(34)S
GR
SP
%%Page: 35 64
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(comments in the source code)S
/Fc SF 28.19 687 M(\267 )S
/F4 SF 36 673.8 M(HTML documentation written primarily for users)S
/Fc SF 28.19 673.8 M(\267 )S
/F4 SF 36 660.6 M(archived discussions from the mailing lists)S
/Fc SF 28.19 660.6 M(\267 )S
/F4 SF 36 647.4 M(other papers mentioned in our introduction)S
/Fc SF 28.19 647.4 M(\267 )S
/F4 SF 0 621 M(The only formal design documents are a few papers in the last category above. All the other categories,)S
0 607.8 M(however, have things to say about design as well.)S
17 FS/F9 SF 0 575.4 M(Will FreeS/WAN work in my environment?)S
14 FS/F9 SF 0 544.8 M(Can FreeS/WAN talk to ...?)S
11 FS/F4 SF 0 517.8 M(The IPsec protocols are designed to support interoperation. In theory, any two IPsec implementations should)S
0 504.6 M(be able to talk to each other. In practice, it is considerably more complex. We have a whole interoperation)S
0 491.4 M(document devoted to this problem.)S
0 465 M(An important part of that document is links to the many user-written HowTos on interoperation between)S
0 451.8 M(FreeS/WAN and various other implementations. Often the users know more than the developers about these)S
0 438.6 M(issues \(and almost always more than me :-\), so these documents may be your best resource.)S
14 FS/F9 SF 0 409.2 M(Can different FreeS/WAN versions talk to each other?)S
11 FS/F4 SF 0 382.2 M(Linux FreeS/WAN can interoperate with many IPsec implementations, including earlier versions of Linux)S
0 369 M(FreeS/WAN itself.)S
0 342.6 M(In a few cases, there are some complications. See our interoperation document for details.)S
14 FS/F9 SF 0 313.2 M(Is there a limit on throughput?)S
11 FS/F4 SF 0 286.2 M(There is no hard limit, but see below.)S
14 FS/F9 SF 0 256.8 M(Is there a limit on number of tunnels?)S
11 FS/F4 SF 0 229.8 M(There is no hard limit, but see next question.)S
14 FS/F9 SF 0 200.4 M(Is a ... fast enough to handle FreeS/WAN with my loads?)S
11 FS/F4 SF 0 173.4 M(A quick summary:)S
/F6 SF 0 147 M(Even a limited machine can be useful)S
/F4 SF 36 133.8 M(A 486 can handle a T1, ADSL or cable link, though the machine may be breathing hard.)S
/F6 SF 0 120.6 M(A mid-range PC \(say 800 MHz with good network cards\) can do a lot of IPsec)S
/F4 SF 36 107.4 M(With up to roughly 50 tunnels and aggregate bandwidth of 20 Megabits per second, it willl have)S
36 94.2 M(cycles left over for other tasks.)S
/F6 SF 0 81 M(There are limits)S
/F4 SF 36 67.8 M(Even a high end CPU will not come close to handling a fully loaded 100 Mbit/second Ethernet link.)S
36 41.4 M(Beyond about 50 tunnels it needs careful management.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Will FreeS/WAN work in my environment?)S
474.768 0 M(35)S
GR
SP
%%Page: 36 65
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(See our FreeS/WAN performance document for details.)S
17 FS/F9 SF 0 654.6 M(Will FreeS/WAN work on ... ?)S
14 FS/F9 SF 0 624 M(Will FreeS/WAN run on my version of Linux?)S
11 FS/F4 SF 0 597 M(We build and test on Redhat distributions, but FreeS/WAN runs just fine on several other distributions,)S
0 583.8 M(sometimes with minor fiddles to adapt to the local environment. Details are in our compatibility document.)S
0 570.6 M(Also, some distributions or products come with FreeS/WAN included.)S
14 FS/F9 SF 0 541.2 M(Will FreeS/WAN run on non-Intel CPUs?)S
11 FS/F4 SF 0 514.2 M(FreeS/WAN is)S
/F7 SF ( intended to run on all CPUs Linux supports)S
/F4 SF (. We know of it being used in production on x86,)S
0 501 M(ARM, Alpha and MIPS. It has also had successful tests on PPC and SPARC, though we don't know of actual)S
0 487.8 M(use there. Details are in our compatibility document.)S
14 FS/F9 SF 0 458.4 M(Will FreeS/WAN run on multiprocessors?)S
11 FS/F4 SF 0 431.4 M(FreeS/WAN is designed to work on any SMP architecture Linux supports, and has been tested successfully on)S
0 418.2 M(at least dual processor Intel architecture machines. Details are in our compatibility document.)S
14 FS/F9 SF 0 388.8 M(Will FreeS/WAN work on an older kernel?)S
11 FS/F4 SF 0 361.8 M(It might, but we strongly recommend using a recent 2.2 or 2.4 series kernel. Sometimes the newer versions)S
0 348.6 M(include security fixes which can be quite important on a gateway.)S
0 322.2 M(Also, we use recent kernels for development and testing, so those are better tested and, if you do encounter a)S
0 309 M(problem, more easily supported. If something breaks applying recent FreeS/WAN patches to an older kernel,)S
0 295.8 M(then "update your kernel" is almost certain to be the first thing we suggest. It may be the only suggestion we)S
0 282.6 M(have.)S
0 256.2 M(The precise kernel versions supported by a particular FreeS/WAN release are given in the README file of)S
0 243 M(that release.)S
0 216.6 M(See the following question for more on kernels.)S
14 FS/F9 SF 0 187.2 M(Will FreeS/WAN run on the latest kernel version?)S
11 FS/F4 SF 0 160.2 M(Sometimes yes, but quite often, no.)S
0 133.8 M(Kernel versions supported are given in the README file of each FreeS/WAN release. Typically, they are)S
0 120.6 M(whatever production kernels were current at the time of our release \(or shortly before; we might release for)S
0 107.4 M(kernel)S
/Fa SF ( n)S
/F4 SF ( just as Linus releases)S
/Fa SF ( n+1)S
/F4 SF (\). Often FreeS/WAN will work on slightly later kernels as well, but of)S
0 94.2 M(course this cannot be guaranteed.)S
0 67.8 M(For example, FreeS/WAN 1.91 was released for kernels 2.2.19 or 2.4.5, the current kernels at the time. It also)S
0 54.6 M(worked on 2.4.6, 2.4.7 and 2.4.8, but 2.4.9 had changes that caused compilation errors if it was patched with)S
0 41.4 M(FreeS/WAN 1.91.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Will FreeS/WAN work on ... ?)S
474.768 0 M(36)S
GR
SP
%%Page: 37 66
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(When such changes appear, we put a fix in the FreeS/WAN snapshots, and distribute it with our next release.)S
0 673.8 M(However, this is not a high priority for us, and it may take anything from a few days to several weeks for such)S
0 660.6 M(a problem to find its way to the top of our kernel programmer's To-Do list. In the meanwhile, you have two)S
0 647.4 M(choices:)S
36 621 M(either stick with a slightly older kernel, even if it is not the latest and greatest. This is recommended)S
36 607.8 M(for production systems; new versions may have new bugs.)S
/Fc SF 28.19 621 M(\267 )S
/F4 SF 36 594.6 M(or fix the problem yourself and send us a patch, via the Users mailing list.)S
/Fc SF 28.19 594.6 M(\267 )S
/F4 SF 0 568.2 M(We don't even try to keep up with kernel changes outside the main 2.2 and 2.4 branches, such as the 2.4.x-ac)S
0 555 M(patched versions from Alan Cox or the 2.5 series of development kernels. We'd rather work on developing the)S
0 541.8 M(FreeS/WAN code than on chasing these moving targets. We are, however, happy to get patches for problems)S
0 528.6 M(discovered there.)S
0 502.2 M(See also the Choosing a kernel section of our installation document.)S
14 FS/F9 SF 0 472.8 M(Will FreeS/WAN work on unusual network hardware?)S
11 FS/F4 SF 0 445.8 M(IPsec is designed to work over any network that IP works over, and FreeS/WAN is intended to work over any)S
0 432.6 M(network interface hardware that Linux supports.)S
0 406.2 M(If you have working IP on some unusual interface -- perhaps Arcnet, Token Ring, ATM or Gigabit Ethernet)S
0 393 M(-- then IPsec should "just work".)S
0 366.6 M(That said, practice is sometimes less tractable than theory. Our testing is done almost entirely on:)S
36 340.2 M(10 or 100 Mbit Ethernet)S
/Fc SF 28.19 340.2 M(\267 )S
/F4 SF 36 327 M(ADSL or cable connections, with and without PPPoE)S
/Fc SF 28.19 327 M(\267 )S
/F4 SF 36 313.8 M(IEEE 802.11 wireless LANs \(see below\))S
/Fc SF 28.19 313.8 M(\267 )S
/F4 SF 0 287.4 M(If you have some other interface, especially an uncommon one, it is entirely possible you will get bitten either)S
0 274.2 M(by a FreeS/WAN bug which our testing did not turn up, or by a bug in the driver that shows up only with our)S
0 261 M(loads.)S
0 234.6 M(If IP works on your interface and FreeS/WAN doesn't, seek help on the mailing lists.)S
0 208.2 M(Another FAQ section describes MTU problems. These are a possibility for some interfaces.)S
14 FS/F9 SF 0 178.8 M(Will FreeS/WAN work on a VLAN \(802.1q\) network?)S
11 FS/F4 SF 0 151.8 M(Yes, FreeSwan works fine, though some network drivers have problems with jumbo sized ethernet frames. If)S
0 138.6 M(you used interfaces=%defaultroute you do not need to change anything, but if you specified an interface \(eg)S
0 125.4 M(eth0\) then remember you must change that to reflect the VLAN interface \(eg eth0.2 for VLAN ID 2\).)S
0 99 M(The "eepro100" module is known to be broken, use the e100 driver for those cards instead \(included in 2.4 as)S
0 85.8 M('alternative driver' for the Intel EtherExpressPro/100.)S
0 59.4 M(You do not need to change any MTU setting \(those are workarounds that are only needed for buggy drivers\))S
/F6 SF 0 33 M(This FAQ contributed by Paul Wouters.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Will FreeS/WAN work on unusual network hardware?)S
474.768 0 M(37)S
GR
SP
%%Page: 38 67
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
17 FS/F9 SF 0 681 M(Does FreeS/WAN support ...)S
11 FS/F4 SF 0 653.4 M(For a discussion of which parts of the IPsec specifications FreeS/WAN does and does not implement, see our)S
0 640.2 M(compatibility document.)S
0 613.8 M(For information on some often-requested features, see below.)S
14 FS/F9 SF 0 584.4 M(Does FreeS/WAN support site-to-site VPN \(Virtual Private Network\))S
0 567.6 M(applications?)S
11 FS/F4 SF 0 540.6 M(Absolutely. See this FreeS/WAN-FreeS/WAN configuration example. If only one site is using FreeS/WAN,)S
0 527.4 M(there may be a relevant HOWTO on our interop page.)S
14 FS/F9 SF 0 498 M(Does FreeS/WAN support remote users connecting to a LAN?)S
11 FS/F4 SF 0 471 M(Yes. We call the remote users "Road Warriors". Check out our FreeS/WAN-FreeS/WAN Road Warrior)S
0 457.8 M(Configuration Example.)S
0 431.4 M(If your Road Warrior is a Windows or Mac PC, you may need to install an IPsec implementation on that)S
0 418.2 M(machine. Our interop page lists many available brands, and features links to several HOWTOs.)S
14 FS/F9 SF 0 388.8 M(Does FreeS/WAN support remote users using shared secret)S
0 372 M(authentication?)S
11 FS/F7 SF 0 345 M(Yes, but)S
/F4 SF ( there are severe restrictions, so)S
/F7 SF ( we strongly recommend using RSA keys for authentication instead)S
/F4 SF (.)S
0 318.6 M(See this FAQ question.)S
14 FS/F9 SF 0 289.2 M(Does FreeS/WAN support wireless networks?)S
11 FS/F4 SF 0 262.2 M(Yes, it is a common practice to use IPsec over wireless networks because their built-in encryption, WEP, is)S
0 249 M(insecure.)S
0 222.6 M(There is some discussion in our advanced configuration document. See also the WaveSEC site.)S
14 FS/F9 SF 0 193.2 M(Does FreeS/WAN support X.509 or other PKI certificates?)S
11 FS/F4 SF 0 166.2 M(Vanilla FreeS/WAN does not support X.509, but Andreas Steffen and others have provided a popular,)S
0 153 M(well-supported X.509 patch.)S
36 126.6 M(patch)S
/Fc SF 28.19 126.6 M(\267 )S
/F4 SF 36 113.4 M(Super FreeS/WAN incorporates this and other user-contributed patches.)S
/Fc SF 28.19 113.4 M(\267 )S
/F4 SF 36 100.2 M(Kai Martius' X.509 Installation and Configuration Guide)S
/Fc SF 28.19 100.2 M(\267 )S
/F4 SF 0 73.8 M(Linux FreeS/WAN features Opportunistic Encryption, an alternative Public Key Infrastructure based on)S
0 60.6 M(Secure DNS.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Does FreeS/WAN support ...)S
474.768 0 M(38)S
GR
SP
%%Page: 39 68
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(Does FreeS/WAN support user authentication \(Radius, SecureID, Smart)S
0 667.2 M(Card...\)?)S
11 FS/F4 SF 0 640.2 M(Andreas Steffen's X.509 patch \(v. 1.42+\) supports Smart Cards. The patch does not ship with vanilla)S
0 627 M(FreeS/WAN, but will be incorporated into Super FreeS/WAN 2.01+. The patch implements the PCKS#15)S
0 613.8 M(Cryptographic Token Information Format Standard, using the OpenSC smartcard library functions.)S
0 587.4 M(Older news:)S
0 561 M(A user-supported patch to FreeS/WAN 1.3, for smart card style authentication, is available on Bastiaan's site.)S
0 547.8 M(It supports skeyid and ibutton. This patch is not part of Super FreeS/WAN.)S
0 521.4 M(For a while progress on this front was impeded by a lack of standard. The IETF working group has now)S
0 508.2 M(nearly completed its recommended solution to the problem; meanwhile several vendors have implemented)S
0 495 M(various things.)S
0 468.6 M(Of course, there are various ways to avoid any requirement for user authentication in IPsec. Consider the)S
0 455.4 M(situation where road warriors build IPsec tunnels to your office net and you are considering requiring user)S
0 442.2 M(authentication during tunnel negotiation. Alternatives include:)S
36 415.8 M(If you can trust the road warrior machines, then set them up so that only authorised users can create)S
36 402.6 M(tunnels. If your road warriors use laptops, consider the possibility of theft.)S
/Fc SF 28.19 415.8 M(\267 )S
/F4 SF 36 389.4 M(If the tunnel only provides access to particular servers and you can trust those servers, then set the)S
36 376.2 M(servers up to require user authentication.)S
/Fc SF 28.19 389.4 M(\267 )S
/F4 SF 0 349.8 M(If either of those is trustworthy, it is not clear that you need user authentication in IPsec.)S
14 FS/F9 SF 0 320.4 M(Does FreeS/WAN support NAT traversal?)S
11 FS/F4 SF 0 293.4 M(Vanilla FreeS/WAN does not, but thanks to Mathieu Lafon and Arkoon Network Security, there's a patch to)S
0 280.2 M(support this.)S
36 253.8 M(patch and documentation)S
/Fc SF 28.19 253.8 M(\267 )S
/F4 SF 36 240.6 M(Super FreeS/WAN incorporates this and other user-contributed patches.)S
/Fc SF 28.19 240.6 M(\267 )S
/F4 SF 0 214.2 M(The NAT traversal patch has some issues with PSKs, so you may wish to authenticate with RSA keys, or)S
0 201 M(X.509 \(requires a patch which is also included in Super FreeS/WAN\). Doing the latter also has advantages)S
0 187.8 M(when dealing with large numbers of clients who may be behind NAT; instead of having to make an individual)S
0 174.6 M(Roadwarrior connection for each virtual IP, you can use the "rightsubnetwithin" parameter to specify a range.)S
0 161.4 M(See these)S
/Fa SF ( rightsubnetwithin)S
/F4 SF ( instructions.)S
14 FS/F9 SF 0 132 M(Does FreeS/WAN support assigning a "virtual identity" to a remote)S
0 115.2 M(system?)S
11 FS/F4 SF 0 88.2 M(Some IPsec implementations allow you to make the source address on packets sent by a Road Warrior)S
0 75 M(machine be something other than the address of its interface to the Internet. This is sometimes described as)S
0 61.8 M(assigning a virtual identity to that machine.)S
0 35.4 M(FreeS/WAN does not directly support this, but it can be done. See this FAQ question.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Does FreeS/WAN support user authentication \(Radius, SecureID, Smart Card...\)?)S
474.768 0 M(39)S
GR
SP
%%Page: 40 69
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(Does FreeS/WAN support single DES encryption?)S
11 FS/F7 SF 0 657 M(No)S
/F4 SF (, single DES is not used either at the IKE level for negotiating connections or at the IPsec level for actually)S
0 643.8 M(building them.)S
0 617.4 M(Single DES is insecure. As we see it, it is more important to deliver real security than to comply with a)S
0 604.2 M(standard which has been subverted into allowing use of inadequate methods. See this discussion.)S
0 577.8 M(If you want to interoperate with an IPsec implementation which offers only DES, see our interoperation)S
0 564.6 M(document.)S
14 FS/F9 SF 0 535.2 M(Does FreeS/WAN support AES encryption?)S
11 FS/F4 SF 0 508.2 M(AES is a new US government block cipher standard to replace the obsolete DES.)S
0 481.8 M(At time of writing \(March 2002\), the FreeS/WAN distribution does not yet support AES but user-written)S
0 468.6 M(patches are available to add it. Our kernel programmer is working on integrating those patches into the)S
0 455.4 M(distribution, and there is active discussion of this on the design mailimg list.)S
14 FS/F9 SF 0 426 M(Does FreeS/WAN support other encryption algorithms?)S
11 FS/F4 SF 0 399 M(Currently triple DES is the only cipher supported. AES will almost certainly be added \(see previous question\),)S
0 385.8 M(and it is likely that in the process we will also add the other two AES finalists with open licensing, Twofish)S
0 372.6 M(and Serpent.)S
0 346.2 M(We are extremely reluctant to add other ciphers. This would make both use and maintenance of FreeS/WAN)S
0 333 M(more complex without providing any clear benefit. Complexity is emphatically not desirable in a security)S
0 319.8 M(product.)S
0 293.4 M(Various users have written patches to add other ciphers. We provide links to these.)S
17 FS/F9 SF 0 261 M(Can I ...)S
14 FS/F9 SF 0 230.4 M(Can I use policy groups along with explicitly configured connections?)S
11 FS/F4 SF 0 203.4 M(Yes, you can, so long as you pay attention to the selection rule, which can be summarized "the most specific)S
0 190.2 M(connection wins". We describe the rule in our policy groups document, and provide a more technical)S
0 177 M(explanation in man ipsec.conf.)S
0 150.6 M(A good guideline: If you have a regular connection defined in)S
/Fa SF ( ipsec.conf)S
/F4 SF (, ensure that a subset of that)S
0 137.4 M(connection is not listed in a less restrictive policy group. Otherwise, FreeS/WAN will use the subset, with its)S
0 124.2 M(more specific source/destination pair.)S
0 97.8 M(Here's an example. Suppose you are the system administrator at 192.0.2.2. You have this connection in)S
0 84.6 M(ipsec.conf:)S
/Fa SF ( ipsec.conf)S
/F4 SF (:)S
9 FS/F0 SF 0 60.2 M(conn net-to-net)S
0 49.4 M(    left=192.0.2.2           # you are here)S
0 38.6 M(    right=192.0.2.8)S
0 27.8 M(    rightsubnet=192.0.2.96/27)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Does FreeS/WAN support single DES encryption?)S
474.768 0 M(40)S
GR
SP
%%Page: 41 70
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(    ....)S
11 FS/F4 SF 0 663 M(If you then place a host or net within)S
/Fa SF ( rightsubnet)S
/F4 SF (, \(let's say 192.0.2.98\) in)S
/Fa SF ( private-or-clear)S
/F4 SF (, you may find)S
0 649.8 M(that 192.0.2.2 at times communicates in the clear with 192.0.2.98. That's consistent with the rule, but may be)S
0 636.6 M(contrary to your expectations.)S
0 610.2 M(On the other hand, it's safe to put a larger subnet in a less restrictive policy group file. If)S
/Fa SF ( private-or-clear)S
/F4 SF 0 597 M(contains 192.0.2.0/24, then the more specific)S
/Fa SF ( net-to-net)S
/F4 SF ( connection is used for any communication to)S
0 583.8 M(192.0.2.96/27. The more general policy applies only to communication with hosts or subnets in 192.0.2.0/24)S
0 570.6 M(without a more specific policy or connection.)S
14 FS/F9 SF 0 541.2 M(Can I turn off policy groups?)S
11 FS/F4 SF 0 514.2 M(Yes. Use these instructions.)S
14 FS/F9 SF 0 484.8 M(Can I reload connection info without restarting?)S
11 FS/F4 SF 0 457.8 M(Yes, you can do this. Here are the details, in a mailing list message from Pluto programmer Hugh Redelmeier:)S
9 FS/F0 SF 0 433.4 M(| How can I reload config's without restarting all of pluto and klips?  I am using)S
0 422.6 M(| FreeSWAN -> PGPNet in a medium sized production environment, and would like to be)S
0 411.8 M(| able to add new connections \( i am using include config/* \) without dropping current)S
0 401 M(| SA's.)S
0 390.2 M(| )S
0 379.4 M(| Can this be done?)S
0 368.6 M(| )S
0 357.8 M(| If not, are there plans to add this kind of feature?)S
0 336.2 M(        ipsec auto --add whatever)S
0 325.4 M(This will look in the usual place \(/etc/ipsec.conf\) for a conn named)S
0 314.6 M(whatever and add it.)S
0 293 M(If you added new secrets, you need to do)S
0 282.2 M(        ipsec auto --rereadsecrets)S
0 271.4 M(before Pluto needs to know those secrets.)S
0 249.8 M(| I have looked \(perhaps not thoroughly enough tho\) to see how to do this:)S
0 228.2 M(There may be more bits to look for, depending on what you are trying)S
0 217.4 M(to do.)S
11 FS/F4 SF 0 191.4 M(Another useful command here is)S
/Fa SF ( ipsec auto --replace <conn_name>)S
/F4 SF ( which re-reads data for a named)S
0 178.2 M(connection.)S
14 FS/F9 SF 0 148.8 M(Can I use several masqueraded subnets?)S
11 FS/F4 SF 0 121.8 M(Yes. This is done all the time. See the discussion in our setup document. The only restriction is that the)S
0 108.6 M(subnets on the two ends must not overlap. See the next question.)S
0 82.2 M(Here is a mailing list message on the topic. The user incorrectly thinks you need a 2.4 kernel for this --)S
0 69 M(actually various people have been doing it on 2.0 and 2.2 for quite some time -- but he has it right for 2.4.)S
9 FS/F0 SF 0 44.6 M(Subject: Double NAT and freeswan working :\))S
0 33.8 M(   Date: Sun, 11 Mar 2001)S
0 23 M(   From: Paul Wouters <paul@xtdnet.nl>)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Can I turn off policy groups?)S
474.768 0 M(41)S
GR
SP
%%Page: 42 71
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 678.2 M(Just to share my pleasure, and make an entry for people who are searching)S
0 667.4 M(the net on how to do this. Here's the very simple solution to have a double)S
0 656.6 M(NAT'ed network working with freeswan. \(Not sure if this is old news, but I'm)S
0 645.8 M(not on the list \(too much spam\) and I didn't read this in any HOWTO/FAQ/doc)S
0 635 M(on the freeswan site yet \(Sandy, put it in! :\))S
0 613.4 M(10.0.0.0/24 --- 10.0.0.1 a.b.c.d  ---- a.b.c.e {internet} ----+)S
0 602.6 M(                                                              |)S
0 591.8 M(10.0.1.0/24 --- 10.0.1.1 f.g.h.i  ---- f.g.h.j {internet} ----+)S
0 570.2 M(the goal is to have the first network do a VPN to the second one, yet also)S
0 559.4 M(have NAT in place for connections not destinated for the other side of the)S
0 548.6 M(NAT. Here the two Linux security gateways have one real IP number \(cable)S
0 537.8 M(modem, dialup, whatever.)S
0 516.2 M(The problem with NAT is you don't want packets from 10.*.*.* to 10.*.*.*)S
0 505.4 M(to be NAT'ed. While with Linux 2.2, you can't, with Linux 2.4 you can.)S
0 483.8 M(\(This has been tested and works for 2.4.2 with Freeswan snapshot2001mar8b\))S
0 462.2 M(relevant parts of /etc/ipsec.conf:)S
0 440.6 M(        left=f.g.h.i)S
0 429.8 M(        leftsubnet=10.0.1.0/24)S
0 419 M(        leftnexthop=f.g.h.j)S
0 408.2 M(        leftfirewall=yes)S
0 397.4 M(        leftid=@firewall.netone.nl)S
0 386.6 M(        leftrsasigkey=0x0........)S
0 375.8 M(        right=a.b.c.d)S
0 365 M(        rightsubnet=10.0.0.0/24)S
0 354.2 M(        rightnexthop=a.b.c.e)S
0 343.4 M(        rightfirewall=yes)S
0 332.6 M(        rightid=@firewall.nettwo.nl)S
0 321.8 M(        rightrsasigkey=0x0......)S
0 311 M(        # To authorize this connection, but not actually start it, at startup,)S
0 300.2 M(        # uncomment this.)S
0 289.4 M(        auto=add)S
0 267.8 M(and now the real trick. Setup the NAT correctly on both sites:)S
0 246.2 M(iptables -t nat -F)S
0 235.4 M(iptables -t nat -A POSTROUTING -o eth0 -d \\! 10.0.0.0/8 -j MASQUERADE)S
0 213.8 M(This tells the NAT code to only do NAT for packets with destination other then)S
0 203 M(10.* networks. note the backslash to mask the exclamation mark to protect it)S
0 192.2 M(against the shell.)S
0 170.6 M(Happy painting :\))S
0 149 M(Paul)S
14 FS/F9 SF 0 120 M(Can I use subnets masqueraded to the same addresses?)S
11 FS/F7 SF 0 93 M(No.)S
/F4 SF ( The notion that IP addresses are unique is one of the fundamental principles of the IP protocol. Messing)S
0 79.8 M(with it is exceedingly perilous.)S
0 53.4 M(Fairly often a situation comes up where a company has several branches, all using the same non-routable)S
0 40.2 M(addresses, perhaps 192.168.0.0/24. This works fine as long as those nets are kept distinct. The IP)S
0 27 M(masquerading on their firewalls ensures that packets reaching the Internet carry the firewall address, not the)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Can I use subnets masqueraded to the same addresses?)S
474.768 0 M(42)S
GR
SP
%%Page: 43 72
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(private address.)S
0 660.6 M(This can break down when IPsec enters the picture. FreeS/WAN builds a tunnel that pokes through both)S
0 647.4 M(masquerades and delivers packets from)S
/Fa SF ( leftsubnet)S
/F4 SF ( to)S
/Fa SF ( rightsubnet)S
/F4 SF ( and vice versa. For this to work, the two)S
0 634.2 M(subnets)S
/F6 SF ( must)S
/F4 SF ( be distinct.)S
0 607.8 M(There are several solutions to this problem.)S
0 581.4 M(Usually, you)S
/F7 SF ( re-number the subnets)S
/F4 SF (. Perhaps the Vancouver office becomes 192.168.101.0/24, Calgary)S
0 568.2 M(192.168.102.0/24 and so on. FreeS/WAN can happily handle this. With, for example)S
/Fa SF 0 555 M(leftsubnet=192.168.101.0/24)S
/F4 SF ( and)S
/Fa SF ( rightsubnet=192.168.102.0/24)S
/F4 SF ( in a connection description, any)S
0 541.8 M(machine in Calgary can talk to any machine in Vancouver. If you want to be more restrictive and use)S
0 528.6 M(something like)S
/Fa SF ( leftsubnet=192.168.101.128/25)S
/F4 SF ( and)S
/Fa SF ( rightsubnet=192.168.102.240/28)S
/F4 SF ( so only certain)S
0 515.4 M(machines on each end have access to the tunnel, that's fine too.)S
0 489 M(You could also)S
/F7 SF ( split the subnet)S
/F4 SF ( into smaller ones, for example using)S
/Fa SF ( 192.168.1.0/25)S
/F4 SF ( in Vancouver and)S
/Fa SF 0 475.8 M(rightsubnet=192.168.0.128/25)S
/F4 SF ( in Calgary.)S
0 449.4 M(Alternately, you can just)S
/F7 SF ( give up routing)S
/F4 SF ( directly to machines on the subnets. Omit the)S
/Fa SF ( leftsubnet)S
/F4 SF ( and)S
/Fa SF 0 436.2 M(rightsubnet)S
/F4 SF ( parameters from your connection descriptions. Your IPsec tunnels will then run between the)S
0 423 M(public interfaces of the two firewalls. Packets will be masqueraded both before they are put into tunnels and)S
0 409.8 M(after they emerge. Your Vancouver client machines will see only one Calgary machine, the firewall.)S
14 FS/F9 SF 0 380.4 M(Can I assign a road warrior an address on my net \(a virtual identity\)?)S
11 FS/F4 SF 0 353.4 M(Often it would be convenient to be able to give a Road Warrior an IP address which appears to be on the local)S
0 340.2 M(network. Some IPsec implementations have support for this, sometimes calling the feature "virtual identity".)S
0 313.8 M(Currently \(Sept 2002\) FreeS/WAN does not support this, and we have no definite plans to add it. The)S
0 300.6 M(difficulty is that is not yet a standard mechanism for it. There is an Internet Draft for a method of doing it)S
0 287.4 M(using DHCP which looks promising. FreeS/WAN may support that in a future release.)S
0 261 M(In the meanwhile, you can do it yourself using the Linux iproute2\(8\) facilities. Details are in this paper.)S
0 234.6 M(Another method has also been discussed on the mailing list.:)S
36 208.2 M(You can use a variant of the extruded subnet procedure.)S
/Fc SF 28.19 208.2 M(\267 )S
/F4 SF 36 195 M(You have to avoid having the road warrior's assigned address within the range you actually use at)S
36 181.8 M(home base. See previous question.)S
/Fc SF 28.19 195 M(\267 )S
/F4 SF 36 168.6 M(On the other hand, you want the roadwarrior's address to be within the range that)S
/F6 SF ( seems)S
/F4 SF ( to be on your)S
36 155.4 M(network.)S
/Fc SF 28.19 168.6 M(\267 )S
/F4 SF 0 129 M(For example, you might have:)S
/F6 SF 0 102.6 M(leftsubnet=a.b.c.0/25)S
/F4 SF 36 89.4 M(head office network)S
/F6 SF 0 76.2 M(rightsubnet=a.b.c.129/32)S
/F4 SF 36 63 M(extruded to a road warrior. Note that this is not in a.b.c.0/25)S
/F6 SF 0 49.8 M(a.b.c.0/24)S
/F4 SF 36 36.6 M(whole network, including both the above)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Can I assign a road warrior an address on my net \(a virtual identity\)?)S
474.768 0 M(43)S
GR
SP
%%Page: 44 73
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(You then set up routing so that the office machines use the IPsec gateway as their route to a.b.c.128/25. The)S
0 673.8 M(leftsubnet parameter tells the road warriors to use tunnels to reach a.b.c.0/25, so you should have two-way)S
0 660.6 M(communication. Depending or your network and applications, there may be some additional work to do on)S
0 647.4 M(DNS or Windows configuration)S
14 FS/F9 SF 0 618 M(Can I support many road warriors with one gateway?)S
11 FS/F4 SF 0 591 M(Yes. This is easily done, using)S
/F6 SF 0 564.6 M(either RSA authentication)S
/F4 SF 36 551.4 M(standard in the FreeS/WAN distribution)S
/F6 SF 0 538.2 M(or X.509 certificates)S
/F4 SF 36 525 M(requires Super FreeS/WAN or a patch.)S
0 498.6 M(In either case, each Road Warrior must have a different key or certificate.)S
0 472.2 M(It is also possible using pre-shared key authentication, though we don't recommend this; see the next question)S
0 459 M(for details.)S
0 432.6 M(If you expect to have more than a few dozen Road Warriors connecting simultaneously, you may need a fairly)S
0 419.4 M(powerful gateway machine. See our document on FreeS/WAN performance.)S
14 FS/F9 SF 0 390 M(Can I have many road warriors using shared secret authentication?)S
11 FS/F7 SF 0 363 M(Yes, but avoid it if possible)S
/F4 SF (.)S
0 336.6 M(You can have multiple Road Warriors using shared secret authentication)S
/F7 SF ( only if they all use the same secret)S
/F4 SF (.)S
0 323.4 M(You must also set:)S
9 FS/F0 SF 0 299 M(   uniqueids=no   )S
11 FS/F4 SF 0 273 M(in the connection definition.)S
0 246.6 M(Why it's less secure:)S
36 220.2 M(If you have many users, it becomes almost certain the secret will leak)S
/Fc SF 28.19 220.2 M(\267 )S
/F4 SF 36 207 M(The secret becomes quite valuable to an attacker)S
/Fc SF 28.19 207 M(\267 )S
/F4 SF 36 193.8 M(All users authenticate the same way, so the gateway cannot tell them apart for logging or access)S
36 180.6 M(control purposes)S
/Fc SF 28.19 193.8 M(\267 )S
/F4 SF 36 167.4 M(Changing the secret is difficult. You have to securely notify all users.)S
/Fc SF 28.19 167.4 M(\267 )S
/F4 SF 36 154.2 M(If you find out the secret has been compromised, you can change it, but then what? None of your)S
36 141 M(users can connect without the new secret. How will you notify them all, quickly and securely, without)S
36 127.8 M(using the VPN?)S
/Fc SF 28.19 154.2 M(\267 )S
/F4 SF 0 101.4 M(This is a designed-in limitation of the IKE key negotiation protocol, not a problem with our implementation.)S
/F7 SF 0 75 M(We very strongly recommend that you avoid using shared secret authentication for multiple Road Warriors.)S
/F4 SF 0 61.8 M(Use RSA authentication instead.)S
0 35.4 M(The longer story: When using shared secrets, the protocol requires that the responding gateway be able to)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Can I support many road warriors with one gateway?)S
474.768 0 M(44)S
GR
SP
%%Page: 45 74
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(determine which secret to use at a time when all it knows about the initiator is an IP address. This works fine)S
0 673.8 M(if you know the initiator's address in advance and can use it to look up the appropiriate secret. However, it)S
0 660.6 M(fails for Road Warriors since the gateway cannot know their IP addresses in advance.)S
0 634.2 M(With RSA signatures \(or certificates\) the protocol is slightly different. The initiator provides an identifier)S
0 621 M(early in the exchange and the responder can use that identifier to look up the correct key or certificate. See)S
0 607.8 M(above.)S
14 FS/F9 SF 0 578.4 M(Can I use Quality of Service routing with FreeS/WAN?)S
11 FS/F4 SF 0 551.4 M(From project technical lead Henry Spencer:)S
9 FS/F0 SF 0 527 M(> Do QoS add to FreeS/WAN?)S
0 516.2 M(> For example integrating DiffServ and FreeS/WAN?)S
0 494.6 M(With a current version of FreeS/WAN, you will have to add hidetos=no to)S
0 483.8 M(the config-setup section of your configuration file.  By default, the TOS)S
0 473 M(field of tunnel packets is zeroed; with hidetos=no, it is copied from the)S
0 462.2 M(packet inside.  \(This is a modest security hole, which is why it is no)S
0 451.4 M(longer the default.\))S
0 429.8 M(DiffServ does not interact well with tunneling in general.  Ways of)S
0 419 M(improving this are being studied.)S
11 FS/F4 SF 0 393 M(Copying the TOS \(type of service\) information from the encapsulated packet to the outer header reveals the)S
0 379.8 M(TOS information to an eavesdropper. This does not tell him much, but it might be of use in traffic analysis.)S
0 366.6 M(Since we do not have to give it to him, our default is not to.)S
0 340.2 M(Even with the TOS hidden, you can still:)S
36 313.8 M(apply QOS rules to the tunneled \(ESP\) packets; for example, by giving ESP packets a certain priority.)S
/Fc SF 28.19 313.8 M(\267 )S
/F4 SF 36 300.6 M(apply QOS rules to the packets as they enter or exit the tunnel via an IPsec virtual interface \(eg.)S
/Fa SF 36 287.4 M(ipsec0)S
/F4 SF (\).)S
/Fc SF 28.19 300.6 M(\267 )S
/F4 SF 0 261 M(See ipsec.conf\(5\) for more on the)S
/Fa SF ( hidetos=)S
/F4 SF ( parameter.)S
14 FS/F9 SF 0 231.6 M(Can I recognise dead tunnels and shut them down?)S
11 FS/F4 SF 0 204.6 M(There is no general mechanism to do this is in the IPsec protocols.)S
0 178.2 M(From time to time, there is discussion on the IETF Working Group mailing list of adding a "keep-alive")S
0 165 M(mechanism \(which some say should be called "make-dead"\), but it is a fairly complex problem and no)S
0 151.8 M(consensus has been reached on whether or how it should be done.)S
0 125.4 M(The protocol does have optional delete-SA messages which one side can send when it closes a connection in)S
0 112.2 M(hopes this will cause the other side to do the same. FreeS/WAN does not currently support these. In any case,)S
0 99 M(they would not solve the problem since:)S
36 72.6 M(a gateway that crashes or hangs would not send the messages)S
/Fc SF 28.19 72.6 M(\267 )S
/F4 SF 36 59.4 M(the sender is not required to send them)S
/Fc SF 28.19 59.4 M(\267 )S
/F4 SF 36 46.2 M(they are not authenticated, so any receiver that trusts them leaves itself open to a denial of service)S
36 33 M(attack)S
/Fc SF 28.19 46.2 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Can I use Quality of Service routing with FreeS/WAN?)S
474.768 0 M(45)S
GR
SP
%%Page: 46 75
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(the receiver is not required to do anything about them)S
/Fc SF 28.19 687 M(\267 )S
/F4 SF 36 673.8 M(the receiver cannot acknowledge them; the protocol provides no mechanism for that)S
/Fc SF 28.19 673.8 M(\267 )S
/F4 SF 36 660.6 M(since they are not acknowledged, the sender cannot rely on them)S
/Fc SF 28.19 660.6 M(\267 )S
/F4 SF 0 634.2 M(However, connections do have limited lifetimes and you can control how many attempts your gateway makes)S
0 621 M(to rekey before giving up. For example, you can set:)S
9 FS/F0 SF 0 596.6 M(conn default)S
0 585.8 M(        keyingtries=3)S
0 575 M(        keylife=30m)S
11 FS/F4 SF 0 549 M(With these settings old connections will be cleaned up. Within 30 minutes of the other end dying, rekeying)S
0 535.8 M(will be attempted. If it succeeds, the new connection replaces the old one. If it fails, no new connection is)S
0 522.6 M(created. Either way, the old connection is taken down when its lifetime expires.)S
0 496.2 M(Here is a mailing list message on the topic from FreeS/WAN tech support person Claudia Schmeing:)S
9 FS/F0 SF 0 471.8 M(You ask how to determine whether a tunnel is redundant:)S
0 450.2 M(> Can anybody explain the best way to determine this. Esp when a RW has)S
0 439.4 M(> disconnected? I thought 'ipsec auto --status' might be one way.)S
0 417.8 M(If a tunnel goes down from one end, Linux FreeS/WAN on the)S
0 407 M(other end has no way of knowing this until it attempts to rekey.)S
0 396.2 M(Once it tries to rekey and fails, it will 'know' that the tunnel is )S
0 385.4 M(down.)S
0 363.8 M(Because it doesn't have a way of knowing the state until this point, )S
0 353 M(it will also not be able to tell you the state via ipsec auto --status.)S
0 331.4 M(> However, comparing output from a working tunnel with that of one that)S
0 320.6 M(> was closed )S
0 309.8 M(> did not show clearly show tunnel status.)S
0 288.2 M(If your tunnel is down but not 'unrouted' \(see man ipsec_auto\), you)S
0 277.4 M(should not be able to ping the opposite side of the tunnel. You can)S
0 266.6 M(use this as an indicator of tunnel status.)S
0 245 M(On a related note, you may be interested to know that as of 1.7, )S
0 234.2 M(redundant tunnels caused by RW disconnections are likely to be )S
0 223.4 M(less of a pain. From doc/CHANGES:)S
0 201.8 M(    There is a new configuration parameter, uniqueids, to control a new Pluto)S
0 191 M(    option:  when a new connection is negotiated with the same ID as an old)S
0 180.2 M(    one, the old one is deleted immediately.  This should help eliminate)S
0 169.4 M(    dangling Road Warrior connections when the same Road Warrior reconnects. )S
0 158.6 M(    It thus requires that IDs not be shared by hosts \(a previously legal but)S
0 147.8 M(    probably useless capability\).  NOTE WELL:  the sample ipsec.conf now has)S
0 137 M(    uniqueids=yes in its config-setup section.)S
0 104.6 M(Cheers,)S
0 83 M(Claudia)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Can I use Quality of Service routing with FreeS/WAN?)S
474.768 0 M(46)S
GR
SP
%%Page: 47 76
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(Can I build IPsec tunnels over a demand-dialed link?)S
11 FS/F4 SF 0 657 M(This is possible, but not easy. FreeS/WAN technical lead Henry Spencer wrote:)S
9 FS/F0 SF 0 632.6 M(> 5. If the ISDN link goes down in between and is reestablished, the SAs)S
0 621.8 M(> are still up but the eroute are deleted and the IPsec interface shows)S
0 611 M(> garbage \(with ifconfig\))S
0 600.2 M(> 6. Only restarting IPsec will bring the VPN back online.)S
0 578.6 M(This one is awkward to solve.  If the real interface that the IPsec)S
0 567.8 M(interface is mounted on goes down, it takes most of the IPsec machinery)S
0 557 M(down with it, and a restart is the only good way to recover. )S
0 535.4 M(The only really clean fix, right now, is to split the machines in two: )S
0 513.8 M(1. A minimal machine serves as the network router, and only it is aware)S
0 503 M(that the link goes up and down. )S
0 481.4 M(2. The IPsec is done on a separate gateway machine, which thinks it has)S
0 470.6 M(a permanent network connection, via the router.)S
0 449 M(This is clumsy but it does work.  Trying to do both functions within a)S
0 438.2 M(single machine is tricky.  There is a software package \(diald\) which will)S
0 427.4 M(give the illusion of a permanent connection for demand-dialed modem)S
0 416.6 M(connections; I don't know whether it's usable for ISDN, or whether it can)S
0 405.8 M(be made to cooperate properly with FreeS/WAN. )S
0 384.2 M(Doing a restart each time the interface comes up *does* work, although it)S
0 373.4 M(is a bit painful.  I did that with PPP when I was running on a modem link;)S
0 362.6 M(it wasn't hard to arrange the PPP scripts to bring IPsec up and down at)S
0 351.8 M(the right times.  \(I'd meant to investigate diald but never found time.\))S
0 330.2 M(In principle you don't need to do a complete restart on reconnect, but you)S
0 319.4 M(do have to rebuild some things, and we have no nice clean way of doing)S
0 308.6 M(only the necessary parts.)S
11 FS/F4 SF 0 282.6 M(In the same thread, one user commented:)S
9 FS/F0 SF 0 258.2 M(Subject: Re: linux-ipsec: IPsec and Dial Up Connections)S
0 247.4 M(   Date: Wed, 22 Nov 2000)S
0 236.6 M(   From: Andy Bradford <andyb@calderasystems.com>)S
0 215 M(On Wed, 22 Nov 2000 19:47:11 +0100, Philip Reetz wrote:)S
0 193.4 M(> Are there any ideas what might be the cause of the problem and any way)S
0 182.6 M(> to work around it.)S
0 171.8 M(> Any help is highly appreciated.)S
0 150.2 M(On my laptop, when using ppp there is a ip-up script in /etc/ppp that )S
0 139.4 M(will be executed each time that the ppp interface is brought up.  )S
0 128.6 M(Likewise there is an ip-down script that is called when it is taken )S
0 117.8 M(down.  You might consider custimzing those to stop and start FreeS/WAN )S
0 107 M(with each connection.  I believe that ISDN uses the same files, though )S
0 96.2 M(I could be wrong---there should be something similar though.)S
14 FS/F9 SF 0 67.2 M(Can I build GRE, L2TP or PPTP tunnels over IPsec?)S
11 FS/F4 SF 0 40.2 M(Yes. Normally this is not necessary, but it is useful in a few special cases. For example, if you must route)S
0 27 M(non-IP packets such as IPX, you will need to use a tunneling protocol that can route these packets. IPsec can)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Can I build IPsec tunnels over a demand-dialed link?)S
474.768 0 M(47)S
GR
SP
%%Page: 48 77
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(be layered around it for extra security. Another example: you can provide failover protection for high)S
0 673.8 M(availability \(HA\) environments by combining IPsec with other tools. Ken Bantoft describes one such setup in)S
0 660.6 M(Using FreeS/WAN with Linux-HA, GRE, OSPF and BGP for enterprise grade VPN solutions.)S
0 634.2 M(GRE over IPsec is covered as part of that document. Here are links to other GRE resources. Jacco de Leuw)S
0 621 M(has created this page on L2TP over IPsec with instructions for FreeS/WAN and several other brands of IPsec)S
0 607.8 M(software.)S
0 581.4 M(Please let us know of other useful links via the mailing lists.)S
14 FS/F9 SF 0 552 M(... use Network Neighborhood \(Samba, NetBIOS\) over IPsec?)S
11 FS/F4 SF 0 525 M(Your local PC needs to know how to translate NetBIOS names to IP addresses. It may do this either via a)S
0 511.8 M(local LMHOSTS file, or using a local or remote WINS server. The WINS server is preferable since it provides)S
0 498.6 M(a centralized source of the information to the entire network. To use a WINS server over the VPN \(or any)S
0 485.4 M(IP-based network\), you must enable "NetBIOS over TCP".)S
0 459 M(Samba can emulate a WINS server on Linux.)S
0 432.6 M(See also several discussions in our September 2002 Users archives)S
17 FS/F9 SF 0 400.2 M(Life's little mysteries)S
11 FS/F4 SF 0 372.6 M(FreeS/WAN is a fairly complex product. \(Neither the networks it runs on nor the protocols it uses are simple,)S
0 359.4 M(so it could hardly be otherwise.\) It therefore sometimes exhibits behaviour which can be somewhat confusing,)S
0 346.2 M(or has problems which are not easy to diagnose. This section tries to explain those problems.)S
0 319.8 M(Setup and configuration of FreeS/WAN are covered in other documentation sections:)S
36 293.4 M(basic setup and configuration)S
/Fc SF 28.19 293.4 M(\267 )S
/F4 SF 36 280.2 M(advanced configuration)S
/Fc SF 28.19 280.2 M(\267 )S
/F4 SF 36 267 M(Troubleshooting)S
/Fc SF 28.19 267 M(\267 )S
/F4 SF 0 240.6 M(However, we also list some of the commonest problems here.)S
14 FS/F9 SF 0 211.2 M(I cannot ping ....)S
11 FS/F4 SF 0 184.2 M(This question is dealt with in the advanced configuration section under the heading multiple tunnels.)S
0 157.8 M(The standard subnet-to-subnet tunnel protects traffic)S
/F7 SF ( only between the subnets)S
/F4 SF (. To test it, you must use pings)S
0 144.6 M(that go from one subnet to the other.)S
0 118.2 M(For example, suppose you have:)S
9 FS/F0 SF 0 93.8 M(      subnet a.b.c.0/24)S
0 83 M(             |)S
0 72.2 M(      eth1 = a.b.c.1)S
0 61.4 M(         gate1)S
0 50.6 M(      eth0 = 192.0.2.8)S
0 39.8 M(             |)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(... use Network Neighborhood \(Samba, NetBIOS\) over IPsec?)S
474.768 0 M(48)S
GR
SP
%%Page: 49 78
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(       ~ internet ~)S
0 667.4 M(             |)S
0 656.6 M(      eth0 = 192.0.2.11)S
0 645.8 M(         gate2)S
0 635 M(      eth1 = x.y.z.1)S
0 624.2 M(              |)S
0 613.4 M(       subnet x.y.z.0/24)S
11 FS/F4 SF 0 587.4 M(and the connection description:)S
9 FS/F0 SF 0 563 M(conn abc-xyz)S
0 552.2 M(     left=192.0.2.8)S
0 541.4 M(     leftsubnet=a.b.c.0/24)S
0 530.6 M(     right=192.0.2.11)S
0 519.8 M(     rightsubnet=x.y.z.0/24)S
11 FS/F4 SF 0 493.8 M(You can test this connection description only by sending a ping that will actually go through the tunnel.)S
0 480.6 M(Assuming you have machines at addresses a.b.c.2 and x.y.z.2, pings you might consider trying are:)S
/F6 SF 0 454.2 M(ping from x.y.z.2 to a.b.c.2 or vice versa)S
/F4 SF 36 441 M(Succeeds if tunnel is working. This is the)S
/F7 SF ( only valid test of the tunnel)S
/F4 SF (.)S
/F6 SF 0 427.8 M(ping from gate2 to a.b.c.2 or vice versa)S
/F7 SF 36 414.6 M(Does not use tunnel)S
/F4 SF (. gate2 is not on protected subnet.)S
/F6 SF 0 401.4 M(ping from gate1 to x.y.z.2 or vice versa)S
/F7 SF 36 388.2 M(Does not use tunnel)S
/F4 SF (. gate1 is not on protected subnet.)S
/F6 SF 0 375 M(ping from gate1 to gate2 or vice versa)S
/F7 SF 36 361.8 M(Does not use tunnel)S
/F4 SF (. Neither gate is on a protected subnet.)S
0 335.4 M(Only the first of these is a useful test of this tunnel. The others do not use the tunnel. Depending on other)S
0 322.2 M(details of your setup and routing, they:)S
36 295.8 M(either fail, telling you nothing about the tunnel)S
/Fc SF 28.19 295.8 M(\267 )S
/F4 SF 36 282.6 M(or succeed, telling you nothing about the tunnel since these packets use some other route)S
/Fc SF 28.19 282.6 M(\267 )S
/F4 SF 0 256.2 M(In some cases, you may be able to get around this. For the example network above, you could use:)S
9 FS/F0 SF 0 231.8 M(        ping -I a.b.c.1 x.y.z.1)S
11 FS/F4 SF 0 205.8 M(Both the adresses given are within protected subnets, so this should go through the tunnel.)S
0 179.4 M(If required, you can build additional tunnels so that all the machines involved can talk to all the others. See)S
0 166.2 M(multiple tunnels in the advanced configuration document for details.)S
14 FS/F9 SF 0 136.8 M(It takes forever to ...)S
11 FS/F4 SF 0 109.8 M(Users fairly often report various problems involving long delays, sometimes on tunnel setup and sometimes)S
0 96.6 M(on operations done through the tunnel, occasionally on simple things like ping or more often on more)S
0 83.4 M(complex operations like doing NFS or Samba through the tunnel.)S
0 57 M(Almost always, these turn out to involve failure of a DNS lookup. The timeouts waiting for DNS are typically)S
0 43.8 M(set long so that you won't time out when a query involves multiple lookups or long paths. Genuine failures)S
0 30.6 M(therefore produce long delays before they are detected.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(It takes forever to ...)S
474.768 0 M(49)S
GR
SP
%%Page: 50 79
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(A mailing list message from project technical lead Henry Spencer:)S
9 FS/F0 SF 0 662.6 M(> ... when i run /etc/rc.d/init.d/ipsec start, i get:)S
0 651.8 M(> ipsec_setup: Starting FreeS/WAN IPsec 1.5...)S
0 641 M(> and it just sits there, doesn't give back my bash prompt.)S
0 619.4 M(Almost certainly, the problem is that you're using DNS names in your)S
0 608.6 M(ipsec.conf, but DNS lookups are not working for some reason.  You will)S
0 597.8 M(get your prompt back... eventually.  But the DNS timeouts are long.)S
0 587 M(Doing something about this is on our list, but it is not easy.)S
11 FS/F4 SF 0 561 M(In the meanwhile, we recommend that connection descriptions in ipsec.conf\(5\) use numeric IP addresses)S
0 547.8 M(rather than names which will require a DNS lookup.)S
0 521.4 M(Names that do not require a lookup are fine. For example:)S
36 495 M(a road warrior might use the identity)S
/Fa SF ( rightid=@lancelot.example.org)S
/Fc SF 28.19 495 M(\267 )S
/F4 SF 36 481.8 M(the gateway might use)S
/Fa SF ( leftid=@camelot.example.org)S
/Fc SF 28.19 481.8 M(\267 )S
/F4 SF 0 455.4 M(These are fine. The @ sign prevents any DNS lookup. However, do not attempt to give the gateway address as)S
/Fa SF 0 442.2 M(left=camelot.example.org)S
/F4 SF (. That requires a lookup.)S
0 415.8 M(A post from one user after solving a problem with long delays:)S
9 FS/F0 SF 0 391.4 M(Subject: Final Answer to Delay!!!)S
0 380.6 M(   Date: Mon, 19 Feb 2001)S
0 369.8 M(   From: "Felippe Solutions" <felippe@solutionstecnologia.com.br>)S
0 348.2 M(Sorry people, but seems like the Delay problem had nothing to do with)S
0 337.4 M(freeswan.)S
0 315.8 M(The problem was DNS as some people sad from the beginning, but not the way)S
0 305 M(they thought it was happening. Samba, ssh, telnet and other apps try to)S
0 294.2 M(reverse lookup addresses when you use IP numbers \(Stupid that ahh\).)S
0 272.6 M(I could ping very fast because I always ping with "-n" option, but I don't)S
0 261.8 M(know the option on the other apps to stop reverse addressing so I don't use)S
0 251 M(it.)S
11 FS/F4 SF 0 225 M(This post is fairly typical. These problems are often tricky and frustrating to diagnose, and most turn out to be)S
0 211.8 M(DNS-related.)S
0 185.4 M(One suggestion for diagnosis: test with both names and addresses if possible. For example, try all of:)S
36 159 M(ping)S
/Fa SF ( address)S
/Fc SF 28.19 159 M(\267 )S
/F4 SF 36 145.8 M(ping -n)S
/Fa SF ( address)S
/Fc SF 28.19 145.8 M(\267 )S
/F4 SF 36 132.6 M(ping)S
/Fa SF ( name)S
/Fc SF 28.19 132.6 M(\267 )S
/F4 SF 0 106.2 M(If these behave differently, the problem must be DNS-related since the three commands do exactly the same)S
0 93 M(thing except for DNS lookups.)S
14 FS/F9 SF 0 63.6 M(I send packets to the tunnel with route\(8\) but they vanish)S
11 FS/F4 SF 0 36.6 M(IPsec connections are designed to carry only packets travelling between pre-defined connection endpoints. As)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(I send packets to the tunnel with route\(8\) but they vanish)S
474.768 0 M(50)S
GR
SP
%%Page: 51 80
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(project technical lead Henry Spencer put it:)S
36 660.6 M(IPsec tunnels are not just virtual wires; they are virtual wires with built-in access controls.)S
36 647.4 M(Negotiation of an IPsec tunnel includes negotiation of access rights for it, which don't include)S
36 634.2 M(packets to/from other IP addresses. \(The protocols themselves are quite inflexible about this,)S
36 621 M(so there are limits to what we can do about it.\))S
0 594.6 M(For fairly obvious security reasons, and to comply with the IPsec RFCs, KLIPS drops any packets it receives)S
0 581.4 M(that are not allowed on the tunnels currently defined. So if you send it packets with)S
/Fa SF ( route\(8\))S
/F4 SF (, and suitable)S
0 568.2 M(tunnels are not defined, the packets vanish. Whether this is reported in the logs depends on the setting of)S
/Fa SF 0 555 M(klipsdebug)S
/F4 SF ( in your ipsec.conf\(5\) file.)S
0 528.6 M(To rescue vanishing packets, you must ensure that suitable tunnels for them exist, by editing the connection)S
0 515.4 M(descriptions in ipsec.conf\(5\). For example, supposing you have a simple setup:)S
9 FS/F0 SF 0 491 M(         leftsubnet -- leftgateway === internet === roadwarrior)S
11 FS/F4 SF 0 465 M(If you want to give the roadwarrior access to some resource that is located behind the left gateway but is not)S
0 451.8 M(in the currently defined left subnet, then the usual procedure is to define an additional tunnel for those packets)S
0 438.6 M(by creating a new connection description.)S
0 412.2 M(In some cases, it may be easier to alter an existing connection description, enlarging the definition of)S
/Fa SF 0 399 M(leftsubnet)S
/F4 SF (. For example, instead of two connection descriptions with 192.168.8.0/24 and 192.168.9.0/24 as)S
0 385.8 M(their)S
/Fa SF ( leftsubnet)S
/F4 SF ( parameters, you can use a single description with 192.168.8.0/23.)S
0 359.4 M(If you have multiple endpoints on each side, you need to ensure that there is a route for each pair of endpoints.)S
0 346.2 M(See this example.)S
14 FS/F9 SF 0 316.8 M(When a tunnel goes down, packets vanish)S
11 FS/F4 SF 0 289.8 M(This is a special case of the vanishing packet problem described in the previous question. Whenever KLIPS)S
0 276.6 M(sees packets for which it does not have a tunnel, it drops them.)S
0 250.2 M(When a tunnel goes away, either because negotiations with the other gateway failed or because you gave an)S
/Fa SF 0 237 M(ipsec auto --down)S
/F4 SF ( command, the route to its other end is left pointing into KLIPS, and KLIPS will drop)S
0 223.8 M(packets it has no tunnel for.)S
0 197.4 M(This is a documented design decision, not a bug. FreeS/WAN must not automatically adjust things to send)S
0 184.2 M(packets via another route. The other route might be insecure.)S
0 157.8 M(Of course, re-routing may be necessary in many cases. In those cases, you have to do it manually or via)S
0 144.6 M(scripts. We provide the)S
/Fa SF ( ipsec auto --unroute)S
/F4 SF ( command for these cases.)S
0 118.2 M(From ipsec_auto\(8\):)S
36 91.8 M(Normally, pluto establishes a route to the destination specified for a connection as part of the)S
36 78.6 M(--up operation. However, the route and only the route can be established with the --route)S
36 65.4 M(operation. Until and unless an actual connection is established, this discards any packets sent)S
36 52.2 M(there, which may be preferable to having them sent elsewhere based on a more general route)S
36 39 M(\(e.g., a default route\).)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(When a tunnel goes down, packets vanish)S
474.768 0 M(51)S
GR
SP
%%Page: 52 81
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(Normally, pluto's route to a destination remains in place when a --down operation is used to)S
36 673.8 M(take the connection down \(or if connection setup, or later automatic rekeying, fails\). This)S
36 660.6 M(permits establishing a new connection \(perhaps using a different specification; the route is)S
36 647.4 M(altered as necessary\) without having a ``window'' in which packets might go elsewhere based)S
36 634.2 M(on a more general route. Such a route can be removed using the --unroute operation \(and is)S
36 621 M(implicitly removed by --delete\).)S
0 594.6 M(See also this mailing list message.)S
14 FS/F9 SF 0 565.2 M(The firewall ate my packets!)S
11 FS/F4 SF 0 538.2 M(If firewalls filter out:)S
36 511.8 M(either the UDP port 500 packets used in IKE negotiations)S
/Fc SF 28.19 511.8 M(\267 )S
/F4 SF 36 498.6 M(or the ESP and AH \(protocols 50 and 51\) packets used to implement the IPsec tunnel)S
/Fc SF 28.19 498.6 M(\267 )S
/F4 SF 0 472.2 M(then IPsec cannot work. The first thing to check if packets seem to be vanishing is the firewall rules on the)S
0 459 M(two gateway machines and any other machines along the path that you have access to.)S
0 432.6 M(For details, see our document on firewalls.)S
0 406.2 M(Some advice from technical lead Henry Spencer on diagnosing such problems:)S
9 FS/F0 SF 0 381.8 M(> > Packets vanishing between the hardware interface and the ipsecN interface)S
0 371 M(> > is usually the result of firewalls not being configured to let them in...)S
0 360.2 M(> )S
0 349.4 M(> Thanks for the suggestion. If only it were that simple! My ipchains startup)S
0 338.6 M(> script does take care of that, but just in case I manually inserted rules )S
0 327.8 M(> accepting everything from london on dublin. No difference.)S
0 306.2 M(The other thing to check is whether the "RX packets dropped" count on the)S
0 295.4 M(ipsecN interface \(run "ifconfig ipsecN", for N=1 or whatever, to see the)S
0 284.6 M(counts\) is rising.  If so, then there's some sort of configuration mismatch)S
0 273.8 M(between the two ends, and IPsec itself is rejecting them.  If none of the)S
0 263 M(ipsecN counts is rising, then the packets are never reaching the IPsec)S
0 252.2 M(machinery, and the problem is almost certainly in firewalls etc.)S
14 FS/F9 SF 0 223.2 M(Dropped connections)S
11 FS/F4 SF 0 196.2 M(Networks being what they are, IPsec connections can be broken for any number of reasons, ranging from)S
0 183 M(hardware failures to various software problems such as the path MTU problems discussed elsewhere in the)S
0 169.8 M(FAQ. Fortunately, various diagnostic tools exist that help you sort out many of the possible problems.)S
0 143.4 M(There is one situation, however, where FreeS/WAN \(using default settings\) may destroy a connection for no)S
0 130.2 M(readily apparent reason. This occurs when things are)S
/F7 SF ( misconfigured)S
/F4 SF ( so that)S
/F7 SF ( two tunnels)S
/F4 SF ( from the same)S
0 117 M(gateway expect)S
/F7 SF ( the same subnet on the far end)S
/F4 SF (.)S
0 90.6 M(In this situation, the first tunnel comes up fine and works until the second is established. At that point, because)S
0 77.4 M(of the way we track connections internally, the first tunnel ceases to exist as far as this gateway is concerned.)S
0 64.2 M(Of course the far end does not know that, and a storm of error messages appears on both systems as it tries to)S
0 51 M(use the tunnel.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(The firewall ate my packets!)S
474.768 0 M(52)S
GR
SP
%%Page: 53 82
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(If the far end gives up, goes back to square one and negotiates a new tunnel, then that wipes out the second)S
0 673.8 M(tunnel and ...)S
0 647.4 M(The solution is simple.)S
/F7 SF ( Do not build multiple conn descriptions with the same remote subnet)S
/F4 SF (.)S
0 621 M(This is actually intended to be a feature, rather than a bug. Consider the situation where a single remote)S
0 607.8 M(system goes down, then comes back up and reconnects to the gateway. It is useful to have the gateway tear)S
0 594.6 M(down the old tunnel and recover resources when the reconnection is made. It recognises that situation by)S
0 581.4 M(checking the remote subnet for each tunnel it builds and discarding duplicates. This works fine as long as you)S
0 568.2 M(don't configure multiple tunnels with the same remote subnet.)S
0 541.8 M(If this behaviour is inconvenient for you, you can disable it by setting)S
/Fa SF ( uniqueids=no)S
/F4 SF ( in ipsec.conf\(5\).)S
14 FS/F9 SF 0 512.4 M(Disappearing %defaultroute)S
11 FS/F4 SF 0 485.4 M(When an underlying connection \(eg. ppp\) goes down, FreeS/WAN will not recover properly without a little)S
0 472.2 M(help. Here are the symptoms that FreeS/WAN user Michael Carmody noticed:)S
9 FS/F0 SF 0 447.8 M(> After about 24 hours the freeswan connection takes over the default route.)S
0 437 M(> )S
0 426.2 M(> i.e instead of deafult gateway pointing to the router via eth0, it becomes a )S
0 415.4 M(> pointer to the router via ipsec0.)S
0 393.8 M(> All internet access is then lost as all replies \(and not just the link I )S
0 383 M(> wanted\) are routed out ipsec0 and the router doesn't respond to the ipsec )S
0 372.2 M(> traffic.)S
11 FS/F4 SF 0 346.2 M(If you're using a FreeS/WAN 2.x/KLIPS system, simply re-attach the IPsec virtual interface with)S
/F6 SF ( ipsec)S
0 333 M(tnconfig)S
/F4 SF ( command such as:)S
9 FS/F0 SF 0 308.6 M(    ipsec tnconfig --attach --virtual ipsec0 --physical ppp0)S
11 FS/F4 SF 0 282.6 M(In your command, name the physical and virtual interfaces as they appear paired on your system during)S
0 269.4 M(regular uptime. For a system with several physical/virtual interface pairs on flaky links, you'll need more than)S
0 256.2 M(one such command. If you're using FreeS/WAN 1.x, you must restart FreeS/WAN, which is more time)S
0 243 M(consuming.)S
0 216.6 M(Here is a script which can help to automate the process of FreeS/WAN restart at need. It could easily be)S
0 203.4 M(adapted to use tnconfig instead.)S
14 FS/F9 SF 0 174 M(TCPdump on the gateway shows strange things)S
11 FS/F4 SF 0 147 M(As another user pointed out, keeping the connect)S
0 120.6 M(Attempting to look at IPsec packets by running monitoring tools on the IPsec gateway machine can produce)S
0 107.4 M(silly results. That machine is mangling the packets for IPsec, and possibly for firewall or NAT purposes as)S
0 94.2 M(well. If the internals of the machine's IP stack are not what the monitoring tool expects, then the tool can)S
0 81 M(misinterpret them and produce nonsense output.)S
0 54.6 M(See our testing document for more detail.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Disappearing %defaultroute)S
474.768 0 M(53)S
GR
SP
%%Page: 54 83
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(Traceroute does not show anything between the gateways)S
11 FS/F4 SF 0 657 M(As far as traceroute can see, the two gateways are one hop apart; the data packet goes directly from one to the)S
0 643.8 M(other through the tunnel. Of course the outer packets that implement the tunnel pass through whatever lies)S
0 630.6 M(between the gateways, but those packets are built and dismantled by the gateways. Traceroute does not see)S
0 617.4 M(them and cannot report anything about their path.)S
0 591 M(Here is a mailing list message with more detail.)S
9 FS/F0 SF 0 566.6 M(Date: Mon, 14 May 2001)S
0 555.8 M(To: linux-ipsec@freeswan.org)S
0 545 M(From: "John S. Denker" <jsd@research.att.com<)S
0 534.2 M(Subject: Re: traceroute: one virtual hop)S
0 512.6 M(At 02:20 PM 5/14/01 -0400, Claudia Schmeing wrote:)S
0 501.8 M(>)S
0 491 M(>> > A bonus question: traceroute in subnet to subnet enviroment looks like:)S
0 480.2 M(>> > )S
0 469.4 M(>> > traceroute to andris.dmz \(172.20.24.10\), 30 hops max, 38 byte packets)S
0 458.6 M(>> > 1  drama \(172.20.1.1\)  0.716 ms  0.942 ms  0.434 ms)S
0 447.8 M(>> > 2  * * *)S
0 437 M(>> > 3  andris.dmz \(172.20.24.10\)  73.576 ms  78.858 ms  79.434 ms)S
0 426.2 M(>> > )S
0 415.4 M(>> > Why aren't there the other hosts which take part in the delivery during )S
0 404.6 M(>    * * * ?)S
0 393.8 M(>)S
0 383 M(>If there is an ipsec tunnel between GateA and Gate B, this tunnel forms a )S
0 372.2 M(>'virtual wire'.  When it is tunneled, the original packet becomes an inner )S
0 361.4 M(>packet, and new ESP and/or AH headers are added to create an outer packet )S
0 350.6 M(>around it. You can see an example of how this is done for AH at )S
0 339.8 M(>doc/ipsec.html#AH . For ESP it is similar.)S
0 329 M(>)S
0 318.2 M(>Think about the packet's path from the inner packet's perspective.)S
0 307.4 M(>It leaves the subnet, goes into the tunnel, and re-emerges in the second)S
0 296.6 M(>subnet. This perspective is also the only one available to the)S
0 285.8 M(>'traceroute' command when the IPSec tunnel is up.)S
0 264.2 M(Claudia got this exactly right.  Let me just expand on a couple of points:)S
0 242.6 M(*\) GateB is exactly one \(virtual\) hop away from GateA.  This is how it)S
0 231.8 M(would be if there were a physically private wire from A to B.  The)S
0 221 M(virtually private connection should work the same, and it does.)S
0 199.4 M(*\) While the information is in transit from GateA to GateB, the hop count)S
0 188.6 M(of the outer header \(the "envelope"\) is being decremented.  The hop count)S
0 177.8 M(of the inner header \(the "contents" of the envelope\) is not decremented and)S
0 167 M(should not be decremented.  The hop count of the outer header is not)S
0 156.2 M(derived from and should not be derived from the hop count of the inner header.)S
0 134.6 M(Indeed, even if the packets did time out in transit along the tunnel, there)S
0 123.8 M(would be no way for traceroute to find out what happened.  Just as)S
0 113 M(information cannot leak _out_ of the tunnel to the outside, information)S
0 102.2 M(cannot leak _into_ the tunnel from outside, and this includes ICMP messages)S
0 91.4 M(from routers along the path.)S
0 69.8 M(There are some cases where one might wish for information about what is)S
0 59 M(happening at the IP layer \(below the tunnel layer\) -- but the protocol)S
0 48.2 M(makes no provision for this.  This raises all sorts of conceptual issues.)S
0 37.4 M(AFAIK nobody has ever cared enough to really figure out what _should_)S
0 26.6 M(happen, let alone implement it and standardize it.)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Traceroute does not show anything between the gateways)S
474.768 0 M(54)S
GR
SP
%%Page: 55 84
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 678.2 M(*\) I consider the "* * *" to be a slight bug.  One might wish for it to be)S
0 667.4 M(replaced by "GateB GateB GateB".  It has to do with treating host-to-subnet)S
0 656.6 M(traffic different from subnet-to-subnet traffic \(and other gory details\).)S
0 645.8 M(I fervently hope KLIPS2 will make this problem go away.)S
0 624.2 M(*\) If you want to ask questions about the link from GateA to GateB at the)S
0 613.4 M(IP level \(below the tunnel level\), you have to ssh to GateA and launch a)S
0 602.6 M(traceroute from there.)S
17 FS/F9 SF 0 570.6 M(Testing in stages)S
11 FS/F4 SF 0 543 M(It is often useful in debugging to test things one at a time:)S
36 516.6 M(disable IPsec entirely, for example by turning it off with chkconfig\(8\), and make sure routing works)S
/Fc SF 28.19 516.6 M(\267 )S
/F4 SF 36 503.4 M(Once that works, try a manually keyed connection. This does not require key negotiation between)S
36 490.2 M(Pluto and the key daemon on the other end.)S
/Fc SF 28.19 503.4 M(\267 )S
/F4 SF 36 477 M(Once that works, try automatically keyed connections)S
/Fc SF 28.19 477 M(\267 )S
/F4 SF 36 463.8 M(Once IPsec works, add packet compression)S
/Fc SF 28.19 463.8 M(\267 )S
/F4 SF 36 450.6 M(Once everything seems to work, try stress tests with large transfers, many connections, frequent)S
36 437.4 M(re-keying, ...)S
/Fc SF 28.19 450.6 M(\267 )S
/F4 SF 0 411 M(FreeS/WAN releases are tested for all of these, so you can be reasonably certain they)S
/F6 SF ( can)S
/F4 SF ( do them all. Of)S
0 397.8 M(course, that does not mean they)S
/F6 SF ( will)S
/F4 SF ( on the first try, especially if you have some unusual configuration.)S
0 371.4 M(The rest of this section gives information on diagnosing the problem when each of the above steps fails.)S
14 FS/F9 SF 0 342 M(Manually keyed connections don't work)S
11 FS/F4 SF 0 315 M(Suspect one of:)S
36 288.6 M(mis-configuration of IPsec system in the /etc/ipsec.conf file)S
36 275.4 M(common errors are incorrect interface or next hop information)S
/Fc SF 28.19 288.6 M(\267 )S
/F4 SF 36 262.2 M(mis-configuration of manual connection in the /etc/ipsec.conf file)S
/Fc SF 28.19 262.2 M(\267 )S
/F4 SF 36 249 M(routing problems causing IPsec packets to be lost)S
/Fc SF 28.19 249 M(\267 )S
/F4 SF 36 235.8 M(bugs in KLIPS)S
/Fc SF 28.19 235.8 M(\267 )S
/F4 SF 36 222.6 M(mismatch between the transforms we support and those another IPsec implementation offers.)S
/Fc SF 28.19 222.6 M(\267 )S
14 FS/F9 SF 0 193.2 M(One manual connection works, but second one fails)S
11 FS/F4 SF 0 166.2 M(This is a fairly common problem when attempting to configure multiple manually keyed connections from a)S
0 153 M(single gateway.)S
0 126.6 M(Each connection must be identified by a unique SPI value. For automatic connections, these values are)S
0 113.4 M(assigned automatically. For manual connections, you must set them with)S
/Fa SF ( spi=)S
/F4 SF ( statements in ipsec.conf\(5\).)S
0 87 M(Each manual connection must have a unique SPI value in the range 0x100 to 0x999. Two or more with the)S
0 73.8 M(same value will fail. For details, see our doc section Using manual keying in production and the man page)S
0 60.6 M(ipsec.conf\(5\).)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Testing in stages)S
474.768 0 M(55)S
GR
SP
%%Page: 56 85
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(Manual connections work, but automatic keying doesn't)S
11 FS/F4 SF 0 657 M(The most common reason for this behaviour is a firewall dropping the UDP port 500 packets used in key)S
0 643.8 M(negotiation.)S
0 617.4 M(Other possibilities:)S
36 591 M(mis-configuration of auto connection in the /etc/ipsec.conf file.)S
36 564.6 M(One common configuration error is forgetting that you need)S
/Fa SF ( auto=add)S
/F4 SF ( to load the connection)S
36 551.4 M(description on the receiving end so it recognises the connection when the other end asks for it.)S
/Fc SF 28.19 591 M(\267 )S
/F4 SF 36 538.2 M(error in shared secret in /etc/ipsec.secrets)S
/Fc SF 28.19 538.2 M(\267 )S
/F4 SF 36 525 M(one gateway lacks a route to the other so Pluto's UDP packets are lost)S
/Fc SF 28.19 525 M(\267 )S
/F4 SF 36 511.8 M(bugs in Pluto)S
/Fc SF 28.19 511.8 M(\267 )S
/F4 SF 36 498.6 M(incompatibilities between Pluto's IKE implementation and the IKE at the other end of the tunnel.)S
36 472.2 M(Some possibile problems are discussed in out interoperation document.)S
/Fc SF 28.19 498.6 M(\267 )S
14 FS/F9 SF 0 442.8 M(IPsec works, but connections using compression fail)S
11 FS/F4 SF 0 415.8 M(When we first added compression, we saw some problems:)S
36 389.4 M(compatibility issues with other implementations. We followed the RFCs and omitted some extra)S
36 376.2 M(material that many compression libraries add by default. Some other implementations left the extras)S
36 363 M(in)S
/Fc SF 28.19 389.4 M(\267 )S
/F4 SF 36 349.8 M(bugs in assembler compression routines on non-Intel CPUs. The workaround is to use C code instead)S
36 336.6 M(of possibly problematic assembler.)S
/Fc SF 28.19 349.8 M(\267 )S
/F4 SF 0 310.2 M(We have not seen either problem in some time \(at least six months as I write in March 2002\), but if you have)S
0 297 M(some unusual configuration then you may see them.)S
14 FS/F9 SF 0 267.6 M(Small packets work, but large transfers fail)S
11 FS/F4 SF 0 240.6 M(If tests with ping\(1\) and a small packet size succeed, but tests or transfers with larger packet sizes fail, suspect)S
0 227.4 M(problems with packet fragmentation and perhaps path MTU discovery.)S
0 201 M(Our troubleshooting document covers these problems. Information on the underlying mechanism is in our)S
0 187.8 M(background document.)S
14 FS/F9 SF 0 158.4 M(Subnet-to-subnet works, but tests from the gateways don't)S
11 FS/F4 SF 0 131.4 M(This is described under I cannot ping... above.)S
17 FS/F9 SF 0 99 M(Compilation problems)S
14 FS/F9 SF 0 68.4 M(gmp.h: No such file or directory)S
11 FS/F4 SF 0 41.4 M(Pluto needs the GMP \()S
/F7 SF (G)S
/F4 SF (NU)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Manual connections work, but automatic keying doesn't)S
474.768 0 M(56)S
GR
SP
%%Page: 57 86
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F7 SF 0 687 M(M)S
/F4 SF (ulti-)S
/F7 SF (P)S
/F4 SF (recision\) library for the large integer calculations it uses in public key cryptography. This error)S
0 673.8 M(message indicates a failure to find the library. You must install it before Pluto will compile.)S
0 647.4 M(The GMP library is included in most Linux distributions. Typically, there are two RPMs, libgmp and)S
0 634.2 M(libgmp-devel, You need to)S
/F6 SF ( install both)S
/F4 SF (, either from your distribution CDs or from your vendor's web site.)S
0 607.8 M(On Debian, a mailing list message reports that the command to give is)S
/Fa SF ( apt-get install gmp2)S
/F4 SF (.)S
0 581.4 M(For more information and the latest version, see the GMP home page.)S
14 FS/F9 SF 0 552 M(... virtual memory exhausted)S
11 FS/F4 SF 0 525 M(We have had several reports of this message appearing, all on SPARC Linux. Here is a mailing message on a)S
0 511.8 M(solution:)S
9 FS/F0 SF 0 487.4 M(> ipsec_sha1.c: In function `SHA1Transform':)S
0 476.6 M(> ipsec_sha1.c:95: virtual memory exhausted)S
0 455 M(I'm seeing exactly the same problem on an Ultra with 256MB ram and 500)S
0 444.2 M(MB swap.  Except I am compiling version 1.5 and its Red Hat 6.2.)S
0 422.6 M(I can get around this by using -O instead of -O2 for the optimization)S
0 411.8 M(level.  So it is probably a bug in the optimizer on the sparc complier. )S
0 401 M(I'll try and chase this down on the sparc lists.)S
17 FS/F9 SF 0 369 M(Interpreting error messages)S
14 FS/F9 SF 0 338.4 M(route-client \(or host\) exited with status 7)S
11 FS/F4 SF 0 311.4 M(Here is a discussion of this error from FreeS/WAN "listress" \(mailing list tech support person\) Claudia)S
0 298.2 M(Schmeing. The "FAQ on the network unreachable error" which she refers to is the next question below.)S
9 FS/F0 SF 0 273.8 M(> I reached the point where the two boxes \(both on dial-up connections, but)S
0 263 M(> treated as static IPs by getting the IP and editing ipsec.conf after the)S
0 252.2 M(> connection is established\) to the point where they exchange some info, but I)S
0 241.4 M(> get an error like "route-client command exited with status 7 \\n internal)S
0 230.6 M(> error".)S
0 219.8 M(> Where can I find a description of this error?)S
0 198.2 M(In general, if the FAQ doesn't cover it, you can search the mailing list )S
0 187.4 M(archives - I like to use)S
0 176.6 M(http://www.sandelman.ottawa.on.ca/linux-ipsec/)S
0 165.8 M(but you can see doc/mail.html for different archive formats.)S
0 133.4 M(Your error comes from the _updown script, which performs some)S
0 122.6 M(routing and firewall functions to help Linux FreeS/WAN. More info)S
0 111.8 M(is available at doc/firewall.html and man ipsec.conf. Its routing)S
0 101 M(is integral to the health of Linux FreeS/WAN; it also provides facility)S
0 90.2 M(to insert custom firewall rules to be executed when you create or destroy)S
0 79.4 M(a connection.)S
0 57.8 M(Yours is, of course, a routing error. You can be fairly sure the routing )S
0 47 M(machinery is saying "network is unreachable". There's a FAQ on the )S
0 36.2 M("network is unreachable" error, but more information is available now; read on.)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(... virtual memory exhausted)S
474.768 0 M(57)S
GR
SP
%%Page: 58 87
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(If your _updown script is recent \(for example if it shipped with )S
0 678.2 M(Linux FreeS/WAN 1.91\), you will see another debugging line in your logs )S
0 667.4 M(that looks something like this:)S
0 645.8 M(> output: /usr/local/lib/ipsec/_updown: `route add -net 128.174.253.83 )S
0 635 M(> netmask 255.255.255.255 dev ipsec0 gw 66.92.93.161' failed)S
0 613.4 M(This is, of course, the system route command that exited with status 7, )S
0 602.6 M(\(ie. failed\). Man route for details. Seeing the command typed out yields )S
0 591.8 M(more information. If your _updown script is older, you may wish to update )S
0 581 M(it to show the command explicitly.)S
0 559.4 M(Three parameters fed to the route command: net, netmask and gw [gateway] )S
0 548.6 M(are derived from things you've put in ipsec.conf.)S
0 527 M(Net and netmask are derived from the peer's IP and mask. In more detail:)S
0 505.4 M(You may see a routing error when routing to a client \(ie. subnet\), or )S
0 494.6 M(to a host \(IPSec gateway or freestanding host; a box that does IPSec for)S
0 483.8 M(itself\). In _updown, the "route-client" section  is responsible to set up )S
0 473 M(the route for IPSec'd \(usually, read 'tunneled'\) packets headed to a )S
0 462.2 M(peer subnet. Similarly, route-host routes IPSec'd packets to a peer host)S
0 451.4 M(or IPSec gateway.)S
0 429.8 M(When routing to a 'client', net and netmask are ipsec.conf's left- or )S
0 419 M(rightsubnet \(whichever is not local\). Similarly, when routing to a )S
0 408.2 M('host' the net is left or right. Host netmask is always /32, indicating a )S
0 397.4 M(single machine.)S
0 375.8 M(Gw is nexthop's value. Again, the value in question is left- or rightnexthop,)S
0 365 M(whichever is local. Where left/right or left-/rightnexthop has the special )S
0 354.2 M(value %defaultroute \(described in man ipsec.conf\), gw will automagically get)S
0 343.4 M(the value of the next hop on the default route.)S
0 321.8 M(Q: "What's a nexthop and why do I need one?")S
0 300.2 M(A: 'nexthop' is a routing kluge; its value is the next hop away)S
0 289.4 M(   from the machine that's doing IPSec, and toward your IPSec peer. )S
0 278.6 M(   You need it to get the processed packets out of the local system and )S
0 267.8 M(   onto the wire. While we often route other packets through the machine )S
0 257 M(   that's now doing IPSec, and are done with it, this does not suffice here. )S
0 246.2 M(   After packets are processed with IPSec, this machine needs to know where )S
0 235.4 M(   they go next. Of course using the 'IPSec gateway' as their routing gateway )S
0 224.6 M(   would cause an infinite loop! [To visualize this, see the packet flow )S
0 213.8 M(   diagram at doc/firewall.html.] To avoid this, we route packets through )S
0 203 M(   the next hop down their projected path.)S
0 181.4 M(Now that you know the background, consider:)S
0 170.6 M(1. Did you test routing between the gateways in the absence of Linux)S
0 159.8 M(   FreeS/WAN, as recommended? You need to ensure the two machines that)S
0 149 M(   will be running Linux FreeS/WAN can route to one another before trying to )S
0 138.2 M(   make a secure connection.)S
0 127.4 M(2. Is there anything obviously wrong with the sense of your route command?)S
0 105.8 M(Normally, this problem is caused by an incorrect local nexthop parameter.)S
0 95 M(Check out the use of %defaultroute, described in man ipsec.conf. This is)S
0 84.2 M(a simple way to set nexthop for most people. To figure nexthop out by hand,)S
0 73.4 M(traceroute in-the-clear to your IPSec peer. Nexthop is the traceroute's )S
0 62.6 M(first hop after your IPSec gateway.)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(... virtual memory exhausted)S
474.768 0 M(58)S
GR
SP
%%Page: 59 88
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(SIOCADDRT:Network is unreachable)S
11 FS/F4 SF 0 657 M(This message is not from FreeS/WAN, but from the Linux IP stack itself. That stack is seeing packets it has)S
0 643.8 M(no route for, either because your routing was broken before FreeS/WAN started or because FreeS/WAN's)S
0 630.6 M(changes broke it.)S
0 604.2 M(Here is a message from Claudia suggesting ways to diagnose and fix such problems:)S
9 FS/F0 SF 0 579.8 M(You write,)S
0 569 M(> I have correctly installed freeswan-1.8 on RH7.0 kernel 2.2.17, but when )S
0 558.2 M(> I setup a VPN connection with the other machine\(RH5.2 Kernel 2.0.36 )S
0 547.4 M(> freeswan-1.0, it works well.\) it told me that )S
0 536.6 M(> "SIOCADDRT:Network is unreachable"!  But the network connection is no )S
0 525.8 M(> problem.)S
0 504.2 M(Often this error is the result of a misconfiguration. )S
0 482.6 M(Be sure that you can route successfully in the absence of Linux)S
0 471.8 M(FreeS/WAN. \(You say this is no problem, so proceed to the next step.\))S
0 450.2 M(Use a custom copy of the default updownscript. Do not change the route )S
0 439.4 M(commands, but add a diagnostic message revealing the exact text of the )S
0 428.6 M(route command. Is there a problem with the sense of the route command)S
0 417.8 M(that you can see? If so, then re-examine those ipsec.conf settings)S
0 407 M(that are being sent to the route command. )S
0 385.4 M(You may wish to use the ipsec auto --route and --unroute commands to )S
0 374.6 M(troubleshoot the problem. See man ipsec_auto for details.)S
11 FS/F4 SF 0 348.6 M(Since the above message was written, we have modified the updown script to provide a better diagnostic for)S
0 335.4 M(this problem. Check)S
/Fa SF ( /var/log/messages)S
/F4 SF (.)S
0 309 M(See also the FAQ question route-client \(or host\) exited with status 7.)S
14 FS/F9 SF 0 279.6 M(ipsec_setup: modprobe: Can't locate module ipsec)S
0 249.6 M(ipsec_setup: Fatal error, kernel appears to lack KLIPS)S
11 FS/F4 SF 0 222.6 M(These messages indicate an installation failure. The kernel you are running does not contain the KLIPS)S
0 209.4 M(\(kernel IPsec\) code.)S
0 183 M(Note that the "modprobe: Can't locate module ipsec" message appears even if you are not using modules. If)S
0 169.8 M(there is no KLIPS in your kernel, FreeS/WAN tries to load it as a module. If that fails, you get this message.)S
0 143.4 M(Commands you can quickly try are:)S
/Fa SF 0 117 M(uname -a)S
/F4 SF 36 103.8 M(to get details, including compilation date and time, of the currently running kernel)S
/Fa SF 0 90.6 M(ls /)S
0 77.4 M(ls /boot)S
/F4 SF 36 64.2 M(to ensure a new kernel is where it should be. If kernel compilation puts it in)S
/Fa SF ( /)S
/F4 SF ( but)S
/Fa SF ( lilo)S
/F4 SF ( wants it in)S
/Fa SF ( /boot)S
/F4 SF (,)S
36 51 M(then you should uncomment the)S
/Fa SF ( INSTALL_PATH=/boot)S
/F4 SF ( line in the kernel)S
/Fa SF ( Makefile)S
/F4 SF (.)S
/Fa SF 0 37.8 M(more /etc/lilo.conf)S
/F4 SF 36 24.6 M(to see that)S
/Fa SF ( lilo)S
/F4 SF ( has correct information)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(SIOCADDRT:Network is unreachable)S
474.768 0 M(59)S
GR
SP
%%Page: 60 89
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/Fa SF 0 687 M(lilo)S
/F4 SF 36 673.8 M(to ensure that information in)S
/Fa SF ( /etc/lilo.conf)S
/F4 SF ( has been transferred to the boot sector)S
0 647.4 M(If those don't find the problem, you have to go back and check through the install procedure to see what was)S
0 634.2 M(missed.)S
0 607.8 M(Here is one of Claudia's messages on the topic:)S
9 FS/F0 SF 0 583.4 M(> I tried to install freeswan 1.8 on my mandrake 7.2 test box. ...)S
0 561.8 M(> It does show version and some output for whack.)S
0 540.2 M(Yes, because the Pluto \(daemon\) part of ipsec is installed correctly, but)S
0 529.4 M(as we see below the kernel portion is not.)S
0 507.8 M(> However, I get the following from /var/log/messages:)S
0 497 M(> )S
0 486.2 M(> Mar 11 22:11:55 pavillion ipsec_setup: Starting FreeS/WAN IPsec 1.8...)S
0 475.4 M(> Mar 11 22:12:02 pavillion ipsec_setup: modprobe: Can't locate module ipsec)S
0 464.6 M(> Mar 11 22:12:02 pavillion ipsec_setup: Fatal error, kernel appears to lack)S
0 453.8 M(> KLIPS.)S
0 432.2 M(This is your problem. You have not successfully installed a kernel with)S
0 421.4 M(IPSec machinery in it. )S
0 399.8 M(Did you build Linux FreeS/WAN as a module? If so, you need to ensure that )S
0 389 M(your new module has been installed in the directory where your kernel )S
0 378.2 M(loader normally finds your modules. If not, you need to ensure)S
0 367.4 M(that the new IPSec-enabled kernel is being loaded correctly.)S
0 345.8 M(See also doc/install.html, and INSTALL in the distro.)S
14 FS/F9 SF 0 316.8 M(ipsec_setup: ... failure to fetch key for ... from DNS)S
11 FS/F4 SF 0 289.8 M(Quoting Henry:)S
9 FS/F0 SF 0 265.4 M(Note that by default, FreeS/WAN is now set up to)S
0 254.6 M(     \(a\) authenticate with RSA keys, and)S
0 243.8 M(     \(b\) fetch the public key of the far end from DNS.)S
0 233 M(Explicit attention to  ipsec.conf will be needed if you want)S
0 222.2 M(to do something different.)S
11 FS/F4 SF 0 196.2 M(and Claudia, responding to the same user:)S
9 FS/F0 SF 0 171.8 M(You write,)S
0 150.2 M(>       My current setup in ipsec.conf is leftrsasigkey=%dns I have )S
0 139.4 M(> commented this and authby=rsasig out. I am able to get ipsec running, )S
0 128.6 M(> but what I find is that the documentation only specifies for %dns are )S
0 117.8 M(> there any other values that can be placed in this variable other than )S
0 107 M(> %dns and the key? I am also assuming that this is where I would place )S
0 96.2 M(> my public key for the left and right side as well is this correct?)S
0 74.6 M(Valid values for authby= are rsasig and secret, which entail authentication)S
0 63.8 M(by RSA signature or by shared secret, respectively. Because you have )S
0 53 M(commented authby=rsasig out, you are using the default value of authby=secret. )S
0 31.4 M(When using RSA signatures, there are two ways to get the public key for the)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(ipsec_setup: ... failure to fetch key for ... from DNS)S
474.768 0 M(60)S
GR
SP
%%Page: 61 90
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(IPSec peer: either copy it directly into *rsasigkey= in ipsec.conf, or)S
0 678.2 M(fetch it from dns. The magic value %dns for *rsasigkey parameters says to )S
0 667.4 M(try to fetch the peer's key from dns.)S
0 645.8 M(For any parameters, you may find their significance and special values in)S
0 635 M(man ipsec.conf. If you are setting up keys or secrets, be sure also to)S
0 624.2 M(reference man ipsec.secrets.)S
14 FS/F9 SF 0 595.2 M(ipsec_setup: ... interfaces ... and ... share address ...)S
11 FS/F4 SF 0 568.2 M(This is a fatal error. FreeS/WAN cannot cope with two or more interfaces using the same IP address. You)S
0 555 M(must re-configure to avoid this.)S
0 528.6 M(A mailing list message on the topic from Pluto developer Hugh Redelmeier:)S
9 FS/F0 SF 0 504.2 M(| I'm trying to get freeswan working between two machine where one has a ppp)S
0 493.4 M(| interface.)S
0 482.6 M(| I've already suceeded with  two machines with ethernet ports but  the ppp)S
0 471.8 M(| interface is causing me problems.)S
0 461 M(|  basically when I run ipsec start  i get)S
0 450.2 M(| ipsec_setup: Starting FreeS/WAN IPsec 1.7...)S
0 439.4 M(| ipsec_setup: 003 IP interfaces ppp1 and ppp0 share address 192.168.0.10!)S
0 428.6 M(| ipsec_setup: 003 IP interfaces ppp1 and ppp2 share address 192.168.0.10!)S
0 417.8 M(| ipsec_setup: 003 IP interfaces ppp0 and ppp2 share address 192.168.0.10!)S
0 407 M(| ipsec_setup: 003 no public interfaces found)S
0 396.2 M(|)S
0 385.4 M(| followed by lots of cannot work out interface for connection messages)S
0 374.6 M(|)S
0 363.8 M(| now I can specify the interface in ipsec.conf to be ppp0 , but this does)S
0 353 M(| not affect the above behaviour. A quick look in server.c indicates that the)S
0 342.2 M(| interfaces value  is not used but some sort of raw detect happens.)S
0 331.4 M(|)S
0 320.6 M(| I guess I could prevent the formation of the extra ppp interfaces or)S
0 309.8 M(| allocate them different ip but I'd  rather not. if at all possible. Any)S
0 299 M(| suggestions please.)S
0 277.4 M(Pluto won't touch an interface that shares an IP address with another.)S
0 266.6 M(This will eventually change, but it probably won't happen soon.)S
0 245 M(For now, you will have to give the ppp1 and ppp2 different addresses.)S
14 FS/F9 SF 0 216 M(ipsec_setup: Cannot adjust kernel flags)S
11 FS/F4 SF 0 189 M(A mailing list message form technical lead Henry Spencer:)S
9 FS/F0 SF 0 164.6 M(> When FreeS/WAN IPsec 1.7 is starting on my 2.0.38 Linux kernel the following)S
0 153.8 M(> error message is generated:)S
0 143 M(> ipsec_setup: Cannot adjust kernel flags, no /proc/sys/net/ipsec directory!)S
0 132.2 M(> What is supposed to create this directory and how can I fix this problem?)S
0 110.6 M(I think that directory is a 2.2ism, although I'm not certain \(I don't have)S
0 99.8 M(a 2.0.xx system handy any more for testing\).  Without it, some of the)S
0 89 M(ipsec.conf config-setup flags won't work, but otherwise things should)S
0 78.2 M(function. )S
11 FS/F4 SF 0 52.2 M(You also need to enable the)S
/Fa SF ( /proc)S
/F4 SF ( filesystem in your kernel configuration for these operations to work.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(ipsec_setup: ... interfaces ... and ... share address ...)S
474.768 0 M(61)S
GR
SP
%%Page: 62 91
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(Message numbers \(MI3, QR1, et cetera\) in Pluto messages)S
11 FS/F4 SF 0 657 M(Pluto messages often indicate where Pluto is in the IKE protocols. The letters indicate)S
/F7 SF ( M)S
/F4 SF (ain mode or)S
/F7 SF ( Q)S
/F4 SF (uick)S
0 643.8 M(mode and)S
/F7 SF ( I)S
/F4 SF (nitiator or)S
/F7 SF ( R)S
/F4 SF (esponder. The numerals are message sequence numbers. For more detail, see our IPsec)S
0 630.6 M(section.)S
14 FS/F9 SF 0 601.2 M(Connection names in Pluto error messages)S
11 FS/F4 SF 0 574.2 M(From Pluto programmer Hugh Redelmeier:)S
9 FS/F0 SF 0 549.8 M(| Jan 17 16:21:10 remus Pluto[13631]: "jumble" #1: responding to Main Mode from Road Warrior 130.205.82.46)S
0 539 M(| Jan 17 16:21:11 remus Pluto[13631]: "jumble" #1: no suitable connection for peer @banshee.wittsend.com)S
0 528.2 M(| )S
0 517.4 M(|     The connection "jumble" has nothing to do with the incoming)S
0 506.6 M(| connection requests, which were meant for the connection "banshee".)S
0 485 M(You are right.  The message tells you which Connection Pluto is)S
0 474.2 M(currently using, which need not be the right one.  It need not be the)S
0 463.4 M(right one now for the negotiation to eventually succeed!  This is)S
0 452.6 M(described in ipsec_pluto\(8\) in the section "Road Warrior Support".)S
0 431 M(There are two times when Pluto will consider switching Connections for)S
0 420.2 M(a state object.  Both are in response to receiving ID payloads \(one in)S
0 409.4 M(Phase 1 / Main Mode and one in Phase 2 / Quick Mode\).  The second is)S
0 398.6 M(not unique to Road Warriors.  In fact, neither is the first any more)S
0 387.8 M(\(two connections for the same pair of hosts could differ in Phase 1 ID)S
0 377 M(payload; probably nobody else has tried this\).)S
14 FS/F9 SF 0 348 M(Pluto: ... can't orient connection)S
11 FS/F4 SF 0 321 M(Older versions of FreeS/WAN used this message. The same error now gives the "we have no ipsecN ..." error)S
0 307.8 M(described just below.)S
14 FS/F9 SF 0 278.4 M(... we have no ipsecN interface for either end of this connection)S
11 FS/F4 SF 0 251.4 M(Your tunnel has no IP address which matches the IP address of any of the available IPsec interfaces. Either)S
0 238.2 M(you've misconfigured the connection, or you need to define an appropriate IPsec interface connection.)S
/Fa SF 0 225 M(interfaces=%defaultroute)S
/F4 SF ( works in many cases.)S
0 198.6 M(A longer story: Pluto needs to know whether it is running on the machine which the connection description)S
0 185.4 M(calls)S
/Fa SF ( left)S
/F4 SF ( or on)S
/Fa SF ( right)S
/F4 SF (. It figures that out by:)S
36 159 M(looking at the interfaces given in)S
/Fa SF ( interfaces=)S
/F4 SF ( lines in the)S
/Fa SF ( config setup)S
/F4 SF ( section)S
/Fc SF 28.19 159 M(\267 )S
/F4 SF 36 145.8 M(discovering the IP addresses for those interfaces)S
/Fc SF 28.19 145.8 M(\267 )S
/F4 SF 36 132.6 M(searching for a match between those addresses and the ones given in)S
/Fa SF ( left=)S
/F4 SF ( or)S
/Fa SF ( right=)S
/F4 SF ( lines.)S
/Fc SF 28.19 132.6 M(\267 )S
/F4 SF 0 106.2 M(Normally a match is found. Then Pluto knows where it is and can set up other things \(for example, if it is)S
/Fa SF ( left)S
/F4 SF (\))S
0 93 M(using parameters such as)S
/Fa SF ( leftsubnet)S
/F4 SF ( and)S
/Fa SF ( leftnexthop)S
/F4 SF (, and sending its outgoing packets to)S
/Fa SF ( right)S
/F4 SF (.)S
0 66.6 M(If no match is found, it emits the above error message.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Message numbers \(MI3, QR1, et cetera\) in Pluto messages)S
474.768 0 M(62)S
GR
SP
%%Page: 63 92
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(Pluto: ... no connection is known)S
11 FS/F4 SF 0 657 M(This error message occurs when a remote system attempts to negotiate a connection and Pluto does not have a)S
0 643.8 M(connection description that matches what the remote system has requested. The most common cause is a)S
0 630.6 M(configuration error on one end or the other.)S
0 604.2 M(Parameters involved in this match are)S
/Fa SF ( left)S
/F4 SF (,)S
/Fa SF ( right)S
/F4 SF (,)S
/Fa SF ( leftsubnet)S
/F4 SF ( and)S
/Fa SF ( rightsubnet)S
/F4 SF (.)S
/F7 SF 0 577.8 M(The match must be exact)S
/F4 SF (. For example, if your left subnet is a.b.c.0/24 then neither a single machine in that)S
0 564.6 M(net nor a smaller subnet such as a.b.c.64/26 will be considered a match.)S
0 538.2 M(The message can also occur when an appropriate description exists but Pluto has not loaded it. Use an)S
/Fa SF 0 525 M(auto=add)S
/F4 SF ( statement in the connection description, or an)S
/Fa SF ( ipsec auto --add <conn_name>)S
/F4 SF ( command, to)S
0 511.8 M(correct this.)S
0 485.4 M(An explanation from the Pluto developer:)S
9 FS/F0 SF 0 461 M(| Jul 12 15:00:22 sohar58 Pluto[574]: "corp_road" #2: cannot respond to IPsec)S
0 450.2 M(| SA request because no connection is known for)S
0 439.4 M(| 216.112.83.112/32===216.112.83.112...216.67.25.118)S
0 417.8 M(This is the first message from the Pluto log showing a problem.  It)S
0 407 M(means that PGPnet is trying to negotiate a set of SAs with this)S
0 396.2 M(topology:)S
0 374.6 M(216.112.83.112/32===216.112.83.112...216.67.25.118)S
0 363.8 M(^^^^^^^^^^^^^^^^^   ^^^^^^^^^^^^^^   ^^^^^^^^^^^^^)S
0 353 M(client on our side  our host         PGPnet host, no client)S
0 331.4 M(None of the conns you showed look like this.)S
0 309.8 M(Use)S
0 299 M(        ipsec auto --status)S
0 288.2 M(to see a snapshot of what connections are in pluto, what)S
0 277.4 M(negotiations are going on, and what SAs are established.)S
0 255.8 M(The leftsubnet= \(client\) in your conn is 216.112.83.64/26.  It must)S
0 245 M(exactly match what pluto is looking for, and it does not.)S
14 FS/F9 SF 0 216 M(Pluto: ... no suitable connection ...)S
11 FS/F4 SF 0 189 M(This is similar to the no connection known error, but occurs at a different point in Pluto processing.)S
0 162.6 M(Here is one of Claudia's messages explaining the problem:)S
9 FS/F0 SF 0 138.2 M(You write,)S
0 116.6 M(> What could be the reason of the following error? )S
0 105.8 M(> "no suitable connection for peer '@xforce'")S
0 84.2 M(When a connection is initiated by the peer, Pluto must choose which entry in )S
0 73.4 M(the conf file best matches the incoming connection. A preliminary choice is )S
0 62.6 M(made on the basis of source and destination IPs, since that information is )S
0 51.8 M(available at that time. )S
0 30.2 M(A payload containing an ID arrives later in the negotiation. Based on this)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Pluto: ... no connection is known)S
474.768 0 M(63)S
GR
SP
%%Page: 64 93
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(id and the *id= parameters, Pluto refines its conn selection. ...)S
0 667.4 M(The message "no suitable connection" indicates that in this refining step,)S
0 656.6 M(Pluto does not find a connection that matches that ID.)S
0 635 M(Please see "Selecting a connection when responding" in man ipsec_pluto for)S
0 624.2 M(more details.)S
11 FS/F4 SF 0 598.2 M(See also Connection names in Pluto error messages.)S
14 FS/F9 SF 0 568.8 M(Pluto: ... no connection has been authorized)S
11 FS/F4 SF 0 541.8 M(Here is one of Claudia's messages discussing this problem:)S
9 FS/F0 SF 0 517.4 M(You write,)S
0 495.8 M(>  May 22 10:46:31 debian Pluto[25834]: packet from x.y.z.p:10014: )S
0 485 M(>  initial Main Mode message from x.y.z.p:10014 )S
0 474.2 M(                            but no connection has been authorized)S
0 452.6 M(This error occurs early in the connection negotiation process,)S
0 441.8 M(at the first step of IKE negotiation \(Main Mode\), which is itself the )S
0 431 M(first of two negotiation phases involved in creating an IPSec connection.)S
0 409.4 M(Here, Linux FreeS/WAN receives a packet from a potential peer, which )S
0 398.6 M(requests that they begin discussing a connection.)S
0 377 M(The "no connection has been authorized" means that there is no connection )S
0 366.2 M(description in Linux FreeS/WAN's internal database that can be used to )S
0 355.4 M(link your ipsec interface with that peer.)S
0 333.8 M("But of course I configured that connection!" )S
0 312.2 M(It may be that the appropriate connection description exists in ipsec.conf )S
0 301.4 M(but has not been added to the database with ipsec auto --add myconn or the )S
0 290.6 M(auto=add method. Or, the connection description may be misconfigured.)S
0 269 M(The only parameters that are relevant in this decision are left= and right= .)S
0 258.2 M(Local and remote ports are also taken into account -- we see that the port )S
0 247.4 M(is printed in the message above -- but there is no way to control these)S
0 236.6 M(in ipsec.conf.)S
0 204.2 M(Failure at "no connection has been authorized" is similar to the)S
0 193.4 M("no connection is known for..." error in the FAQ, and the "no suitable)S
0 182.6 M(connection" error described in the snapshot's FAQ. In all three cases,)S
0 171.8 M(Linux FreeS/WAN is trying to match parameters received in the)S
0 161 M(negotiation with the connection description in the local config file.)S
0 139.4 M(As it receives more information, its matches take more parameters into )S
0 128.6 M(account, and become more precise:  first the pair of potential peers,)S
0 117.8 M(then the peer IDs, then the endpoints \(including any subnets\).)S
0 96.2 M(The "no suitable connection for peer *" occurs toward the end of IKE )S
0 85.4 M(\(Main Mode\) negotiation, when the IDs are matched.)S
0 63.8 M("no connection is known for a/b===c...d" is seen at the beginning of IPSec )S
0 53 M(\(Quick Mode, phase 2\) negotiation, when the connections are matched using)S
0 42.2 M(left, right, and any information about the subnets.)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Pluto: ... no connection has been authorized)S
474.768 0 M(64)S
GR
SP
%%Page: 65 94
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(Pluto: ... OAKLEY_DES_CBC is not supported.)S
11 FS/F4 SF 0 657 M(This message occurs when the other system attempts to negotiate a connection using single DES, which we do)S
0 643.8 M(not support because it is insecure.)S
0 617.4 M(Our interoperation document has suggestions for how to deal with systems that attempt to use single DES.)S
14 FS/F9 SF 0 588 M(Pluto: ... no acceptable transform)S
11 FS/F4 SF 0 561 M(This message means that the other gateway has made a proposal for connection parameters, but nothing they)S
0 547.8 M(proposed is acceptable to Pluto. Possible causes include:)S
36 521.4 M(misconfiguration on either end)S
/Fc SF 28.19 521.4 M(\267 )S
/F4 SF 36 508.2 M(policy incompatibilities, for example we require encrypted connections but they are trying to create)S
36 495 M(one with just authentication)S
/Fc SF 28.19 508.2 M(\267 )S
/F4 SF 36 481.8 M(interoperation problems, for example they offer only single DES and FreeS/WAN does not support)S
36 468.6 M(that. See discussion in our interoperation document.)S
/Fc SF 28.19 481.8 M(\267 )S
/F4 SF 0 442.2 M(A more detailed explanation, from Pluto programmer Hugh Redelmeier:)S
9 FS/F0 SF 0 417.8 M(Background:)S
0 396.2 M(When one IKE system \(for example, Pluto\) is negotiating with another)S
0 385.4 M(to create an SA, the Initiator proposes a bunch of choices and the)S
0 374.6 M(Responder replies with one that it has selected.)S
0 353 M(The structure of the choices is fairly complicated.  An SA payload)S
0 342.2 M(contains a list of lists of "Proposals".  The outer list is a set of)S
0 331.4 M(choices: the selection must be from one element of this list.)S
0 309.8 M(Each of these elements is a list of Proposals.  A selection must be)S
0 299 M(made from each of the elements of the inner list.  In other words,)S
0 288.2 M(*all* of them apply \(that is how, for example, both AH and ESP can)S
0 277.4 M(apply at once\).)S
0 255.8 M(Within each of these Proposals is a list of Transforms.  For each)S
0 245 M(Proposal selected, one Transform must be selected \(in other words,)S
0 234.2 M(each Proposal provides a choice of Transforms\).)S
0 212.6 M(Each Transform is made up of a list of Attributes describing, well,)S
0 201.8 M(attributes.  Such as lifetime of the SA.  Such as algorithm to be)S
0 191 M(used.  All the Attributes apply to a Transform.)S
0 169.4 M(You will have noticed a pattern here: layers alternate between being)S
0 158.6 M(disjunctions \("or"\) and conjunctions \("and"\).)S
0 137 M(For Phase 1 / Main Mode \(negotiating an ISAKMP SA\), this structure is)S
0 126.2 M(cut back.  There must be exactly one Proposal.  So this degenerates to)S
0 115.4 M(a list of Transforms, one of which must be chosen.)S
0 93.8 M(In your case, no proposal was considered acceptable to Pluto \(the)S
0 83 M(Responder\).  So negotiation ceased.  Pluto logs the reason it rejects)S
0 72.2 M(each Transform.  So look back in the log to see what is going wrong.)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Pluto: ... OAKLEY_DES_CBC is not supported.)S
474.768 0 M(65)S
GR
SP
%%Page: 66 95
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(rsasigkey dumps core)S
11 FS/F4 SF 0 657 M(A comment on this error from Henry:)S
9 FS/F0 SF 0 632.6 M(On Fri, 29 Jun 2001, Rodrigo Gruppelli wrote:)S
0 621.8 M(> ...Well, it seem that there's)S
0 611 M(> another problem with it. When I try to generate a pair of RSA keys,)S
0 600.2 M(> rsasigkey cores dump...)S
0 578.6 M(*That* is a neon sign flashing "GMP LIBRARY IS BROKEN".  Rsasigkey calls)S
0 567.8 M(GMP a lot, and our own library a little bit, and that's very nearly all it)S
0 557 M(does.  Barring bugs in its code or our library -- which have happened, but)S
0 546.2 M(not very often -- a problem in rsasigkey is a problem in GMP.)S
11 FS/F4 SF 0 520.2 M(See the next question for how to deal with GMP errors.)S
14 FS/F9 SF 0 490.8 M(!Pluto failure!: ... exited with ... signal 4)S
11 FS/F4 SF 0 463.8 M(Pluto has died. Signal 4 is SIGILL, illegal instruction.)S
0 437.4 M(The most likely cause is that your GMP \(GNU multi-precision\) library is compiled for a different processor)S
0 424.2 M(than what you are running on. Pluto uses that library for its public key calculations.)S
0 397.8 M(Try getting the GMP sources and recompile for your processor type. Most Linux distributions will include this)S
0 384.6 M(source, or you can download it from the GMP home page.)S
14 FS/F9 SF 0 355.2 M(ECONNREFUSED error message)S
11 FS/F4 SF 0 328.2 M(From John Denker, on the mailing list:)S
9 FS/F0 SF 0 303.8 M(1\)  The log message)S
0 293 M(  some IKE message we sent has been rejected with )S
0 282.2 M(  ECONNREFUSED \(kernel supplied no details\))S
0 271.4 M(is much more suitable than the previous version.  Thanks.)S
0 249.8 M(2\) Minor suggestion for further improvement: it might be worth mentioning)S
0 239 M(that the command)S
0 228.2 M(  tcpdump -i eth1 icmp[0] != 8 and icmp[0] != 0)S
0 217.4 M(is useful for tracking down the details in question.  We shouldn't expect)S
0 206.6 M(all IPsec users to figure that out on their own.  The log message might)S
0 195.8 M(even provide a hint as to where to look in the docs.)S
11 FS/F4 SF 0 169.8 M(Reply From Pluto developer Hugh Redelmeier)S
9 FS/F0 SF 0 145.4 M(Good idea.)S
0 123.8 M(I've added a bit pluto\(8\)'s BUGS section along these lines.)S
0 113 M(I didn't have the heart to lengthen this message.)S
14 FS/F9 SF 0 84 M(klips_debug: ... no eroute!)S
11 FS/F4 SF 0 57 M(This message means KLIPS has received a packet for which no IPsec tunnel has been defined.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(rsasigkey dumps core)S
474.768 0 M(66)S
GR
SP
%%Page: 67 96
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(Here is a more detailed duscussion from the team's tech support person Claudia Schmeing, responding to a)S
0 673.8 M(query on the mailing list:)S
9 FS/F0 SF 0 649.4 M(> Why ipsec reports no eroute! ???? IP Masq... is disabled.)S
0 627.8 M(In general, more information is required so that people on the list may)S
0 617 M(give you informed input. See doc/prob.report.)S
11 FS/F4 SF 0 591 M(The document she refers to has since been replaced by a section of the troubleshooting document.)S
9 FS/F0 SF 0 566.6 M(However, I can make some general comments on this type of error.)S
0 545 M(This error usually looks something like this \(clipped from an archived)S
0 534.2 M(message\):)S
0 512.6 M(> ttl:64 proto:1 chk:45459 saddr:192.168.1.2 daddr:192.168.100.1)S
0 501.8 M(> ... klips_debug:ipsec_findroute: 192.168.1.2->192.168.100.1)S
0 491 M(> ... klips_debug:rj_match: * See if we match exactly as a host destination)S
0 480.2 M(> ... klips_debug:rj_match: ** try to match a leaf, t=0xc1a260b0)S
0 469.4 M(> ... klips_debug:rj_match: *** start searching up the tree, t=0xc1a260b0)S
0 458.6 M(> ... klips_debug:rj_match: **** t=0xc1a260c8)S
0 447.8 M(> ... klips_debug:rj_match: **** t=0xc1fe5960)S
0 437 M(> ... klips_debug:rj_match: ***** not found.)S
0 426.2 M(> ... klips_debug:ipsec_tunnel_start_xmit: Original head/tailroom: 2, 28)S
0 415.4 M(> ... klips_debug:ipsec_tunnel_start_xmit: no eroute!: ts=47.3030, dropping.)S
0 383 M(What does this mean?)S
0 372.2 M(- --------------------)S
0 350.6 M("eroute" stands for "extended route", and is a special type of route )S
0 339.8 M(internal to Linux FreeS/WAN. For more information about this type of route, )S
0 329 M(see the section of man ipsec_auto on ipsec auto --route.)S
0 307.4 M("no eroute!" here means, roughly, that Linux FreeS/WAN cannot find an )S
0 296.6 M(appropriate tunnel that should have delivered this packet. Linux )S
0 285.8 M(FreeS/WAN therefore drops the packet, with the message "no eroute! ...)S
0 275 M(dropping", on the assumption that this packet is not a legitimate )S
0 264.2 M(transmission through a properly constructed tunnel.)S
0 231.8 M(How does this situation come about?)S
0 221 M(- -----------------------------------)S
0 199.4 M(Linux FreeS/WAN has a number of connection descriptions defined in )S
0 188.6 M(ipsec.conf. These must be successfully brought "up" to form actual tunnels.)S
0 177.8 M(\(see doc/setup.html's step 15, man ipsec.conf and man ipsec_auto )S
0 167 M(for details\).)S
0 145.4 M(Such connections are often specific to the endpoints' IPs. However, in )S
0 134.6 M(some cases they may be more general, for example in the case of )S
0 123.8 M(Road Warriors where left or right is the special value %any.)S
0 102.2 M(When Linux FreeS/WAN receives a packet, it verifies that the packet has)S
0 91.4 M(come through a legitimate channel, by checking that there is an)S
0 80.6 M(appropriate tunnel through which this packet might legitimately have)S
0 69.8 M(arrived. This is the process we see above.)S
0 48.2 M(First, it checks for an eroute that exactly matches the packet. In the )S
0 37.4 M(example above, we see it checking for a route that begins at 192.168.1.2)S
0 26.6 M(and ends at 192.168.100.1. This search favours the most specific match that)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(rsasigkey dumps core)S
474.768 0 M(67)S
GR
SP
%%Page: 68 97
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(would apply to the route between these IPs. So, if there is a connection )S
0 678.2 M(description exactly matching these IPs, the search will end there. If not, )S
0 667.4 M(the code will search for a more general description matching the IPs.)S
0 656.6 M(If there is no match, either specific or general, the packet will be)S
0 645.8 M(dropped, as we see, above.)S
0 624.2 M(Unless you are working with Road Warriors, only the first, specific part )S
0 613.4 M(of the matching process is likely to be relevant to you.)S
0 581 M("But I defined the tunnel, and it came up, why do I have this error?")S
0 570.2 M(- ---------------------------------------------------------------------)S
0 548.6 M(One of the most common causes of this error is failure to specify enough)S
0 537.8 M(connection descriptions to cover all needed tunnels between any two )S
0 527 M(gateways and their respective subnets. As you have noticed, troubleshooting)S
0 516.2 M(this error may be complicated by the use of IP Masq. However, this error is)S
0 505.4 M(not limited to cases where IP Masq is used. )S
0 483.8 M(See doc/configuration.html#multitunnel for a detailed example of the )S
0 473 M(solution to this type of problem.)S
11 FS/F4 SF 0 447 M(The documentation section she refers to is now here.)S
14 FS/F9 SF 0 417.6 M(... trouble writing to /dev/ipsec ... SA already in use)S
11 FS/F4 SF 0 390.6 M(This error message occurs when two manual connections are set up with the same SPI value.)S
0 364.2 M(See the FAQ for One manual connection works, but second one fails.)S
14 FS/F9 SF 0 334.8 M(... ignoring ... payload)S
11 FS/F4 SF 0 307.8 M(This message is harmless. The IKE protocol provides for a number of optional messages types:)S
36 281.4 M(delete SA)S
/Fc SF 28.19 281.4 M(\267 )S
/F4 SF 36 268.2 M(initial contact)S
/Fc SF 28.19 268.2 M(\267 )S
/F4 SF 36 255 M(vendor ID)S
/Fc SF 28.19 255 M(\267 )S
/F4 SF 36 241.8 M(...)S
/Fc SF 28.19 241.8 M(\267 )S
/F4 SF 0 215.4 M(An implementation is never required to send these, but they are allowed to. The receiver is not required to do)S
0 202.2 M(anything with them. FreeS/WAN ignores them, but notifies you via the logs.)S
0 175.8 M(For the "ignoring delete SA Payload" message, see also our discussion of cleaning up dead tunnels.)S
14 FS/F9 SF 0 146.4 M(unknown parameter name "rightcert")S
11 FS/F4 SF 0 119.4 M(This message can appear when you've upgraded an X.509-enabled Linux FreeS/WAN with a vanilla Linux)S
0 106.2 M(FreeS/WAN. To use your X.509 configs you will need to overwrite the new install with Super FreeS/WAN, or)S
0 93 M(add the X.509 patch by hand.)S
17 FS/F9 SF 0 60.6 M(Why don't you restrict the mailing lists to reduce spam?)S
11 FS/F4 SF 0 33 M(As a matter of policy, some of our mailing lists need to be open to non-subscribers. Project management feel)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(... trouble writing to /dev/ipsec ... SA already in use)S
474.768 0 M(68)S
GR
SP
%%Page: 69 98
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(strongly that maintaining this openness is more important than blocking spam.)S
36 660.6 M(Users should be able to get help or report bugs without subscribing.)S
/Fc SF 28.19 660.6 M(\267 )S
/F4 SF 36 647.4 M(Even a user who is subscribed may not have access to his or her subscribed account when he or she)S
36 634.2 M(needs help, miles from home base in the middle of setting up a client's gateway.)S
/Fc SF 28.19 647.4 M(\267 )S
/F4 SF 36 621 M(There is arguably a legal requirement for this policy. A US resident or citizen could be charged under)S
36 607.8 M(munitions export laws for providing technical assistance to a foreign cryptographic project. Such a)S
36 594.6 M(charge would be more easily defended if the discussion takes place in public, on an open list.)S
/Fc SF 28.19 621 M(\267 )S
/F4 SF 0 568.2 M(This has been discussed several times at some length on the list. See the list archives. Bringing the topic up)S
0 555 M(again is unlikely to be useful. Please don't. Or at the very least, please don't without reading the archives and)S
0 541.8 M(being certain that whatever you are about to suggest has not yet been discussed.)S
0 515.4 M(Project technical lead Henry Spencer summarised one discussion:)S
36 489 M(For the third and last time: this list *will* *not* do address-based filtering. This is a policy)S
36 475.8 M(decision, not an implementation problem. The decision is final, and is not open to discussion.)S
36 462.6 M(This needs to be communicated better to people, and steps are being taken to do that.)S
0 436.2 M(Adding this FAQ section is one of the steps he refers to.)S
0 409.8 M(You have various options other than just putting up with the spam, filtering it yourself, or unsubscribing:)S
36 383.4 M(subscribe only to one or both of our lists with restricted posting rules:)S
72 370.2 M(briefs, weekly list summaries)S
/Fc SF 60.967 370.2 M(\250 )S
/F4 SF 72 357 M(announce, project-related announcements)S
/Fc SF 60.967 357 M(\250 )S
28.19 383.4 M(\267 )S
/F4 SF 36 343.8 M(read the other lists via the archives)S
/Fc SF 28.19 343.8 M(\267 )S
/F4 SF 0 317.4 M(A number of tools are available to filter mail.)S
36 291 M(Many mail readers include some filtering capability.)S
/Fc SF 28.19 291 M(\267 )S
/F4 SF 36 277.8 M(Many Linux distributions include procmail\(8\) for server-side filtering.)S
/Fc SF 28.19 277.8 M(\267 )S
/F4 SF 36 264.6 M(The Spam Bouncer is a set of procmail\(8\) filters designed to combat spam.)S
/Fc SF 28.19 264.6 M(\267 )S
/F4 SF 36 251.4 M(Roaring Penguin have a MIME defanger that removes potentially dangerous attachments.)S
/Fc SF 28.19 251.4 M(\267 )S
/F4 SF 0 225 M(If you use your ISP's mail server rather than running your own, consider suggesting to the ISP that they tag)S
0 211.8 M(suspected spam as this ISP does. They could just refuse mail from dubious sources, but that is tricky and runs)S
0 198.6 M(some risk of losing valuable mail or senselessly annoying senders and their admins. However, they can safely)S
0 185.4 M(tag and deliver dubious mail. The tags can greatly assist your filtering.)S
0 159 M(For information on tracking down spammers, see these HowTos, or the Sputum site. Sputum have a Linux)S
0 145.8 M(anti-spam screensaver available for download.)S
0 119.4 M(Here is a more detailed message from Henry:)S
9 FS/F0 SF 0 95 M(On Mon, 15 Jan 2001, Jay Vaughan wrote:)S
0 84.2 M(> I know I'm flogging a dead horse here, but I'm curious as to the reasons for)S
0 73.4 M(> an aversion for a subscriber-only mailing list?)S
0 51.8 M(Once again:  for legal reasons, it is important that discussions of these)S
0 41 M(things be held in a public place -- the list -- and we do not want to)S
0 30.2 M(force people to subscribe to the list just to ask one question, because)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(... trouble writing to /dev/ipsec ... SA already in use)S
474.768 0 M(69)S
GR
SP
%%Page: 70 99
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(that may be more than merely inconvenient for them.  There are also real)S
0 678.2 M(difficulties with people who are temporarily forced to use alternate)S
0 667.4 M(addresses; that is precisely the time when they may be most in need of)S
0 656.6 M(help, yet a subscribers-only policy shuts them out.)S
0 635 M(These issues do not apply to most mailing lists, but for a list that is)S
0 624.2 M(\(necessarily\) the primary user support route for a crypto package, they)S
0 613.4 M(are very important.  This is *not* an ordinary mailing list; it has to)S
0 602.6 M(function under awkward constraints that make various simplistic solutions)S
0 591.8 M(inapplicable or undesirable. )S
0 570.2 M(> We're *ALL* sick of hearing about list management problems, not just you)S
0 559.4 M(> old-timers, so why don't you DO SOMETHING EFFECTIVE ABOUT IT...)S
0 537.8 M(Because it's a lot harder than it looks, and many existing "solutions")S
0 527 M(have problems when examined closely.)S
0 505.4 M(> A suggestion for you, based on 10 years of experience with management of my)S
0 494.6 M(> own mailing lists would be to use mailman, which includes pretty much every)S
0 483.8 M(> feature under the sun that you guys need and want, plus some.  The URL for)S
0 473 M(> mailman...)S
0 451.4 M(I assure you, we're aware of mailman.  Along with a whole bunch of others,)S
0 440.6 M(including some you almost certainly have never heard of \(I hadn't!\).)S
0 419 M(> As for the argument that the list shouldn't be configured to enforce)S
0 408.2 M(> subscription - I contend that it *SHOULD* AT LEAST require manual address)S
0 397.4 M(> verification in order for posts to be redirected.)S
0 375.8 M(You do realize, I hope, that interposing such a manual step might cause)S
0 365 M(your government to decide that this is not truly a public forum, and thus)S
0 354.2 M(you could go to jail if you don't get approval from them before mailing to)S
0 343.4 M(it?  If you think this sounds irrational, your government is noted for)S
0 332.6 M(making irrational decisions in this area; we can't assume that they will)S
0 321.8 M(suddenly start being sensible.  See above about awkward constraints.  You)S
0 311 M(may be willing to take the risk, but we can't, in good conscience, insist)S
0 300.2 M(that all users with problems do so. )S
0 278.6 M(                                                          Henry Spencer)S
0 267.8 M(                                                       henry@spsystems.net)S
11 FS/F4 SF 0 241.8 M(and a message on the topic from project leader John Gilmore:)S
9 FS/F0 SF 0 217.4 M(Subject: Re: The linux-ipsec list's topic)S
0 206.6 M(   Date: Sat, 30 Dec 2000)S
0 195.8 M(   From: John Gilmore <gnu@toad.com>)S
0 174.2 M(I'll post this single message, once only, in this discussion, and then)S
0 163.4 M(not burden the list with any further off-topic messages.  I encourage)S
0 152.6 M(everyone on the list to restrain themself from posting ANY off-topic)S
0 141.8 M(messages to the linux-ipsec list.)S
0 120.2 M(The topic of the linux-ipsec mailing list is the FreeS/WAN software.)S
0 98.6 M(I frequently see "discussions about spam on a list" overwhelm the)S
0 87.8 M(volume of "actual spam" on a list. BOTH kinds of messages are)S
0 77 M(off-topic messages.  Twenty anti-spam messages take just as long to)S
0 66.2 M(detect and discard as twenty spam messages.)S
0 44.6 M(The Linux-ipsec list encourages on-topic messages from people who have)S
0 33.8 M(not joined the list itself.  We will not censor messages to the list)S
0 23 M(based on where they originate, or what return address they contain.)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(... trouble writing to /dev/ipsec ... SA already in use)S
474.768 0 M(70)S
GR
SP
%%Page: 71 100
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(In other words, non-subscribers ARE allowed to post, and this will not)S
0 678.2 M(change.  My own valid contributions have been rejected out-of-hand by)S
0 667.4 M(too many other mailing lists for me to want to impose that censorship)S
0 656.6 M(on anybody else's contributions.  And every day I see the damage that)S
0 645.8 M(anti-spam zeal is causing in many other ways; that zeal is far more)S
0 635 M(damaging to the culture of the Internet than the nuisance of spam.)S
0 613.4 M(In general, it is the responsibility of recipients to filter,)S
0 602.6 M(prioritize, or otherwise manage the handling of email that comes to)S
0 591.8 M(them.  It is not the responsibility of the rest of the Internet)S
0 581 M(community to refrain from sending messages to recipients that they)S
0 570.2 M(might not want to see.  If your software infrastructure for managing)S
0 559.4 M(your incoming email is insufficient, then improve it.  If you think)S
0 548.6 M(the signal-to-noise ratio on linux-ipsec is too poor, then please)S
0 537.8 M(unsubscribe.  But don't further increase the noise by posting to the)S
0 527 M(linux-ipsec list about those topics.)S
0 505.4 M(        John Gilmore)S
0 494.6 M(        founder & sponsor, FreeS/WAN project)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(... trouble writing to /dev/ipsec ... SA already in use)S
474.768 0 M(71)S
GR
SP
%%Page: 72 101
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(FreeS/WAN manual pages)S
11 FS/F4 SF 0 649.8 M(The various components of Linux FreeS/WAN are of course documented in standard Unix manual pages,)S
0 636.6 M(accessible via the man\(1\) command.)S
0 610.2 M(Links here take you to an HTML version of the man pages.)S
17 FS/F9 SF 0 577.8 M(Files)S
11 FS/F6 SF 0 550.2 M(ipsec.conf\(5\))S
/F4 SF 36 537 M(IPsec configuration and connections)S
/F6 SF 0 523.8 M(ipsec.secrets\(5\))S
/F4 SF 36 510.6 M(secrets for IKE authentication, either pre-shared keys or RSA private keys)S
0 484.2 M(These files are also discussed in the configuration section.)S
17 FS/F9 SF 0 451.8 M(Commands)S
11 FS/F4 SF 0 424.2 M(Many users will never give most of the FreeS/WAN commands directly. Configure the files listed above)S
0 411 M(correctly and everything should be automatic.)S
0 384.6 M(The exceptions are commands for mainpulating the RSA keys used in Pluto authentication:)S
/F6 SF 0 358.2 M(ipsec_rsasigkey\(8\))S
/F4 SF 36 345 M(generate keys)S
/F6 SF 0 331.8 M(ipsec_newhostkey\(8\))S
/F4 SF 36 318.6 M(generate keys in a convenient format)S
/F6 SF 0 305.4 M(ipsec_showhostkey\(8\))S
/F4 SF 36 292.2 M(extract RSA keys from ipsec.secrets\(5\) \(or optionally, another file\) and format them for insertion in)S
36 279 M(ipsec.conf\(5\) or in DNS records)S
0 252.6 M(Note that:)S
36 226.2 M(These keys are for)S
/F7 SF ( authentication only)S
/F4 SF (. They are)S
/F7 SF ( not secure for encryption)S
/F4 SF (.)S
/Fc SF 28.19 226.2 M(\267 )S
/F4 SF 36 213 M(The utility uses random\(4\) as a source of random numbers. This may block for some time if there is)S
36 199.8 M(not enough activity on the machine to provide the required entropy. You may want to give it some)S
36 186.6 M(bogus activity such as random mouse movements or some command such as )S
/F0 SF (du /usr >)S
36 173.4 M(/dev/null &)S
/F4 SF (.)S
/Fc SF 28.19 213 M(\267 )S
/F4 SF 0 147 M(The following commands are fairly likely to be used, if only for testing and status checks:)S
/F6 SF 0 120.6 M(ipsec\(8\))S
/F4 SF 36 107.4 M(invoke IPsec utilities)S
/F6 SF 0 94.2 M(ipsec_setup\(8\))S
/F4 SF 36 81 M(control IPsec subsystem)S
/F6 SF 0 67.8 M(ipsec_auto\(8\))S
/F4 SF 36 54.6 M(control automatically-keyed IPsec connections)S
/F6 SF 0 41.4 M(ipsec_manual\(8\))S
/F4 SF 36 28.2 M(take manually-keyed IPsec connections up and down)S
/F8 SF 0 0 M(FreeS/WAN manual pages)S
474.768 0 M(72)S
GR
SP
%%Page: 73 102
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F6 SF 0 687 M(ipsec_ranbits\(8\))S
/F4 SF 36 673.8 M(generate random bits in ASCII form)S
/F6 SF 0 660.6 M(ipsec_look\(8\))S
/F4 SF 36 647.4 M(show minimal debugging information)S
/F6 SF 0 634.2 M(ipsec_barf\(8\))S
/F4 SF 36 621 M(spew out collected IPsec debugging information)S
0 594.6 M(The lower-level utilities listed below are normally invoked via scripts listed above, but they can also be used)S
0 581.4 M(directly when required.)S
/F6 SF 0 555 M(ipsec_eroute\(8\))S
/F4 SF 36 541.8 M(manipulate IPsec extended routing tables)S
/F6 SF 0 528.6 M(ipsec_klipsdebug\(8\))S
/F4 SF 36 515.4 M(set Klips \(kernel IPsec support\) debug features and level)S
/F6 SF 0 502.2 M(ipsec_pluto\(8\))S
/F4 SF 36 489 M(IPsec IKE keying daemon)S
/F6 SF 0 475.8 M(ipsec_spi\(8\))S
/F4 SF 36 462.6 M(manage IPsec Security Associations)S
/F6 SF 0 449.4 M(ipsec_spigrp\(8\))S
/F4 SF 36 436.2 M(group/ungroup IPsec Security Associations)S
/F6 SF 0 423 M(ipsec_tncfg\(8\))S
/F4 SF 36 409.8 M(associate IPsec virtual interface with real interface)S
/F6 SF 0 396.6 M(ipsec_whack\(8\))S
/F4 SF 36 383.4 M(control interface for IPsec keying daemon)S
17 FS/F9 SF 0 351 M(Library routines)S
11 FS/F6 SF 0 323.4 M(ipsec_atoaddr\(3\))S
0 310.2 M(ipsec_addrtoa\(3\))S
/F4 SF 36 297 M(convert Internet addresses to and from ASCII)S
/F6 SF 0 283.8 M(ipsec_atosubnet\(3\))S
0 270.6 M(ipsec_subnettoa\(3\))S
/F4 SF 36 257.4 M(convert subnet/mask ASCII form to and from addresses)S
/F6 SF 0 244.2 M(ipsec_atoasr\(3\))S
/F4 SF 36 231 M(convert ASCII to Internet address, subnet, or range)S
/F6 SF 0 217.8 M(ipsec_rangetoa\(3\))S
/F4 SF 36 204.6 M(convert Internet address range to ASCII)S
/F6 SF 0 191.4 M(ipsec_atodata\(3\))S
0 178.2 M(ipsec_datatoa\(3\))S
/F4 SF 36 165 M(convert binary data from and to ASCII formats)S
/F6 SF 0 151.8 M(ipsec_atosa\(3\))S
0 138.6 M(ipsec_satoa\(3\))S
/F4 SF 36 125.4 M(convert IPsec Security Association IDs to and from ASCII)S
/F6 SF 0 112.2 M(ipsec_atoul\(3\))S
0 99 M(ipsec_ultoa\(3\))S
/F4 SF 36 85.8 M(convert unsigned-long numbers to and from ASCII)S
/F6 SF 0 72.6 M(ipsec_goodmask\(3\))S
/F4 SF 36 59.4 M(is this Internet subnet mask a valid one?)S
/F6 SF 0 46.2 M(ipsec_masktobits\(3\))S
/F4 SF 36 33 M(convert Internet subnet mask to bit count)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Library routines)S
474.768 0 M(73)S
GR
SP
%%Page: 74 103
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F6 SF 0 687 M(ipsec_bitstomask\(3\))S
/F4 SF 36 673.8 M(convert bit count to Internet subnet mask)S
/F6 SF 0 660.6 M(ipsec_optionsfrom\(3\))S
/F4 SF 36 647.4 M(read additional ``command-line'' options from file)S
/F6 SF 0 634.2 M(ipsec_subnetof\(3\))S
/F4 SF 36 621 M(given Internet address and subnet mask, return subnet number)S
/F6 SF 0 607.8 M(ipsec_hostof\(3\))S
/F4 SF 36 594.6 M(given Internet address and subnet mask, return host part)S
/F6 SF 0 581.4 M(ipsec_broadcastof\(3\))S
/F4 SF 36 568.2 M(given Internet address and subnet mask, return broadcast address)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Library routines)S
474.768 0 M(74)S
GR
SP
%%Page: 75 104
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(FreeS/WAN and firewalls)S
11 FS/F4 SF 0 649.8 M(FreeS/WAN, or other IPsec implementations, frequently run on gateway machines, the same machines)S
0 636.6 M(running firewall or packet filtering code. This document discusses the relation between the two.)S
0 610.2 M(The firewall code in 2.4 and later kernels is called Netfilter. The user-space utility to manage a firewall is)S
0 597 M(iptables\(8\). See the netfilter/iptables web site for details.)S
17 FS/F9 SF 0 564.6 M(Filtering rules for IPsec packets)S
11 FS/F4 SF 0 537 M(The basic constraint is that)S
/F7 SF ( an IPsec gateway must have packet filters that allow IPsec packets)S
/F4 SF (, at least when)S
0 523.8 M(talking to other IPsec gateways:)S
36 497.4 M(UDP port 500 for IKE negotiations)S
/Fc SF 28.19 497.4 M(\267 )S
/F4 SF 36 484.2 M(protocol 50 if you use ESP encryption and/or authentication \(the typical case\))S
/Fc SF 28.19 484.2 M(\267 )S
/F4 SF 36 471 M(protocol 51 if you use AH packet-level authentication)S
/Fc SF 28.19 471 M(\267 )S
/F4 SF 0 444.6 M(Your gateway and the other IPsec gateways it communicates with must be able to exchange these packets for)S
0 431.4 M(IPsec to work. Firewall rules must allow UDP 500 and at least one of AH or ESP on the interface that)S
0 418.2 M(communicates with the other gateway.)S
0 391.8 M(For nearly all FreeS/WAN applications, you must allow UDP port 500 and the ESP protocol.)S
0 365.4 M(There are two ways to set this up:)S
/F6 SF 0 339 M(easier but less flexible)S
/F4 SF 36 325.8 M(Just set up your firewall scripts at boot time to allow IPsec packets to and from your gateway. Let)S
36 312.6 M(FreeS/WAN reject any bogus packets.)S
/F6 SF 0 299.4 M(more work, giving you more precise control)S
/F4 SF 36 286.2 M(Have the ipsec_pluto\(8\) daemon call scripts to adjust firewall rules dynamically as required. This is)S
36 273 M(done by naming the scripts in the ipsec.conf\(5\) variables)S
/Fa SF ( prepluto=)S
/F4 SF (,)S
/Fa SF ( postpluto=)S
/F4 SF (,)S
/Fa SF ( leftupdown=)S
/F4 SF ( and)S
/Fa SF 36 259.8 M(rightupdown=)S
/F4 SF (.)S
0 233.4 M(Both methods are described in more detail below.)S
17 FS/F9 SF 0 201 M(Firewall configuration at boot)S
11 FS/F4 SF 0 173.4 M(It is possible to set up both firewalling and IPsec with appropriate scripts at boot and then not use)S
/Fa SF 0 160.2 M(leftupdown=)S
/F4 SF ( and)S
/Fa SF ( rightupdown=)S
/F4 SF (, or use them only for simple up and down operations.)S
0 133.8 M(Basically, the technique is)S
36 107.4 M(allow IPsec packets \(typically, IKE on UDP port 500 plus ESP, protocol 50\))S
72 94.2 M(incoming, if the destination address is your gateway \(and optionally, only from known)S
72 81 M(senders\))S
/Fc SF 60.967 94.2 M(\250 )S
/F4 SF 72 67.8 M(outgoing, with the from address of your gateway \(and optionally, only to known receivers\))S
/Fc SF 60.967 67.8 M(\250 )S
28.19 107.4 M(\267 )S
/F4 SF 36 54.6 M(let Pluto deal with IKE)S
/Fc SF 28.19 54.6 M(\267 )S
/F4 SF 36 41.4 M(let KLIPS deal with ESP)S
/Fc SF 28.19 41.4 M(\267 )S
/F8 SF 0 0 M(FreeS/WAN and firewalls)S
474.768 0 M(75)S
GR
SP
%%Page: 76 105
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(Since Pluto authenticates its partners during the negotiation, and KLIPS drops packets for which no tunnel has)S
0 673.8 M(been negotiated, this may be all you need.)S
14 FS/F9 SF 0 644.4 M(A simple set of rules)S
11 FS/F4 SF 0 617.4 M(In simple cases, you need only a few rules, as in this example:)S
9 FS/F0 SF 0 593 M(# allow IPsec)S
0 582.2 M(#)S
0 571.4 M(# IKE negotiations)S
0 560.6 M(iptables -I INPUT  -p udp --sport 500 --dport 500 -j ACCEPT)S
0 549.8 M(iptables -I OUTPUT -p udp --sport 500 --dport 500 -j ACCEPT)S
0 539 M(# ESP encryption and authentication)S
0 528.2 M(iptables -I INPUT  -p 50 -j ACCEPT)S
0 517.4 M(iptables -I OUTPUT -p 50 -j ACCEPT)S
11 FS/F4 SF 0 491.4 M(This should be all you need to allow IPsec through)S
/Fa SF ( lokkit)S
/F4 SF (, which ships with Red Hat 9, on its medium security)S
0 478.2 M(setting. Once you've tweaked to your satisfaction, save your active rule set with:)S
9 FS/F0 SF 0 453.8 M(service iptables save)S
14 FS/F9 SF 0 424.8 M(Other rules)S
11 FS/F4 SF 0 397.8 M(You can add additional rules, or modify existing ones, to work with IPsec and with your network and policies.)S
0 384.6 M(We give a some examples in this section.)S
0 358.2 M(However, while it is certainly possible to create an elaborate set of rules yourself \(please let us know via the)S
0 345 M(mailing list if you do\), it may be both easier and more secure to use a set which has already been published)S
0 331.8 M(and tested.)S
0 305.4 M(The published rule sets we know of are described in the next section.)S
/F9 SF 0 279 M(Adding additional rules)S
/F4 SF 0 252.6 M(If necessary, you can add additional rules to:)S
/F6 SF 0 226.2 M(reject IPsec packets that are not to or from known gateways)S
/F4 SF 36 213 M(This possibility is discussed in more detail later)S
/F6 SF 0 199.8 M(allow systems behind your gateway to build IPsec tunnels that pass through the gateway)S
/F4 SF 36 186.6 M(This possibility is discussed in more detail later)S
/F6 SF 0 173.4 M(filter incoming packets emerging from KLIPS.)S
/F4 SF 36 160.2 M(Firewall rules can recognise packets emerging from IPsec. They are marked as arriving on an)S
36 147 M(interface such as)S
/Fa SF ( ipsec0)S
/F4 SF (, rather than)S
/Fa SF ( eth0)S
/F4 SF (,)S
/Fa SF ( ppp0)S
/F4 SF ( or whatever.)S
0 120.6 M(It is therefore reasonably straightforward to filter these packets in whatever way suits your situation.)S
/F9 SF 0 94.2 M(Modifying existing rules)S
/F4 SF 0 67.8 M(In some cases rules that work fine before you add IPsec may require modification to work with IPsec.)S
0 41.4 M(This is especially likely for rules that deal with interfaces on the Internet side of your system. IPsec adds a)S
0 28.2 M(new interface; often the rules must change to take account of that.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(A simple set of rules)S
474.768 0 M(76)S
GR
SP
%%Page: 77 106
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(For example, consider the rules given in this section of the Netfilter documentation:)S
9 FS/F0 SF 0 662.6 M(Most people just have a single PPP connection to the Internet, and don't)S
0 651.8 M(want anyone coming back into their network, or the firewall:)S
0 630.2 M(    ## Insert connection-tracking modules \(not needed if built into kernel\).)S
0 619.4 M(    # insmod ip_conntrack)S
0 608.6 M(    # insmod ip_conntrack_ftp)S
0 587 M(    ## Create chain which blocks new connections, except if coming from inside.)S
0 576.2 M(    # iptables -N block)S
0 565.4 M(    # iptables -A block -m state --state ESTABLISHED,RELATED -j ACCEPT)S
0 554.6 M(    # iptables -A block -m state --state NEW -i ! ppp0 -j ACCEPT)S
0 543.8 M(    # iptables -A block -j DROP)S
0 522.2 M(    ## Jump to that chain from INPUT and FORWARD chains.)S
0 511.4 M(    # iptables -A INPUT -j block)S
0 500.6 M(    # iptables -A FORWARD -j block)S
11 FS/F4 SF 0 474.6 M(On an IPsec gateway, those rules may need to be modified. The above allows new connections from)S
/F6 SF ( anywhere)S
0 461.4 M(except ppp0)S
/F4 SF (. That means new connections from ipsec0 are allowed.)S
0 435 M(Do you want to allow anyone who can establish an IPsec connection to your gateway to initiate TCP)S
0 421.8 M(connections to any service on your network? Almost certainly not if you are using opportunistic encryption.)S
0 408.6 M(Quite possibly not even if you have only explicitly configured connections.)S
0 382.2 M(To disallow incoming connections from ipsec0, change the middle section above to:)S
9 FS/F0 SF 0 357.8 M(    ## Create chain which blocks new connections, except if coming from inside.)S
0 347 M(    # iptables -N block)S
0 336.2 M(    # iptables -A block -m state --state ESTABLISHED,RELATED -j ACCEPT)S
0 325.4 M(    # iptables -A block -m state --state NEW -i ppp+ -j DROP)S
0 314.6 M(    # iptables -A block -m state --state NEW -i ipsec+ -j DROP)S
0 303.8 M(    # iptables -A block -m state --state NEW -i -j ACCEPT)S
0 293 M(    # iptables -A block -j DROP)S
11 FS/F4 SF 0 267 M(The original rules accepted NEW connections from anywhere except ppp0. This version drops NEW)S
0 253.8 M(connections from any PPP interface \(ppp+\) and from any ipsec interface \(ipsec+\), then accepts the survivors.)S
0 227.4 M(Of course, these are only examples. You will need to adapt them to your own situation.)S
14 FS/F9 SF 0 198 M(Published rule sets)S
11 FS/F4 SF 0 171 M(Several sets of firewall rules that work with FreeS/WAN are available.)S
/F9 SF 0 144.6 M(Scripts based on Ranch's work)S
/F4 SF 0 118.2 M(One user, Rob Hutton, posted his boot time scripts to the mailing list, and we included them in previous)S
0 105 M(versions of this documentation. They are still available from our web site. However, they were for an earlier)S
0 91.8 M(FreeS/WAN version so we no longer recommend them. Also, they had some bugs. See this message.)S
0 65.4 M(Those scripts were based on David Ranch's scripts for his "Trinity OS" for setting up a secure Linux. Check)S
0 52.2 M(his home page for the latest version and for information on his book on securing Linux. If you are going to)S
0 39 M(base your firewalling on Ranch's scripts, we recommend using his latest version, and sending him any IPsec)S
0 25.8 M(modifications you make for incorporation into later versions.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Published rule sets)S
474.768 0 M(77)S
GR
SP
%%Page: 78 107
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F9 SF 0 687 M(The Seattle firewall)S
/F4 SF 0 660.6 M(We have had several mailing lists reports of good results using FreeS/WAN with Seawall \(the Seattle)S
0 647.4 M(Firewall\). See that project's home page on Sourceforge.)S
/F9 SF 0 621 M(The RCF scripts)S
/F4 SF 0 594.6 M(Another set of firewall scripts with IPsec support are the RCF or rc.firewall scripts. See their home page.)S
/F9 SF 0 568.2 M(Asgard scripts)S
/F4 SF 0 541.8 M(Asgard's Realm has set of firewall scripts with FreeS/WAN support, for 2.4 kernels and iptables.)S
/F9 SF 0 515.4 M(User scripts from the mailing list)S
/F4 SF 0 489 M(One user gave considerable detail on his scripts, including supporting IPX through the tunnel. His message)S
0 475.8 M(was too long to conveniently be quoted here, so I've put it in a separate file.)S
17 FS/F9 SF 0 443.4 M(Calling firewall scripts, named in ipsec.conf\(5\))S
11 FS/F4 SF 0 415.8 M(The ipsec.conf\(5\) configuration file has three pairs of parameters used to specify an interface between)S
0 402.6 M(FreeS/WAN and firewalling code.)S
0 376.2 M(Note that using these is not required if you have a static firewall setup. In that case, you just set your firewall)S
0 363 M(up at boot time \(in a way that permits the IPsec connections you want\) and do not change it thereafter. Omit)S
0 349.8 M(all the FreeS/WAN firewall parameters and FreeS/WAN will not attempt to adjust firewall rules at all. See)S
0 336.6 M(above for some information on appropriate scripts.)S
0 310.2 M(However, if you want your firewall rules to change when IPsec connections change, then you need to use)S
0 297 M(these parameters.)S
14 FS/F9 SF 0 267.6 M(Scripts called at IPsec start and stop)S
11 FS/F4 SF 0 240.6 M(One pair of parmeters are set in the)S
/Fa SF ( config setup)S
/F4 SF ( section of the ipsec.conf\(5\) file and affect all connections:)S
/F6 SF 0 214.2 M(prepluto=)S
/F4 SF 36 201 M(script to be called before pluto\(8\) IKE daemon is started.)S
/F6 SF 0 187.8 M(postpluto=)S
/F4 SF 36 174.6 M(script to be called after pluto\(8\) IKE daemon is stopped.)S
0 148.2 M(These parameters allow you to change firewall parameters whenever IPsec is started or stopped.)S
0 121.8 M(They can also be used in other ways. For example, you might have)S
/Fa SF ( prepluto)S
/F4 SF ( add a module to your kernel for)S
0 108.6 M(the secure network interface or make a dialup connection, and then have)S
/Fa SF ( postpluto)S
/F4 SF ( remove the module or take)S
0 95.4 M(the connection down.)S
14 FS/F9 SF 0 66 M(Scripts called at connection up and down)S
11 FS/F4 SF 0 39 M(The other parameters are set in connection descriptions. They can be set in individual connection descriptions,)S
0 25.8 M(and could even call different scripts for each connection for maximum flexibility. In most applications,)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Published rule sets)S
474.768 0 M(78)S
GR
SP
%%Page: 79 108
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(however, it makes sense to use only one script and to call it from)S
/Fa SF ( conn %default)S
/F4 SF ( section so that it applies to)S
0 673.8 M(all connections.)S
0 647.4 M(You can:)S
/F7 SF 0 621 M(either)S
/F4 SF 36 607.8 M(set)S
/Fa SF ( leftfirewall=yes)S
/F4 SF ( or)S
/Fa SF ( rightfirewall=yes)S
/F4 SF ( to use our supplied default script)S
/F7 SF 0 594.6 M(or)S
/F4 SF 36 581.4 M(assign a name in a)S
/Fa SF ( leftupdown=)S
/F4 SF ( or)S
/Fa SF ( rightupdown=)S
/F4 SF ( line to use your own script)S
0 555 M(Note that)S
/F7 SF ( only one of these should be used)S
/F4 SF (. You cannot sensibly use both. Since)S
/F7 SF ( our default script is obsolete)S
/F4 SF 0 541.8 M(\(designed for firewalls using)S
/Fa SF ( ipfwadm\(8\))S
/F4 SF ( on 2.0 kernels\), most users who need this service will)S
/F7 SF ( need to write)S
0 528.6 M(a custom script)S
/F4 SF (.)S
/F9 SF 0 502.2 M(The default script)S
/F4 SF 0 475.8 M(We supply a default script named)S
/Fa SF ( _updown)S
/F4 SF (.)S
/F6 SF 0 449.4 M(leftfirewall=)S
0 436.2 M(rightfirewall=)S
/F4 SF 36 423 M(indicates that the gateway is doing firewalling and that pluto\(8\) should poke holes in the firewall as)S
36 409.8 M(required.)S
0 383.4 M(Set these to)S
/Fa SF ( yes)S
/F4 SF ( and Pluto will call our default script)S
/Fa SF ( _updown)S
/F4 SF ( with appropriate arguments whenever it:)S
36 357 M(starts or stops IPsec services)S
/Fc SF 28.19 357 M(\267 )S
/F4 SF 36 343.8 M(brings a connection up or down)S
/Fc SF 28.19 343.8 M(\267 )S
/F4 SF 0 317.4 M(The supplied default)S
/Fa SF ( _updown)S
/F4 SF ( script is appropriate for simple cases using the)S
/Fa SF ( ipfwadm\(8\))S
/F4 SF ( firewalling)S
0 304.2 M(package.)S
/F9 SF 0 277.8 M(User-written scripts)S
/F4 SF 0 251.4 M(You can also write your own script and have Pluto call it. Just put the script's name in one of these)S
0 238.2 M(ipsec.conf\(5\) lines:)S
/F6 SF 0 211.8 M(leftupdown=)S
0 198.6 M(rightupdown=)S
/F4 SF 36 185.4 M(specifies a script to call instead of our default script)S
/Fa SF ( _updown)S
/F4 SF (.)S
0 159 M(Your script should take the same arguments and use the same environment variables as)S
/Fa SF ( _updown)S
/F4 SF (. See the)S
0 145.8 M("updown command" section of the ipsec_pluto\(8\) man page for details.)S
0 119.4 M(Note that)S
/F7 SF ( you should not modify our _updown script in place)S
/F4 SF (. If you did that, then upgraded FreeS/WAN, the)S
0 106.2 M(upgrade would install a new default script, overwriting your changes.)S
14 FS/F9 SF 0 76.8 M(Scripts for ipchains or iptables)S
11 FS/F4 SF 0 49.8 M(Our)S
/Fa SF ( _updown)S
/F4 SF ( is for firewalls using)S
/Fa SF ( ipfwadm\(8\))S
/F4 SF (, the firewall code for the 2.0 series of Linux kernels. If you)S
0 36.6 M(are using the more recent packages)S
/Fa SF ( ipchains\(8\))S
/F4 SF ( \(for 2.2 kernels\) or)S
/Fa SF ( iptables\(8\))S
/F4 SF ( \(2.4 kernels\), then you must)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Scripts called at connection up and down)S
474.768 0 M(79)S
GR
SP
%%Page: 80 109
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(do one of:)S
36 660.6 M(use static firewall rules which are set up at boot time as described above and do not need to be)S
36 647.4 M(changed by Pluto)S
/Fc SF 28.19 660.6 M(\267 )S
/F4 SF 36 634.2 M(limit yourself to ipchains\(8\)'s ipfwadm\(8\) emulation mode in order to use our script)S
/Fc SF 28.19 634.2 M(\267 )S
/F4 SF 36 621 M(write your own script and call it with)S
/Fa SF ( leftupdown)S
/F4 SF ( and)S
/Fa SF ( rightupdown)S
/F4 SF (.)S
/Fc SF 28.19 621 M(\267 )S
/F4 SF 0 594.6 M(You can write a script to do whatever you need with firewalling. Specify its name in a)S
/Fa SF ( [left|right]updown=)S
/F4 SF 0 581.4 M(parameter in ipsec.conf\(5\) and Pluto will automatically call it for you.)S
0 555 M(The arguments Pluto passes such a script are the same ones it passes to our default _updown script, so the best)S
0 541.8 M(way to build yours is to copy ours and modify the copy.)S
0 515.4 M(Note, however, that)S
/F7 SF ( you should not modify our _updown script in place)S
/F4 SF (. If you did that, then upgraded)S
0 502.2 M(FreeS/WAN, the upgrade would install a new default script, overwriting your changes.)S
17 FS/F9 SF 0 469.8 M(A complication: IPsec vs. NAT)S
11 FS/F4 SF 0 442.2 M(Network Address Translation, also known as IP masquerading, is a method of allocating IP addresses)S
0 429 M(dynamically, typically in circumstances where the total number of machines which need to access the Internet)S
0 415.8 M(exceeds the supply of IP addresses.)S
0 389.4 M(Any attempt to perform NAT operations on IPsec packets)S
/F6 SF ( between the IPsec gateways)S
/F4 SF ( creates a basic conflict:)S
36 363 M(IPsec wants to authenticate packets and ensure they are unaltered on a gateway-to-gateway basis)S
/Fc SF 28.19 363 M(\267 )S
/F4 SF 36 349.8 M(NAT rewrites packet headers as they go by)S
/Fc SF 28.19 349.8 M(\267 )S
/F4 SF 36 336.6 M(IPsec authentication fails if packets are rewritten anywhere between the IPsec gateways)S
/Fc SF 28.19 336.6 M(\267 )S
/F4 SF 0 310.2 M(For AH, which authenticates parts of the packet header including source and destination IP addresses, this is)S
0 297 M(fatal. If NAT changes those fields, AH authentication fails.)S
0 270.6 M(For IKE and ESP it is not necessarily fatal, but is certainly an unwelcome complication.)S
14 FS/F9 SF 0 241.2 M(NAT on or behind the IPsec gateway works)S
11 FS/F4 SF 0 214.2 M(This problem can be avoided by having the masquerading take place)S
/F6 SF ( on or behind)S
/F4 SF ( the IPsec gateway.)S
0 187.8 M(This can be done physically with two machines, one physically behind the other. A picture, using SG to)S
0 174.6 M(indicate IPsec)S
/F7 SF ( S)S
/F4 SF (ecurity)S
/F7 SF ( G)S
/F4 SF (ateways, is:)S
9 FS/F0 SF 0 150.2 M(      clients --- NAT ----- SG ---------- SG)S
0 139.4 M(                  two machines)S
11 FS/F4 SF 0 113.4 M(In this configuration, the actual client addresses need not be given in the)S
/Fa SF ( leftsubnet=)S
/F4 SF ( parameter of the)S
0 100.2 M(FreeS/WAN connection description. The security gateway just delivers packets to the NAT box; it needs only)S
0 87 M(that machine's address. What that machine does with them does not affect FreeS/WAN.)S
0 60.6 M(A more common setup has one machine performing both functions:)S
9 FS/F0 SF 0 36.2 M(      clients ----- NAT/SG ---------------SG)S
0 25.4 M(                  one machine)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(A complication: IPsec vs. NAT)S
474.768 0 M(80)S
GR
SP
%%Page: 81 110
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(Here you have a choice of techniques depending on whether you want to make your client subnet visible to)S
0 673.8 M(clients on the other end:)S
36 647.4 M(If you want the single gateway to behave like the two shown above, with your clients hidden behind)S
36 634.2 M(the NAT, then omit the)S
/Fa SF ( leftsubnet=)S
/F4 SF ( parameter. It then defaults to the gateway address. Clients on the)S
36 621 M(other end then talk via the tunnel only to your gateway. The gateway takes packets emerging from the)S
36 607.8 M(tunnel, applies normal masquerading, and forwards them to clients.)S
/Fc SF 28.19 647.4 M(\267 )S
/F4 SF 36 594.6 M(If you want to make your client machines visible, then give the client subnet addresses as the)S
/Fa SF 36 581.4 M(leftsubnet=)S
/F4 SF ( parameter in the connection description and)S
/F6 SF 36 568.2 M(either)S
/F4 SF 72 555 M(set)S
/Fa SF ( leftfirewall=yes)S
/F4 SF ( to use the default)S
/Fa SF ( updown)S
/F4 SF ( script)S
/F6 SF 36 541.8 M(or)S
/F4 SF 72 528.6 M(use your own script by giving its name in a)S
/Fa SF ( leftupdown=)S
/F4 SF ( parameter)S
36 515.4 M(These scripts are described in their own section.)S
36 489 M(In this case, no masquerading is done. Packets to or from the client subnet are encrypted or decrypted)S
36 475.8 M(without any change to their client subnet addresses, although of course the encapsulating packets use)S
36 462.6 M(gateway addresses in their headers. Clients behind the right security gateway see a route via that)S
36 449.4 M(gateway to the left subnet.)S
/Fc SF 28.19 594.6 M(\267 )S
14 FS/F9 SF 0 420 M(NAT between gateways is problematic)S
11 FS/F4 SF 0 393 M(We recommend not trying to build IPsec connections which pass through a NAT machine. This setup poses)S
0 379.8 M(problems:)S
9 FS/F0 SF 0 355.4 M(      clients --- SG --- NAT ---------- SG)S
11 FS/F4 SF 0 329.4 M(If you must try it, some references are:)S
36 303 M(Jean_Francois Nadeau's document on doing IPsec behind NAT)S
/Fc SF 28.19 303 M(\267 )S
/F4 SF 36 289.8 M(VPN masquerade patches to make a Linux NAT box handle IPsec packets correctly)S
/Fc SF 28.19 289.8 M(\267 )S
14 FS/F9 SF 0 260.4 M(Other references on NAT and IPsec)S
11 FS/F4 SF 0 233.4 M(Other documents which may be relevant include:)S
36 207 M(an Internet Draft on IPsec and NAT which may eventually evolve into a standard solution for this)S
36 193.8 M(problem.)S
/Fc SF 28.19 207 M(\267 )S
/F4 SF 36 180.6 M(an informational RFC,)S
/F6 SF ( Security Model with Tunnel-mode IPsec for NAT Domains)S
/F4 SF (.)S
/Fc SF 28.19 180.6 M(\267 )S
/F4 SF 36 167.4 M(an article in Cisco's)S
/F6 SF ( Internet Protocol Journal)S
/Fc SF 28.19 167.4 M(\267 )S
17 FS/F9 SF 0 135 M(Other complications)S
11 FS/F4 SF 0 107.4 M(Of course simply allowing UDP 500 and ESP packets is not the whole story. Various other issues arise in)S
0 94.2 M(making IPsec and packet filters co-exist and even co-operate. Some of them are summarised below.)S
14 FS/F9 SF 0 64.8 M(IPsec)S
/Fb SF ( through)S
/F9 SF ( the gateway)S
11 FS/F4 SF 0 37.8 M(Basic IPsec packet filtering rules deal only with packets addressed to or sent from your IPsec gateway.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(NAT between gateways is problematic)S
474.768 0 M(81)S
GR
SP
%%Page: 82 111
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(It is a separate policy decision whether to permit such packets to pass through the gateway so that client)S
0 673.8 M(machines can build end-to-end IPsec tunnels of their own. This may not be practical if you are using NAT)S
0 660.6 M(\(IP masquerade\) on your gateway, and may conflict with some corporate security policies.)S
0 634.2 M(Where possible, allowing this is almost certainly a good idea. Using IPsec on an end-to-end basis is more)S
0 621 M(secure than gateway-to-gateway.)S
0 594.6 M(Doing it is quite simple. You just need firewall rules that allow UDP port 500 and protocols 50 and 51 to pass)S
0 581.4 M(through your gateway. If you wish, you can of course restrict this to certain hosts.)S
14 FS/F9 SF 0 552 M(Preventing non-IPsec traffic)S
11 FS/F4 SF 0 525 M(You can also filter)S
/F6 SF ( everything but)S
/F4 SF ( UDP port 500 and ESP or AH to restrict traffic to IPsec only, either for)S
0 511.8 M(anyone communicating with your host or just for specific partners.)S
0 485.4 M(One application of this is for the telecommuter who might have:)S
9 FS/F0 SF 0 461 M(     Sunset==========West------------------East ================= firewall --- the Internet)S
0 450.2 M(         home network      untrusted net        corporate network)S
11 FS/F4 SF 0 424.2 M(The subnet on the right is 0.0.0.0/0, the whole Internet. The West gateway is set up so that it allows only IPsec)S
0 411 M(packets to East in or out.)S
0 384.6 M(This configuration is used in AT&T Research's network. For details, see the papers links in our introduction.)S
0 358.2 M(Another application would be to set up firewall rules so that an internal machine, such as an employees-only)S
0 345 M(web server, could not talk to the outside world except via specific IPsec tunnels.)S
14 FS/F9 SF 0 315.6 M(Filtering packets from unknown gateways)S
11 FS/F4 SF 0 288.6 M(It is possible to use firewall rules to restrict UDP 500, ESP and AH packets so that these packets are accepted)S
0 275.4 M(only from known gateways. This is not strictly necessary since FreeS/WAN will discard packets from)S
0 262.2 M(unknown gateways. You might, however, want to do it for any of a number of reasons. For example:)S
36 235.8 M(Arguably, "belt and suspenders" is the sensible approach to security. If you can block a potential)S
36 222.6 M(attack in two ways, use both. The only question is whether to look for a third way after implementing)S
36 209.4 M(the first two.)S
/Fc SF 28.19 235.8 M(\267 )S
/F4 SF 36 196.2 M(Some admins may prefer to use the firewall code this way because they prefer firewall logging to)S
36 183 M(FreeS/WAN's logging.)S
/Fc SF 28.19 196.2 M(\267 )S
/F4 SF 36 169.8 M(You may need it to implement your security policy. Consider an employee working at home, and a)S
36 156.6 M(policy that says traffic from the home system to the Internet at large must go first via IPsec to the)S
36 143.4 M(corporate LAN and then out to the Internet via the corporate firewall. One way to do that is to make)S
/Fa SF 36 130.2 M(ipsec0)S
/F4 SF ( the default route on the home gateway and provide exceptions only for UDP 500 and ESP to)S
36 117 M(the corporate gateway. Everything else is then routed via the tunnel to the corporate gateway.)S
/Fc SF 28.19 169.8 M(\267 )S
/F4 SF 0 90.6 M(It is not possible to use only static firewall rules for this filtering if you do not know the other gateways' IP)S
0 77.4 M(addresses in advance, for example if you have "road warriors" who may connect from a different address each)S
0 64.2 M(time or if want to do opportunistic encryption to arbitrary gateways. In these cases, you can accept UDP 500)S
0 51 M(IKE packets from anywhere, then use the updown script feature of pluto\(8\) to dynamically adjust firewalling)S
0 37.8 M(for each negotiated tunnel.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Preventing non-IPsec traffic)S
474.768 0 M(82)S
GR
SP
%%Page: 83 112
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(Firewall packet filtering does not much reduce the risk of a denial of service attack on FreeS/WAN. The)S
0 673.8 M(firewall can drop packets from unknown gateways, but KLIPS does that quite efficiently anyway, so you gain)S
0 660.6 M(little. The firewall cannot drop otherwise legitmate packets that fail KLIPS authentication, so it cannot protect)S
0 647.4 M(against an attack designed to exhaust resources by making FreeS/WAN perform many expensive)S
0 634.2 M(authentication operations.)S
0 607.8 M(In summary, firewall filtering of IPsec packets from unknown gateways is possible but not strictly necessary.)S
17 FS/F9 SF 0 575.4 M(Other packet filters)S
11 FS/F4 SF 0 547.8 M(When the IPsec gateway is also acting as your firewall, other packet filtering rules will be in play. In general,)S
0 534.6 M(those are outside the scope of this document. See our Linux firewall links for information. There are a few)S
0 521.4 M(types of packet, however, which can affect the operation of FreeS/WAN or of diagnostic tools commonly used)S
0 508.2 M(with it. These are discussed below.)S
14 FS/F9 SF 0 478.8 M(ICMP filtering)S
11 FS/F4 SF 0 451.8 M(ICMP is the)S
/F7 SF ( I)S
/F4 SF (nternet)S
/F7 SF ( C)S
/F4 SF (ontrol)S
/F7 SF ( M)S
/F4 SF (essage)S
/F7 SF ( P)S
/F4 SF (rotocol. It is used for messages between IP implementations)S
0 438.6 M(themselves, whereas IP used is used between the clients of those implementations. ICMP is, unsurprisingly,)S
0 425.4 M(used for control messages. For example, it is used to notify a sender that a desination is not reachable, or to)S
0 412.2 M(tell a router to reroute certain packets elsewhere.)S
0 385.8 M(ICMP handling is tricky for firewalls.)S
36 359.4 M(You definitely want some ICMP messages to get through; things won't work without them. For)S
36 346.2 M(example, your clients need to know if some destination they ask for is unreachable.)S
/Fc SF 28.19 359.4 M(\267 )S
/F4 SF 36 333 M(On the other hand, you do equally definitely do not want untrusted folk sending arbitrary control)S
36 319.8 M(messages to your machines. Imagine what someone moderately clever and moderately malicious)S
36 306.6 M(could do to you, given control of your network's routing.)S
/Fc SF 28.19 333 M(\267 )S
/F4 SF 0 280.2 M(ICMP does not use ports. Messages are distinguished by a "message type" field and, for some types, by an)S
0 267 M(additional "code" field. The definitive list of types and codes is on the IANA site.)S
0 240.6 M(One expert uses this definition for ICMP message types to be dropped at the firewall.)S
9 FS/F0 SF 0 216.2 M(# ICMP types which lack socially redeeming value.)S
0 205.4 M(#  5     Redirect)S
0 194.6 M(#  9     Router Advertisement)S
0 183.8 M(# 10     Router Selection)S
0 173 M(# 15     Information Request)S
0 162.2 M(# 16     Information Reply)S
0 151.4 M(# 17     Address Mask Request)S
0 140.6 M(# 18     Address Mask Reply)S
0 119 M(badicmp='5 9 10 15 16 17 18')S
11 FS/F4 SF 0 93 M(A more conservative approach would be to make a list of allowed types and drop everything else.)S
0 66.6 M(Whichever way you do it, your ICMP filtering rules on a FreeS/WAN gateway should allow at least the)S
0 53.4 M(following ICMP packet types:)S
/F6 SF 0 27 M(echo \(type 8\))S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Other packet filters)S
474.768 0 M(83)S
GR
SP
%%Page: 84 113
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F6 SF 0 687 M(echo reply \(type 0\))S
/F4 SF 36 673.8 M(These are used by ping\(1\). We recommend allowing both types through the tunnel and to or from)S
36 660.6 M(your gateway's external interface, since ping\(1\) is an essential testing tool.)S
36 634.2 M(It is fairly common for firewalls to drop ICMP echo packets addressed to machines behind the)S
36 621 M(firewall. If that is your policy, please create an exception for such packets arriving via an IPsec tunnel,)S
36 607.8 M(at least during intial testing of those tunnels.)S
/F6 SF 0 594.6 M(destination unreachable \(type 3\))S
/F4 SF 36 581.4 M(This is used, with code 4 \(Fragmentation Needed and Don't Fragment was Set\) in the code field, to)S
36 568.2 M(control path MTU discovery. Since IPsec processing adds headers, enlarges packets and may cause)S
36 555 M(fragmentation, an IPsec gateway should be able to send and receive these ICMP messages)S
/F7 SF ( on both)S
36 541.8 M(inside and outside interfaces)S
/F4 SF (.)S
14 FS/F9 SF 0 512.4 M(UDP packets for traceroute)S
11 FS/F4 SF 0 485.4 M(The traceroute\(1\) utility uses UDP port numbers from 33434 to approximately 33633. Generally, these should)S
0 472.2 M(be allowed through for troubleshooting.)S
0 445.8 M(Some firewalls drop these packets to prevent outsiders exploring the protected network with traceroute\(1\). If)S
0 432.6 M(that is your policy, consider creating an exception for such packets arriving via an IPsec tunnel, at least during)S
0 419.4 M(intial testing of those tunnels.)S
14 FS/F9 SF 0 390 M(UDP for L2TP)S
11 FS/F4 SF 0 363 M(Windows 2000 does, and products designed for compatibility with it may, build L2TP tunnels over IPsec)S
0 349.8 M(connections.)S
0 323.4 M(For this to work, you must allow UDP protocol 1701 packets coming out of your tunnels to continue to their)S
0 310.2 M(destination. You can, and probably should, block such packets to or from your external interfaces, but allow)S
0 297 M(them from)S
/Fa SF ( ipsec0)S
/F4 SF (.)S
0 270.6 M(See also our Windows 2000 interoperation discussion.)S
17 FS/F9 SF 0 238.2 M(How it all works: IPsec packet details)S
11 FS/F4 SF 0 210.6 M(IPsec uses three main types of packet:)S
/F6 SF 0 184.2 M(IKE uses)S
/F7 SF ( the UDP protocol and port 500)S
/F6 SF (.)S
/F4 SF 36 171 M(Unless you are using only \(less secure, not recommended\) manual keying, you need IKE to negotiate)S
36 157.8 M(connection parameters, acceptable algorithms, key sizes and key setup. IKE handles everything)S
36 144.6 M(required to set up, rekey, repair or tear down IPsec connections.)S
/F6 SF 0 131.4 M(ESP is)S
/F7 SF ( protocol number 50)S
/F4 SF 36 118.2 M(This is required for encrypted connections.)S
/F6 SF 0 105 M(AH is)S
/F7 SF ( protocol number 51)S
/F4 SF 36 91.8 M(This can be used where only authentication, not encryption, is required.)S
0 65.4 M(All of those packets should have appropriate IPsec gateway addresses in both the to and from IP header fields.)S
0 52.2 M(Firewall rules can check this if you wish, though it is not strictly necessary. This is discussed in more detail)S
0 39 M(later.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(UDP packets for traceroute)S
474.768 0 M(84)S
GR
SP
%%Page: 85 114
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(IPsec processing of incoming packets authenticates them then removes the ESP or AH header and decrypts if)S
0 673.8 M(necessary. Successful processing exposes an inner packet which is then delivered back to the firewall)S
0 660.6 M(machinery, marked as having arrived on an)S
/Fa SF ( ipsec[0-3])S
/F4 SF ( interface. Firewall rules can use that interface label to)S
0 647.4 M(distinguish these packets from unencrypted packets which are labelled with the physical interface they arrived)S
0 634.2 M(on \(or perhaps with a non-IPsec virtual interface such as)S
/Fa SF ( ppp0)S
/F4 SF (\).)S
0 607.8 M(One of our users sent a mailing list message with a diagram of the packet flow.)S
14 FS/F9 SF 0 578.4 M(ESP and AH do not have ports)S
11 FS/F4 SF 0 551.4 M(Some protocols, such as TCP and UDP, have the notion of ports. Others protocols, including ESP and AH, do)S
0 538.2 M(not. Quite a few IPsec newcomers have become confused on this point. There are no ports)S
/F6 SF ( in)S
/F4 SF ( the ESP or AH)S
0 525 M(protocols, and no ports used)S
/F6 SF ( for)S
/F4 SF ( them. For these protocols,)S
/F6 SF ( the idea of ports is completely irrelevant)S
/F4 SF (.)S
14 FS/F9 SF 0 495.6 M(Header layout)S
11 FS/F4 SF 0 468.6 M(The protocol numbers for ESP or AH are used in the 'next header' field of the IP header. On most non-IPsec)S
0 455.4 M(packets, that field would have one of:)S
36 429 M(1 for ICMP)S
/Fc SF 28.19 429 M(\267 )S
/F4 SF 36 415.8 M(4 for IP-in-IP encapsulation)S
/Fc SF 28.19 415.8 M(\267 )S
/F4 SF 36 402.6 M(6 for TCP)S
/Fc SF 28.19 402.6 M(\267 )S
/F4 SF 36 389.4 M(17 for UDP)S
/Fc SF 28.19 389.4 M(\267 )S
/F4 SF 36 376.2 M(... or one of about 100 other possibilities listed by IANA)S
/Fc SF 28.19 376.2 M(\267 )S
/F4 SF 0 349.8 M(Each header in the sequence tells what the next header will be. IPsec adds headers for ESP or AH near the)S
0 336.6 M(beginning of the sequence. The original headers are kept and the 'next header' fields adjusted so that all)S
0 323.4 M(headers can be correctly interpreted.)S
0 297 M(For example, using)S
/F7 SF ( [ ])S
/F4 SF ( to indicate data protected by ESP and unintelligible to an eavesdropper between the)S
0 283.8 M(gateways:)S
36 257.4 M(a simple packet might have only IP and TCP headers with:)S
72 244.2 M(IP header says next header --> TCP)S
/Fc SF 60.967 244.2 M(\250 )S
/F4 SF 72 231 M(TCP header port number --> which process to send data to)S
/Fc SF 60.967 231 M(\250 )S
/F4 SF 72 217.8 M(data)S
/Fc SF 60.967 217.8 M(\250 )S
28.19 257.4 M(\267 )S
/F4 SF 36 204.6 M(with ESP transport mode encapsulation, that packet would have:)S
72 191.4 M(IP header says next header --> ESP)S
/Fc SF 60.967 191.4 M(\250 )S
/F4 SF 72 178.2 M(ESP header)S
/F7 SF ( [)S
/F4 SF ( says next --> TCP)S
/Fc SF 60.967 178.2 M(\250 )S
/F4 SF 72 165 M(TCP header port number --> which process to send data to)S
/Fc SF 60.967 165 M(\250 )S
/F4 SF 72 151.8 M(data)S
/F7 SF ( ])S
/Fc SF 60.967 151.8 M(\250 )S
/F4 SF 36 138.6 M(Note that the IP header is outside ESP protection, visible to an attacker, and that the final destination)S
36 125.4 M(must be the gateway.)S
/Fc SF 28.19 204.6 M(\267 )S
/F4 SF 36 112.2 M(with ESP in tunnel mode, we might have:)S
72 99 M(IP header says next header --> ESP)S
/Fc SF 60.967 99 M(\250 )S
/F4 SF 72 85.8 M(ESP header)S
/F7 SF ( [)S
/F4 SF ( says next --> IP)S
/Fc SF 60.967 85.8 M(\250 )S
/F4 SF 72 72.6 M(IP header says next header --> TCP)S
/Fc SF 60.967 72.6 M(\250 )S
/F4 SF 72 59.4 M(TCP header port number --> which process to send data to)S
/Fc SF 60.967 59.4 M(\250 )S
/F4 SF 72 46.2 M(data)S
/F7 SF ( ])S
/Fc SF 60.967 46.2 M(\250 )S
28.19 112.2 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(ESP and AH do not have ports)S
474.768 0 M(85)S
GR
SP
%%Page: 86 115
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(Here the inner IP header is protected by ESP, unreadable by an attacker. Also, the inner header can)S
36 673.8 M(have a different IP address than the outer IP header, so the decrypted packet can be routed from the)S
36 660.6 M(IPsec gateway to a final destination which may be another machine.)S
0 634.2 M(Part of the ESP header itself is encrypted, which is why the)S
/F7 SF ( [)S
/F4 SF ( indicating protected data appears in the middle)S
0 621 M(of some lines above. The next header field of the ESP header is protected. This makes traffic analysis more)S
0 607.8 M(difficult. The next header field would tell an eavesdropper whether your packet was UDP to the gateway, TCP)S
0 594.6 M(to the gateway, or encapsulated IP. It is better not to give this information away. A clever attacker may deduce)S
0 581.4 M(some of it from the pattern of packet sizes and timings, but we need not make it easy.)S
0 555 M(IPsec allows various combinations of these to match local policies, including combinations that use both AH)S
0 541.8 M(and ESP headers or that nest multiple copies of these headers.)S
0 515.4 M(For example, suppose my employer has an IPsec VPN running between two offices so all packets travelling)S
0 502.2 M(between the gateways for those offices are encrypted. If gateway policies allow it \(The admins could block)S
0 489 M(UDP 500 and protocols 50 and 51 to disallow it\), I can build an IPsec tunnel from my desktop to a machine in)S
0 475.8 M(some remote office. Those packets will have one ESP header throughout their life, for my end-to-end tunnel.)S
0 462.6 M(For part of the route, however, they will also have another ESP layer for the corporate VPN's encapsulation.)S
0 449.4 M(The whole header scheme for a packet on the Internet might be:)S
36 423 M(IP header \(with gateway address\) says next header --> ESP)S
/Fc SF 28.19 423 M(\267 )S
/F4 SF 36 409.8 M(ESP header)S
/F7 SF ( [)S
/F4 SF ( says next --> IP)S
/Fc SF 28.19 409.8 M(\267 )S
/F4 SF 36 396.6 M(IP header \(with receiving machine address\) says next header --> ESP)S
/Fc SF 28.19 396.6 M(\267 )S
/F4 SF 36 383.4 M(ESP header)S
/F7 SF ( [)S
/F4 SF ( says next --> TCP)S
/Fc SF 28.19 383.4 M(\267 )S
/F4 SF 36 370.2 M(TCP header port number --> which process to send data to)S
/Fc SF 28.19 370.2 M(\267 )S
/F4 SF 36 357 M(data)S
/F7 SF ( ]])S
/Fc SF 28.19 357 M(\267 )S
/F4 SF 0 330.6 M(The first ESP \(outermost\) header is for the corporate VPN. The inner ESP header is for the secure)S
0 317.4 M(machine-to-machine link.)S
14 FS/F9 SF 0 288 M(DHR on the updown script)S
11 FS/F4 SF 0 261 M(Here are some mailing list comments from pluto\(8\) developer Hugh Redelmeier on an earlier draft of this)S
0 247.8 M(document:)S
9 FS/F0 SF 0 223.4 M(There are many important things left out)S
0 201.8 M(- firewalling is important but must reflect \(implement\) policy.  Since)S
0 191 M(  policy isn't the same for all our customers, and we're not experts,)S
0 180.2 M(  we should concentrate on FW and MASQ interactions with FreeS/WAN.)S
0 158.6 M(- we need a diagram to show packet flow WITHIN ONE MACHINE, assuming)S
0 147.8 M(  IKE, IPsec, FW, and MASQ are all done on that machine.  The flow is)S
0 137 M(  obvious if the components are run on different machines \(trace the)S
0 126.2 M(  cables\).)S
0 104.6 M(  IKE input:)S
0 93.8 M(        + packet appears on public IF, as UDP port 500)S
0 83 M(        + input firewalling rules are applied \(may discard\))S
0 72.2 M(        + Pluto sees the packet.)S
0 50.6 M(  IKE output:)S
0 39.8 M(        + Pluto generates the packet & writes to public IF, UDP port 500)S
0 29 M(        + output firewalling rules are applied \(may discard\))S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(DHR on the updown script)S
474.768 0 M(86)S
GR
SP
%%Page: 87 116
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(        + packet sent out public IF)S
0 667.4 M(  IPsec input, with encapsulated packet, outer destination of this host:)S
0 656.6 M(        + packet appears on public IF, protocol 50 or 51.  If this)S
0 645.8 M(          packet is the result of decapsulation, it will appear)S
0 635 M(          instead on the paired ipsec IF.)S
0 624.2 M(        + input firewalling rules are applied \(but packet is opaque\))S
0 613.4 M(        + KLIPS decapsulates it, writes result to paired ipsec IF)S
0 602.6 M(        + input firewalling rules are applied to resulting packet)S
0 591.8 M(          as input on ipsec IF)S
0 581 M(        + if the destination of the packet is this machine, the)S
0 570.2 M(          packet is passed on to the appropriate protocol handler.)S
0 559.4 M(          If the original packet was encapsulated more than once)S
0 548.6 M(          and the new outer destination is this machine, that)S
0 537.8 M(          handler will be KLIPS.)S
0 527 M(        + otherwise:)S
0 516.2 M(          * routing is done for the resulting packet.  This may well)S
0 505.4 M(            direct it into KLIPS for encoding or encrypting.  What)S
0 494.6 M(            happens then is described elsewhere.)S
0 483.8 M(          * forwarding firewalling rules are applied)S
0 473 M(          * output firewalling rules are applied)S
0 462.2 M(          * the packet is sent where routing specified)S
0 440.6 M( IPsec input, with encapsulated packet, outer destination of another host:)S
0 429.8 M(        + packet appears on some IF, protocol 50 or 51)S
0 419 M(        + input firewalling rules are applied \(but packet is opaque\))S
0 408.2 M(        + routing selects where to send the packet)S
0 397.4 M(        + forwarding firewalling rules are applied \(but packet is opaque\))S
0 386.6 M(        + packet forwarded, still encapsulated)S
0 365 M(  IPsec output, from this host or from a client:)S
0 354.2 M(        + if from a client, input firewalling rules are applied as the)S
0 343.4 M(          packet arrives on the private IF)S
0 332.6 M(        + routing directs the packet to an ipsec IF \(this is how the)S
0 321.8 M(          system decides KLIPS processing is required\))S
0 311 M(        + if from a client, forwarding firewalling rules are applied)S
0 300.2 M(        + KLIPS eroute mechanism matches the source and destination)S
0 289.4 M(          to registered eroutes, yielding a SPI group.  This dictates)S
0 278.6 M(          processing, and where the resulting packet is to be sent)S
0 267.8 M(          \(the destinations SG and the nexthop\).)S
0 257 M(        + output firewalling is not applied to the resulting)S
0 246.2 M(          encapsulated packet)S
0 224.6 M(- Until quite recently, KLIPS would double encapsulate packets that)S
0 213.8 M(  didn't strictly need to be.  Firewalling should be prepared for)S
0 203 M(  those packets showing up as ESP and AH protocol input packets on)S
0 192.2 M(  an ipsec IF.)S
0 170.6 M(- MASQ processing seems to be done as if it were part of the)S
0 159.8 M(  forwarding firewall processing \(this should be verified\).)S
0 138.2 M(- If a firewall is being used, it is likely the case that it needs to)S
0 127.4 M(  be adjusted whenever IPsec SAs are added or removed.  Pluto invokes)S
0 116.6 M(  a script to do this \(and to adjust routing\) at suitable times.  The)S
0 105.8 M(  default script is only suitable for ipfwadm-managed firewalls.  Under)S
0 95 M(  LINUX 2.2.x kernels, ipchains can be managed by ipfwadm \(emulation\),)S
0 84.2 M(  but ipchains more powerful if manipulated using the ipchains command.)S
0 73.4 M(  In this case, a custom updown script must be used.)S
0 51.8 M(  We think that the flexibility of ipchains precludes us supplying an)S
0 41 M(  updown script that would be widely appropriate.)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(DHR on the updown script)S
474.768 0 M(87)S
GR
SP
%%Page: 88 117
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(Linux FreeS/WAN Troubleshooting Guide)S
17 FS/F9 SF 0 643.8 M(Overview)S
11 FS/F4 SF 0 616.2 M(This document covers several general places where you might have a problem:)S
36 589.8 M(During install.)S
25 589.8 M(1. )S
36 576.6 M(During the negotiation process.)S
25 576.6 M(2. )S
36 563.4 M(Using an established connection.)S
25 563.4 M(3. )S
0 537 M(This document also contains notes which expand on points made in these sections, and tips for problem)S
0 523.8 M(reporting. If the other end of your connection is not FreeS/WAN, you'll also want to read our interoperation)S
0 510.6 M(document.)S
17 FS/F9 SF 0 478.2 M(1. During Install)S
14 FS/F9 SF 0 447.6 M(1.1 RPM install gotchas)S
11 FS/F4 SF 0 420.6 M(With the RPM method:)S
36 394.2 M(Be sure you have installed both the userland tools and the kernel components. One will not work)S
36 381 M(without the other. For example, when using FreeS/WAN-produced RPMs for our 2.03 release, you)S
36 367.8 M(need both:)S
9 FS/F0 SF 36 343.4 M(    freeswan-userland-2.03_2.4.20_20.9-0.i386.rpm)S
36 332.6 M(    freeswan-module-2.03_2.4.20_20.9-0.i386.rpm)S
11 FS/Fc SF 28.19 394.2 M(\267 )S
14 FS/F9 SF 0 303.6 M(1.2 Problems installing from source)S
11 FS/F4 SF 0 276.6 M(When installing from source, you may find these problems:)S
36 250.2 M(Missing library. See this FAQ.)S
/Fc SF 28.19 250.2 M(\267 )S
/F4 SF 36 237 M(Missing utilities required for compile. See this checklist.)S
/Fc SF 28.19 237 M(\267 )S
/F4 SF 36 223.8 M(Kernel version incompatibility. See this FAQ.)S
/Fc SF 28.19 223.8 M(\267 )S
/F4 SF 36 210.6 M(Another compile problem. Find information in the out.* files, ie. out.kpatch, out.kbuild, created at)S
36 197.4 M(compile time in the top-level Linux FreeS/WAN directory. Error messages generated by KLIPS)S
36 184.2 M(during the boot sequence are accessible with the)S
/Fa SF ( dmesg)S
/F4 SF ( command.)S
36 171 M(Check the list archives and the List in Brief to see if this is a known issue. If it is not, report it to the)S
36 157.8 M(bugs list as described in our problem reporting section. In some cases, you may be asked to provide)S
36 144.6 M(debugging information using gdb; details below.)S
/Fc SF 28.19 210.6 M(\267 )S
/F4 SF 36 131.4 M(If your kernel compiles but you fail to install your new FreeS/WAN-enabled kernel, review the)S
36 118.2 M(sections on installing the patched kernel, and testing to see if install succeeded.)S
/Fc SF 28.19 131.4 M(\267 )S
14 FS/F9 SF 0 88.8 M(1.3 Install checks)S
11 FS/Fa SF 0 61.8 M(ipsec verify)S
/F4 SF ( checks a number of FreeS/WAN essentials. Here are some hints on what do to when your system)S
0 48.6 M(doesn't check out:)S
/F8 SF 0 0 M(Linux FreeS/WAN Troubleshooting Guide)S
474.768 0 M(88)S
GR
SP
%%Page: 89 118
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
0 698 M 130.5 0.7 F
0 681.935 M 0.7 16.8 F
129.773 681.935 M 0.7 16.8 F
0 681.935 M 130.5 0.7 F
129.773 698 M 69.1 0.7 F
129.773 681.935 M 0.7 16.8 F
198.166 681.935 M 0.7 16.8 F
129.773 681.935 M 69.1 0.7 F
198.166 698 M 289.6 0.7 F
198.166 681.935 M 0.7 16.8 F
487 681.935 M 0.7 16.8 F
198.166 681.935 M 289.6 0.7 F
0 681.935 M 130.5 0.7 F
0 665.87 M 0.7 16.8 F
129.773 665.87 M 0.7 16.8 F
0 665.87 M 130.5 0.7 F
129.773 681.935 M 69.1 0.7 F
129.773 665.87 M 0.7 16.8 F
198.166 665.87 M 0.7 16.8 F
129.773 665.87 M 69.1 0.7 F
198.166 681.935 M 289.6 0.7 F
198.166 665.87 M 0.7 16.8 F
487 665.87 M 0.7 16.8 F
198.166 665.87 M 289.6 0.7 F
0 665.87 M 130.5 0.7 F
0 649.806 M 0.7 16.8 F
129.773 649.806 M 0.7 16.8 F
0 649.806 M 130.5 0.7 F
129.773 665.87 M 69.1 0.7 F
129.773 649.806 M 0.7 16.8 F
198.166 649.806 M 0.7 16.8 F
129.773 649.806 M 69.1 0.7 F
198.166 665.87 M 289.6 0.7 F
198.166 649.806 M 0.7 16.8 F
487 649.806 M 0.7 16.8 F
198.166 649.806 M 289.6 0.7 F
0 649.806 M 130.5 0.7 F
0 567.741 M 0.7 82.8 F
129.773 567.741 M 0.7 82.8 F
0 567.741 M 130.5 0.7 F
129.773 649.806 M 69.1 0.7 F
129.773 567.741 M 0.7 82.8 F
198.166 567.741 M 0.7 82.8 F
129.773 567.741 M 69.1 0.7 F
198.166 649.806 M 289.6 0.7 F
198.166 567.741 M 0.7 82.8 F
487 567.741 M 0.7 82.8 F
198.166 567.741 M 289.6 0.7 F
0 567.741 M 130.5 0.7 F
0 551.676 M 0.7 16.8 F
129.773 551.676 M 0.7 16.8 F
0 551.676 M 130.5 0.7 F
129.773 567.741 M 69.1 0.7 F
129.773 551.676 M 0.7 16.8 F
198.166 551.676 M 0.7 16.8 F
129.773 551.676 M 69.1 0.7 F
198.166 567.741 M 289.6 0.7 F
198.166 551.676 M 0.7 16.8 F
487 551.676 M 0.7 16.8 F
198.166 551.676 M 289.6 0.7 F
0 551.676 M 130.5 0.7 F
0 535.611 M 0.7 16.8 F
129.773 535.611 M 0.7 16.8 F
0 535.611 M 130.5 0.7 F
129.773 551.676 M 69.1 0.7 F
129.773 535.611 M 0.7 16.8 F
198.166 535.611 M 0.7 16.8 F
129.773 535.611 M 69.1 0.7 F
198.166 551.676 M 289.6 0.7 F
198.166 535.611 M 0.7 16.8 F
487 535.611 M 0.7 16.8 F
198.166 535.611 M 289.6 0.7 F
0 535.611 M 130.5 0.7 F
0 519.547 M 0.7 16.8 F
129.773 519.547 M 0.7 16.8 F
0 519.547 M 130.5 0.7 F
129.773 535.611 M 69.1 0.7 F
129.773 519.547 M 0.7 16.8 F
198.166 519.547 M 0.7 16.8 F
129.773 519.547 M 69.1 0.7 F
198.166 535.611 M 289.6 0.7 F
198.166 519.547 M 0.7 16.8 F
487 519.547 M 0.7 16.8 F
198.166 519.547 M 289.6 0.7 F
0 519.547 M 130.5 0.7 F
0 490.282 M 0.7 30.0 F
129.773 490.282 M 0.7 30.0 F
0 490.282 M 130.5 0.7 F
129.773 519.547 M 69.1 0.7 F
129.773 490.282 M 0.7 30.0 F
198.166 490.282 M 0.7 30.0 F
129.773 490.282 M 69.1 0.7 F
198.166 519.547 M 289.6 0.7 F
198.166 490.282 M 0.7 30.0 F
487 490.282 M 0.7 30.0 F
198.166 490.282 M 289.6 0.7 F
0 490.282 M 130.5 0.7 F
0 461.017 M 0.7 30.0 F
129.773 461.017 M 0.7 30.0 F
0 461.017 M 130.5 0.7 F
129.773 490.282 M 69.1 0.7 F
129.773 461.017 M 0.7 30.0 F
198.166 461.017 M 0.7 30.0 F
129.773 461.017 M 69.1 0.7 F
198.166 490.282 M 289.6 0.7 F
198.166 461.017 M 0.7 30.0 F
487 461.017 M 0.7 30.0 F
198.166 461.017 M 289.6 0.7 F
0 365.017 M 226.0 0.7 F
0 348.952 M 0.7 16.8 F
225.265 348.952 M 0.7 16.8 F
0 348.952 M 226.0 0.7 F
225.265 365.017 M 74.6 0.7 F
225.265 348.952 M 0.7 16.8 F
299.111 348.952 M 0.7 16.8 F
225.265 348.952 M 74.6 0.7 F
299.111 365.017 M 225.0 0.7 F
299.111 348.952 M 0.7 16.8 F
523.376 348.952 M 0.7 16.8 F
299.111 348.952 M 225.0 0.7 F
0 348.952 M 226.0 0.7 F
0 22 M 0.7 327.7 F
225.265 22 M 0.7 327.7 F
225.265 348.952 M 74.6 0.7 F
225.265 22 M 0.7 327.7 F
299.111 22 M 0.7 327.7 F
299.111 348.952 M 225.0 0.7 F
299.111 22 M 0.7 327.7 F
523.376 22 M 0.7 327.7 F
11 FS/F7 SF 1.432 685.568 M(Problem)S
131.205 685.568 M(Status)S
199.598 685.568 M(Action)S
/Fa SF 1.432 669.503 M(ipsec)S
/F4 SF ( not on-path)S
199.598 669.503 M(Add)S
/Fa SF ( /usr/local/sbin)S
/F4 SF ( to your PATH.)S
1.432 653.438 M(Missing KLIPS support)S
1.00 0.00 0.00 C 131.205 653.438 M(critical)S
0.00 0.00 0.00 C 199.598 653.438 M(See this FAQ.)S
1.432 604.373 M(No RSA private key)S
199.598 637.373 M(Follow these instructions to create an RSA key pair for your)S
199.598 624.173 M(host. RSA keys are:)S
235.598 597.773 M(required for opportunistic encryption, and)S
/Fc SF 227.788 597.773 M(\267 )S
/F4 SF 235.598 584.573 M(our preferred method to authenticate pre-configured)S
235.598 571.373 M(connections.)S
/Fc SF 227.788 584.573 M(\267 )S
/Fa SF 1.432 555.309 M(pluto)S
/F4 SF ( not running)S
1.00 0.00 0.00 C 131.205 555.309 M(critical)S
0.00 0.00 0.00 C 9 FS/F0 SF 199.598 556.109 M(service ipsec start)S
11 FS/F4 SF 1.432 539.244 M(No port 500 hole)S
1.00 0.00 0.00 C 131.205 539.244 M(critical)S
0.00 0.00 0.00 C 199.598 539.244 M(Open port 500 for IKE negotiation.)S
1.432 523.179 M(Port 500 check N/A)S
199.598 523.179 M(Check that port 500 is open for IKE negotiation.)S
1.432 500.514 M(Failed DNS checks)S
199.598 507.114 M(Opportunistic encryption requires information from DNS. To set)S
199.598 493.914 M(this up, see our instructions.)S
1.432 471.25 M(No public IP address)S
199.598 477.85 M(Check that the interface which you want to protect with IPSec is)S
199.598 464.65 M(up and running.)S
14 FS/F9 SF 0 433.817 M(1.3 Troubleshooting OE)S
11 FS/F4 SF 0 406.817 M(OE should work with no local configuration, if you have posted DNS TXT records according to the)S
0 393.617 M(instructions in our quickstart guide. If you encounter trouble, try these hints. We welcome additional hints via)S
0 380.417 M(the users' mailing list.)S
/F7 SF 1.432 352.585 M(Symptom)S
226.697 352.585 M(Problem)S
300.544 352.585 M(Action)S
/F4 SF 1.432 336.52 M(You're running FreeS/WAN 2.01 \(or later\), and)S
1.432 323.32 M(initiating a connection to FreeS/WAN 2.00 \(or)S
1.432 310.12 M(earlier\). In your logs, you see a message like:)S
9 FS/F0 SF 1.432 285.72 M(no RSA public key known for '192.0.2.13';)S
1.432 274.92 M(DNS search for KEY failed \(no KEY record)S
1.432 264.12 M(for 13.2.0.192.in-addr.arpa.\))S
11 FS/F4 SF 1.432 238.12 M(The older FreeS/WAN logs no error.)S
226.697 336.52 M(A protocol)S
226.697 323.32 M(level)S
226.697 310.12 M(incompatibility)S
226.697 296.92 M(between 2.01)S
226.697 283.72 M(\(or later\) and)S
226.697 270.52 M(2.00 \(or earlier\))S
226.697 257.32 M(causes this)S
226.697 244.12 M(error. It occurs)S
226.697 230.92 M(when a)S
226.697 217.72 M(FreeS/WAN)S
226.697 204.52 M(2.01 \(or later\))S
226.697 191.32 M(box for which)S
226.697 178.12 M(no KEY record)S
226.697 164.92 M(is posted)S
226.697 151.72 M(attempts to)S
226.697 138.52 M(initiate an OE)S
226.697 125.32 M(connection to)S
226.697 112.12 M(older)S
226.697 98.92 M(FreeS/WAN)S
226.697 85.72 M(versions \(2.00)S
226.697 72.52 M(and earlier\).)S
226.697 59.32 M(Note that older)S
226.697 46.12 M(versions can)S
226.697 32.92 M(initiate to)S
300.544 336.52 M(If you control the peer host, upgrade its)S
300.544 323.32 M(FreeS/WAN to 2.01 \(or later\), and post new style)S
300.544 310.12 M(TXT records for it. If not, but if you know its)S
300.544 296.92 M(sysadmin, perhaps a quick note is in order. If)S
300.544 283.72 M(neither option is possible, you can ease the)S
300.544 270.52 M(transition by posting an old style KEY record)S
300.544 257.32 M(\(created with a command like)S
300.544 244.12 M("ipsec showhostkey --key"\) to the reverse map)S
300.544 230.92 M(for the FreeS/WAN 2.01 \(or later\) box.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(1.3 Troubleshooting OE)S
474.768 0 M(89)S
GR
SP
%%Page: 90 119
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
0 655.535 M 0.7 42.5 F
225.265 655.535 M 0.7 42.5 F
0 655.535 M 226.0 0.7 F
225.265 655.535 M 0.7 42.5 F
299.111 655.535 M 0.7 42.5 F
225.265 655.535 M 74.6 0.7 F
299.111 655.535 M 0.7 42.5 F
523.376 655.535 M 0.7 42.5 F
299.111 655.535 M 225.0 0.7 F
0 655.535 M 226.0 0.7 F
0 562.67 M 0.7 93.6 F
225.265 562.67 M 0.7 93.6 F
0 562.67 M 226.0 0.7 F
225.265 655.535 M 74.6 0.7 F
225.265 562.67 M 0.7 93.6 F
299.111 562.67 M 0.7 93.6 F
225.265 562.67 M 74.6 0.7 F
299.111 655.535 M 225.0 0.7 F
299.111 562.67 M 0.7 93.6 F
523.376 562.67 M 0.7 93.6 F
299.111 562.67 M 225.0 0.7 F
0 562.67 M 226.0 0.7 F
0 507.006 M 0.7 56.4 F
225.265 507.006 M 0.7 56.4 F
0 507.006 M 226.0 0.7 F
225.265 562.67 M 74.6 0.7 F
225.265 507.006 M 0.7 56.4 F
299.111 507.006 M 0.7 56.4 F
225.265 507.006 M 74.6 0.7 F
299.111 562.67 M 225.0 0.7 F
299.111 507.006 M 0.7 56.4 F
523.376 507.006 M 0.7 56.4 F
299.111 507.006 M 225.0 0.7 F
0 507.006 M 226.0 0.7 F
0 351.741 M 0.7 156.0 F
225.265 351.741 M 0.7 156.0 F
0 351.741 M 226.0 0.7 F
225.265 507.006 M 74.6 0.7 F
225.265 351.741 M 0.7 156.0 F
299.111 351.741 M 0.7 156.0 F
225.265 351.741 M 74.6 0.7 F
299.111 507.006 M 225.0 0.7 F
299.111 351.741 M 0.7 156.0 F
523.376 351.741 M 0.7 156.0 F
299.111 351.741 M 225.0 0.7 F
0 351.741 M 226.0 0.7 F
0 282.876 M 0.7 69.6 F
225.265 282.876 M 0.7 69.6 F
0 282.876 M 226.0 0.7 F
225.265 351.741 M 74.6 0.7 F
225.265 282.876 M 0.7 69.6 F
299.111 282.876 M 0.7 69.6 F
225.265 282.876 M 74.6 0.7 F
299.111 351.741 M 225.0 0.7 F
299.111 282.876 M 0.7 69.6 F
523.376 282.876 M 0.7 69.6 F
299.111 282.876 M 225.0 0.7 F
0 282.876 M 226.0 0.7 F
0 253.612 M 0.7 30.0 F
225.265 253.612 M 0.7 30.0 F
0 253.612 M 226.0 0.7 F
225.265 282.876 M 74.6 0.7 F
225.265 253.612 M 0.7 30.0 F
299.111 253.612 M 0.7 30.0 F
225.265 253.612 M 74.6 0.7 F
299.111 282.876 M 225.0 0.7 F
299.111 253.612 M 0.7 30.0 F
523.376 253.612 M 0.7 30.0 F
299.111 253.612 M 225.0 0.7 F
0 253.612 M 226.0 0.7 F
0 184.747 M 0.7 69.6 F
225.265 184.747 M 0.7 69.6 F
0 184.747 M 226.0 0.7 F
225.265 253.612 M 74.6 0.7 F
225.265 184.747 M 0.7 69.6 F
299.111 184.747 M 0.7 69.6 F
225.265 184.747 M 74.6 0.7 F
299.111 253.612 M 225.0 0.7 F
299.111 184.747 M 0.7 69.6 F
523.376 184.747 M 0.7 69.6 F
299.111 184.747 M 225.0 0.7 F
0 184.747 M 226.0 0.7 F
0 102.682 M 0.7 82.8 F
225.265 102.682 M 0.7 82.8 F
0 102.682 M 226.0 0.7 F
225.265 184.747 M 74.6 0.7 F
225.265 102.682 M 0.7 82.8 F
299.111 102.682 M 0.7 82.8 F
225.265 102.682 M 74.6 0.7 F
299.111 184.747 M 225.0 0.7 F
299.111 102.682 M 0.7 82.8 F
523.376 102.682 M 0.7 82.8 F
299.111 102.682 M 225.0 0.7 F
0 102.682 M 226.0 0.7 F
0 73.417 M 0.7 30.0 F
225.265 73.417 M 0.7 30.0 F
0 73.417 M 226.0 0.7 F
225.265 102.682 M 74.6 0.7 F
225.265 73.417 M 0.7 30.0 F
299.111 73.417 M 0.7 30.0 F
225.265 73.417 M 74.6 0.7 F
299.111 102.682 M 225.0 0.7 F
299.111 73.417 M 0.7 30.0 F
523.376 73.417 M 0.7 30.0 F
299.111 73.417 M 225.0 0.7 F
0 73.417 M 226.0 0.7 F
0 22 M 0.7 52.1 F
225.265 22 M 0.7 52.1 F
225.265 73.417 M 74.6 0.7 F
225.265 22 M 0.7 52.1 F
299.111 22 M 0.7 52.1 F
299.111 73.417 M 225.0 0.7 F
299.111 22 M 0.7 52.1 F
523.376 22 M 0.7 52.1 F
11 FS/F4 SF 226.697 685.568 M(newer versions)S
226.697 672.368 M(without this)S
226.697 659.168 M(error.)S
1.432 604.703 M(OE host is very slow to contact other hosts.)S
226.697 617.903 M(Slow DNS)S
226.697 604.703 M(service while)S
226.697 591.503 M(running OE.)S
300.544 643.103 M(It's a good idea to run a caching DNS server on)S
300.544 629.903 M(your OE host, as outlined in this mailing list)S
300.544 616.703 M(message. If your DNS servers are elsewhere, put)S
300.544 603.503 M(their IPs in the)S
/Fa SF ( clear)S
/F4 SF ( policy group, and re-read)S
300.544 590.303 M(groups with)S
9 FS/F0 SF 300.544 565.903 M(ipsec auto --rereadgroups)S
1.432 542.038 M(Can't Opportunistically initiate for)S
1.432 531.238 M(192.0.2.2 to 192.0.2.3: no TXT record)S
1.432 520.438 M(for 13.2.0.192.in-addr.arpa.)S
11 FS/F4 SF 226.697 537.038 M(Peer is not set)S
226.697 523.838 M(up for OE.)S
300.544 550.238 M(None. Plenty of hosts on the Internet do not run)S
300.544 537.038 M(OE. If, however, you have set OE up on that peer,)S
300.544 523.838 M(this may indicate that you need to wait up to 48)S
300.544 510.638 M(hours for its DNS records to propagate.)S
/Fa SF 1.432 494.573 M(ipsec verify)S
/F4 SF ( does not find DNS records:)S
9 FS/F0 SF 1.432 470.173 M(...)S
1.432 459.373 M(Looking for TXT in forward map:)S
1.432 448.573 M(                xy.example.com...[FAILED])S
1.432 437.773 M(Looking for TXT in reverse map...[FAILED])S
1.432 426.973 M(...)S
11 FS/F4 SF 1.432 400.973 M(You also experience authentication failure:)S
9 FS/F0 SF 1.432 376.573 M(Possible authentication failure:)S
1.432 365.773 M(no acceptable response to our)S
1.432 354.973 M(first encrypted message)S
11 FS/F4 SF 226.697 444.773 M(DNS records)S
226.697 431.573 M(are not posted)S
226.697 418.373 M(or have not)S
226.697 405.173 M(propagated.)S
300.544 444.773 M(Did you post the DNS records necessary for OE?)S
300.544 431.573 M(If not, do so using the instructions in our)S
300.544 418.373 M(quickstart guide. If so, wait up to 48 hours for the)S
300.544 405.173 M(DNS records to propagate.)S
/Fa SF 1.432 319.509 M(ipsec verify)S
/F4 SF ( does not find DNS records, and you)S
1.432 306.309 M(experience authentication failure.)S
226.697 339.309 M(For iOE, your)S
226.697 326.109 M(ID does not)S
226.697 312.909 M(match location)S
226.697 299.709 M(of forward)S
226.697 286.509 M(DNS record.)S
300.544 332.709 M(In)S
/Fa SF ( config setup)S
/F4 SF (, change)S
/Fa SF ( myid=)S
/F4 SF ( to match the)S
300.544 319.509 M(forward DNS where you posted the record.)S
300.544 306.309 M(Restart FreeS/WAN. For reference, see our iOE)S
300.544 293.109 M(instructions.)S
/Fa SF 1.432 270.444 M(ipsec verify)S
/F4 SF ( finds DNS records, yet there is still)S
1.432 257.244 M(authentication failure. \( ? \))S
226.697 270.444 M(DNS records)S
226.697 257.244 M(are malformed.)S
300.544 270.444 M(Re-create the records and send new copies to)S
300.544 257.244 M(your DNS administrator.)S
/Fa SF 1.432 221.379 M(ipsec verify)S
/F4 SF ( finds DNS records, yet there is still)S
1.432 208.179 M(authentication failure. \( ? \))S
226.697 241.179 M(DNS records)S
226.697 227.979 M(show different)S
226.697 214.779 M(keys for a)S
226.697 201.579 M(gateway vs. its)S
226.697 188.379 M(subnet hosts.)S
300.544 234.579 M(All TXT records for boxes protected by an OE)S
300.544 221.379 M(gateway must contain the gateway's public key.)S
300.544 208.179 M(Re-create and re-post any incorrect records using)S
300.544 194.979 M(these instructions.)S
1.432 152.514 M(OE gateway loses connectivity to its subnet. The)S
1.432 139.314 M(gateway's routing table shows routes to the subnet)S
1.432 126.114 M(through IPsec interfaces.)S
226.697 172.314 M(The subnet is)S
226.697 159.114 M(part of the)S
/Fa SF 226.697 145.914 M(private)S
/F4 SF ( or)S
/Fa SF 226.697 132.714 M(block)S
/F4 SF ( policy)S
226.697 119.514 M(group on the)S
226.697 106.314 M(gateway.)S
300.544 157.914 M(Remove the subnet from the group, and reread)S
300.544 144.714 M(groups with)S
9 FS/F0 SF 300.544 120.314 M(ipsec auto --rereadgroups)S
11 FS/F4 SF 1.432 83.65 M(OE does not work to hosts on the local LAN.)S
226.697 90.25 M(This is a known)S
226.697 77.05 M(issue.)S
300.544 83.65 M(See this list of known issues with OE.)S
1.432 60.985 M(FreeS/WAN does not seem to be executing your)S
1.432 47.785 M(default policy. In your logs, you see a message)S
1.432 34.585 M(like:)S
226.697 60.985 M(Fullnet in a)S
226.697 47.785 M(policy group)S
226.697 34.585 M(file defines)S
300.544 60.985 M(Find all policies which contain fullnet with:)S
9 FS/F0 SF 300.544 36.585 M(grep -F 0.0.0.0/0 /etc/ipsec.d/policies/*)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(1.3 Troubleshooting OE)S
474.768 0 M(90)S
GR
SP
%%Page: 91 120
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
0 457.535 M 0.7 240.5 F
225.265 457.535 M 0.7 240.5 F
0 457.535 M 226.0 0.7 F
225.265 457.535 M 0.7 240.5 F
299.111 457.535 M 0.7 240.5 F
225.265 457.535 M 74.6 0.7 F
299.111 457.535 M 0.7 240.5 F
523.376 457.535 M 0.7 240.5 F
299.111 457.535 M 225.0 0.7 F
9 FS/F0 SF 1.432 687.568 M(/etc/ipsec.d/policies/iprivate-or-clear")S
1.432 676.768 M(line 14: subnet "0.0.0.0/0",)S
1.432 665.968 M(source 192.0.2.13/32,)S
1.432 655.168 M(already "private-or-clear")S
11 FS/F4 SF 226.697 685.568 M(your default)S
226.697 672.368 M(policy. Fullnet)S
226.697 659.168 M(should)S
226.697 645.968 M(normally be)S
226.697 632.768 M(present in only)S
226.697 619.568 M(one policy)S
226.697 606.368 M(group file. The)S
226.697 593.168 M(fine print: you)S
226.697 579.968 M(can have two)S
226.697 566.768 M(default policies)S
226.697 553.568 M(defined so long)S
226.697 540.367 M(as they protect)S
226.697 527.167 M(different local)S
226.697 513.967 M(endpoints \(e.g.)S
226.697 500.767 M(the)S
226.697 487.567 M(FreeS/WAN)S
226.697 474.367 M(gateway and a)S
226.697 461.167 M(subnet\).)S
300.544 685.568 M(then remove the unwanted occurrence\(s\).)S
17 FS/F9 SF 0 427.335 M(2. During Negotiation)S
11 FS/F4 SF 0 399.735 M(When you fail to bring up a tunnel, you'll need to find out:)S
36 373.335 M(what your connection state is, and often)S
/Fc SF 28.19 373.335 M(\267 )S
/F4 SF 36 360.135 M(an error message.)S
/Fc SF 28.19 360.135 M(\267 )S
/F4 SF 0 333.735 M(before you can diagnose your problem.)S
14 FS/F9 SF 0 304.335 M(2.1 Determine Connection State)S
11 FS/F9 SF 0 277.335 M(Finding current state)S
/F4 SF 0 250.935 M(You can see connection states \(STATE_MAIN_I1 and so on\) when you bring up a connection on the)S
0 237.735 M(command line. If you have missed this, or brought up your connection automatically, use:)S
9 FS/F0 SF 0 213.335 M(ipsec auto --status)S
11 FS/F4 SF 0 187.335 M(The most relevant state is the last one reached.)S
/Fb SF 0 160.935 M(What's this supposed to look like?)S
/F4 SF 0 134.535 M(Negotiations should proceed though various states, in the processes of:)S
36 108.135 M(IKE negotiations \(aka Phase 1, Main Mode, STATE_MAIN_*\))S
25 108.135 M(1. )S
36 94.935 M(IPSEC negotiations \(aka Phase 2, Quick Mode, STATE_QUICK_*\))S
25 94.935 M(2. )S
0 68.535 M(These are done and a connection is established when you see messages like:)S
9 FS/F0 SF 0 44.135 M(    000 #21: "myconn" STATE_MAIN_I4 \(ISAKMP SA established\)...)S
0 33.335 M(    000 #2: "myconn" STATE_QUICK_I2 \(sent QI2, IPsec SA established\)...)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(2. During Negotiation)S
474.768 0 M(91)S
GR
SP
%%Page: 92 121
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(Look for the key phrases are "ISAKMP SA established" and "IPSec SA established", with the relevant)S
0 673.8 M(connection name. Often, this happens at STATE_MAIN_I4 and STATE_QUICK_I2, respectively.)S
/Fa SF 0 647.4 M(ipsec auto --status)S
/F4 SF ( will tell you what states)S
/F7 SF ( have been achieved)S
/F4 SF (, rather than the current state. Since)S
0 634.2 M(determining the current state is rather more difficult to do, current state information is not available from)S
0 621 M(Linux FreeS/WAN. If you are actively bringing a connection up, the status report's last states for that)S
0 607.8 M(connection likely reflect its current state. Beware, though, of the case where a connection was correctly)S
0 594.6 M(brought up but is now downed: Linux FreeS/WAN will not notice this until it attempts to rekey. Meanwhile,)S
0 581.4 M(the last known state indicates that the connection has been established.)S
0 555 M(If your connection is stuck at STATE_MAIN_I1, skip straight to here.)S
14 FS/F9 SF 0 525.6 M(2.2 Finding error text)S
11 FS/F4 SF 0 498.6 M(Solving most errors will require you to find verbose error text, either on the command line or in the logs.)S
/F9 SF 0 472.2 M(Verbose start for more information)S
/F4 SF 0 445.8 M(Note that you can get more detail from)S
/Fa SF ( ipsec auto)S
/F4 SF ( using the --verbose flag:)S
9 FS/F0 SF 0 421.4 M(    ipsec auto --verbose --up west-east)S
11 FS/F4 SF 0 395.4 M(More complete information can be gleaned from the log files.)S
/F9 SF 0 369 M(Debug levels count)S
/F4 SF 0 342.6 M(The amount of description you'll get here depends on ipsec.conf debug settings,)S
/Fa SF ( klipsdebug)S
/F4 SF (= and)S
/Fa SF 0 329.4 M(plutodebug)S
/F4 SF (=. When troubleshooting, set at least one of these to)S
/Fa SF ( all)S
/F4 SF (, and when done, reset it to)S
/Fa SF ( none)S
/F4 SF ( so your)S
0 316.2 M(logs don't fill up. Note that you must have enabled the)S
/Fa SF ( klipsdebug)S
/F4 SF ( compile-time option for the)S
/Fa SF ( klipsdebug)S
/F4 SF 0 303 M(configuration switch to work.)S
0 276.6 M(For negotiation problems)S
/Fa SF ( plutodebug)S
/F4 SF ( is most relevant.)S
/Fa SF ( klipsdebug)S
/F4 SF ( applies mainly to attempts to use an)S
0 263.4 M(already-established connection. See also this description of the division of duties within Linux FreeS/WAN.)S
0 237 M(After raising your debug levels, restart Linux FreeS/WAN to ensure that ipsec.conf is reread, then recreate the)S
0 223.8 M(error to generate verbose logs.)S
/Fb SF 0 197.4 M(ipsec barf)S
/F9 SF ( for lots of debugging information)S
/Fa SF 0 171 M(ipsec barf \(8\))S
/F4 SF ( collects a bunch of useful debugging information, including these logs Use the command)S
9 FS/F0 SF 0 146.6 M(    ipsec barf > barf.west)S
11 FS/F4 SF 0 120.6 M(to generate one.)S
/F9 SF 0 94.2 M(Find the error)S
/F4 SF 0 67.8 M(Search out the failure point in your logs. Are there a handful of lines which succinctly describe how things are)S
0 54.6 M(going wrong or contrary to your expectation? Sometimes the failure point is not immediately obvious: Linux)S
0 41.4 M(FreeS/WAN's errors are usually not marked "Error". Have a look in the FAQ for what some common failures)S
0 28.2 M(look like.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(2.2 Finding error text)S
474.768 0 M(92)S
GR
SP
%%Page: 93 122
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(Tip: problems snowball. Focus your efforts on the first problem, which is likely to be the cause of later errors.)S
/F9 SF 0 660.6 M(Play both sides)S
/F4 SF 0 634.2 M(Also find error text on the peer IPSec box. This gives you two perspectives on the same failure.)S
0 607.8 M(At times you will require information which only one side has. The peer can merely indicate the presence of)S
0 594.6 M(an error, and its approximate point in the negotiations. If one side keeps retrying, it may be because there is a)S
0 581.4 M(show stopper on the other side. Have a look at the other side and figure out what it doesn't like.)S
0 555 M(If the other end is not Linux FreeS/WAN, the principle is the same: replicate the error with its most verbose)S
0 541.8 M(logging on, and capture the output to a file.)S
14 FS/F9 SF 0 512.4 M(2.3 Interpreting a Negotiation Error)S
11 FS/F9 SF 0 485.4 M(Connection stuck at STATE_MAIN_I1)S
/F4 SF 0 459 M(This error commonly happens because IKE \(port 500\) packets, needed to negotiate an IPSec connection,)S
0 445.8 M(cannot travel freely between your IPSec gateways. See our firewall document for details.)S
/F9 SF 0 419.4 M(Other errors)S
/F4 SF 0 393 M(Other errors require a bit more digging. Use the following resources:)S
36 366.6 M(the FAQ . Since this document is constantly updated, the snapshot's FAQ may have a new entry)S
36 353.4 M(relevant to your problem.)S
/Fc SF 28.19 366.6 M(\267 )S
/F4 SF 36 340.2 M(our background document . Special considerations which, while not central to Linux FreeS/WAN, are)S
36 327 M(often tripped over. Includes problems with packet fragmentation, and considerations for testing)S
36 313.8 M(opportunism.)S
/Fc SF 28.19 340.2 M(\267 )S
/F4 SF 36 300.6 M(the list archives. Each of the searchable archives works differently, so it's worth checking each. Use a)S
36 287.4 M(search term which is generic, but identifies your error, for example "No connection is known for".)S
36 274.2 M(Often, you will find that your question has been answered in the past. Finding an archived answer is)S
36 261 M(quicker than asking the list. You may, however, find similar questions without answers. If you do,)S
36 247.8 M(send their URLs to the list with your trouble report. The additional examples may help the list tech)S
36 234.6 M(support person find your answer.)S
/Fc SF 28.19 300.6 M(\267 )S
/F4 SF 36 221.4 M(Look into the code where the error is being generated. The pluto code is nicely documented with)S
36 208.2 M(comments and meaningful variable names.)S
/Fc SF 28.19 221.4 M(\267 )S
/F4 SF 0 181.8 M(If you have failed to solve your problem with the help of these resources, send a detailed problem report to the)S
0 168.6 M(users list, following these guidelines.)S
17 FS/F9 SF 0 136.2 M(3. Using a Connection)S
14 FS/F9 SF 0 105.6 M(3.1 Orienting yourself)S
11 FS/Fb SF 0 78.6 M(How do I know if it works?)S
/F4 SF 0 52.2 M(Test your connection by sending packets through it. The simplest way to do this is with ping, but the ping)S
0 39 M(needs to)S
/F7 SF ( test the correct tunnel.)S
/F4 SF ( See this example scenario if you don't understand this.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(2.2 Finding error text)S
474.768 0 M(93)S
GR
SP
%%Page: 94 123
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(If your ping returns, test any other connections you've brought u all check out, great. You may wish to test)S
0 673.8 M(with large packets for MTU problems.)S
/Fb SF 0 647.4 M(ipsec barf)S
/F9 SF ( is useful again)S
/F4 SF 0 621 M(If your ping fails to return, generate an ipsec barf debugging report on each IPSec gateway. On a non-Linux)S
0 607.8 M(FreeS/WAN implementation, gather equivalent information. Use this, and the tips in the next sections, to)S
0 594.6 M(troubleshoot. Are you sure that both endpoints are capable of hearing and responding to ping?)S
14 FS/F9 SF 0 565.2 M(3.2 Those pesky configuration errors)S
11 FS/F4 SF 0 538.2 M(IPSec may be dropping your ping packets since they do not belong in the tunnels you have constructed:)S
36 511.8 M(Your ping may not test the tunnel you intend to test. For details, see our "I can't ping" FAQ.)S
/Fc SF 28.19 511.8 M(\267 )S
/F4 SF 36 498.6 M(Alternately, you may have a configuration error. For example, you may have configured one of the)S
36 485.4 M(four possible tunnels between two gateways, but not the one required to secure the important traffic)S
36 472.2 M(you're now testing. In this case, add and start the tunnel, and try again.)S
/Fc SF 28.19 498.6 M(\267 )S
/F4 SF 0 445.8 M(In either case, you will often see a message like:)S
9 FS/F0 SF 0 421.4 M(klipsdebug... no eroute)S
11 FS/F4 SF 0 395.4 M(which we discuss in this FAQ.)S
0 369 M(Note:)S
36 342.6 M(Network Address Translation \(NAT\) and IP masquerade may have an effect on which tunnels you)S
36 329.4 M(need to configure.)S
/Fc SF 28.19 342.6 M(\267 )S
/F4 SF 36 316.2 M(When testing a tunnel that protects a multi-node subnet, try several subnet nodes as ping targets, in)S
36 303 M(case one node is routing incorrectly.)S
/Fc SF 28.19 316.2 M(\267 )S
14 FS/F9 SF 0 273.6 M(3.3 Check Routing and Firewalling)S
11 FS/F4 SF 0 246.6 M(If you've confirmed your configuration assumptions, the problem is almost certainly with routing or)S
0 233.4 M(firewalling. Isolate the problem using interface statistics, firewall statistics, or a packet sniffer.)S
/F9 SF 0 207 M(Background:)S
/F4 SF 36 180.6 M(Linux FreeS/WAN supplies all the special routing it needs; you need only route packets out through)S
36 167.4 M(your IPSec gateway. Verify that on the)S
/Fa SF ( subnetted)S
/F4 SF ( machines you are using for your ping-test, your)S
36 154.2 M(routing is as expected. I have seen a tunnel "fail" because the subnet machine sending packets out an)S
36 141 M(alternate gateway \(not our IPSec gateway\) on their return path.)S
/Fc SF 28.19 180.6 M(\267 )S
/F4 SF 36 127.8 M(Linux FreeS/WAN requires particular firewalling considerations. Check the firewall rules on your)S
36 114.6 M(IPSec gateways and ensure that they allow IPSec traffic through. Be sure that no other machine - for)S
36 101.4 M(example a router between the gateways - is blocking your IPSec packets.)S
/Fc SF 28.19 127.8 M(\267 )S
/F9 SF 0 75 M(View Interface and Firewall Statistics)S
/F4 SF 0 48.6 M(Interface reports and firewall statistics can help you track down lost packets at a glance. Check any firewall)S
0 35.4 M(statistics you may be keeping on your IPSec gateways, for dropped packets.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(3.1 Orienting yourself)S
474.768 0 M(94)S
GR
SP
%%Page: 95 124
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F7 SF 0 687 M(Tip)S
/F4 SF (: You can take a snapshot of the packets processed by your firewall with:)S
9 FS/F0 SF 0 662.6 M(    iptables -L -n -v)S
11 FS/F4 SF 0 636.6 M(You can get creative with "diff" to find out what happens to a particular packet during transmission.)S
0 610.2 M(Both)S
/Fa SF ( cat /proc/net/dev)S
/F4 SF ( and)S
/Fa SF ( ifconfig)S
/F4 SF ( display interface statistics, and both are included in)S
/Fa SF ( ipsec barf)S
/F4 SF (. Use)S
0 597 M(either to check if any interface has dropped packets. If you find that one has, test whether this is related to)S
0 583.8 M(your ping. While you ping continuously, print that interface's statistics several times. Does its drop count)S
0 570.6 M(increase in proportion to the ping? If so, check why the packets are dropped there.)S
0 544.2 M(To do this, look at the firewall rules that apply to that interface. If the interface is an IPSec interface, more)S
0 531 M(information may be available in the log. Grep for the word "drop" in a log which was created with)S
/Fa SF 0 517.8 M(klipsdebug=all)S
/F4 SF ( as the error happened.)S
0 491.4 M(See also this discussion on interpreting)S
/Fa SF ( ifconfig)S
/F4 SF ( statistics.)S
14 FS/F9 SF 0 462 M(3.4 When in doubt, sniff it out)S
11 FS/F4 SF 0 435 M(If you have checked configuration assumptions, routing, and firewall rules, and your interface statistics yield)S
0 421.8 M(no clue, it remains for you to investigate the mystery of the lost packet by the most thorough method: with a)S
0 408.6 M(packet sniffer \(providing, of course, that this is legal where you are working\).)S
0 382.2 M(In order to detect packets on the ipsec virtual interfaces, you will need an up-to-date sniffer \(tcpdump,)S
0 369 M(ethereal, ksnuffle\) on your IPSec gateway machines. You may also find it useful to sniff the ping endpoints.)S
/F9 SF 0 342.6 M(Anticipate your packets' path)S
/F4 SF 0 316.2 M(Ping, and examine each interface along the projected path, checking for your ping's arrival. If it doesn't get to)S
0 303 M(the the next stop, you have narrowed down where to look for it. In this way, you can isolate a problem area,)S
0 289.8 M(and narrow your troubleshooting focus.)S
0 263.4 M(Within a machine running Linux FreeS/WAN, this packet flow diagram will help you anticipate a packet's)S
0 250.2 M(path.)S
0 223.8 M(Note that:)S
36 197.4 M(from the perspective of the tunneled packet, the entire tunnel is one hop. That's explained in this FAQ.)S
/Fc SF 28.19 197.4 M(\267 )S
/F4 SF 36 184.2 M(an encapsulated IPSec packet will look different, when sniffed, from the plaintext packet which)S
36 171 M(generated it. You can see plaintext packets entering an IPSec interface and the resulting cyphertext)S
36 157.8 M(packets as they emerge from the corresponding physical interface.)S
/Fc SF 28.19 184.2 M(\267 )S
/F4 SF 0 131.4 M(Once you isolate where the packet is lost, take a closer look at firewall rules, routing and configuration)S
0 118.2 M(assumptions as they affect that specific area. If the packet is lost on an IPSec gateway, comb through)S
/Fa SF 0 105 M(klipsdebug)S
/F4 SF ( output for anomalies.)S
0 78.6 M(If the packet goes through both gateways successfully and reaches the ping target, but does not return, suspect)S
0 65.4 M(routing. Check that the ping target routes packets back to the IPSec gateway.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(3.4 When in doubt, sniff it out)S
474.768 0 M(95)S
GR
SP
%%Page: 96 125
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(3.5 Check your logs)S
11 FS/F4 SF 0 657 M(Here, too, log information can be useful. Start with the guidelines above.)S
0 630.6 M(For connection use problems, set)S
/Fa SF ( klipsdebug=all)S
/F4 SF (. Note that you must have enabled the)S
/Fa SF ( klipsdebug)S
/F4 SF 0 617.4 M(compile-time option to do this. Restart Linux FreeS/WAN so that it rereads)S
/Fa SF ( ipsec.conf)S
/F4 SF (, then recreate the)S
0 604.2 M(error condition. When searching through)S
/Fa SF ( klipsdebug)S
/F4 SF ( data, look especially for the keywords "drop" \(as in)S
0 591 M(dropped packets\) and "error".)S
0 564.6 M(Often the problem with connection use is not software error, but rather that the software is behaving contrary)S
0 551.4 M(to expectation.)S
/F9 SF 0 525 M(Interpreting log text)S
/F4 SF 0 498.6 M(To interpret the Linux FreeS/WAN log text you've found, use the same resources as indicated for)S
0 485.4 M(troubleshooting connection negotiation: the FAQ , our background document, and the list archives. Looking)S
0 472.2 M(in the KLIPS code is only for the very brave.)S
0 445.8 M(If you are still stuck, send a detailed problem report to the users' list.)S
14 FS/F9 SF 0 416.4 M(3.6 More testing for the truly thorough)S
11 FS/F9 SF 0 389.4 M(Large Packets)S
/F4 SF 0 363 M(If each of your connections passed the ping test, you may wish to test by pinging with large packets \(2000)S
0 349.8 M(bytes or larger\). If it does not return, suspect MTU issues, and see this discussion.)S
/F9 SF 0 323.4 M(Stress Tests)S
/F4 SF 0 297 M(In most users' view, a simple ping test, and perhaps a large-packet ping test suffice to indicate a working)S
0 283.8 M(IPSec connection.)S
0 257.4 M(Some people might like to do additional stress tests prior to production use. They may be interested in this)S
0 244.2 M(testing protocol we use at interoperation conferences, aka "bakeoffs". We also have a)S
/Fa SF ( testing)S
/F4 SF ( directory that)S
0 231 M(ships with the release.)S
17 FS/F9 SF 0 198.6 M(4. Problem Reporting)S
14 FS/F9 SF 0 168 M(4.1 How to ask for help)S
11 FS/F4 SF 0 141 M(Ask for troubleshooting help on the users' mailing list, users@lists.freeswan.org. While sometimes an initial)S
0 127.8 M(query with a quick description of your intent and error will twig someone's memory of a similar problem, it's)S
0 114.6 M(often necessary to send a second mail with a complete problem report.)S
0 88.2 M(When reporting problems to the mailing list\(s\), please include:)S
36 61.8 M(a brief description of the problem)S
/Fc SF 28.19 61.8 M(\267 )S
/F4 SF 36 48.6 M(if it's a compile problem, the actual output from make, showing the problem. Try to edit it down to)S
36 35.4 M(only the relevant part, but when in doubt, be as complete as you can. If it's a kernel compile problem,)S
/Fc SF 28.19 48.6 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(3.5 Check your logs)S
474.768 0 M(96)S
GR
SP
%%Page: 97 126
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(any relevant out.* files)S
36 673.8 M(if it's a run-time problem, pointers to where we can find the complete output from "ipsec barf" from)S
36 660.6 M(BOTH ENDS \(not just one of them\). Remember that it's common outside the US and Canada to pay)S
36 647.4 M(for download volume, so if you can't post barfs on the web and send the URL to the mailing list, at)S
36 634.2 M(least compress them with tar or gzip.)S
36 621 M(If you can, try to simplify the case that is causing the problem. In particular, if you clear your logs,)S
36 607.8 M(start FreeS/WAN with no other connections running, cause the problem to happen, and then do)S
/Fa SF ( ipsec)S
36 594.6 M(barf)S
/F4 SF ( on both ends immediately, that gives the smallest and least cluttered output.)S
/Fc SF 28.19 673.8 M(\267 )S
/F4 SF 36 581.4 M(any other error messages, complaints, etc. that you saw. Please send the complete text of the)S
36 568.2 M(messages, not just a summary.)S
/Fc SF 28.19 581.4 M(\267 )S
/F4 SF 36 555 M(what your network setup is. Include subnets, gateway addresses, etc. A schematic diagram is a good)S
36 541.8 M(format for this information.)S
/Fc SF 28.19 555 M(\267 )S
/F4 SF 36 528.6 M(exactly what you were trying to do with Linux FreeS/WAN, and exactly what went wrong)S
/Fc SF 28.19 528.6 M(\267 )S
/F4 SF 36 515.4 M(a fix, if you have one. But remember, you are sending mail to people all over the world; US residents)S
36 502.2 M(and US citizens in particular, please read doc/exportlaws.html before sending code -- even small bug)S
36 489 M(fixes -- to the list or to us.)S
/Fc SF 28.19 515.4 M(\267 )S
/F4 SF 36 475.8 M(When in doubt about whether to include some seemingly-trivial item of information, include it. It is)S
36 462.6 M(rare for problem reports to have too much information, and common for them to have too little.)S
/Fc SF 28.19 475.8 M(\267 )S
/F4 SF 0 436.2 M(Here are some good general guidelines on bug reporting: How To Ask Questions The Smart Way and How to)S
0 423 M(Report Bugs Effectively.)S
14 FS/F9 SF 0 393.6 M(4.2 Where to ask)S
11 FS/F4 SF 0 366.6 M(To report a problem, send mail about it to the users' list. If you are certain that you have found a bug, report it)S
0 353.4 M(to the bugs list. If you encounter a problem while doing your own coding on the Linux FreeS/WAN codebase)S
0 340.2 M(and think it is of interest to the design team, notify the design list. When in doubt, default to the users' list.)S
0 327 M(More information about the mailing lists is found here.)S
0 300.6 M(For a number of reasons -- including export-control regulations affecting almost any)S
/F7 SF ( private)S
/F4 SF ( discussion of)S
0 287.4 M(encryption software -- we prefer that problem reports and discussions go to the lists, not directly to the team.)S
0 274.2 M(Beware that the list goes worldwide; US citizens, read this important information about your export laws. If)S
0 261 M(you're using this software, you really should be on the lists. To get onto them, visit lists.freeswan.org.)S
0 234.6 M(If you do send private mail to our coders or want a private reply from them, please make sure that the return)S
0 221.4 M(address on your mail \(From or Reply-To header\) is a valid one. They have more important things to do than)S
0 208.2 M(to unravel addresses that have been mangled in an attempt to confuse spammers.)S
17 FS/F9 SF 0 175.8 M(5. Additional Notes on Troubleshooting)S
11 FS/F4 SF 0 148.2 M(The following sections supplement the Guide: information available on your system; testing between security)S
0 135 M(gateways; ifconfig reports for KLIPS debugging; using GDB on Pluto.)S
14 FS/F9 SF 0 105.6 M(5.1 Information available on your system)S
11 FS/F9 SF 0 78.6 M(Logs used)S
/F4 SF 0 52.2 M(Linux FreeS/WAN logs to:)S
36 25.8 M(/var/log/secure \(or, on Debian, /var/log/auth.log\))S
/Fc SF 28.19 25.8 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(4.2 Where to ask)S
474.768 0 M(97)S
GR
SP
%%Page: 98 127
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(/var/log/messages)S
/Fc SF 28.19 687 M(\267 )S
/F4 SF 0 660.6 M(Check both places to get full information. If you find nothing, check your)S
/Fa SF ( syslogd.conf\(5\))S
/F4 SF ( to see where your)S
0 647.4 M(/etc/syslog.conf or equivalent is directing)S
/Fa SF ( authpriv)S
/F4 SF ( messages.)S
/F9 SF 0 621 M(man pages provided)S
/F6 SF 0 594.6 M(ipsec.conf\(5\))S
/F4 SF 36 581.4 M(Manual page for IPSEC configuration file.)S
/F6 SF 0 568.2 M(ipsec\(8\))S
/F4 SF 36 555 M(Primary man page for ipsec utilities.)S
0 528.6 M(Other man pages are on this list and in)S
36 502.2 M(/usr/local/man/man3)S
/Fc SF 28.19 502.2 M(\267 )S
/F4 SF 36 489 M(/usr/local/man/man5)S
/Fc SF 28.19 489 M(\267 )S
/F4 SF 36 475.8 M(/usr/local/man/man8/ipsec_*)S
/Fc SF 28.19 475.8 M(\267 )S
/F9 SF 0 449.4 M(Status information)S
/F6 SF 0 423 M(ipsec auto --status)S
/F4 SF 36 409.8 M(Command to get status report from running system. Displays Pluto's state. Includes the list of)S
36 396.6 M(connections which are currently "added" to Pluto's internal database; lists state objects reflecting)S
36 383.4 M(ISAKMP and IPsec SAs being negotiated or installed.)S
/F6 SF 0 370.2 M(ipsec look)S
/F4 SF 36 357 M(Brief status info.)S
/F6 SF 0 343.8 M(ipsec barf)S
/F4 SF 36 330.6 M(Copious debugging info.)S
14 FS/F9 SF 0 301.2 M(5.2 Testing between security gateways)S
11 FS/F4 SF 0 274.2 M(Sometimes you need to test a subnet-subnet tunnel. This is a tunnel between two security gateways, which)S
0 261 M(protects traffic on behalf of the subnets behind these gateways. On this network:)S
9 FS/F0 SF 0 236.6 M(     Sunset==========West------------------East=========Sunrise)S
0 225.8 M(                     IPSec gateway         IPSec gateway)S
0 215 M(           local net       untrusted net       local net)S
11 FS/F4 SF 0 189 M(you might name this tunnel sunset-sunrise. You can test this tunnel by having a machine behind one gateway)S
0 175.8 M(ping a machine behind the other gateway, but this is not always convenient or even possible.)S
0 149.4 M(Simply pinging one gateway from the other is not useful. Such a ping does not normally go through the)S
0 136.2 M(tunnel.)S
/F7 SF ( The tunnel handles traffic between the two protected subnets, not between the gateways)S
/F4 SF ( . Depending)S
0 123 M(on the routing in place, a ping might)S
36 96.6 M(either succeed by finding an unencrypted route)S
/Fc SF 28.19 96.6 M(\267 )S
/F4 SF 36 83.4 M(or fail by finding no route. Packets without an IPSEC eroute are discarded.)S
/Fc SF 28.19 83.4 M(\267 )S
/F7 SF 0 57 M(Neither event tells you anything about the tunnel)S
/F4 SF (. You can explicitly create an eroute to force such packets)S
0 43.8 M(through the tunnel, or you can create additional tunnels as described in our configuration document, but those)S
0 30.6 M(may be unnecessary complications in your situation.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(5.1 Information available on your system)S
474.768 0 M(98)S
GR
SP
%%Page: 99 128
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(The trick is to explicitly test between)S
/F7 SF ( both gateways' private-side IP addresses)S
/F4 SF (. Since the private-side)S
0 673.8 M(interfaces are on the protected subnets, the resulting packets do go via the tunnel. Use either ping -I or)S
0 660.6 M(traceroute -i, both of which allow you to specify a source interface. \(Note: unsupported on older Linuxes\).)S
0 647.4 M(The same principles apply for a road warrior \(or other\) case where only one end of your tunnel is a subnet.)S
14 FS/F9 SF 0 618 M(5.3 ifconfig reports for KLIPS debugging)S
11 FS/F4 SF 0 591 M(When diagnosing problems using ifconfig statistics, you may wonder what type of activity increments a)S
0 577.8 M(particular counter for an ipsecN device. Here's an index, posted by KLIPS developer Richard Guy Briggs:)S
9 FS/F0 SF 0 553.4 M(Here is a catalogue of the types of errors that can occur for which)S
0 542.6 M(statistics are kept when transmitting and receiving packets via klips.)S
0 531.8 M(I notice that they are not necessarily logged in the right counter.)S
0 521 M(. . .)S
0 499.4 M(Sources of ifconfig statistics for ipsec devices)S
0 477.8 M(rx-errors:)S
0 467 M(- packet handed to ipsec_rcv that is not an ipsec packet.)S
0 456.2 M(- ipsec packet with payload length not modulo 4.)S
0 445.4 M(- ipsec packet with bad authenticator length.)S
0 434.6 M(- incoming packet with no SA.)S
0 423.8 M(- replayed packet.)S
0 413 M(- incoming authentication failed.)S
0 402.2 M(- got esp packet with length not modulo 8.)S
0 380.6 M(tx_dropped:)S
0 369.8 M(- cannot process ip_options.)S
0 359 M(- packet ttl expired.)S
0 348.2 M(- packet with no eroute.)S
0 337.4 M(- eroute with no SA.)S
0 326.6 M(- cannot allocate sk_buff.)S
0 315.8 M(- cannot allocate kernel memory.)S
0 305 M(- sk_buff internal error.)S
0 272.6 M(The standard counters are:)S
0 251 M(struct enet_statistics)S
0 240.2 M({)S
0 229.4 M(        int        rx_packets;                /* total packets received */)S
0 218.6 M(        int        tx_packets;                /* total packets transmitted */)S
0 207.8 M(        int        rx_errors;                /* bad packets received */)S
0 197 M(        int        tx_errors;                /* packet transmit problems */)S
0 186.2 M(        int        rx_dropped;                /* no space in linux buffers */)S
0 175.4 M(        int        tx_dropped;                /* no space available in linux */)S
0 164.6 M(        int        multicast;                /* multicast packets received */)S
0 153.8 M(        int        collisions;)S
0 132.2 M(        /* detailed rx_errors: */)S
0 121.4 M(        int        rx_length_errors;)S
0 110.6 M(        int        rx_over_errors;                /* receiver ring buff overflow */)S
0 99.8 M(        int        rx_crc_errors;                /* recved pkt with crc error */)S
0 89 M(        int        rx_frame_errors;        /* recv'd frame alignment error */)S
0 78.2 M(        int        rx_fifo_errors;                /* recv'r fifo overrun */)S
0 67.4 M(        int        rx_missed_errors;        /* receiver missed packet */)S
0 45.8 M(        /* detailed tx_errors */)S
0 35 M(        int        tx_aborted_errors;)S
0 24.2 M(        int        tx_carrier_errors;)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(5.3 ifconfig reports for KLIPS debugging)S
474.768 0 M(99)S
GR
SP
%%Page: 100 129
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(        int        tx_fifo_errors;)S
0 678.2 M(        int        tx_heartbeat_errors;)S
0 667.4 M(        int        tx_window_errors;)S
0 656.6 M(};)S
0 635 M(of which I think only the first 6 are useful.)S
14 FS/F9 SF 0 606 M(5.4 Using GDB on Pluto)S
11 FS/F4 SF 0 579 M(You may need to use the GNU debugger, gdb\(1\), on Pluto. This should be necessary only in unusual cases,)S
0 565.8 M(for example if you encounter a problem which the Pluto developer cannot readily reproduce or if you are)S
0 552.6 M(modifying Pluto.)S
0 526.2 M(Here are the Pluto developer's suggestions for doing this:)S
9 FS/F0 SF 0 501.8 M(Can you get a core dump and use gdb to find out what Pluto was doing)S
0 491 M(when it died?)S
0 469.4 M(To get a core dump, you will have to set dumpdir to point to a)S
0 458.6 M(suitable directory \(see )S
(ipsec.conf\(5\))S
(\).)S
0 437 M(To get gdb to tell you interesting stuff:)S
0 426.2 M(        $ script)S
0 415.4 M(        $ cd dump-directory-you-chose)S
0 404.6 M(        $ gdb /usr/local/lib/ipsec/pluto core)S
0 393.8 M(        \(gdb\) where)S
0 383 M(        \(gdb\) quit)S
0 372.2 M(        $ exit)S
0 350.6 M(The resulting output will have been captured by the script command in)S
0 339.8 M(a file called "typescript".  Send it to the list.)S
0 318.2 M(Do not delete the core file.  I may need to ask you to print out some)S
0 307.4 M(more relevant stuff.)S
11 FS/F4 SF 0 281.4 M(Note that the)S
/Fa SF ( dumpdir)S
/F4 SF ( parameter takes effect only when the IPsec subsystem is restarted -- reboot or ipsec)S
0 268.2 M(setup restart.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M( 5.4 Using GDB on Pluto)S
468.652 0 M(100)S
GR
SP
%%Page: 101 130
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(Linux FreeS/WAN Compatibility Guide)S
11 FS/F4 SF 0 649.8 M(Much of this document is quoted directly from the Linux FreeS/WAN mailing list. Thanks very much to the)S
0 636.6 M(community of testers, patchers and commenters there, especially the ones quoted below but also various)S
0 623.4 M(contributors we haven't quoted.)S
17 FS/F9 SF 0 591 M(Implemented parts of the IPsec Specification)S
11 FS/F4 SF 0 563.4 M(In general, do not expect Linux FreeS/WAN to do everything yet. This is a work-in-progress and some parts)S
0 550.2 M(of the IPsec specification are not yet implemented.)S
14 FS/F9 SF 0 520.8 M(In Linux FreeS/WAN)S
11 FS/F4 SF 0 493.8 M(Things we do, as of version 1.96:)S
36 467.4 M(key management methods)S
/F6 SF 36 454.2 M(manually keyed)S
/F4 SF 72 441 M(using keys stored in /etc/ipsec.conf)S
/F6 SF 36 427.8 M(automatically keyed)S
/F4 SF 72 414.6 M(Automatically negotiating session keys as required. All connections are automatically)S
72 401.4 M(re-keyed periodically. The Pluto daemon implements this using the IKE protocol.)S
/Fc SF 28.19 467.4 M(\267 )S
/F4 SF 36 388.2 M(Methods of authenticating gateways for IKE)S
/F6 SF 36 375 M(shared secrets)S
/F4 SF 72 361.8 M(stored in ipsec.secrets\(5\))S
/F6 SF 36 348.6 M(RSA signatures)S
/F4 SF 72 335.4 M(For details, see pluto\(8\).)S
/F6 SF 36 322.2 M(looking up RSA authentication keys from DNS.)S
/F4 SF 72 309 M(Note that this technique cannot be fully secure until secure DNS is widely deployed.)S
/Fc SF 28.19 388.2 M(\267 )S
/F4 SF 36 295.8 M(groups for Diffie-Hellman key negotiation)S
/F6 SF 36 282.6 M(group 2, modp 1024-bit)S
36 269.4 M(group 5, modp 1536-bit)S
/F4 SF 72 256.2 M(We implement these two groups.)S
72 229.8 M(In negotiating a keying connection \(ISAKMP SA, Phase 1\) we propose both groups when we)S
72 216.6 M(are the initiator, and accept either when a peer proposes them. Once the keying connection is)S
72 203.4 M(made, we propose only the alternative agreed there for data connections \(IPsec SA's, Phase 2\))S
72 190.2 M(negotiated over that keying connection.)S
/Fc SF 28.19 295.8 M(\267 )S
/F4 SF 36 177 M(encryption transforms)S
/F6 SF 36 163.8 M(DES)S
/F4 SF 72 150.6 M(DES is in the source code since it is needed to implement 3DES, but single DES is not made)S
72 137.4 M(available to users because DES is insecure.)S
/F6 SF 36 124.2 M(Triple DES)S
/F4 SF 72 111 M(implemented, and used as the default encryption in Linux FreeS/WAN.)S
/Fc SF 28.19 177 M(\267 )S
/F4 SF 36 97.8 M(authentication transforms)S
/F6 SF 36 84.6 M(HMAC using MD5)S
/F4 SF 72 71.4 M(implemented, may be used in IKE or by by AH or ESP transforms.)S
/F6 SF 36 58.2 M(HMAC using SHA)S
/F4 SF 72 45 M(implemented, may be used in IKE or by AH or ESP transforms.)S
36 31.8 M(In negotiations, we propose both of these and accept either.)S
/Fc SF 28.19 97.8 M(\267 )S
/F8 SF 0 0 M(Linux FreeS/WAN Compatibility Guide)S
468.652 0 M(101)S
GR
SP
%%Page: 102 131
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(compression transforms)S
/F6 SF 36 673.8 M(IPComp)S
/F4 SF 72 660.6 M(IPComp as described in RFC 2393 was added for FreeS/WAN 1.6. Note that Pluto becomes)S
72 647.4 M(confused if you ask it to do IPComp when the kernel cannot.)S
/Fc SF 28.19 687 M(\267 )S
/F4 SF 0 621 M(All combinations of implemented transforms are supported. Note that some form of packet-level)S
/F7 SF 0 607.8 M(authentication is required whenever encryption is used)S
/F4 SF (. Without it, the encryption will not be secure.)S
14 FS/F9 SF 0 578.4 M(Deliberately omitted)S
11 FS/F4 SF 0 551.4 M(We do not implement everything in the RFCs because some of those things are insecure. See our discussions)S
0 538.2 M(of avoiding bogus security.)S
0 511.8 M(Things we deliberately omit which are required in the RFCs are:)S
36 485.4 M(null encryption \(to use ESP as an authentication-only service\))S
/Fc SF 28.19 485.4 M(\267 )S
/F4 SF 36 472.2 M(single DES)S
/Fc SF 28.19 472.2 M(\267 )S
/F4 SF 36 459 M(DH group 1, a 768-bit modp group)S
/Fc SF 28.19 459 M(\267 )S
/F4 SF 0 432.6 M(Since these are the only encryption algorithms and DH group the RFCs require, it is possible in theory to have)S
0 419.4 M(a standards-conforming implementation which will not interpoperate with FreeS/WAN. Such an)S
0 406.2 M(implementation would be inherently insecure, so we do not consider this a problem.)S
0 379.8 M(Anyway, most implementations sensibly include more secure options as well, so dropping null encryption,)S
0 366.6 M(single DES and Group 1 does not greatly hinder interoperation in practice.)S
0 340.2 M(We also do not implement some optional features allowed by the RFCs:)S
36 313.8 M(aggressive mode for negotiation of the keying channel or ISAKMP SA. This mode is a little faster)S
36 300.6 M(than main mode, but exposes more information to an eavesdropper.)S
/Fc SF 28.19 313.8 M(\267 )S
/F4 SF 0 274.2 M(In theory, this should cause no interoperation problems since all implementations are required to support the)S
0 261 M(more secure main mode, whether or not they also allow aggressive mode.)S
0 234.6 M(In practice, it does sometimes produce problems with implementations such as Windows 2000 where)S
0 221.4 M(aggressive mode is the default. Typically, these are easily solved with a configuration change that overrides)S
0 208.2 M(that default.)S
14 FS/F9 SF 0 178.8 M(Not \(yet\) in Linux FreeS/WAN)S
11 FS/F4 SF 0 151.8 M(Things we don't yet do, as of version 1.96:)S
36 125.4 M(key management methods)S
72 112.2 M(authenticate key negotiations via local PKI server, but see links to user patches)S
/Fc SF 60.967 112.2 M(\250 )S
/F4 SF 72 99 M(authenticate key negotiations via secure DNS)S
/Fc SF 60.967 99 M(\250 )S
/F4 SF 72 85.8 M(unauthenticated key management, using Diffie-Hellman key agreement protocol without)S
72 72.6 M(authentication. Arguably, this would be worth doing since it is secure against all passive)S
72 59.4 M(attacks. On the other hand, it is vulnerable to an active man-in-the-middle attack.)S
/Fc SF 60.967 85.8 M(\250 )S
28.19 125.4 M(\267 )S
/F4 SF 36 46.2 M(encryption transforms)S
/Fc SF 28.19 46.2 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Deliberately omitted)S
468.652 0 M(102)S
GR
SP
%%Page: 103 132
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(Currently Triple DES is the only encryption method Pluto will negotiate.)S
36 660.6 M(No additional encryption transforms are implemented, though the RFCs allow them and some other)S
36 647.4 M(IPsec implementations support various of them. We are not eager to add more. See this FAQ question.)S
36 621 M(AES, the successor to the DES standard, is an excellent candidate for inclusion in FreeS/WAN, see)S
36 607.8 M(links to user patches.)S
36 594.6 M(authentication transforms)S
36 568.2 M(No optional additional authentication transforms are currently implemented. Likely SHA-256,)S
36 555 M(SHA-384 and SHA-512 will be added when AES is.)S
/Fc SF 28.19 594.6 M(\267 )S
/F4 SF 36 541.8 M(Policy checking on decrypted packets)S
36 515.4 M(To fully comply with the RFCs, it is not enough just to accept only packets which survive any firewall)S
36 502.2 M(rules in place to limit what IPsec packets get in, and then pass KLIPS authentication. That is what)S
36 489 M(FreeS/WAN currently does.)S
36 462.6 M(We should also apply additional tests, for example ensuring that all packets emerging from a)S
36 449.4 M(particular tunnel have source and destination addresses that fall within the subnets defined for that)S
36 436.2 M(tunnel, and that packets with those addresses that did not emerge from the appropriate tunnel are)S
36 423 M(disallowed.)S
36 396.6 M(This will be done as part of a KLIPS rewrite. See these links and the design mailing list for)S
36 383.4 M(discussion.)S
/Fc SF 28.19 541.8 M(\267 )S
17 FS/F9 SF 0 351 M(Our PF-Key implementation)S
11 FS/F4 SF 0 323.4 M(We use PF-key Version Two for communication between the KLIPS kernel code and the Pluto Daemon.)S
0 310.2 M(PF-Key v2 is defined by RFC 2367.)S
0 283.8 M(The "PF" stands for Protocol Family. PF-Inet defines a kernel/userspace interface for the TCP/IP Internet)S
0 270.6 M(protocols \(TCP/IP\), and other members of the PF series handle Netware, Appletalk, etc. PF-Key is just a PF)S
0 257.4 M(for key-related matters.)S
14 FS/F9 SF 0 228 M(PF-Key portability)S
11 FS/F4 SF 0 201 M(PF-Key came out of Berkeley Unix work and is used in the various BSD IPsec implementations, and in)S
0 187.8 M(Solaris. This means there is some hope of porting our Pluto\(8\) to one of the BSD distributions, or of running)S
0 174.6 M(their photurisd\(8\) on Linux if you prefer Photuris key management over IKE.)S
0 148.2 M(It is, however, more complex than that. The PK-Key RFC deliberately deals only with keying, not policy)S
0 135 M(management. The three PF-Key implementations we have looked at -- ours, OpenBSD and KAME -- all)S
0 121.8 M(have extensions to deal with security policy, and the extensions are different. There have been discussions)S
0 108.6 M(aimed at sorting out the differences, perhaps for a version three PF-Key spec. All players are in favour of this,)S
0 95.4 M(but everyone involved is busy and it is not clear whether or when these discussions might bear fruit.)S
17 FS/F9 SF 0 63 M(Kernels other than the latest 2.2.x and 2.4.y)S
11 FS/F4 SF 0 35.4 M(We develop and test on Redhat Linux using the most recent kernel in the 2.2 and 2.4 series. In general, we)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Our PF-Key implementation)S
468.652 0 M(103)S
GR
SP
%%Page: 104 133
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(recommend you use the latest kernel in one of those series. Complications and caveats are discussed below.)S
14 FS/F9 SF 0 657.6 M(2.0.x kernels)S
11 FS/F4 SF 0 630.6 M(Consider upgrading to the 2.2 kernel series. If you want to stay with the 2.0 series, then we strongly)S
0 617.4 M(recommend 2.0.39. Some useful security patches were added in 2.0.38.)S
0 591 M(Various versions of the code have run at various times on most 2.0.xx kernels, but the current version is only)S
0 577.8 M(lightly tested on 2.0.39, and not at all on older kernels.)S
0 551.4 M(Some of our patches for older kernels are shipped in 2.0.37 and later, so they are no longer provided in)S
0 538.2 M(FreeS/WAN. This means recent versions of FreeS/WAN will probably not compile on anything earlier than)S
0 525 M(2.0.37.)S
14 FS/F9 SF 0 495.6 M(2.2 and 2.4 kernels)S
11 FS/F6 SF 0 468.6 M(FreeS/WAN 1.0)S
/F4 SF 36 455.4 M(ran only on 2.0 kernels)S
/F6 SF 0 442.2 M(FreeS/WAN 1.1 to 1.8)S
/F4 SF 36 429 M(ran on 2.0 or 2.2 kernels)S
36 415.8 M(ran on some development kernels, 2.3 or 2.4-test)S
/F6 SF 0 402.6 M(FreeS/WAN 1.9 to 1.96)S
/F4 SF 36 389.4 M(runs on 2.0, 2.2 or 2.4 kernels)S
0 363 M(In general,)S
/F7 SF ( we suggest the latest 2.2 kernel or 2.4 for production use)S
/F4 SF (.)S
0 336.6 M(Of course no release can be guaranteed to run on kernels more recent than it is, so quite often there will be no)S
0 323.4 M(stable FreeS/WAN for the absolute latest kernel. See the FAQ for discussion.)S
17 FS/F9 SF 0 291 M(Intel Linux distributions other than Redhat)S
11 FS/F4 SF 0 263.4 M(We develop and test on Redhat 6.1 for 2.2 kernels, and on Redhat 7.1 or 7.2 for 2.4, so minor changes may be)S
0 250.2 M(required for other distributions.)S
14 FS/F9 SF 0 220.8 M(Redhat 7.0)S
11 FS/F4 SF 0 193.8 M(There are some problems with FreeS/WAN on Redhat 7.0. They are soluble, but we recommend you upgrade)S
0 180.6 M(to a later Redhat instead..)S
0 154.2 M(Redhat 7 ships with two compilers.)S
36 127.8 M(Their)S
/Fa SF ( gcc)S
/F4 SF ( is version 2.96. Various people, including the GNU compiler developers and Linus, have)S
36 114.6 M(said fairly emphatically that using this was a mistake. 2.96 is a development version, not intended for)S
36 101.4 M(production use. In particular, it will not compile a Linux kernel.)S
/Fc SF 28.19 127.8 M(\267 )S
/F4 SF 36 88.2 M(Redhat therefore also ship a separate compiler, which they call)S
/Fa SF ( kgcc)S
/F4 SF (, for compiling kernels.)S
/Fc SF 28.19 88.2 M(\267 )S
/F4 SF 0 61.8 M(Kernel Makefiles have)S
/Fa SF ( gcc)S
/F4 SF ( as a default, and must be adjusted to use)S
/Fa SF ( kgcc)S
/F4 SF ( before a kernel will compile on 7.0.)S
0 48.6 M(This mailing list message gives details:)S
9 FS/F0 SF 0 24.2 M(Subject: Re: AW: Installing IPsec on Redhat 7.0)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(2.0.x kernels)S
468.652 0 M(104)S
GR
SP
%%Page: 105 134
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(   Date: Thu, 1 Feb 2001 14:32:52 -0200 \(BRST\))S
0 678.2 M(  From: Mads Rasmussen <mads@cit.com.br>)S
0 656.6 M(> From www.redhat.com/support/docs/gotchas/7.0/gotchas-7-6.html#ss6.1)S
0 635 M(cd to /usr/src/linux and open the Makefile in your favorite editor. You)S
0 624.2 M(will need to look for a line similar to this:)S
0 602.6 M(CC = $\(CROSS_COMPILE\)gcc -D__KERNEL__ -I$\(HPATH\))S
0 581 M(This line specifies which C compiler to use to build the kernel. It should)S
0 570.2 M(be changed to:)S
0 548.6 M(CC = $\(CROSS_COMPILE\)kgcc -D__KERNEL__ -I$\(HPATH\))S
0 527 M(for Red Hat Linux 7. The kgcc compiler is egcs 2.91.66. From here you can)S
0 516.2 M(proceed with the typical compiling steps.)S
11 FS/F4 SF 0 490.2 M(Check the mailing list archive for more recent news.)S
14 FS/F9 SF 0 460.8 M(SuSE Linux)S
11 FS/F4 SF 0 433.8 M(SuSE 6.3 and later versions, at least in Europe, ship with FreeS/WAN included.)S
0 407.4 M(FreeS/WAN packages distributed for SuSE 7.0-7.2 were somehow miscompiled. You can find fixed)S
0 394.2 M(packages on Kurt Garloff's page.)S
0 367.8 M(Here are some notes for an earlier SuSE version.)S
/F9 SF 0 341.4 M(SuSE Linux 5.3)S
9 FS/F0 SF 0 317 M(Date: Mon, 30 Nov 1998)S
0 306.2 M(From: Peter Onion <ponion@srd.bt.co.uk>)S
0 284.6 M(... I got Saturdays snapshot working between my two SUSE5.3 machines at home.)S
0 263 M(The mods to the install process are quite simple.  From memory and looking at)S
0 252.2 M(the files on the SUSE53 machine here at work....)S
0 230.6 M(And extra link in each of the /etc/init.d/rc?.d directories called K35ipsec)S
0 219.8 M(which SUSE use to shut a service down.)S
0 198.2 M(A few mods in /etc/init.d/ipsec  to cope with the different places that SUSE)S
0 187.4 M(put config info, and remove the inculsion of /etc/rc.d/init.d/functions and .)S
0 176.6 M(/etc/sysconfig/network as they don't exists and 1st one isn't needed anyway.)S
0 155 M(insert ". /etc/rc.config" to pick up the SUSE config info and use )S
0 133.4 M(  if test -n "$NETCONFIG" -a "$NETCONFIG" != "YAST_ASK" ; then)S
0 111.8 M(to replace )S
0 90.2 M(  [ ${NETWORKING} = "no" ] && exit 0)S
0 68.6 M(Create /etc/sysconfig  as SUSE doesn't have one.)S
0 47 M(I think that was all \(but I prob forgot something\)....)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(SuSE Linux)S
468.652 0 M(105)S
GR
SP
%%Page: 106 135
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(You may also need to fiddle initialisation scripts to ensure that)S
/Fa SF ( /var/run/pluto.pid)S
/F4 SF ( is removed when rebooting.)S
0 673.8 M(If this file is present, Pluto does not come up correctly.)S
14 FS/F9 SF 0 644.4 M(Slackware)S
9 FS/F0 SF 0 619.4 M(Subject: Re: linux-IPsec: Slackware distribution)S
0 608.6 M(  Date:  Thu, 15 Apr 1999 12:07:01 -0700)S
0 597.8 M(  From:  Evan Brewer <dmessiah@silcon.com>)S
0 576.2 M(> Very shortly, I will be needing to install IPsec on at least gateways that)S
0 565.4 M(> are running Slackware. . . .)S
0 543.8 M(The only trick to getting it up is that on the slackware dist there is no)S
0 533 M(init.d directory in /etc/rc.d .. so create one.  Then, what I do is take the)S
0 522.2 M(IPsec startup script which normally gets put into the init.d directory, and)S
0 511.4 M(put it in /etc/rc.d and name ir rc.ipsec .. then I symlink it to the file)S
0 500.6 M(in init.d.  The only file in the dist you need to really edit is the)S
0 489.8 M(utils/Makefile, setup4:)S
0 468.2 M(Everything else should be just fine.)S
11 FS/F4 SF 0 442.2 M(A year or so later:)S
9 FS/F0 SF 0 417.8 M(Subject: Re: HTML Docs- Need some cleanup?)S
0 407 M(   Date: Mon, 8 Jan 2001)S
0 396.2 M(   From: Jody McIntyre <jodym@oeone.com>)S
0 374.6 M(I have successfully installed FreeS/WAN on several Slackware 7.1 machines.)S
0 363.8 M(FreeS/WAN installed its rc.ipsec file in /etc/rc.d.  I had to manually call)S
0 353 M(this script from rc.inet2.  This seems to be an easier method than Evan)S
0 342.2 M(Brewer's.)S
14 FS/F9 SF 0 313.2 M(Debian)S
11 FS/F4 SF 0 286.2 M(A recent \(Nov 2001\) mailing list points to a web page on setting up several types of tunnel, including IPsec,)S
0 273 M(on Debian.)S
0 246.6 M(Some older information:)S
9 FS/F0 SF 0 222.2 M(Subject: FreeS/WAN 1.0 on Debian 2.1)S
0 211.4 M(   Date: Tue, 20 Apr 1999)S
0 200.6 M(  From:  Tim Miller <cerebus+counterpane@haybaler.sackheads.org>)S
0 179 M(        Compiled and installed without error on a Debian 2.1 system)S
0 168.2 M(with kernel-source-2.0.36 after pointing RCDIR in utils/Makefile to)S
0 157.4 M(/etc/init.d.)S
0 135.8 M(        /var/lock/subsys/ doesn't exist on Debian boxen, needs to be)S
0 125 M(created; not a fatal error.)S
0 103.4 M(        Finally, IPsec scripts appear to be dependant on GNU awk)S
0 92.6 M(\(gawk\); the default Debian awk \(mawk-1.3.3-2\) had fatal difficulties.)S
0 81.8 M(With gawk installed and /etc/alternatives/awk linked to /usr/bin/gawk)S
0 71 M(operation appears flawless.)S
11 FS/F4 SF 0 45 M(The scripts in question have been modified since this was posted. Awk versions should no longer be a)S
0 31.8 M(problem.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Slackware)S
468.652 0 M(106)S
GR
SP
%%Page: 107 136
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(Caldera)S
9 FS/F0 SF 0 659 M(Subject: Re: HTML Docs- Need some cleanup?)S
0 648.2 M(   Date: Mon, 08 Jan 2001)S
0 637.4 M(   From: Andy Bradford <andyb@calderasystems.com>)S
0 615.8 M(On Sun, 07 Jan 2001 22:59:05 EST, Sandy Harris wrote:)S
0 594.2 M(>     Intel Linux distributions other than Redhat 5.x and 6.x )S
0 583.4 M(>         Redhat 7.0 )S
0 572.6 M(>         SuSE Linux )S
0 561.8 M(>             SuSE Linux 5.3 )S
0 551 M(>         Slackware )S
0 540.2 M(>         Debian )S
0 518.6 M(Can you please include Caldera in this list?  I have tested it since )S
0 507.8 M(FreeS/Wan 1.1 and it works great with our systems---provided one )S
0 497 M(follows the FreeS/Wan documentation. :-\))S
0 475.4 M(Thank you,)S
0 464.6 M(Andy)S
17 FS/F9 SF 0 432.6 M(CPUs other than Intel)S
11 FS/F4 SF 0 405 M(FreeS/WAN has been run sucessfully on a number of different CPU architectures. If you have tried it on one)S
0 391.8 M(not listed here, please post to the mailing list.)S
14 FS/F9 SF 0 362.4 M(Corel Netwinder \(StrongARM CPU\))S
9 FS/F0 SF 0 337.4 M(Subject: linux-ipsec: Netwinder diffs)S
0 326.6 M(Date: Wed, 06 Jan 1999)S
0 315.8 M(From: rhatfield@plaintree.com)S
0 294.2 M(I had a mistake in my IPsec-auto, so I got things working this morning.)S
0 272.6 M(Following are the diffs for my changes.  Probably not the best and cleanest way )S
0 261.8 M(of doing it, but it works. . . . )S
11 FS/F4 SF 0 235.8 M(These diffs are in the 0.92 and later distributions, so these should work out-of-the-box on Netwinder.)S
14 FS/F9 SF 0 206.4 M(Yellow Dog Linux on Power PC)S
9 FS/F0 SF 0 181.4 M(Subject:  Compiling FreeS/WAN 1.1 on YellowDog Linux \(PPC\))S
0 170.6 M(   Date:  11 Dec 1999)S
0 159.8 M(   From:  Darron Froese <darron@fudgehead.com>)S
0 138.2 M(I'm summarizing here for the record - because it's taken me many hours to do)S
0 127.4 M(this \(multiple times\) and because I want to see IPsec on more linuxes than)S
0 116.6 M(just x86.)S
0 95 M(Also, I can't remember if I actually did summarize it before... ;-\) I'm)S
0 84.2 M(working too many late hours.)S
0 62.6 M(That said - here goes.)S
0 41 M(1. Get your linux kernel and unpack into /usr/src/linux/ - I used 2.2.13.)S
0 30.2 M(<http://www.kernel.org/pub/linux/kernel/v2.2/linux-2.2.13.tar.bz2>)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Caldera)S
468.652 0 M(107)S
GR
SP
%%Page: 108 137
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 678.2 M(2. Get FreeS/WAN and unpack into /usr/src/freeswan-1.1)S
0 667.4 M(<ftp://ftp.xs4all.nl/pub/crypto/freeswan/freeswan-1.1.tar.gz>)S
0 645.8 M(3. Get the gmp src rpm from here:)S
0 635 M(<ftp://ftp.yellowdoglinux.com//pub/yellowdog/champion-1.1/SRPMS/SRPMS/gmp-2.0.2-9a.src.rpm>)S
0 613.4 M(4. Su to root and do this: rpm --rebuild gmp-2.0.2-9a.src.rpm)S
0 591.8 M(You will see a lot of text fly by and when you start to see the rpm)S
0 581 M(recompiling like this:)S
0 559.4 M(Executing: %build)S
0 548.6 M(+ umask 022)S
0 537.8 M(+ cd /usr/src/redhat/BUILD)S
0 527 M(+ cd gmp-2.0.2)S
0 516.2 M(+ libtoolize --copy --force)S
0 505.4 M(Remember to add `AM_PROG_LIBTOOL' to `configure.in'.)S
0 494.6 M(You should add the contents of `/usr/share/aclocal/libtool.m4' to)S
0 483.8 M(`aclocal.m4'.)S
0 473 M(+ CFLAGS=-O2 -fsigned-char)S
0 462.2 M(+ ./configure --prefix=/usr)S
0 440.6 M(Hit Control-C to stop the rebuild. NOTE: We're doing this because for some)S
0 429.8 M(reason the gmp source provided with FreeS/WAN 1.1 won't build properly on)S
0 419 M(ydl.)S
0 397.4 M(cd /usr/src/redhat/BUILD/)S
0 386.6 M(cp -ar gmp-2.0.2 /usr/src/freeswan-1.1/)S
0 375.8 M(cd /usr/src/freeswan-1.1/)S
0 365 M(rm -rf gmp)S
0 354.2 M(mv gmp-2.0.2 gmp)S
0 332.6 M(5. Open the freeswan Makefile and change the line that says:)S
0 321.8 M(KERNEL=$\(b\)zimage \(or something like that\) to)S
0 311 M(KERNEL=vmlinux)S
0 289.4 M(6. cd ../linux/)S
0 267.8 M(7. make menuconfig)S
0 257 M(Select an option or two and then exit - saving your changes.)S
0 235.4 M(8. cd ../freeswan-1.1/ ; make menugo)S
0 213.8 M(That will start the whole process going - once that's finished compiling,)S
0 203 M(you have to install your new kernel and reboot.)S
0 181.4 M(That should build FreeS/WAN on ydl \(I tried it on 1.1\).)S
11 FS/F4 SF 0 155.4 M(And a later message on the same topic:)S
9 FS/F0 SF 0 131 M(Subject: Re: FreeS/WAN, PGPnet and E-mail)S
0 120.2 M(   Date: Sat, 22 Jan 2000)S
0 109.4 M(   From: Darron Froese <darron@fudgehead.com>)S
0 87.8 M(on 1/22/00 6:47 PM, Philip Trauring at philip@trauring.com wrote:)S
0 66.2 M(> I have a PowerMac G3 ...)S
0 44.6 M(The PowerMac G3 can run YDL 1.1 just fine. It should also be able to run)S
0 33.8 M(FreeS/WAN 1.2patch1 with a couple minor modifications:)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Caldera)S
468.652 0 M(108)S
GR
SP
%%Page: 109 138
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(1. In the Makefile it specifies a bzimage for the kernel compile - you have)S
0 678.2 M(to change that to vmlinux for the PPC.)S
0 656.6 M(2. The gmp source that comes with FreeS/WAN \(for whatever reason\) fails to)S
0 645.8 M(compile. I have gotten around this by getting the gmp src rpm from here:)S
0 624.2 M(ftp://ftp.yellowdoglinux.com//pub/yellowdog/champion-1.1/SRPMS/SRPMS/gmp-2.0.2-9a.src.rpm)S
0 602.6 M(If you rip the source out of there - and place it where the gmp source)S
0 591.8 M(resides it will compile just fine.)S
11 FS/F4 SF 0 565.8 M(FreeS/WAN no longer includes GMP source.)S
14 FS/F9 SF 0 536.4 M(Mklinux)S
11 FS/F4 SF 0 509.4 M(One user reports success on the Mach-based)S
/F7 SF ( m)S
/F4 SF (icro)S
/F7 SF (k)S
/F4 SF (ernel Linux.)S
9 FS/F0 SF 0 485 M(Subject: Smiles on sparc and ppc)S
0 474.2 M(   Date: Fri, 10 Mar 2000)S
0 463.4 M(   From: Jake Hill <jah@alien.bt.co.uk>)S
0 441.8 M(You may or may not be interested to know that I have successfully built)S
0 431 M(FreeS/WAN on a number of non intel alpha architectures; namely on ppc)S
0 420.2 M(and sparc and also on osfmach3/ppc \(MkLinux\). I can report that it just)S
0 409.4 M(works, mostly, with few changes.)S
14 FS/F9 SF 0 380.4 M(Alpha 64-bit processors)S
9 FS/F0 SF 0 355.4 M(Subject: IT WORKS \(again\) between intel & alpha :-\)\)\)\)\))S
0 344.6 M(   Date: Fri, 29 Jan 1999)S
0 333.8 M(   From: Peter Onion <ponion@srd.bt.co.uk>)S
0 312.2 M(Well I'm happy to report that I've got an IPsec connection between by intel & alpha machines again :-\)\))S
0 290.6 M(If you look back on this list to 7th of December I wrote...)S
0 269 M(-On 07-Dec-98 Peter Onion wrote:)S
0 258.2 M(-> )S
0 247.4 M(-> I've about had enuf of wandering around inside the kernel trying to find out)S
0 236.6 M(-> just what is corrupting outgoing packets...)S
0 225.8 M(-)S
0 215 M(-Its 7:30 in the evening .....)S
0 204.2 M(-)S
0 193.4 M(-I FIXED IT  :-\)\)\)\)\)\)\)\)\)\)\)\)\)\)\)\)\)\)\)\)\)\)\)\)\)\)\)\)\)\)\)\))S
0 182.6 M(-)S
0 171.8 M(-It was my own fault :-\(\(\(\(\(\(\(\(\(\(\(\(\(\(\(\(\(\()S
0 161 M(-)S
0 150.2 M(-If you ask me very nicly I'll tell you where I was a little too over keen to)S
0 139.4 M(-change unsigned long int __u32 :-\)  OPSE ...)S
0 128.6 M(-)S
0 117.8 M(-So tomorrow it will full steam ahead to produce a set of diffs/patches against)S
0 107 M(-0.91 )S
0 96.2 M(-)S
0 85.4 M(-Peter Onion.)S
11 FS/F4 SF 0 59.4 M(In general \(there have been some glitches\), FreeS/WAN has been running on Alphas since then.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Mklinux)S
468.652 0 M(109)S
GR
SP
%%Page: 110 139
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(Sun SPARC processors)S
11 FS/F4 SF 0 657 M(Several users have reported success with FreeS/WAN on SPARC Linux. Here is one mailing list message:)S
9 FS/F0 SF 0 632.6 M(Subject: Smiles on sparc and ppc)S
0 621.8 M(   Date: Fri, 10 Mar 2000)S
0 611 M(   From: Jake Hill <jah@alien.bt.co.uk>)S
0 589.4 M(You may or may not be interested to know that I have successfully built)S
0 578.6 M(FreeS/WAN on a number of non intel alpha architectures; namely on ppc)S
0 567.8 M(and sparc and also on osfmach3/ppc \(MkLinux\). I can report that it just)S
0 557 M(works, mostly, with few changes.)S
0 535.4 M(I have a question, before I make up some patches. I need to hack)S
0 524.6 M(gmp/mpn/powerpc32/*.s to build them. Is this ok? The changes are)S
0 513.8 M(trivial, but could I also use a different version of gmp? Is it vanilla)S
0 503 M(here?)S
0 481.4 M(I guess my only real headache is from ipchains, which appears to stop)S
0 470.6 M(running when IPsec has been started for a while. This is with 2.2.14 on)S
0 459.8 M(sparc.)S
11 FS/F4 SF 0 433.8 M(This message, from a different mailing list, may be relevant for anyone working with FreeS/WAN on Suns:)S
9 FS/F0 SF 0 409.4 M(Subject: UltraSPARC DES assembler)S
0 398.6 M(   Date: Thu, 13 Apr 2000)S
0 387.8 M(   From: svolaf@inet.uni2.dk \(Svend Olaf Mikkelsen\))S
0 377 M(     To: coderpunks@toad.com)S
0 355.4 M(An UltraSPARC assembler version of the LibDES/SSLeay/OpenSSL des_enc.c)S
0 344.6 M(file is available at http://inet.uni2.dk/~svolaf/des.htm.)S
0 323 M(This brings DES on UltraSPARC from slower than Pentium at the same)S
0 312.2 M(clock speed to significantly faster.)S
14 FS/F9 SF 0 283.2 M(MIPS processors)S
11 FS/F4 SF 0 256.2 M(We know FreeS/WAN runs on at least some MIPS processors because Lasat manufacture an IPsec box based)S
0 243 M(on an embedded MIPS running Linux with FreeS/WAN. We have no details.)S
14 FS/F9 SF 0 213.6 M(Transmeta Crusoe)S
11 FS/F4 SF 0 186.6 M(The Merilus Firecard, a Linux firewall on a PCI card, is based on a Crusoe processor and supports)S
0 173.4 M(FreeS/WAN.)S
14 FS/F9 SF 0 144 M(Motorola Coldfire)S
9 FS/F0 SF 0 119 M(Subject: Re: Crypto hardware support)S
0 108.2 M(   Date: Mon, 03 Jul 2000)S
0 97.4 M(   From: Dan DeVault <devault@tampabay.rr.com>)S
0 75.8 M(.... I have been running)S
0 65 M(uClinux with FreeS/WAN 1.4 on a system built by Moreton Bay  \()S
0 54.2 M(http://www.moretonbay.com \)  and it was using a Coldfire processor)S
0 43.4 M(and was able to do the Triple DES encryption at just about)S
0 32.6 M(1 mbit / sec rate.......  they put a Hi/Fn 7901 hardware encryption)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Sun SPARC processors)S
468.652 0 M(110)S
GR
SP
%%Page: 111 140
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(chip on their board and now their system does over 25 mbit of 3DES)S
0 678.2 M(encryption........ pretty significant increase if you ask me.)S
17 FS/F9 SF 0 646.2 M(Multiprocessor machines)S
11 FS/F4 SF 0 618.6 M(FreeS/WAN is designed to work on SMP \(symmetric multi-processing\) Linux machines and is regularly)S
0 605.4 M(tested on dual processor x86 machines.)S
0 579 M(We do not know of any testing on multi-processor machines with other CPU architectures or with more than)S
0 565.8 M(two CPUs. Anyone who does test this, please report results to the mailing list.)S
0 539.4 M(The current design does not make particularly efficient use of multiprocessor machines; some of the kernel)S
0 526.2 M(work is single-threaded.)S
17 FS/F9 SF 0 493.8 M(Support for crypto hardware)S
11 FS/F4 SF 0 466.2 M(Supporting hardware cryptography accelerators has not been a high priority for the development team because)S
0 453 M(it raises a number of fairly complex issues:)S
36 426.6 M(Can you trust the hardware? If it is not Open Source, how do you audit its security? Even if it is, how)S
36 413.4 M(do you check that the design has no concealed traps?)S
/Fc SF 28.19 426.6 M(\267 )S
/F4 SF 36 400.2 M(If an interface is added for such hardware, can that interface be subverted or misused?)S
/Fc SF 28.19 400.2 M(\267 )S
/F4 SF 36 387 M(Is hardware acceleration actually a performance win? It clearly is in many cases, but on a fast)S
36 373.8 M(machine it might be better to use the CPU for the encryption than to pay the overheads of moving data)S
36 360.6 M(to and from a crypto board.)S
/Fc SF 28.19 387 M(\267 )S
/F4 SF 36 347.4 M(the current KLIPS code does not provide a clean interface for hardware accelerators)S
/Fc SF 28.19 347.4 M(\267 )S
/F4 SF 0 321 M(That said, we have a report of FreeS/WAN working with one crypto accelerator and some work is going on to)S
0 307.8 M(modify KLIPS to create a clean generic interface to such products. See this web page for some of the design)S
0 294.6 M(discussion.)S
0 268.2 M(More recently, a patch to support some hardware accelerators has been posted:)S
9 FS/F0 SF 0 243.8 M(Subject: [Design] [PATCH] H/W acceleration patch)S
0 233 M(   Date: Tue, 18 Sep 2001)S
0 222.2 M(   From: "Martin Gadbois" <martin.gadbois@colubris.com>)S
0 200.6 M(Finally!!)S
0 189.8 M(Here's a web site with H/W acceleration patch for FreeS/WAN 1.91, including)S
0 179 M(S/W and Hifn 7901 crypto support.)S
0 157.4 M(http://sources.colubris.com/)S
0 135.8 M(Martin Gadbois)S
11 FS/F4 SF 0 109.8 M(Hardware accelerators could take performance well beyond what FreeS/WAN can do in software \(discussed)S
0 96.6 M(here\). Here is some discussion off the IETF IPsec list, October 2001:)S
9 FS/F0 SF 0 72.2 M( ... Currently shipping chips deliver, 600 mbps throughput on a single)S
0 61.4 M( stream of 3DES IPsec traffic.  There are also chips that use multiple)S
0 50.6 M( cores to do 2.4 gbps.  We \(Cavium\) and others have announced even faster)S
0 39.8 M( chips. ... Mid 2002 versions will handle at line rate \(OC48 and OC192\))S
0 29 M( IPsec and SSL/TLS traffic not only 3DES CBC but also AES and arc4.)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Multiprocessor machines)S
468.652 0 M(111)S
GR
SP
%%Page: 112 141
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(The patches to date support chips that have been in production for some time, not the state-of-the-art)S
0 673.8 M(latest-and-greatest devices described in that post. However, they may still outperform software and they)S
0 660.6 M(almost certainly reduce CPU overhead.)S
17 FS/F9 SF 0 628.2 M(IP version 6 \(IPng\))S
11 FS/F4 SF 0 600.6 M(The Internet currently runs on version four of the IP protocols. IPv4 is what is in the standard Linux IP stack,)S
0 587.4 M(and what FreeS/WAN was built for. In IPv4, IPsec is an optional feature.)S
0 561 M(The next version of the IP protocol suite is version six, usually abbreviated either as "IPv6" or as "IPng" for)S
0 547.8 M("IP: the next generation". For IPv6, IPsec is a required feature. Any machine doing IPv6 is required to support)S
0 534.6 M(IPsec, much as any machine doing \(any version of\) IP is required to support ICMP.)S
0 508.2 M(There is a Linux implementation of IPv6 in Linux kernels 2.2 and above. For details, see the FAQ. It does not)S
0 495 M(yet support IPsec. The USAGI project are also working on IPv6 for Linux.)S
0 468.6 M(FreeS/WAN was originally built for the current standard, IPv4, but we are interested in seeing it work with)S
0 455.4 M(IPv6. Some progress has been made, and a patched version with IPv6 support is available. For more recent)S
0 442.2 M(information, check the mailing list.)S
14 FS/F9 SF 0 412.8 M(IPv6 background)S
11 FS/F4 SF 0 385.8 M(IPv6 has been specified by an IETF working group. The group's page lists over 30 RFCs to date, and many)S
0 372.6 M(Internet Drafts as well. The overview is RFC 2460. Major features include:)S
36 346.2 M(expansion of the address space from 32 to 128 bits,)S
/Fc SF 28.19 346.2 M(\267 )S
/F4 SF 36 333 M(changes to improve support for)S
72 319.8 M(mobile IP)S
/Fc SF 60.967 319.8 M(\250 )S
/F4 SF 72 306.6 M(automatic network configuration)S
/Fc SF 60.967 306.6 M(\250 )S
/F4 SF 72 293.4 M(quality of service routing)S
/Fc SF 60.967 293.4 M(\250 )S
/F4 SF 72 280.2 M(...)S
/Fc SF 60.967 280.2 M(\250 )S
28.19 333 M(\267 )S
/F4 SF 36 267 M(improved security via IPsec)S
/Fc SF 28.19 267 M(\267 )S
/F4 SF 0 240.6 M(A number of projects are working on IPv6 implementation. A prominent Open Source effort is KAME, a)S
0 227.4 M(collaboration among several large Japanese companies to implement IPv6 for Berkeley Unix. Other major)S
0 214.2 M(players are also working on IPv6. For example, see pages at:)S
36 187.8 M(Sun)S
/Fc SF 28.19 187.8 M(\267 )S
/F4 SF 36 174.6 M(Cisco)S
/Fc SF 28.19 174.6 M(\267 )S
/F4 SF 36 161.4 M(Microsoft)S
/Fc SF 28.19 161.4 M(\267 )S
/F4 SF 0 135 M(The 6bone \(IPv6 backbone\) testbed network has been up for some time. There is an active IPv6 user group.)S
0 108.6 M(One of the design goals for IPv6 was that it must be possible to convert from v4 to v6 via a gradual transition)S
0 95.4 M(process. Imagine the mess if there were a "flag day" after which the entire Internet used v6, and all software)S
0 82.2 M(designed for v4 stopped working. Almost every computer on the planet would need major software changes!)S
0 69 M(There would be huge costs to replace older equipment. Implementers would be worked to death before "the)S
0 55.8 M(day", systems administrators and technical support would be completely swamped after it. The bugs in every)S
0 42.6 M(implementation would all bite simultaneously. Large chunks of the net would almost certainly be down for)S
0 29.4 M(substantial time periods. ...)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(IP version 6 \(IPng\))S
468.652 0 M(112)S
GR
SP
%%Page: 113 142
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(Fortunately, the design avoids any "flag day". It is therefore a little tricky to tell how quickly IPv6 will take)S
0 673.8 M(over. The transition has certainly begun. For examples, see announcements from NTT and Nokia. However, it)S
0 660.6 M(is not yet clear how quickly the process will gain momentum, or when it will be completed. Likely large parts)S
0 647.4 M(of the Internet will remain with IPv4 for years to come.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(IP version 6 \(IPng\))S
468.652 0 M(113)S
GR
SP
%%Page: 114 143
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
0 548 M 127.4 0.7 F
0 518.735 M 0.7 30.0 F
126.674 518.735 M 0.7 30.0 F
0 518.735 M 127.4 0.7 F
126.674 548 M 270.1 0.7 F
126.674 518.735 M 0.7 30.0 F
396.062 518.735 M 0.7 30.0 F
126.674 518.735 M 270.1 0.7 F
396.062 548 M 63.5 0.7 F
396.062 518.735 M 0.7 30.0 F
458.813 518.735 M 0.7 30.0 F
396.062 518.735 M 63.5 0.7 F
458.813 548 M 28.9 0.7 F
458.813 518.735 M 0.7 30.0 F
487 518.735 M 0.7 30.0 F
458.813 518.735 M 28.9 0.7 F
0 518.735 M 127.4 0.7 F
0 483.47 M 0.7 36.0 F
126.674 483.47 M 0.7 36.0 F
0 483.47 M 127.4 0.7 F
126.674 518.735 M 52.2 0.7 F
126.674 483.47 M 0.7 36.0 F
178.136 483.47 M 0.7 36.0 F
126.674 483.47 M 52.2 0.7 F
178.136 518.735 M 54.5 0.7 F
178.136 483.47 M 0.7 36.0 F
231.953 483.47 M 0.7 36.0 F
178.136 483.47 M 54.5 0.7 F
231.953 518.735 M 53.4 0.7 F
231.953 483.47 M 0.7 36.0 F
284.622 483.47 M 0.7 36.0 F
231.953 483.47 M 53.4 0.7 F
284.622 518.735 M 74.8 0.7 F
284.622 483.47 M 0.7 36.0 F
358.712 483.47 M 0.7 36.0 F
284.622 483.47 M 74.8 0.7 F
358.712 518.735 M 38.1 0.7 F
358.712 483.47 M 0.7 36.0 F
396.062 483.47 M 0.7 36.0 F
358.712 483.47 M 38.1 0.7 F
396.062 518.735 M 63.5 0.7 F
396.062 483.47 M 0.7 36.0 F
458.813 483.47 M 0.7 36.0 F
396.062 483.47 M 63.5 0.7 F
458.813 518.735 M 28.9 0.7 F
458.813 483.47 M 0.7 36.0 F
487 483.47 M 0.7 36.0 F
458.813 483.47 M 28.9 0.7 F
0 483.47 M 487.7 0.7 F
0 467.406 M 0.7 16.8 F
487 467.406 M 0.7 16.8 F
0 467.406 M 487.7 0.7 F
0 467.406 M 127.4 0.7 F
0 451.341 M 0.7 16.8 F
126.674 451.341 M 0.7 16.8 F
0 451.341 M 127.4 0.7 F
126.674 467.406 M 52.2 0.7 F
126.674 451.341 M 0.7 16.8 F
178.136 451.341 M 0.7 16.8 F
126.674 451.341 M 52.2 0.7 F
178.136 467.406 M 54.5 0.7 F
178.136 451.341 M 0.7 16.8 F
231.953 451.341 M 0.7 16.8 F
178.136 451.341 M 54.5 0.7 F
231.953 467.406 M 53.4 0.7 F
231.953 451.341 M 0.7 16.8 F
284.622 451.341 M 0.7 16.8 F
231.953 451.341 M 53.4 0.7 F
284.622 467.406 M 74.8 0.7 F
284.622 451.341 M 0.7 16.8 F
358.712 451.341 M 0.7 16.8 F
284.622 451.341 M 74.8 0.7 F
358.712 467.406 M 38.1 0.7 F
358.712 451.341 M 0.7 16.8 F
396.062 451.341 M 0.7 16.8 F
358.712 451.341 M 38.1 0.7 F
396.062 467.406 M 63.5 0.7 F
396.062 451.341 M 0.7 16.8 F
458.813 451.341 M 0.7 16.8 F
396.062 451.341 M 63.5 0.7 F
458.813 467.406 M 28.9 0.7 F
458.813 451.341 M 0.7 16.8 F
487 451.341 M 0.7 16.8 F
458.813 451.341 M 28.9 0.7 F
0 451.341 M 127.4 0.7 F
0 435.276 M 0.7 16.8 F
126.674 435.276 M 0.7 16.8 F
0 435.276 M 127.4 0.7 F
126.674 451.341 M 52.2 0.7 F
126.674 435.276 M 0.7 16.8 F
178.136 435.276 M 0.7 16.8 F
126.674 435.276 M 52.2 0.7 F
178.136 451.341 M 54.5 0.7 F
178.136 435.276 M 0.7 16.8 F
231.953 435.276 M 0.7 16.8 F
178.136 435.276 M 54.5 0.7 F
231.953 451.341 M 53.4 0.7 F
231.953 435.276 M 0.7 16.8 F
284.622 435.276 M 0.7 16.8 F
231.953 435.276 M 53.4 0.7 F
284.622 451.341 M 74.8 0.7 F
284.622 435.276 M 0.7 16.8 F
358.712 435.276 M 0.7 16.8 F
284.622 435.276 M 74.8 0.7 F
358.712 451.341 M 38.1 0.7 F
358.712 435.276 M 0.7 16.8 F
396.062 435.276 M 0.7 16.8 F
358.712 435.276 M 38.1 0.7 F
396.062 451.341 M 63.5 0.7 F
396.062 435.276 M 0.7 16.8 F
458.813 435.276 M 0.7 16.8 F
396.062 435.276 M 63.5 0.7 F
458.813 451.341 M 28.9 0.7 F
458.813 435.276 M 0.7 16.8 F
487 435.276 M 0.7 16.8 F
458.813 435.276 M 28.9 0.7 F
0 435.276 M 127.4 0.7 F
0 392.812 M 0.7 43.2 F
126.674 392.812 M 0.7 43.2 F
0 392.812 M 127.4 0.7 F
126.674 435.276 M 52.2 0.7 F
126.674 392.812 M 0.7 43.2 F
178.136 392.812 M 0.7 43.2 F
126.674 392.812 M 52.2 0.7 F
178.136 435.276 M 54.5 0.7 F
178.136 392.812 M 0.7 43.2 F
231.953 392.812 M 0.7 43.2 F
178.136 392.812 M 54.5 0.7 F
231.953 435.276 M 53.4 0.7 F
231.953 392.812 M 0.7 43.2 F
284.622 392.812 M 0.7 43.2 F
231.953 392.812 M 53.4 0.7 F
284.622 435.276 M 74.8 0.7 F
284.622 392.812 M 0.7 43.2 F
358.712 392.812 M 0.7 43.2 F
284.622 392.812 M 74.8 0.7 F
358.712 435.276 M 38.1 0.7 F
358.712 392.812 M 0.7 43.2 F
396.062 392.812 M 0.7 43.2 F
358.712 392.812 M 38.1 0.7 F
396.062 435.276 M 63.5 0.7 F
396.062 392.812 M 0.7 43.2 F
458.813 392.812 M 0.7 43.2 F
396.062 392.812 M 63.5 0.7 F
458.813 435.276 M 28.9 0.7 F
458.813 392.812 M 0.7 43.2 F
487 392.812 M 0.7 43.2 F
458.813 392.812 M 28.9 0.7 F
0 392.812 M 127.4 0.7 F
0 363.547 M 0.7 30.0 F
126.674 363.547 M 0.7 30.0 F
0 363.547 M 127.4 0.7 F
126.674 392.812 M 52.2 0.7 F
126.674 363.547 M 0.7 30.0 F
178.136 363.547 M 0.7 30.0 F
126.674 363.547 M 52.2 0.7 F
178.136 392.812 M 54.5 0.7 F
178.136 363.547 M 0.7 30.0 F
231.953 363.547 M 0.7 30.0 F
178.136 363.547 M 54.5 0.7 F
231.953 392.812 M 53.4 0.7 F
231.953 363.547 M 0.7 30.0 F
284.622 363.547 M 0.7 30.0 F
231.953 363.547 M 53.4 0.7 F
284.622 392.812 M 74.8 0.7 F
284.622 363.547 M 0.7 30.0 F
358.712 363.547 M 0.7 30.0 F
284.622 363.547 M 74.8 0.7 F
358.712 392.812 M 38.1 0.7 F
358.712 363.547 M 0.7 30.0 F
396.062 363.547 M 0.7 30.0 F
358.712 363.547 M 38.1 0.7 F
396.062 392.812 M 63.5 0.7 F
396.062 363.547 M 0.7 30.0 F
458.813 363.547 M 0.7 30.0 F
396.062 363.547 M 63.5 0.7 F
458.813 392.812 M 28.9 0.7 F
458.813 363.547 M 0.7 30.0 F
487 363.547 M 0.7 30.0 F
458.813 363.547 M 28.9 0.7 F
0 363.547 M 127.4 0.7 F
0 334.282 M 0.7 30.0 F
126.674 334.282 M 0.7 30.0 F
0 334.282 M 127.4 0.7 F
126.674 363.547 M 52.2 0.7 F
126.674 334.282 M 0.7 30.0 F
178.136 334.282 M 0.7 30.0 F
126.674 334.282 M 52.2 0.7 F
178.136 363.547 M 54.5 0.7 F
178.136 334.282 M 0.7 30.0 F
231.953 334.282 M 0.7 30.0 F
178.136 334.282 M 54.5 0.7 F
231.953 363.547 M 53.4 0.7 F
231.953 334.282 M 0.7 30.0 F
284.622 334.282 M 0.7 30.0 F
231.953 334.282 M 53.4 0.7 F
284.622 363.547 M 74.8 0.7 F
284.622 334.282 M 0.7 30.0 F
358.712 334.282 M 0.7 30.0 F
284.622 334.282 M 74.8 0.7 F
358.712 363.547 M 38.1 0.7 F
358.712 334.282 M 0.7 30.0 F
396.062 334.282 M 0.7 30.0 F
358.712 334.282 M 38.1 0.7 F
396.062 363.547 M 63.5 0.7 F
396.062 334.282 M 0.7 30.0 F
458.813 334.282 M 0.7 30.0 F
396.062 334.282 M 63.5 0.7 F
458.813 363.547 M 28.9 0.7 F
458.813 334.282 M 0.7 30.0 F
487 334.282 M 0.7 30.0 F
458.813 334.282 M 28.9 0.7 F
0 334.282 M 127.4 0.7 F
0 318.217 M 0.7 16.8 F
126.674 318.217 M 0.7 16.8 F
0 318.217 M 127.4 0.7 F
126.674 334.282 M 52.2 0.7 F
126.674 318.217 M 0.7 16.8 F
178.136 318.217 M 0.7 16.8 F
126.674 318.217 M 52.2 0.7 F
178.136 334.282 M 54.5 0.7 F
178.136 318.217 M 0.7 16.8 F
231.953 318.217 M 0.7 16.8 F
178.136 318.217 M 54.5 0.7 F
231.953 334.282 M 53.4 0.7 F
231.953 318.217 M 0.7 16.8 F
284.622 318.217 M 0.7 16.8 F
231.953 318.217 M 53.4 0.7 F
284.622 334.282 M 74.8 0.7 F
284.622 318.217 M 0.7 16.8 F
358.712 318.217 M 0.7 16.8 F
284.622 318.217 M 74.8 0.7 F
358.712 334.282 M 38.1 0.7 F
358.712 318.217 M 0.7 16.8 F
396.062 318.217 M 0.7 16.8 F
358.712 318.217 M 38.1 0.7 F
396.062 334.282 M 63.5 0.7 F
396.062 318.217 M 0.7 16.8 F
458.813 318.217 M 0.7 16.8 F
396.062 318.217 M 63.5 0.7 F
458.813 334.282 M 28.9 0.7 F
458.813 318.217 M 0.7 16.8 F
487 318.217 M 0.7 16.8 F
458.813 318.217 M 28.9 0.7 F
0 318.217 M 127.4 0.7 F
0 288.953 M 0.7 30.0 F
126.674 288.953 M 0.7 30.0 F
0 288.953 M 127.4 0.7 F
126.674 318.217 M 52.2 0.7 F
126.674 288.953 M 0.7 30.0 F
178.136 288.953 M 0.7 30.0 F
126.674 288.953 M 52.2 0.7 F
178.136 318.217 M 54.5 0.7 F
178.136 288.953 M 0.7 30.0 F
231.953 288.953 M 0.7 30.0 F
178.136 288.953 M 54.5 0.7 F
231.953 318.217 M 53.4 0.7 F
231.953 288.953 M 0.7 30.0 F
284.622 288.953 M 0.7 30.0 F
231.953 288.953 M 53.4 0.7 F
284.622 318.217 M 74.8 0.7 F
284.622 288.953 M 0.7 30.0 F
358.712 288.953 M 0.7 30.0 F
284.622 288.953 M 74.8 0.7 F
358.712 318.217 M 38.1 0.7 F
358.712 288.953 M 0.7 30.0 F
396.062 288.953 M 0.7 30.0 F
358.712 288.953 M 38.1 0.7 F
396.062 318.217 M 63.5 0.7 F
396.062 288.953 M 0.7 30.0 F
458.813 288.953 M 0.7 30.0 F
396.062 288.953 M 63.5 0.7 F
458.813 318.217 M 28.9 0.7 F
458.813 288.953 M 0.7 30.0 F
487 288.953 M 0.7 30.0 F
458.813 288.953 M 28.9 0.7 F
0 288.953 M 487.7 0.7 F
0 272.888 M 0.7 16.8 F
487 272.888 M 0.7 16.8 F
0 272.888 M 487.7 0.7 F
0 272.888 M 127.4 0.7 F
0 256.823 M 0.7 16.8 F
126.674 256.823 M 0.7 16.8 F
0 256.823 M 127.4 0.7 F
126.674 272.888 M 52.2 0.7 F
126.674 256.823 M 0.7 16.8 F
178.136 256.823 M 0.7 16.8 F
126.674 256.823 M 52.2 0.7 F
178.136 272.888 M 54.5 0.7 F
178.136 256.823 M 0.7 16.8 F
231.953 256.823 M 0.7 16.8 F
178.136 256.823 M 54.5 0.7 F
231.953 272.888 M 53.4 0.7 F
231.953 256.823 M 0.7 16.8 F
284.622 256.823 M 0.7 16.8 F
231.953 256.823 M 53.4 0.7 F
284.622 272.888 M 74.8 0.7 F
284.622 256.823 M 0.7 16.8 F
358.712 256.823 M 0.7 16.8 F
284.622 256.823 M 74.8 0.7 F
358.712 272.888 M 38.1 0.7 F
358.712 256.823 M 0.7 16.8 F
396.062 256.823 M 0.7 16.8 F
358.712 256.823 M 38.1 0.7 F
396.062 272.888 M 63.5 0.7 F
396.062 256.823 M 0.7 16.8 F
458.813 256.823 M 0.7 16.8 F
396.062 256.823 M 63.5 0.7 F
458.813 272.888 M 28.9 0.7 F
458.813 256.823 M 0.7 16.8 F
487 256.823 M 0.7 16.8 F
458.813 256.823 M 28.9 0.7 F
0 256.823 M 127.4 0.7 F
0 240.759 M 0.7 16.8 F
126.674 240.759 M 0.7 16.8 F
0 240.759 M 127.4 0.7 F
126.674 256.823 M 52.2 0.7 F
126.674 240.759 M 0.7 16.8 F
178.136 240.759 M 0.7 16.8 F
126.674 240.759 M 52.2 0.7 F
178.136 256.823 M 54.5 0.7 F
178.136 240.759 M 0.7 16.8 F
231.953 240.759 M 0.7 16.8 F
178.136 240.759 M 54.5 0.7 F
231.953 256.823 M 53.4 0.7 F
231.953 240.759 M 0.7 16.8 F
284.622 240.759 M 0.7 16.8 F
231.953 240.759 M 53.4 0.7 F
284.622 256.823 M 74.8 0.7 F
284.622 240.759 M 0.7 16.8 F
358.712 240.759 M 0.7 16.8 F
284.622 240.759 M 74.8 0.7 F
358.712 256.823 M 38.1 0.7 F
358.712 240.759 M 0.7 16.8 F
396.062 240.759 M 0.7 16.8 F
358.712 240.759 M 38.1 0.7 F
396.062 256.823 M 63.5 0.7 F
396.062 240.759 M 0.7 16.8 F
458.813 240.759 M 0.7 16.8 F
396.062 240.759 M 63.5 0.7 F
458.813 256.823 M 28.9 0.7 F
458.813 240.759 M 0.7 16.8 F
487 240.759 M 0.7 16.8 F
458.813 240.759 M 28.9 0.7 F
0 240.759 M 127.4 0.7 F
0 211.494 M 0.7 30.0 F
126.674 211.494 M 0.7 30.0 F
0 211.494 M 127.4 0.7 F
126.674 240.759 M 52.2 0.7 F
126.674 211.494 M 0.7 30.0 F
178.136 211.494 M 0.7 30.0 F
126.674 211.494 M 52.2 0.7 F
178.136 240.759 M 54.5 0.7 F
178.136 211.494 M 0.7 30.0 F
231.953 211.494 M 0.7 30.0 F
178.136 211.494 M 54.5 0.7 F
231.953 240.759 M 53.4 0.7 F
231.953 211.494 M 0.7 30.0 F
284.622 211.494 M 0.7 30.0 F
231.953 211.494 M 53.4 0.7 F
284.622 240.759 M 74.8 0.7 F
284.622 211.494 M 0.7 30.0 F
358.712 211.494 M 0.7 30.0 F
284.622 211.494 M 74.8 0.7 F
358.712 240.759 M 38.1 0.7 F
358.712 211.494 M 0.7 30.0 F
396.062 211.494 M 0.7 30.0 F
358.712 211.494 M 38.1 0.7 F
396.062 240.759 M 63.5 0.7 F
396.062 211.494 M 0.7 30.0 F
458.813 211.494 M 0.7 30.0 F
396.062 211.494 M 63.5 0.7 F
458.813 240.759 M 28.9 0.7 F
458.813 211.494 M 0.7 30.0 F
487 211.494 M 0.7 30.0 F
458.813 211.494 M 28.9 0.7 F
0 211.494 M 127.4 0.7 F
0 182.229 M 0.7 30.0 F
126.674 182.229 M 0.7 30.0 F
0 182.229 M 127.4 0.7 F
126.674 211.494 M 52.2 0.7 F
126.674 182.229 M 0.7 30.0 F
178.136 182.229 M 0.7 30.0 F
126.674 182.229 M 52.2 0.7 F
178.136 211.494 M 54.5 0.7 F
178.136 182.229 M 0.7 30.0 F
231.953 182.229 M 0.7 30.0 F
178.136 182.229 M 54.5 0.7 F
231.953 211.494 M 53.4 0.7 F
231.953 182.229 M 0.7 30.0 F
284.622 182.229 M 0.7 30.0 F
231.953 182.229 M 53.4 0.7 F
284.622 211.494 M 74.8 0.7 F
284.622 182.229 M 0.7 30.0 F
358.712 182.229 M 0.7 30.0 F
284.622 182.229 M 74.8 0.7 F
358.712 211.494 M 38.1 0.7 F
358.712 182.229 M 0.7 30.0 F
396.062 182.229 M 0.7 30.0 F
358.712 182.229 M 38.1 0.7 F
396.062 211.494 M 63.5 0.7 F
396.062 182.229 M 0.7 30.0 F
458.813 182.229 M 0.7 30.0 F
396.062 182.229 M 63.5 0.7 F
458.813 211.494 M 28.9 0.7 F
458.813 182.229 M 0.7 30.0 F
487 182.229 M 0.7 30.0 F
458.813 182.229 M 28.9 0.7 F
0 182.229 M 127.4 0.7 F
0 166.164 M 0.7 16.8 F
126.674 166.164 M 0.7 16.8 F
0 166.164 M 127.4 0.7 F
126.674 182.229 M 52.2 0.7 F
126.674 166.164 M 0.7 16.8 F
178.136 166.164 M 0.7 16.8 F
126.674 166.164 M 52.2 0.7 F
178.136 182.229 M 54.5 0.7 F
178.136 166.164 M 0.7 16.8 F
231.953 166.164 M 0.7 16.8 F
178.136 166.164 M 54.5 0.7 F
231.953 182.229 M 53.4 0.7 F
231.953 166.164 M 0.7 16.8 F
284.622 166.164 M 0.7 16.8 F
231.953 166.164 M 53.4 0.7 F
284.622 182.229 M 74.8 0.7 F
284.622 166.164 M 0.7 16.8 F
358.712 166.164 M 0.7 16.8 F
284.622 166.164 M 74.8 0.7 F
358.712 182.229 M 38.1 0.7 F
358.712 166.164 M 0.7 16.8 F
396.062 166.164 M 0.7 16.8 F
358.712 166.164 M 38.1 0.7 F
396.062 182.229 M 63.5 0.7 F
396.062 166.164 M 0.7 16.8 F
458.813 166.164 M 0.7 16.8 F
396.062 166.164 M 63.5 0.7 F
458.813 182.229 M 28.9 0.7 F
458.813 166.164 M 0.7 16.8 F
487 166.164 M 0.7 16.8 F
458.813 166.164 M 28.9 0.7 F
0 166.164 M 127.4 0.7 F
0 136.9 M 0.7 30.0 F
126.674 136.9 M 0.7 30.0 F
0 136.9 M 127.4 0.7 F
126.674 166.164 M 52.2 0.7 F
126.674 136.9 M 0.7 30.0 F
178.136 136.9 M 0.7 30.0 F
126.674 136.9 M 52.2 0.7 F
178.136 166.164 M 54.5 0.7 F
178.136 136.9 M 0.7 30.0 F
231.953 136.9 M 0.7 30.0 F
178.136 136.9 M 54.5 0.7 F
231.953 166.164 M 53.4 0.7 F
231.953 136.9 M 0.7 30.0 F
284.622 136.9 M 0.7 30.0 F
231.953 136.9 M 53.4 0.7 F
284.622 166.164 M 74.8 0.7 F
284.622 136.9 M 0.7 30.0 F
358.712 136.9 M 0.7 30.0 F
284.622 136.9 M 74.8 0.7 F
358.712 166.164 M 38.1 0.7 F
358.712 136.9 M 0.7 30.0 F
396.062 136.9 M 0.7 30.0 F
358.712 136.9 M 38.1 0.7 F
396.062 166.164 M 63.5 0.7 F
396.062 136.9 M 0.7 30.0 F
458.813 136.9 M 0.7 30.0 F
396.062 136.9 M 63.5 0.7 F
458.813 166.164 M 28.9 0.7 F
458.813 136.9 M 0.7 30.0 F
487 136.9 M 0.7 30.0 F
458.813 136.9 M 28.9 0.7 F
0 136.9 M 127.4 0.7 F
0 120.835 M 0.7 16.8 F
126.674 120.835 M 0.7 16.8 F
0 120.835 M 127.4 0.7 F
126.674 136.9 M 52.2 0.7 F
126.674 120.835 M 0.7 16.8 F
178.136 120.835 M 0.7 16.8 F
126.674 120.835 M 52.2 0.7 F
178.136 136.9 M 54.5 0.7 F
178.136 120.835 M 0.7 16.8 F
231.953 120.835 M 0.7 16.8 F
178.136 120.835 M 54.5 0.7 F
231.953 136.9 M 53.4 0.7 F
231.953 120.835 M 0.7 16.8 F
284.622 120.835 M 0.7 16.8 F
231.953 120.835 M 53.4 0.7 F
284.622 136.9 M 74.8 0.7 F
284.622 120.835 M 0.7 16.8 F
358.712 120.835 M 0.7 16.8 F
284.622 120.835 M 74.8 0.7 F
358.712 136.9 M 38.1 0.7 F
358.712 120.835 M 0.7 16.8 F
396.062 120.835 M 0.7 16.8 F
358.712 120.835 M 38.1 0.7 F
396.062 136.9 M 63.5 0.7 F
396.062 120.835 M 0.7 16.8 F
458.813 120.835 M 0.7 16.8 F
396.062 120.835 M 63.5 0.7 F
458.813 136.9 M 28.9 0.7 F
458.813 120.835 M 0.7 16.8 F
487 120.835 M 0.7 16.8 F
458.813 120.835 M 28.9 0.7 F
0 120.835 M 127.4 0.7 F
0 91.57 M 0.7 30.0 F
126.674 91.57 M 0.7 30.0 F
0 91.57 M 127.4 0.7 F
126.674 120.835 M 52.2 0.7 F
126.674 91.57 M 0.7 30.0 F
178.136 91.57 M 0.7 30.0 F
126.674 91.57 M 52.2 0.7 F
178.136 120.835 M 54.5 0.7 F
178.136 91.57 M 0.7 30.0 F
231.953 91.57 M 0.7 30.0 F
178.136 91.57 M 54.5 0.7 F
231.953 120.835 M 53.4 0.7 F
231.953 91.57 M 0.7 30.0 F
284.622 91.57 M 0.7 30.0 F
231.953 91.57 M 53.4 0.7 F
284.622 120.835 M 74.8 0.7 F
284.622 91.57 M 0.7 30.0 F
358.712 91.57 M 0.7 30.0 F
284.622 91.57 M 74.8 0.7 F
358.712 120.835 M 38.1 0.7 F
358.712 91.57 M 0.7 30.0 F
396.062 91.57 M 0.7 30.0 F
358.712 91.57 M 38.1 0.7 F
396.062 120.835 M 63.5 0.7 F
396.062 91.57 M 0.7 30.0 F
458.813 91.57 M 0.7 30.0 F
396.062 91.57 M 63.5 0.7 F
458.813 120.835 M 28.9 0.7 F
458.813 91.57 M 0.7 30.0 F
487 91.57 M 0.7 30.0 F
458.813 91.57 M 28.9 0.7 F
0 91.57 M 127.4 0.7 F
0 75.506 M 0.7 16.8 F
126.674 75.506 M 0.7 16.8 F
0 75.506 M 127.4 0.7 F
126.674 91.57 M 52.2 0.7 F
126.674 75.506 M 0.7 16.8 F
178.136 75.506 M 0.7 16.8 F
126.674 75.506 M 52.2 0.7 F
178.136 91.57 M 54.5 0.7 F
178.136 75.506 M 0.7 16.8 F
231.953 75.506 M 0.7 16.8 F
178.136 75.506 M 54.5 0.7 F
231.953 91.57 M 53.4 0.7 F
231.953 75.506 M 0.7 16.8 F
284.622 75.506 M 0.7 16.8 F
231.953 75.506 M 53.4 0.7 F
284.622 91.57 M 74.8 0.7 F
284.622 75.506 M 0.7 16.8 F
358.712 75.506 M 0.7 16.8 F
284.622 75.506 M 74.8 0.7 F
358.712 91.57 M 38.1 0.7 F
358.712 75.506 M 0.7 16.8 F
396.062 75.506 M 0.7 16.8 F
358.712 75.506 M 38.1 0.7 F
396.062 91.57 M 63.5 0.7 F
396.062 75.506 M 0.7 16.8 F
458.813 75.506 M 0.7 16.8 F
396.062 75.506 M 63.5 0.7 F
458.813 91.57 M 28.9 0.7 F
458.813 75.506 M 0.7 16.8 F
487 75.506 M 0.7 16.8 F
458.813 75.506 M 28.9 0.7 F
0 75.506 M 127.4 0.7 F
0 59.441 M 0.7 16.8 F
126.674 59.441 M 0.7 16.8 F
0 59.441 M 127.4 0.7 F
126.674 75.506 M 52.2 0.7 F
126.674 59.441 M 0.7 16.8 F
178.136 59.441 M 0.7 16.8 F
126.674 59.441 M 52.2 0.7 F
178.136 75.506 M 54.5 0.7 F
178.136 59.441 M 0.7 16.8 F
231.953 59.441 M 0.7 16.8 F
178.136 59.441 M 54.5 0.7 F
231.953 75.506 M 53.4 0.7 F
231.953 59.441 M 0.7 16.8 F
284.622 59.441 M 0.7 16.8 F
231.953 59.441 M 53.4 0.7 F
284.622 75.506 M 74.8 0.7 F
284.622 59.441 M 0.7 16.8 F
358.712 59.441 M 0.7 16.8 F
284.622 59.441 M 74.8 0.7 F
358.712 75.506 M 38.1 0.7 F
358.712 59.441 M 0.7 16.8 F
396.062 59.441 M 0.7 16.8 F
358.712 59.441 M 38.1 0.7 F
396.062 75.506 M 63.5 0.7 F
396.062 59.441 M 0.7 16.8 F
458.813 59.441 M 0.7 16.8 F
396.062 59.441 M 63.5 0.7 F
458.813 75.506 M 28.9 0.7 F
458.813 59.441 M 0.7 16.8 F
487 59.441 M 0.7 16.8 F
458.813 59.441 M 28.9 0.7 F
0 59.441 M 127.4 0.7 F
0 43.376 M 0.7 16.8 F
126.674 43.376 M 0.7 16.8 F
0 43.376 M 127.4 0.7 F
126.674 59.441 M 52.2 0.7 F
126.674 43.376 M 0.7 16.8 F
178.136 43.376 M 0.7 16.8 F
126.674 43.376 M 52.2 0.7 F
178.136 59.441 M 54.5 0.7 F
178.136 43.376 M 0.7 16.8 F
231.953 43.376 M 0.7 16.8 F
178.136 43.376 M 54.5 0.7 F
231.953 59.441 M 53.4 0.7 F
231.953 43.376 M 0.7 16.8 F
284.622 43.376 M 0.7 16.8 F
231.953 43.376 M 53.4 0.7 F
284.622 59.441 M 74.8 0.7 F
284.622 43.376 M 0.7 16.8 F
358.712 43.376 M 0.7 16.8 F
284.622 43.376 M 74.8 0.7 F
358.712 59.441 M 38.1 0.7 F
358.712 43.376 M 0.7 16.8 F
396.062 43.376 M 0.7 16.8 F
358.712 43.376 M 38.1 0.7 F
396.062 59.441 M 63.5 0.7 F
396.062 43.376 M 0.7 16.8 F
458.813 43.376 M 0.7 16.8 F
396.062 43.376 M 63.5 0.7 F
458.813 59.441 M 28.9 0.7 F
458.813 43.376 M 0.7 16.8 F
487 43.376 M 0.7 16.8 F
458.813 43.376 M 28.9 0.7 F
0 43.376 M 127.4 0.7 F
0 27.312 M 0.7 16.8 F
126.674 27.312 M 0.7 16.8 F
0 27.312 M 127.4 0.7 F
126.674 43.376 M 52.2 0.7 F
126.674 27.312 M 0.7 16.8 F
178.136 27.312 M 0.7 16.8 F
126.674 27.312 M 52.2 0.7 F
178.136 43.376 M 54.5 0.7 F
178.136 27.312 M 0.7 16.8 F
231.953 27.312 M 0.7 16.8 F
178.136 27.312 M 54.5 0.7 F
231.953 43.376 M 53.4 0.7 F
231.953 27.312 M 0.7 16.8 F
284.622 27.312 M 0.7 16.8 F
231.953 27.312 M 53.4 0.7 F
284.622 43.376 M 74.8 0.7 F
284.622 27.312 M 0.7 16.8 F
358.712 27.312 M 0.7 16.8 F
284.622 27.312 M 74.8 0.7 F
358.712 43.376 M 38.1 0.7 F
358.712 27.312 M 0.7 16.8 F
396.062 27.312 M 0.7 16.8 F
358.712 27.312 M 38.1 0.7 F
396.062 43.376 M 63.5 0.7 F
396.062 27.312 M 0.7 16.8 F
458.813 27.312 M 0.7 16.8 F
396.062 27.312 M 63.5 0.7 F
458.813 43.376 M 28.9 0.7 F
458.813 27.312 M 0.7 16.8 F
487 27.312 M 0.7 16.8 F
458.813 27.312 M 28.9 0.7 F
20 FS/F9 SF 0 678 M(Interoperating with FreeS/WAN)S
11 FS/F4 SF 0 649.8 M(The FreeS/WAN project needs you! We rely on the user community to keep up to date. Mail)S
0 636.6 M(users@lists.freeswan.org with your interop success stories.)S
/F7 SF 0 610.2 M(Please note)S
/F4 SF (: Most of our interop examples feature Linux FreeS/WAN 1.x config files. You can convert them)S
0 597 M(to 2.x files fairly easily with the patch in our Upgrading Guide.)S
17 FS/F9 SF 0 564.6 M(Interop at a Glance)S
11 FS/F4 SF 128.107 528.967 M(FreeS/WAN VPN)S
397.495 535.568 M(Road)S
397.495 522.367 M(Warrior)S
460.245 528.967 M(OE)S
128.107 496.703 M(PSK)S
179.568 503.303 M(RSA)S
179.568 490.103 M(Secret)S
233.385 506.303 M(X.509)S
8 FS/F4 SF 233.385 496.103 M(\(requires)S
233.385 486.503 M(patch\))S
11 FS/F4 SF 286.055 501.503 M(NAT-Traversal)S
8 FS/F4 SF 286.055 491.303 M(\(requires patch\))S
11 FS/F4 SF 360.145 503.303 M(Manual)S
360.145 490.103 M(Keying)S
1.432 471.038 M(More Compatible)S
1.432 454.973 M(FreeS/WAN)S
0.00 0.80 0.00 C 128.107 454.973 M(Yes)S
179.568 454.973 M(Yes)S
233.385 454.973 M(Yes)S
286.055 454.973 M(Yes)S
360.145 454.973 M(Yes)S
397.495 454.973 M(Yes)S
460.245 454.973 M(Yes)S
0.00 0.00 0.00 C 1.432 438.909 M(isakmpd \(OpenBSD\))S
0.00 0.80 0.00 C 128.107 438.909 M(Yes)S
233.385 438.909 M(Yes)S
360.145 438.909 M(Yes)S
0.80 0.00 0.00 C 460.245 438.909 M(No    )S
0.00 0.00 0.00 C 1.432 422.844 M(Kame \(FreeBSD,)S
1.432 409.644 M(NetBSD, MacOSX\))S
8 FS/F4 SF 1.432 397.944 M(aka racoon)S
0.00 0.80 0.00 C 11 FS/F4 SF 128.107 409.644 M(Yes)S
179.568 409.644 M(Yes)S
233.385 409.644 M(Yes)S
360.145 409.644 M(Yes)S
0.80 0.00 0.00 C 460.245 409.644 M(No)S
0.00 0.00 0.00 C 1.432 380.379 M(McAfee VPN)S
8 FS/F4 SF 1.432 368.679 M(was PGPNet)S
0.00 0.80 0.00 C 11 FS/F4 SF 128.107 373.779 M(Yes)S
179.568 373.779 M(Yes)S
233.385 373.779 M(Yes)S
397.495 373.779 M(Yes)S
0.80 0.00 0.00 C 460.245 373.779 M(No)S
0.00 0.00 0.00 C 1.432 351.115 M(Microsoft)S
1.432 337.914 M(Windows 2000/XP)S
0.00 0.80 0.00 C 128.107 344.514 M(Yes)S
233.385 344.514 M(Yes)S
397.495 344.514 M(Yes)S
0.80 0.00 0.00 C 460.245 344.514 M(No)S
0.00 0.00 0.00 C 1.432 321.85 M(SSH Sentinel)S
0.00 0.80 0.00 C 128.107 321.85 M(Yes)S
233.385 321.85 M(Yes)S
0.80 0.80 0.00 C 286.055 321.85 M(Maybe)S
0.00 0.80 0.00 C 397.495 321.85 M(Yes)S
0.80 0.00 0.00 C 460.245 321.85 M(No)S
0.00 0.00 0.00 C 1.432 305.785 M(Safenet SoftPK)S
1.432 292.585 M(/SoftRemote)S
0.00 0.80 0.00 C 128.107 299.185 M(Yes)S
233.385 299.185 M(Yes)S
397.495 299.185 M(Yes)S
0.80 0.00 0.00 C 460.245 299.185 M(No)S
0.00 0.00 0.00 C 1.432 276.52 M(Other)S
1.432 260.456 M(6Wind)S
0.00 0.80 0.00 C 233.385 260.456 M(Yes)S
0.80 0.00 0.00 C 460.245 260.456 M(No)S
0.00 0.00 0.00 C 1.432 244.391 M(Alcatel Timestep)S
0.00 0.80 0.00 C 128.107 244.391 M(Yes)S
0.80 0.00 0.00 C 460.245 244.391 M(No)S
0.00 0.00 0.00 C 1.432 228.326 M(Apple Macintosh)S
1.432 215.126 M(System 10+)S
0.80 0.80 0.00 C 128.107 221.726 M(Maybe)S
0.00 0.80 0.00 C 179.568 221.726 M(Yes)S
0.80 0.80 0.00 C 233.385 221.726 M(Maybe)S
360.145 221.726 M(Maybe)S
0.80 0.00 0.00 C 460.245 221.726 M(No)S
0.00 0.00 0.00 C 1.432 199.062 M(AshleyLaurent)S
1.432 185.862 M(VPCom)S
0.00 0.80 0.00 C 128.107 192.462 M(Yes)S
0.80 0.00 0.00 C 460.245 192.462 M(No)S
0.00 0.00 0.00 C 1.432 169.797 M(Borderware)S
0.00 0.80 0.00 C 128.107 169.797 M(Yes)S
0.80 0.00 0.00 C 397.495 169.797 M(No)S
460.245 169.797 M(No)S
0.00 0.00 0.00 C 1.432 153.732 M(Check Point FW-1/VPN-1)S
0.00 0.80 0.00 C 128.107 147.132 M(Yes)S
233.385 147.132 M(Yes)S
397.495 147.132 M(Yes)S
0.80 0.00 0.00 C 460.245 147.132 M(No)S
0.00 0.00 0.00 C 1.432 124.467 M(Cisco with 3DES)S
0.00 0.80 0.00 C 128.107 124.467 M(Yes)S
0.80 0.80 0.00 C 179.568 124.467 M(Maybe)S
286.055 124.467 M(Maybe)S
0.80 0.00 0.00 C 460.245 124.467 M(No)S
0.00 0.00 0.00 C 1.432 108.403 M(Equinux VPN Tracker)S
1.432 95.203 M(\(for Mac OS X\))S
0.00 0.80 0.00 C 128.107 101.803 M(Yes)S
179.568 101.803 M(Yes)S
233.385 101.803 M(Yes)S
0.80 0.80 0.00 C 360.145 101.803 M(Maybe)S
0.80 0.00 0.00 C 460.245 101.803 M(No)S
0.00 0.00 0.00 C 1.432 79.138 M(F-Secure)S
0.00 0.80 0.00 C 128.107 79.138 M(Yes)S
0.80 0.80 0.00 C 286.055 79.138 M(Maybe)S
0.00 0.80 0.00 C 360.145 79.138 M(Yes)S
397.495 79.138 M(Yes)S
0.80 0.00 0.00 C 460.245 79.138 M(No)S
0.00 0.00 0.00 C 1.432 63.073 M(Gauntlet GVPN)S
0.00 0.80 0.00 C 128.107 63.073 M(Yes)S
233.385 63.073 M(Yes)S
0.80 0.00 0.00 C 460.245 63.073 M(No)S
0.00 0.00 0.00 C 1.432 47.009 M(IBM AIX)S
0.00 0.80 0.00 C 128.107 47.009 M(Yes)S
0.80 0.80 0.00 C 233.385 47.009 M(Maybe)S
0.80 0.00 0.00 C 460.245 47.009 M(No)S
0.00 0.00 0.00 C 1.432 30.944 M(IBM AS/400)S
0.00 0.80 0.00 C 128.107 30.944 M(Yes)S
0.80 0.00 0.00 C 460.245 30.944 M(No)S
0.00 0.00 0.00 C /F8 SF 0 0 M(Interoperating with FreeS/WAN)S
468.652 0 M(114)S
GR
SP
%%Page: 115 144
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
0 698 M 127.4 0.7 F
0 668.735 M 0.7 30.0 F
126.674 668.735 M 0.7 30.0 F
0 668.735 M 127.4 0.7 F
126.674 698 M 52.2 0.7 F
126.674 668.735 M 0.7 30.0 F
178.136 668.735 M 0.7 30.0 F
126.674 668.735 M 52.2 0.7 F
178.136 698 M 54.5 0.7 F
178.136 668.735 M 0.7 30.0 F
231.953 668.735 M 0.7 30.0 F
178.136 668.735 M 54.5 0.7 F
231.953 698 M 53.4 0.7 F
231.953 668.735 M 0.7 30.0 F
284.622 668.735 M 0.7 30.0 F
231.953 668.735 M 53.4 0.7 F
284.622 698 M 74.8 0.7 F
284.622 668.735 M 0.7 30.0 F
358.712 668.735 M 0.7 30.0 F
284.622 668.735 M 74.8 0.7 F
358.712 698 M 38.1 0.7 F
358.712 668.735 M 0.7 30.0 F
396.062 668.735 M 0.7 30.0 F
358.712 668.735 M 38.1 0.7 F
396.062 698 M 63.5 0.7 F
396.062 668.735 M 0.7 30.0 F
458.813 668.735 M 0.7 30.0 F
396.062 668.735 M 63.5 0.7 F
458.813 698 M 28.9 0.7 F
458.813 668.735 M 0.7 30.0 F
487 668.735 M 0.7 30.0 F
458.813 668.735 M 28.9 0.7 F
0 668.735 M 127.4 0.7 F
0 652.67 M 0.7 16.8 F
126.674 652.67 M 0.7 16.8 F
0 652.67 M 127.4 0.7 F
126.674 668.735 M 52.2 0.7 F
126.674 652.67 M 0.7 16.8 F
178.136 652.67 M 0.7 16.8 F
126.674 652.67 M 52.2 0.7 F
178.136 668.735 M 54.5 0.7 F
178.136 652.67 M 0.7 16.8 F
231.953 652.67 M 0.7 16.8 F
178.136 652.67 M 54.5 0.7 F
231.953 668.735 M 53.4 0.7 F
231.953 652.67 M 0.7 16.8 F
284.622 652.67 M 0.7 16.8 F
231.953 652.67 M 53.4 0.7 F
284.622 668.735 M 74.8 0.7 F
284.622 652.67 M 0.7 16.8 F
358.712 652.67 M 0.7 16.8 F
284.622 652.67 M 74.8 0.7 F
358.712 668.735 M 38.1 0.7 F
358.712 652.67 M 0.7 16.8 F
396.062 652.67 M 0.7 16.8 F
358.712 652.67 M 38.1 0.7 F
396.062 668.735 M 63.5 0.7 F
396.062 652.67 M 0.7 16.8 F
458.813 652.67 M 0.7 16.8 F
396.062 652.67 M 63.5 0.7 F
458.813 668.735 M 28.9 0.7 F
458.813 652.67 M 0.7 16.8 F
487 652.67 M 0.7 16.8 F
458.813 652.67 M 28.9 0.7 F
0 652.67 M 127.4 0.7 F
0 636.606 M 0.7 16.8 F
126.674 636.606 M 0.7 16.8 F
0 636.606 M 127.4 0.7 F
126.674 652.67 M 52.2 0.7 F
126.674 636.606 M 0.7 16.8 F
178.136 636.606 M 0.7 16.8 F
126.674 636.606 M 52.2 0.7 F
178.136 652.67 M 54.5 0.7 F
178.136 636.606 M 0.7 16.8 F
231.953 636.606 M 0.7 16.8 F
178.136 636.606 M 54.5 0.7 F
231.953 652.67 M 53.4 0.7 F
231.953 636.606 M 0.7 16.8 F
284.622 636.606 M 0.7 16.8 F
231.953 636.606 M 53.4 0.7 F
284.622 652.67 M 74.8 0.7 F
284.622 636.606 M 0.7 16.8 F
358.712 636.606 M 0.7 16.8 F
284.622 636.606 M 74.8 0.7 F
358.712 652.67 M 38.1 0.7 F
358.712 636.606 M 0.7 16.8 F
396.062 636.606 M 0.7 16.8 F
358.712 636.606 M 38.1 0.7 F
396.062 652.67 M 63.5 0.7 F
396.062 636.606 M 0.7 16.8 F
458.813 636.606 M 0.7 16.8 F
396.062 636.606 M 63.5 0.7 F
458.813 652.67 M 28.9 0.7 F
458.813 636.606 M 0.7 16.8 F
487 636.606 M 0.7 16.8 F
458.813 636.606 M 28.9 0.7 F
0 636.606 M 127.4 0.7 F
0 620.541 M 0.7 16.8 F
126.674 620.541 M 0.7 16.8 F
0 620.541 M 127.4 0.7 F
126.674 636.606 M 52.2 0.7 F
126.674 620.541 M 0.7 16.8 F
178.136 620.541 M 0.7 16.8 F
126.674 620.541 M 52.2 0.7 F
178.136 636.606 M 54.5 0.7 F
178.136 620.541 M 0.7 16.8 F
231.953 620.541 M 0.7 16.8 F
178.136 620.541 M 54.5 0.7 F
231.953 636.606 M 53.4 0.7 F
231.953 620.541 M 0.7 16.8 F
284.622 620.541 M 0.7 16.8 F
231.953 620.541 M 53.4 0.7 F
284.622 636.606 M 74.8 0.7 F
284.622 620.541 M 0.7 16.8 F
358.712 620.541 M 0.7 16.8 F
284.622 620.541 M 74.8 0.7 F
358.712 636.606 M 38.1 0.7 F
358.712 620.541 M 0.7 16.8 F
396.062 620.541 M 0.7 16.8 F
358.712 620.541 M 38.1 0.7 F
396.062 636.606 M 63.5 0.7 F
396.062 620.541 M 0.7 16.8 F
458.813 620.541 M 0.7 16.8 F
396.062 620.541 M 63.5 0.7 F
458.813 636.606 M 28.9 0.7 F
458.813 620.541 M 0.7 16.8 F
487 620.541 M 0.7 16.8 F
458.813 620.541 M 28.9 0.7 F
0 620.541 M 127.4 0.7 F
0 604.476 M 0.7 16.8 F
126.674 604.476 M 0.7 16.8 F
0 604.476 M 127.4 0.7 F
126.674 620.541 M 52.2 0.7 F
126.674 604.476 M 0.7 16.8 F
178.136 604.476 M 0.7 16.8 F
126.674 604.476 M 52.2 0.7 F
178.136 620.541 M 54.5 0.7 F
178.136 604.476 M 0.7 16.8 F
231.953 604.476 M 0.7 16.8 F
178.136 604.476 M 54.5 0.7 F
231.953 620.541 M 53.4 0.7 F
231.953 604.476 M 0.7 16.8 F
284.622 604.476 M 0.7 16.8 F
231.953 604.476 M 53.4 0.7 F
284.622 620.541 M 74.8 0.7 F
284.622 604.476 M 0.7 16.8 F
358.712 604.476 M 0.7 16.8 F
284.622 604.476 M 74.8 0.7 F
358.712 620.541 M 38.1 0.7 F
358.712 604.476 M 0.7 16.8 F
396.062 604.476 M 0.7 16.8 F
358.712 604.476 M 38.1 0.7 F
396.062 620.541 M 63.5 0.7 F
396.062 604.476 M 0.7 16.8 F
458.813 604.476 M 0.7 16.8 F
396.062 604.476 M 63.5 0.7 F
458.813 620.541 M 28.9 0.7 F
458.813 604.476 M 0.7 16.8 F
487 604.476 M 0.7 16.8 F
458.813 604.476 M 28.9 0.7 F
0 604.476 M 127.4 0.7 F
0 588.411 M 0.7 16.8 F
126.674 588.411 M 0.7 16.8 F
0 588.411 M 127.4 0.7 F
126.674 604.476 M 52.2 0.7 F
126.674 588.411 M 0.7 16.8 F
178.136 588.411 M 0.7 16.8 F
126.674 588.411 M 52.2 0.7 F
178.136 604.476 M 54.5 0.7 F
178.136 588.411 M 0.7 16.8 F
231.953 588.411 M 0.7 16.8 F
178.136 588.411 M 54.5 0.7 F
231.953 604.476 M 53.4 0.7 F
231.953 588.411 M 0.7 16.8 F
284.622 588.411 M 0.7 16.8 F
231.953 588.411 M 53.4 0.7 F
284.622 604.476 M 74.8 0.7 F
284.622 588.411 M 0.7 16.8 F
358.712 588.411 M 0.7 16.8 F
284.622 588.411 M 74.8 0.7 F
358.712 604.476 M 38.1 0.7 F
358.712 588.411 M 0.7 16.8 F
396.062 588.411 M 0.7 16.8 F
358.712 588.411 M 38.1 0.7 F
396.062 604.476 M 63.5 0.7 F
396.062 588.411 M 0.7 16.8 F
458.813 588.411 M 0.7 16.8 F
396.062 588.411 M 63.5 0.7 F
458.813 604.476 M 28.9 0.7 F
458.813 588.411 M 0.7 16.8 F
487 588.411 M 0.7 16.8 F
458.813 588.411 M 28.9 0.7 F
0 588.411 M 127.4 0.7 F
0 572.347 M 0.7 16.8 F
126.674 572.347 M 0.7 16.8 F
0 572.347 M 127.4 0.7 F
126.674 588.411 M 52.2 0.7 F
126.674 572.347 M 0.7 16.8 F
178.136 572.347 M 0.7 16.8 F
126.674 572.347 M 52.2 0.7 F
178.136 588.411 M 54.5 0.7 F
178.136 572.347 M 0.7 16.8 F
231.953 572.347 M 0.7 16.8 F
178.136 572.347 M 54.5 0.7 F
231.953 588.411 M 53.4 0.7 F
231.953 572.347 M 0.7 16.8 F
284.622 572.347 M 0.7 16.8 F
231.953 572.347 M 53.4 0.7 F
284.622 588.411 M 74.8 0.7 F
284.622 572.347 M 0.7 16.8 F
358.712 572.347 M 0.7 16.8 F
284.622 572.347 M 74.8 0.7 F
358.712 588.411 M 38.1 0.7 F
358.712 572.347 M 0.7 16.8 F
396.062 572.347 M 0.7 16.8 F
358.712 572.347 M 38.1 0.7 F
396.062 588.411 M 63.5 0.7 F
396.062 572.347 M 0.7 16.8 F
458.813 572.347 M 0.7 16.8 F
396.062 572.347 M 63.5 0.7 F
458.813 588.411 M 28.9 0.7 F
458.813 572.347 M 0.7 16.8 F
487 572.347 M 0.7 16.8 F
458.813 572.347 M 28.9 0.7 F
0 572.347 M 127.4 0.7 F
0 543.082 M 0.7 30.0 F
126.674 543.082 M 0.7 30.0 F
0 543.082 M 127.4 0.7 F
126.674 572.347 M 52.2 0.7 F
126.674 543.082 M 0.7 30.0 F
178.136 543.082 M 0.7 30.0 F
126.674 543.082 M 52.2 0.7 F
178.136 572.347 M 54.5 0.7 F
178.136 543.082 M 0.7 30.0 F
231.953 543.082 M 0.7 30.0 F
178.136 543.082 M 54.5 0.7 F
231.953 572.347 M 53.4 0.7 F
231.953 543.082 M 0.7 30.0 F
284.622 543.082 M 0.7 30.0 F
231.953 543.082 M 53.4 0.7 F
284.622 572.347 M 74.8 0.7 F
284.622 543.082 M 0.7 30.0 F
358.712 543.082 M 0.7 30.0 F
284.622 543.082 M 74.8 0.7 F
358.712 572.347 M 38.1 0.7 F
358.712 543.082 M 0.7 30.0 F
396.062 543.082 M 0.7 30.0 F
358.712 543.082 M 38.1 0.7 F
396.062 572.347 M 63.5 0.7 F
396.062 543.082 M 0.7 30.0 F
458.813 543.082 M 0.7 30.0 F
396.062 543.082 M 63.5 0.7 F
458.813 572.347 M 28.9 0.7 F
458.813 543.082 M 0.7 30.0 F
487 543.082 M 0.7 30.0 F
458.813 543.082 M 28.9 0.7 F
0 543.082 M 127.4 0.7 F
0 527.017 M 0.7 16.8 F
126.674 527.017 M 0.7 16.8 F
0 527.017 M 127.4 0.7 F
126.674 543.082 M 52.2 0.7 F
126.674 527.017 M 0.7 16.8 F
178.136 527.017 M 0.7 16.8 F
126.674 527.017 M 52.2 0.7 F
178.136 543.082 M 54.5 0.7 F
178.136 527.017 M 0.7 16.8 F
231.953 527.017 M 0.7 16.8 F
178.136 527.017 M 54.5 0.7 F
231.953 543.082 M 53.4 0.7 F
231.953 527.017 M 0.7 16.8 F
284.622 527.017 M 0.7 16.8 F
231.953 527.017 M 53.4 0.7 F
284.622 543.082 M 74.8 0.7 F
284.622 527.017 M 0.7 16.8 F
358.712 527.017 M 0.7 16.8 F
284.622 527.017 M 74.8 0.7 F
358.712 543.082 M 38.1 0.7 F
358.712 527.017 M 0.7 16.8 F
396.062 527.017 M 0.7 16.8 F
358.712 527.017 M 38.1 0.7 F
396.062 543.082 M 63.5 0.7 F
396.062 527.017 M 0.7 16.8 F
458.813 527.017 M 0.7 16.8 F
396.062 527.017 M 63.5 0.7 F
458.813 543.082 M 28.9 0.7 F
458.813 527.017 M 0.7 16.8 F
487 527.017 M 0.7 16.8 F
458.813 527.017 M 28.9 0.7 F
0 527.017 M 127.4 0.7 F
0 510.952 M 0.7 16.8 F
126.674 510.952 M 0.7 16.8 F
0 510.952 M 127.4 0.7 F
126.674 527.017 M 52.2 0.7 F
126.674 510.952 M 0.7 16.8 F
178.136 510.952 M 0.7 16.8 F
126.674 510.952 M 52.2 0.7 F
178.136 527.017 M 54.5 0.7 F
178.136 510.952 M 0.7 16.8 F
231.953 510.952 M 0.7 16.8 F
178.136 510.952 M 54.5 0.7 F
231.953 527.017 M 53.4 0.7 F
231.953 510.952 M 0.7 16.8 F
284.622 510.952 M 0.7 16.8 F
231.953 510.952 M 53.4 0.7 F
284.622 527.017 M 74.8 0.7 F
284.622 510.952 M 0.7 16.8 F
358.712 510.952 M 0.7 16.8 F
284.622 510.952 M 74.8 0.7 F
358.712 527.017 M 38.1 0.7 F
358.712 510.952 M 0.7 16.8 F
396.062 510.952 M 0.7 16.8 F
358.712 510.952 M 38.1 0.7 F
396.062 527.017 M 63.5 0.7 F
396.062 510.952 M 0.7 16.8 F
458.813 510.952 M 0.7 16.8 F
396.062 510.952 M 63.5 0.7 F
458.813 527.017 M 28.9 0.7 F
458.813 510.952 M 0.7 16.8 F
487 510.952 M 0.7 16.8 F
458.813 510.952 M 28.9 0.7 F
0 510.952 M 127.4 0.7 F
0 494.888 M 0.7 16.8 F
126.674 494.888 M 0.7 16.8 F
0 494.888 M 127.4 0.7 F
126.674 510.952 M 52.2 0.7 F
126.674 494.888 M 0.7 16.8 F
178.136 494.888 M 0.7 16.8 F
126.674 494.888 M 52.2 0.7 F
178.136 510.952 M 54.5 0.7 F
178.136 494.888 M 0.7 16.8 F
231.953 494.888 M 0.7 16.8 F
178.136 494.888 M 54.5 0.7 F
231.953 510.952 M 53.4 0.7 F
231.953 494.888 M 0.7 16.8 F
284.622 494.888 M 0.7 16.8 F
231.953 494.888 M 53.4 0.7 F
284.622 510.952 M 74.8 0.7 F
284.622 494.888 M 0.7 16.8 F
358.712 494.888 M 0.7 16.8 F
284.622 494.888 M 74.8 0.7 F
358.712 510.952 M 38.1 0.7 F
358.712 494.888 M 0.7 16.8 F
396.062 494.888 M 0.7 16.8 F
358.712 494.888 M 38.1 0.7 F
396.062 510.952 M 63.5 0.7 F
396.062 494.888 M 0.7 16.8 F
458.813 494.888 M 0.7 16.8 F
396.062 494.888 M 63.5 0.7 F
458.813 510.952 M 28.9 0.7 F
458.813 494.888 M 0.7 16.8 F
487 494.888 M 0.7 16.8 F
458.813 494.888 M 28.9 0.7 F
0 494.888 M 127.4 0.7 F
0 478.823 M 0.7 16.8 F
126.674 478.823 M 0.7 16.8 F
0 478.823 M 127.4 0.7 F
126.674 494.888 M 52.2 0.7 F
126.674 478.823 M 0.7 16.8 F
178.136 478.823 M 0.7 16.8 F
126.674 478.823 M 52.2 0.7 F
178.136 494.888 M 54.5 0.7 F
178.136 478.823 M 0.7 16.8 F
231.953 478.823 M 0.7 16.8 F
178.136 478.823 M 54.5 0.7 F
231.953 494.888 M 53.4 0.7 F
231.953 478.823 M 0.7 16.8 F
284.622 478.823 M 0.7 16.8 F
231.953 478.823 M 53.4 0.7 F
284.622 494.888 M 74.8 0.7 F
284.622 478.823 M 0.7 16.8 F
358.712 478.823 M 0.7 16.8 F
284.622 478.823 M 74.8 0.7 F
358.712 494.888 M 38.1 0.7 F
358.712 478.823 M 0.7 16.8 F
396.062 478.823 M 0.7 16.8 F
358.712 478.823 M 38.1 0.7 F
396.062 494.888 M 63.5 0.7 F
396.062 478.823 M 0.7 16.8 F
458.813 478.823 M 0.7 16.8 F
396.062 478.823 M 63.5 0.7 F
458.813 494.888 M 28.9 0.7 F
458.813 478.823 M 0.7 16.8 F
487 478.823 M 0.7 16.8 F
458.813 478.823 M 28.9 0.7 F
0 478.823 M 127.4 0.7 F
0 462.758 M 0.7 16.8 F
126.674 462.758 M 0.7 16.8 F
0 462.758 M 127.4 0.7 F
126.674 478.823 M 52.2 0.7 F
126.674 462.758 M 0.7 16.8 F
178.136 462.758 M 0.7 16.8 F
126.674 462.758 M 52.2 0.7 F
178.136 478.823 M 54.5 0.7 F
178.136 462.758 M 0.7 16.8 F
231.953 462.758 M 0.7 16.8 F
178.136 462.758 M 54.5 0.7 F
231.953 478.823 M 53.4 0.7 F
231.953 462.758 M 0.7 16.8 F
284.622 462.758 M 0.7 16.8 F
231.953 462.758 M 53.4 0.7 F
284.622 478.823 M 74.8 0.7 F
284.622 462.758 M 0.7 16.8 F
358.712 462.758 M 0.7 16.8 F
284.622 462.758 M 74.8 0.7 F
358.712 478.823 M 38.1 0.7 F
358.712 462.758 M 0.7 16.8 F
396.062 462.758 M 0.7 16.8 F
358.712 462.758 M 38.1 0.7 F
396.062 478.823 M 63.5 0.7 F
396.062 462.758 M 0.7 16.8 F
458.813 462.758 M 0.7 16.8 F
396.062 462.758 M 63.5 0.7 F
458.813 478.823 M 28.9 0.7 F
458.813 462.758 M 0.7 16.8 F
487 462.758 M 0.7 16.8 F
458.813 462.758 M 28.9 0.7 F
0 462.758 M 127.4 0.7 F
0 446.694 M 0.7 16.8 F
126.674 446.694 M 0.7 16.8 F
0 446.694 M 127.4 0.7 F
126.674 462.758 M 52.2 0.7 F
126.674 446.694 M 0.7 16.8 F
178.136 446.694 M 0.7 16.8 F
126.674 446.694 M 52.2 0.7 F
178.136 462.758 M 54.5 0.7 F
178.136 446.694 M 0.7 16.8 F
231.953 446.694 M 0.7 16.8 F
178.136 446.694 M 54.5 0.7 F
231.953 462.758 M 53.4 0.7 F
231.953 446.694 M 0.7 16.8 F
284.622 446.694 M 0.7 16.8 F
231.953 446.694 M 53.4 0.7 F
284.622 462.758 M 74.8 0.7 F
284.622 446.694 M 0.7 16.8 F
358.712 446.694 M 0.7 16.8 F
284.622 446.694 M 74.8 0.7 F
358.712 462.758 M 38.1 0.7 F
358.712 446.694 M 0.7 16.8 F
396.062 446.694 M 0.7 16.8 F
358.712 446.694 M 38.1 0.7 F
396.062 462.758 M 63.5 0.7 F
396.062 446.694 M 0.7 16.8 F
458.813 446.694 M 0.7 16.8 F
396.062 446.694 M 63.5 0.7 F
458.813 462.758 M 28.9 0.7 F
458.813 446.694 M 0.7 16.8 F
487 446.694 M 0.7 16.8 F
458.813 446.694 M 28.9 0.7 F
0 446.694 M 127.4 0.7 F
0 430.629 M 0.7 16.8 F
126.674 430.629 M 0.7 16.8 F
0 430.629 M 127.4 0.7 F
126.674 446.694 M 52.2 0.7 F
126.674 430.629 M 0.7 16.8 F
178.136 430.629 M 0.7 16.8 F
126.674 430.629 M 52.2 0.7 F
178.136 446.694 M 54.5 0.7 F
178.136 430.629 M 0.7 16.8 F
231.953 430.629 M 0.7 16.8 F
178.136 430.629 M 54.5 0.7 F
231.953 446.694 M 53.4 0.7 F
231.953 430.629 M 0.7 16.8 F
284.622 430.629 M 0.7 16.8 F
231.953 430.629 M 53.4 0.7 F
284.622 446.694 M 74.8 0.7 F
284.622 430.629 M 0.7 16.8 F
358.712 430.629 M 0.7 16.8 F
284.622 430.629 M 74.8 0.7 F
358.712 446.694 M 38.1 0.7 F
358.712 430.629 M 0.7 16.8 F
396.062 430.629 M 0.7 16.8 F
358.712 430.629 M 38.1 0.7 F
396.062 446.694 M 63.5 0.7 F
396.062 430.629 M 0.7 16.8 F
458.813 430.629 M 0.7 16.8 F
396.062 430.629 M 63.5 0.7 F
458.813 446.694 M 28.9 0.7 F
458.813 430.629 M 0.7 16.8 F
487 430.629 M 0.7 16.8 F
458.813 430.629 M 28.9 0.7 F
0 430.629 M 127.4 0.7 F
0 401.364 M 0.7 30.0 F
126.674 401.364 M 0.7 30.0 F
0 401.364 M 127.4 0.7 F
126.674 430.629 M 52.2 0.7 F
126.674 401.364 M 0.7 30.0 F
178.136 401.364 M 0.7 30.0 F
126.674 401.364 M 52.2 0.7 F
178.136 430.629 M 54.5 0.7 F
178.136 401.364 M 0.7 30.0 F
231.953 401.364 M 0.7 30.0 F
178.136 401.364 M 54.5 0.7 F
231.953 430.629 M 53.4 0.7 F
231.953 401.364 M 0.7 30.0 F
284.622 401.364 M 0.7 30.0 F
231.953 401.364 M 53.4 0.7 F
284.622 430.629 M 74.8 0.7 F
284.622 401.364 M 0.7 30.0 F
358.712 401.364 M 0.7 30.0 F
284.622 401.364 M 74.8 0.7 F
358.712 430.629 M 38.1 0.7 F
358.712 401.364 M 0.7 30.0 F
396.062 401.364 M 0.7 30.0 F
358.712 401.364 M 38.1 0.7 F
396.062 430.629 M 63.5 0.7 F
396.062 401.364 M 0.7 30.0 F
458.813 401.364 M 0.7 30.0 F
396.062 401.364 M 63.5 0.7 F
458.813 430.629 M 28.9 0.7 F
458.813 401.364 M 0.7 30.0 F
487 401.364 M 0.7 30.0 F
458.813 401.364 M 28.9 0.7 F
0 401.364 M 127.4 0.7 F
0 372.1 M 0.7 30.0 F
126.674 372.1 M 0.7 30.0 F
0 372.1 M 127.4 0.7 F
126.674 401.364 M 52.2 0.7 F
126.674 372.1 M 0.7 30.0 F
178.136 372.1 M 0.7 30.0 F
126.674 372.1 M 52.2 0.7 F
178.136 401.364 M 54.5 0.7 F
178.136 372.1 M 0.7 30.0 F
231.953 372.1 M 0.7 30.0 F
178.136 372.1 M 54.5 0.7 F
231.953 401.364 M 53.4 0.7 F
231.953 372.1 M 0.7 30.0 F
284.622 372.1 M 0.7 30.0 F
231.953 372.1 M 53.4 0.7 F
284.622 401.364 M 74.8 0.7 F
284.622 372.1 M 0.7 30.0 F
358.712 372.1 M 0.7 30.0 F
284.622 372.1 M 74.8 0.7 F
358.712 401.364 M 38.1 0.7 F
358.712 372.1 M 0.7 30.0 F
396.062 372.1 M 0.7 30.0 F
358.712 372.1 M 38.1 0.7 F
396.062 401.364 M 63.5 0.7 F
396.062 372.1 M 0.7 30.0 F
458.813 372.1 M 0.7 30.0 F
396.062 372.1 M 63.5 0.7 F
458.813 401.364 M 28.9 0.7 F
458.813 372.1 M 0.7 30.0 F
487 372.1 M 0.7 30.0 F
458.813 372.1 M 28.9 0.7 F
0 372.1 M 127.4 0.7 F
0 342.835 M 0.7 30.0 F
126.674 342.835 M 0.7 30.0 F
0 342.835 M 127.4 0.7 F
126.674 372.1 M 52.2 0.7 F
126.674 342.835 M 0.7 30.0 F
178.136 342.835 M 0.7 30.0 F
126.674 342.835 M 52.2 0.7 F
178.136 372.1 M 54.5 0.7 F
178.136 342.835 M 0.7 30.0 F
231.953 342.835 M 0.7 30.0 F
178.136 342.835 M 54.5 0.7 F
231.953 372.1 M 53.4 0.7 F
231.953 342.835 M 0.7 30.0 F
284.622 342.835 M 0.7 30.0 F
231.953 342.835 M 53.4 0.7 F
284.622 372.1 M 74.8 0.7 F
284.622 342.835 M 0.7 30.0 F
358.712 342.835 M 0.7 30.0 F
284.622 342.835 M 74.8 0.7 F
358.712 372.1 M 38.1 0.7 F
358.712 342.835 M 0.7 30.0 F
396.062 342.835 M 0.7 30.0 F
358.712 342.835 M 38.1 0.7 F
396.062 372.1 M 63.5 0.7 F
396.062 342.835 M 0.7 30.0 F
458.813 342.835 M 0.7 30.0 F
396.062 342.835 M 63.5 0.7 F
458.813 372.1 M 28.9 0.7 F
458.813 342.835 M 0.7 30.0 F
487 342.835 M 0.7 30.0 F
458.813 342.835 M 28.9 0.7 F
0 342.835 M 127.4 0.7 F
0 307.57 M 0.7 36.0 F
126.674 307.57 M 0.7 36.0 F
0 307.57 M 127.4 0.7 F
126.674 342.835 M 52.2 0.7 F
126.674 307.57 M 0.7 36.0 F
178.136 307.57 M 0.7 36.0 F
126.674 307.57 M 52.2 0.7 F
178.136 342.835 M 54.5 0.7 F
178.136 307.57 M 0.7 36.0 F
231.953 307.57 M 0.7 36.0 F
178.136 307.57 M 54.5 0.7 F
231.953 342.835 M 53.4 0.7 F
231.953 307.57 M 0.7 36.0 F
284.622 307.57 M 0.7 36.0 F
231.953 307.57 M 53.4 0.7 F
284.622 342.835 M 74.8 0.7 F
284.622 307.57 M 0.7 36.0 F
358.712 307.57 M 0.7 36.0 F
284.622 307.57 M 74.8 0.7 F
358.712 342.835 M 38.1 0.7 F
358.712 307.57 M 0.7 36.0 F
396.062 307.57 M 0.7 36.0 F
358.712 307.57 M 38.1 0.7 F
396.062 342.835 M 63.5 0.7 F
396.062 307.57 M 0.7 36.0 F
458.813 307.57 M 0.7 36.0 F
396.062 307.57 M 63.5 0.7 F
458.813 342.835 M 28.9 0.7 F
458.813 307.57 M 0.7 36.0 F
487 307.57 M 0.7 36.0 F
458.813 307.57 M 28.9 0.7 F
0 307.57 M 127.4 0.7 F
0 278.305 M 0.7 30.0 F
126.674 278.305 M 0.7 30.0 F
0 278.305 M 127.4 0.7 F
126.674 307.57 M 270.1 0.7 F
126.674 278.305 M 0.7 30.0 F
396.062 278.305 M 0.7 30.0 F
126.674 278.305 M 270.1 0.7 F
396.062 307.57 M 63.5 0.7 F
396.062 278.305 M 0.7 30.0 F
458.813 278.305 M 0.7 30.0 F
396.062 278.305 M 63.5 0.7 F
458.813 307.57 M 28.9 0.7 F
458.813 278.305 M 0.7 30.0 F
487 278.305 M 0.7 30.0 F
458.813 278.305 M 28.9 0.7 F
0 248.305 M 54.5 0.7 F
0 232.241 M 0.7 16.8 F
53.749 232.241 M 0.7 16.8 F
0 232.241 M 54.5 0.7 F
53.749 248.305 M 374.1 0.7 F
53.749 232.241 M 0.7 16.8 F
427.109 232.241 M 0.7 16.8 F
53.749 232.241 M 374.1 0.7 F
0 232.241 M 54.5 0.7 F
0 216.176 M 0.7 16.8 F
53.749 216.176 M 0.7 16.8 F
0 216.176 M 54.5 0.7 F
53.749 232.241 M 374.1 0.7 F
53.749 216.176 M 0.7 16.8 F
427.109 216.176 M 0.7 16.8 F
53.749 216.176 M 374.1 0.7 F
0 216.176 M 54.5 0.7 F
0 200.111 M 0.7 16.8 F
53.749 200.111 M 0.7 16.8 F
0 200.111 M 54.5 0.7 F
53.749 216.176 M 374.1 0.7 F
53.749 200.111 M 0.7 16.8 F
427.109 200.111 M 0.7 16.8 F
53.749 200.111 M 374.1 0.7 F
0 200.111 M 54.5 0.7 F
0 184.047 M 0.7 16.8 F
53.749 184.047 M 0.7 16.8 F
0 184.047 M 54.5 0.7 F
53.749 200.111 M 374.1 0.7 F
53.749 184.047 M 0.7 16.8 F
427.109 184.047 M 0.7 16.8 F
53.749 184.047 M 374.1 0.7 F
0 184.047 M 54.5 0.7 F
0 167.982 M 0.7 16.8 F
53.749 167.982 M 0.7 16.8 F
0 167.982 M 54.5 0.7 F
53.749 184.047 M 374.1 0.7 F
53.749 167.982 M 0.7 16.8 F
427.109 167.982 M 0.7 16.8 F
53.749 167.982 M 374.1 0.7 F
0 167.982 M 54.5 0.7 F
0 151.917 M 0.7 16.8 F
53.749 151.917 M 0.7 16.8 F
0 151.917 M 54.5 0.7 F
53.749 167.982 M 374.1 0.7 F
53.749 151.917 M 0.7 16.8 F
427.109 151.917 M 0.7 16.8 F
53.749 151.917 M 374.1 0.7 F
11 FS/F4 SF 1.432 685.568 M(Intel Shiva)S
1.432 672.368 M(LANRover/Net Structure)S
0.00 0.80 0.00 C 128.107 678.968 M(Yes)S
0.80 0.00 0.00 C 460.245 678.968 M(No)S
0.00 0.00 0.00 C 1.432 656.303 M(LanCom \(formerly ELSA\))S
0.00 0.80 0.00 C 128.107 656.303 M(Yes)S
0.80 0.00 0.00 C 460.245 656.303 M(No)S
0.00 0.00 0.00 C 1.432 640.238 M(Linksys)S
0.80 0.80 0.00 C 128.107 640.238 M(Maybe)S
0.80 0.00 0.00 C 233.385 640.238 M(No)S
0.00 0.80 0.00 C 397.495 640.238 M(Yes)S
0.80 0.00 0.00 C 460.245 640.238 M(No)S
0.00 0.00 0.00 C 1.432 624.173 M(Lucent)S
0.80 0.80 0.00 C 128.107 624.173 M(Partial)S
0.80 0.00 0.00 C 460.245 624.173 M(No)S
0.00 0.00 0.00 C 1.432 608.109 M(Netasq)S
0.00 0.80 0.00 C 233.385 608.109 M(Yes)S
0.80 0.00 0.00 C 460.245 608.109 M(No)S
0.00 0.00 0.00 C 1.432 592.044 M(netcelo)S
0.00 0.80 0.00 C 233.385 592.044 M(Yes)S
0.80 0.00 0.00 C 460.245 592.044 M(No)S
0.00 0.00 0.00 C 1.432 575.979 M(Netgear fvs318)S
0.00 0.80 0.00 C 128.107 575.979 M(Yes)S
0.80 0.00 0.00 C 460.245 575.979 M(No)S
0.00 0.00 0.00 C 1.432 559.914 M(Netscreen 100)S
1.432 546.714 M(or 5xp)S
0.00 0.80 0.00 C 128.107 553.314 M(Yes)S
0.80 0.80 0.00 C 397.495 553.314 M(Maybe)S
0.80 0.00 0.00 C 460.245 553.314 M(No)S
0.00 0.00 0.00 C 1.432 530.65 M(Nortel Contivity)S
0.80 0.80 0.00 C 128.107 530.65 M(Partial)S
0.00 0.80 0.00 C 233.385 530.65 M(Yes)S
0.80 0.80 0.00 C 286.055 530.65 M(Maybe)S
0.80 0.00 0.00 C 460.245 530.65 M(No)S
0.00 0.00 0.00 C 1.432 514.585 M(RadGuard)S
0.00 0.80 0.00 C 128.107 514.585 M(Yes)S
0.80 0.00 0.00 C 460.245 514.585 M(No)S
0.00 0.00 0.00 C 1.432 498.52 M(Raptor)S
0.00 0.80 0.00 C 128.107 498.52 M(Yes)S
360.145 498.52 M(Yes)S
0.80 0.00 0.00 C 460.245 498.52 M(No)S
0.00 0.00 0.00 C 1.432 482.455 M(Redcreek Ravlin)S
0.00 0.80 0.00 C 128.107 482.455 M(Yes)S
0.80 0.80 0.00 C (/Partial)S
0.80 0.00 0.00 C 460.245 482.455 M(No)S
0.00 0.00 0.00 C 1.432 466.391 M(SonicWall)S
0.00 0.80 0.00 C 128.107 466.391 M(Yes)S
0.80 0.80 0.00 C 360.145 466.391 M(Maybe)S
0.80 0.00 0.00 C 397.495 466.391 M(No)S
460.245 466.391 M(No)S
0.00 0.00 0.00 C 1.432 450.326 M(Sun Solaris)S
0.00 0.80 0.00 C 128.107 450.326 M(Yes)S
233.385 450.326 M(Yes)S
360.145 450.326 M(Yes)S
0.80 0.00 0.00 C 460.245 450.326 M(No)S
0.00 0.00 0.00 C 1.432 434.261 M(Symantec)S
0.00 0.80 0.00 C 128.107 434.261 M(Yes)S
0.80 0.00 0.00 C 460.245 434.261 M(No)S
0.00 0.00 0.00 C 1.432 418.197 M(Watchguard)S
1.432 404.997 M(Firebox)S
0.00 0.80 0.00 C 128.107 411.597 M(Yes)S
360.145 411.597 M(Yes)S
0.80 0.00 0.00 C 460.245 411.597 M(No)S
0.00 0.00 0.00 C 1.432 388.932 M(Xedia Access Point)S
1.432 375.732 M(/QVPN)S
0.00 0.80 0.00 C 128.107 382.332 M(Yes)S
0.80 0.00 0.00 C 460.245 382.332 M(No)S
0.00 0.00 0.00 C 1.432 359.667 M(Zyxel Zywall)S
1.432 346.467 M(/Prestige)S
0.00 0.80 0.00 C 128.107 353.067 M(Yes)S
0.80 0.00 0.00 C 460.245 353.067 M(No)S
0.00 0.00 0.00 C 128.107 320.802 M(PSK)S
179.568 327.402 M(RSA)S
179.568 314.202 M(Secret)S
233.385 330.402 M(X.509)S
8 FS/F4 SF 233.385 320.202 M(\(requires)S
233.385 310.602 M(patch\))S
11 FS/F4 SF 286.055 325.602 M(NAT-Traversal)S
8 FS/F4 SF 286.055 315.402 M(\(requires patch\))S
11 FS/F4 SF 360.145 327.402 M(Manual)S
360.145 314.202 M(Keying)S
128.107 288.538 M(FreeS/WAN VPN)S
397.495 295.138 M(Road)S
397.495 281.938 M(Warrior)S
460.245 288.538 M(OE)S
14 FS/F9 SF 0 264.305 M(Key)S
0.00 0.80 0.00 C 11 FS/F4 SF 1.432 235.873 M(Yes)S
0.00 0.00 0.00 C 55.181 235.873 M(People report that this works for them.)S
1.432 219.808 M([Blank])S
55.181 219.808 M(We don't know.)S
0.80 0.00 0.00 C 1.432 203.744 M(No)S
0.00 0.00 0.00 C 55.181 203.744 M(We have reason to believe it was, at some point, not possible to get this to work.)S
0.80 0.80 0.00 C 1.432 187.679 M(Partial)S
0.00 0.00 0.00 C 55.181 187.679 M(Partial success. For example, a connection can be created from one end only.)S
0.00 0.80 0.00 C 1.432 171.614 M(Yes)S
0.80 0.80 0.00 C (/Partial)S
0.00 0.00 0.00 C 55.181 171.614 M(Mixed reports.)S
0.80 0.80 0.00 C 1.432 155.549 M(Maybe)S
0.00 0.00 0.00 C 55.181 155.549 M(We think the answer is "yes", but need confirmation.)S
17 FS/F9 SF 0 121.717 M(Basic Interop Rules)S
11 FS/F4 SF 0 94.117 M(Vanilla FreeS/WAN implements these parts of the IPSec specifications. You can add more with Super)S
0 80.917 M(FreeS/WAN, but what we offer may be enough for many users.)S
36 54.517 M(To use X.509 certificates with FreeS/WAN, you will need the X.509 patch or Super FreeS/WAN,)S
36 41.317 M(which includes that patch.)S
/Fc SF 28.19 54.517 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Key)S
468.652 0 M(115)S
GR
SP
%%Page: 116 145
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(To use Network Address Translation \(NAT\) traversal with FreeS/WAN, you will need Arkoon)S
36 673.8 M(Network Security's NAT traversal patch or Super FreeS/WAN, which includes it.)S
/Fc SF 28.19 687 M(\267 )S
/F4 SF 0 647.4 M(We offer a set of proposals which is not user-adjustable, but covers all combinations that we can offer.)S
0 634.2 M(FreeS/WAN always proposes triple DES encryption and Perfect Forward Secrecy \(PFS\). In addition, we)S
0 621 M(propose Diffie Hellman groups 5 and 2 \(in that order\), and MD5 and SHA-1 hashes. We accept the same)S
0 607.8 M(proposals, in the same order of preference.)S
0 581.4 M(Other interop notes:)S
36 555 M(A SHA-1 bug in FreeS/WAN 2.00, 2.01 and 2.02 may affect some interop scenarios. It does not)S
36 541.8 M(affect 1.x versions, and is fixed in 2.03 and later.)S
/Fc SF 28.19 555 M(\267 )S
/F4 SF 36 528.6 M(Some other implementations will close a connection with FreeS/WAN after some time. This may be a)S
36 515.4 M(problem with rekey lifetimes. Please see this tip and this workaround.)S
/Fc SF 28.19 528.6 M(\267 )S
17 FS/F9 SF 0 483 M(Longer Stories)S
14 FS/F9 SF 0 452.4 M(For)S
/Fb SF ( More Compatible)S
/F9 SF ( Implementations)S
11 FS/F9 SF 0 425.4 M(FreeS/WAN)S
/F4 SF 0 399 M(See our documentation at freeswan.org and the Super FreeS/WAN docs at freeswan.ca. Some user-written)S
0 385.8 M(HOWTOs for FreeS/WAN-FreeS/WAN connections are listed in our Introduction.)S
0 359.4 M(See also:)S
36 333 M(A German FreeS/WAN-FreeS/WAN page by Markus Wernig \(X.509\))S
/Fc SF 28.19 333 M(\267 )S
/F4 SF 0 306.6 M(Back to chart)S
/F9 SF 0 280.2 M(isakmpd \(OpenBSD\))S
/F4 SF 0 253.8 M(OpenBSD FAQ: Using IPsec)S
0 240.6 M(Hans-Joerg Hoexer's interop Linux-OpenBSD \(PSK\))S
0 227.4 M(Skyper's configuration \(PSK\))S
0 214.2 M(French page with configs \(X.509\))S
0 187.8 M(Back to chart)S
/F9 SF 0 161.4 M(Kame)S
/F4 SF 36 135 M(For FreeBSD and NetBSD. Ships with Mac OS X; see also our Mac section.)S
/Fc SF 28.19 135 M(\267 )S
/F4 SF 36 121.8 M(Also known as)S
/F6 SF ( racoon)S
/F4 SF (, its keying daemon.)S
/Fc SF 28.19 121.8 M(\267 )S
/F4 SF 0 95.4 M(Kame homepage, with FAQ)S
0 82.2 M(NetBSD's IPSec FAQ)S
0 69 M(Ghislaine's post explaining some interop peculiarities)S
0 42.6 M(Itojun's Kame-FreeS/WAN interop tips \(PSK\))S
0 29.4 M(Ghislaine Labouret's French page with links to matching FreeS/WAN and Kame configs \(RSA\))S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Longer Stories)S
468.652 0 M(116)S
GR
SP
%%Page: 117 146
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(Markus Wernig's HOWTO \(X.509, BSD gateway\))S
0 673.8 M(Frodo's Kame-FreeS/WAN interop \(X.509\))S
0 660.6 M(Kame as a WAVEsec client.)S
0 634.2 M(Back to chart)S
/F9 SF 0 607.8 M(PGPNet/McAfee)S
/F4 SF 36 581.4 M(Now called McAfee VPN Client.)S
/Fc SF 28.19 581.4 M(\267 )S
/F4 SF 36 568.2 M(PGPNet also came in a freeware version which did not support subnets)S
/Fc SF 28.19 568.2 M(\267 )S
/F4 SF 36 555 M(To support dhcp-over-ipsec, you need the X.509 patch, which is included in Super FreeS/WAN.)S
/Fc SF 28.19 555 M(\267 )S
/F4 SF 0 528.6 M(Tim Carr's Windows Interop Guide \(X.509\))S
0 515.4 M(Hans-Joerg Hoexer's Guide for Linux-PGPNet \(PSK\))S
0 502.2 M(Kai Martius' instructions using RSA Key-Extractor Tool \(RSA\))S
0 489 M(    Christian Zeng's page \(RSA\) based on Kai's work. English or German.)S
0 475.8 M(Oscar Delgado's PDF \(X.509, no configs\))S
0 462.6 M(Ryan's HOWTO for FreeS/WAN-PGPNet \(X.509\). Through a Linksys Router with IPsec Passthru enabled.)S
0 449.4 M(Jean-Francois Nadeau's Practical Configuration \(Road Warrior with PSK\))S
0 436.2 M(Wouter Prins' HOWTO \(Road Warrior with X.509\))S
0 409.8 M(Rekeying problem with FreeS/WAN and older PGPNets)S
0 383.4 M(DHCP over IPSEC HOWTO for FreeS/WAN \(requires X.509 and dhcprelay patches\))S
0 357 M(Back to chart)S
/F9 SF 0 330.6 M(Microsoft Windows 2000/XP)S
/F4 SF 36 304.2 M(IPsec comes with Win2k, and with XP Support Tools. May require High Encryption Pack. WinXP)S
36 291 M(users have also reported better results with Service Pack 1.)S
/Fc SF 28.19 304.2 M(\267 )S
/F4 SF 36 277.8 M(The Road Warrior setup works either way round. Windows \(XP or 2K\) IPsec can connect as a Road)S
36 264.6 M(Warrior to FreeS/WAN. However, FreeS/WAN can also successfully connect as a Road Warrior to)S
36 251.4 M(Windows IPsec \(see Nate Carlson's configs below\).)S
/Fc SF 28.19 277.8 M(\267 )S
/F4 SF 36 238.2 M(FreeS/WAN version 1.92 or later is required to avoid an interoperation problem with Windows native)S
36 225 M(IPsec. Earlier FreeS/WAN versions did not process the Commit Bit as Windows native IPsec)S
36 211.8 M(expected.)S
/Fc SF 28.19 238.2 M(\267 )S
/F4 SF 0 185.4 M(Tim Carr's Windows Interop Guide \(X.509\))S
0 172.2 M(James Carter's instructions \(X.509, NAT-T\))S
0 159 M(Jean-Francois Nadeau's Net-net Configuration \(PSK\))S
0 145.8 M(Telenor's Node-node Config \(Transport-mode PSK\))S
0 132.6 M(Marcus Mueller's HOWTO using his VPN config tool \(X.509\). Tool also works with PSK.)S
0 119.4 M(Nate Carlson's HOWTO using same tool \(Road Warrior with X.509\). Unusually, FreeS/WAN is the Road)S
0 106.2 M(Warrior here.)S
0 93 M(Oscar Delgado's PDF \(X.509, no configs\))S
0 79.8 M(Tim Scannell's Windows XP Additional Checklist \(X.509\))S
0 53.4 M(Microsoft's page on Win2k TCP/IP security features)S
0 40.2 M(Microsoft's Win2k IPsec debugging tips)S
0 27 M(MS VPN may fall back to 1DES)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(For More Compatible Implementations)S
468.652 0 M(117)S
GR
SP
%%Page: 118 147
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(Back to chart)S
/F9 SF 0 660.6 M(SSH Sentinel)S
/F4 SF 36 634.2 M(Popular and well tested.)S
/Fc SF 28.19 634.2 M(\267 )S
/F4 SF 36 621 M(Also rebranded in Zyxel Zywall. Our Zyxel interop notes are here.)S
/Fc SF 28.19 621 M(\267 )S
/F4 SF 36 607.8 M(SSH supports IPsec-over-UDP NAT traversal.)S
/Fc SF 28.19 607.8 M(\267 )S
/F4 SF 36 594.6 M(There is this potential problem if you're not using the Legacy Proposal option.)S
/Fc SF 28.19 594.6 M(\267 )S
/F4 SF 0 568.2 M(SSH's Sentinel-FreeSWAN interop PDF \(X.509\))S
0 555 M(Nadeem Hassan's SUSE-to-Sentinel article \(Road warrior with X.509\))S
0 541.8 M(O-Zone's Italian HOWTO \(Road Warrior, X.509, DHCP\))S
0 515.4 M(Back to chart)S
/F9 SF 0 489 M(Safenet SoftPK/SoftRemote)S
/F4 SF 36 462.6 M(People recommend SafeNet as a low cost Windows client.)S
/Fc SF 28.19 462.6 M(\267 )S
/F4 SF 36 449.4 M(SoftRemote seems to be the newer name for SoftPK.)S
/Fc SF 28.19 449.4 M(\267 )S
/F4 SF 0 423 M(Whit Blauvelt's SoftRemote tips)S
0 409.8 M(Tim Wilson's tips \(X.509\) Workaround for a "gotcha")S
0 383.4 M(Jean-Francois Nadeau's Practical Configuration \(Road Warrior with PSK\))S
0 370.2 M(Terradon Communications' PDF \(Road Warrior with PSK\))S
0 357 M(Seaan.net's PDF \(Road Warrior to Subnet, with PSK\))S
0 343.8 M(Red Baron Consulting's PDF \(Road Warrior with X.509\))S
0 317.4 M(Back to chart)S
14 FS/F9 SF 0 288 M(For)S
/Fb SF ( Other Implementations)S
11 FS/F9 SF 0 261 M(6Wind)S
/F4 SF 0 234.6 M(French page with configs \(X.509\))S
0 208.2 M(Back to chart)S
/F9 SF 0 181.8 M(Alcatel Timestep)S
/F4 SF 0 155.4 M(Alain Sabban's settings \(PSK or PSK road warrior; through static NAT\))S
0 142.2 M(Derick Cassidy's configs \(PSK\))S
0 129 M(David Kerry's Timestep settings \(PSK\))S
0 115.8 M(Kevin Gerbracht's ipsec.conf \(X.509\))S
0 89.4 M(Back to chart)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(For More Compatible Implementations)S
468.652 0 M(118)S
GR
SP
%%Page: 119 148
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F9 SF 0 687 M(Apple Macintosh System 10+)S
/F4 SF 36 660.6 M(Since the system is based on FreeBSD, this should interoperate just like FreeBSD.)S
/Fc SF 28.19 660.6 M(\267 )S
/F4 SF 36 647.4 M(To use Appletalk over IPsec tunnels, run it over TCP/IP, or use Open Door Networks' Shareway IP)S
36 634.2 M(tool, described here.)S
/Fc SF 28.19 647.4 M(\267 )S
/F4 SF 36 621 M(See also the Equinux VPN Tracker for Mac OS X.)S
/Fc SF 28.19 621 M(\267 )S
/F4 SF 0 594.6 M(James Carter's instructions \(X.509, NAT-T\))S
0 568.2 M(Back to chart)S
/F9 SF 0 541.8 M(AshleyLaurent VPCom)S
/F4 SF 0 515.4 M(Successful interop report, no details)S
0 489 M(Back to chart)S
/F9 SF 0 462.6 M(Borderware)S
/F4 SF 36 436.2 M(I suspect the Borderware client is a rebranded Safenet. If that's true, our Safenet section will help.)S
/Fc SF 28.19 436.2 M(\267 )S
/F4 SF 0 409.8 M(Philip Reetz' configs \(PSK\))S
0 396.6 M(Borderware server does not support FreeS/WAN road warriors)S
0 383.4 M(Older Borderware may not support Diffie Hellman groups 2, 5)S
0 357 M(Back to chart)S
/F9 SF 0 330.6 M(Check Point VPN-1 or FW-1)S
/F4 SF 36 304.2 M(Caveat about IP-range inclusion on Check Point.)S
/Fc SF 28.19 304.2 M(\267 )S
/F4 SF 36 291 M(Some versions of Check Point may require an aggressive mode patch to interoperate with)S
36 277.8 M(FreeS/WAN.)S
36 264.6 M(Super FreeS/WAN now features this patch.)S
/Fc SF 28.19 291 M(\267 )S
28.19 251.4 M(\267 )S
/F4 SF (A Linux FreeS/WAN-Checkpoint connection may close after some time. Try this tip toward a)S
36 238.2 M(workaround.)S
/Fc SF 28.19 251.4 M(\267 )S
/F4 SF 0 211.8 M(AERAsec's Firewall-1 NG site \(PSK, X.509, Road Warrior with X.509, other algorithms\))S
0 198.6 M(     AERAsec's detailed Check Point-FreeS/WAN support matrix)S
0 185.4 M(Checkpoint.com PDF: Linux as a VPN Client to FW-1 \(PSK\))S
0 172.2 M(PhoneBoy's Check Point FAQ \(on Check Point only, not FreeS/WAN\))S
0 145.8 M(Chris Harwell's tips &FreeS/WAN configs \(PSK\))S
0 132.6 M(Daniel Tombeil's configs \(PSK\))S
0 106.2 M(Back to chart)S
/F9 SF 0 79.8 M(Cisco)S
/F4 SF 36 53.4 M(Cisco supports IPsec-over-UDP NAT traversal.)S
/Fc SF 28.19 53.4 M(\267 )S
/F4 SF 36 40.2 M(Cisco VPN Client appears to use nonstandard IPsec and does not work with FreeS/WAN. This)S
36 27 M(message concerns Cisco VPN Client 4.01.)S
/Fc SF 28.19 40.2 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(For Other Implementations)S
468.652 0 M(119)S
GR
SP
%%Page: 120 149
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(A Linux FreeS/WAN-Cisco connection may close after some time. Here is a workaround, and here is)S
36 673.8 M(another comment on the same subject.)S
/Fc SF 28.19 687 M(\267 )S
/F4 SF 36 660.6 M(Older Ciscos purchased outside the United States may not have 3DES, which FreeS/WAN requires.)S
/Fc SF 28.19 660.6 M(\267 )S
/F4 SF 36 647.4 M(RSA keying may not be possible between Cisco and FreeS/WAN.)S
/Fc SF 28.19 647.4 M(\267 )S
/F4 SF 36 634.2 M(In ipsec.conf, VPN3000 DN \(distinguished name\) must be in binary \(X.509 only\))S
/Fc SF 28.19 634.2 M(\267 )S
/F4 SF 0 607.8 M(SANS Institute HOWTO \(PSK\). Detailed, with extensive references.)S
0 594.6 M(Short HOWTO \(PSK\))S
0 581.4 M(French page with configs for Cisco IOS, PIX and VPN 3000 \(X.509\))S
0 568.2 M(Dave McFerren's sample configs \(PSK\))S
0 555 M(Wolfgang Tremmel's sample configs \(PSK road warrior\))S
0 541.8 M(Old doc from Pete Davis, with William Watson's updated Tips \(PSK\))S
/F7 SF 0 515.4 M(Some PIX specific information:)S
/F4 SF 0 502.2 M(Waikato Linux Users' Group HOWTO. Nice detail \(PSK\))S
0 489 M(John Leach's configs \(PSK\))S
0 475.8 M(Greg Robinson's settings \(PSK\))S
0 462.6 M(Scott's ipsec.conf for PIX \(PSK, FreeS/WAN side only\))S
0 449.4 M(Rick Trimble's PIX and FreeS/WAN settings \(PSK\))S
0 423 M(Cisco VPN support page)S
0 409.8 M(Cisco IPsec information page)S
0 383.4 M(Back to chart)S
/F9 SF 0 357 M(Equinux VPN tracker \(for Mac OS X\))S
/F4 SF 36 330.6 M(Graphical configurator for Mac OS X IPsec. May be an interface to the native Mac OS X IPsec,)S
36 317.4 M(which is essentially KAME.)S
/Fc SF 28.19 330.6 M(\267 )S
/F4 SF 36 304.2 M(To use Appletalk over IPsec tunnels, run it over TCP/IP, or use Open Door Networks' Shareway IP)S
36 291 M(tool, described here.)S
/Fc SF 28.19 304.2 M(\267 )S
/F4 SF 0 264.6 M(Equinux provides this excellent interop PDF \(PSK, RSA, X.509\).)S
0 238.2 M(Back to chart)S
/F9 SF 0 211.8 M(F-Secure)S
/F4 SF 36 185.4 M(F-Secure supports IPsec-over-UDP NAT traversal.)S
/Fc SF 28.19 185.4 M(\267 )S
/F4 SF 0 159 M(pingworks.de's "Connecting F-Secure's VPN+ to Linux FreeS/WAN" \(PSK road warrior\))S
0 145.8 M(    Same thing as PDF)S
0 132.6 M(Success report, no detail \(PSK\))S
0 119.4 M(Success report, no detail \(Manual\))S
0 93 M(Back to chart)S
/F9 SF 0 66.6 M(Gauntlet GVPN)S
/F4 SF 0 40.2 M(Richard Reiner's ipsec.conf \(PSK\))S
0 27 M(Might work without that pesky firewall... \(PSK\))S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(For Other Implementations)S
468.652 0 M(120)S
GR
SP
%%Page: 121 150
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(In late July, 2003 Alexandar Antik reported success interoperating with Gauntlet 6.0 for Solaris \(X.509\).)S
0 673.8 M(Unfortunately the message is not properly archived at this time.)S
0 647.4 M(Back to chart)S
/F9 SF 0 621 M(IBM AIX)S
/F4 SF 0 594.6 M(IBM's "Built-In Network Security with AIX" \(PSK, X.509\))S
0 581.4 M(IBM's tip: importing Linux FreeS/WAN settings into AIX's)S
/Fa SF ( ikedb)S
/F4 SF ( \(PSK\))S
0 555 M(Back to chart)S
/F9 SF 0 528.6 M(IBM AS/400)S
/F4 SF 36 502.2 M(Road Warriors may act flaky.)S
/Fc SF 28.19 502.2 M(\267 )S
/F4 SF 0 475.8 M(Richard Welty's tips and tricks)S
0 449.4 M(Back to chart)S
/F9 SF 0 423 M(Intel Shiva LANRover / Net Structure)S
/F4 SF 36 396.6 M(Intel Shiva LANRover is now known as Intel Net Structure.)S
/Fc SF 28.19 396.6 M(\267 )S
/F4 SF 36 383.4 M(Shiva seems to have two modes: IPsec or the proprietary "Shiva Tunnel". Of course, FreeS/WAN will)S
36 370.2 M(only create IPsec tunnels.)S
/Fc SF 28.19 383.4 M(\267 )S
/F4 SF 36 357 M(AH may not work for Shiva-FreeS/WAN. That's OK, since FreeS/WAN has phased out the use of)S
36 343.8 M(AH.)S
/Fc SF 28.19 357 M(\267 )S
/F4 SF 0 317.4 M(Snowcrash's configs \(PSK\))S
0 304.2 M(Old configs from an interop \(PSK\))S
0 291 M(The day Shiva tickled a Pluto bug \(PSK\))S
0 277.8 M(     Follow up: success!)S
0 251.4 M(Back to chart)S
/F9 SF 0 225 M(LanCom \(formerly ELSA\))S
/F4 SF 36 198.6 M(This router is popular in Germany.)S
/Fc SF 28.19 198.6 M(\267 )S
/F4 SF 0 172.2 M(Jakob Curdes successfully created a PSK connection with the LanCom 1612 in August 2003.)S
0 145.8 M(Back to chart)S
/F9 SF 0 119.4 M(Linksys)S
/F4 SF 36 93 M(Linksys may be used as an IPsec tunnel endpoint,)S
/F7 SF ( OR)S
/F4 SF ( as a router in "IPsec passthrough" mode, so that)S
36 79.8 M(the IPsec tunnel passes through the Linksys.)S
/Fc SF 28.19 93 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(For Other Implementations)S
468.652 0 M(121)S
GR
SP
%%Page: 122 151
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F9 SF 0 689 M(As tunnel endpoint)S
11 FS/F4 SF 0 663 M(Ken Bantoft's instructions \(Road Warrior with PSK\))S
0 649.8 M(Nate Carlson's caveats)S
9 FS/F9 SF 0 625.4 M(In IPsec passthrough mode)S
11 FS/F4 SF 0 599.4 M(Sample HOWTO through a Linksys Router)S
0 586.2 M(Nadeem Hasan's configs)S
0 573 M(Brock Nanson's tips)S
0 546.6 M(Back to chart)S
/F9 SF 0 520.2 M(Lucent)S
/F4 SF 0 493.8 M(Partial success report; see also the next message in thread)S
0 467.4 M(Back to chart)S
/F9 SF 0 441 M(Netasq)S
/F4 SF 0 414.6 M(French page with configs \(X.509\))S
0 388.2 M(Back to chart)S
/F9 SF 0 361.8 M(Netcelo)S
/F4 SF 0 335.4 M(French page with configs \(X.509\))S
0 309 M(Back to chart)S
/F9 SF 0 282.6 M(Netgear fvs318)S
/F4 SF 36 256.2 M(With a recent Linux FreeS/WAN, you will require the latest \(12/2002\) Netgear firmware, which)S
36 243 M(supports Diffie-Hellman \(DH\) group 2. For security reasons, we phased out DH 1 after Linux)S
36 229.8 M(FreeS/WAN 1.5.)S
/Fc SF 28.19 256.2 M(\267 )S
/F4 SF 36 216.6 M(This message reports the incompatibility between Linux FreeS/WAN 1.6+ and Netgear fvs318)S
36 203.4 M(without the firmware upgrade.)S
/Fc SF 28.19 216.6 M(\267 )S
/F4 SF 36 190.2 M(We believe Linux FreeS/WAN 1.5 and earlier will interoperate with any NetGear firmware.)S
/Fc SF 28.19 190.2 M(\267 )S
/F4 SF 0 163.8 M(John Morris' setup \(PSK\))S
0 137.4 M(Back to chart)S
/F9 SF 0 111 M(Netscreen 100 or 5xp)S
/F4 SF 0 84.6 M(Errol Neal's settings \(PSK\))S
0 71.4 M(Corey Rogers' configs \(PSK, no PFS\))S
0 58.2 M(Jordan Share's configs \(PSK, 2 subnets, through static NAT\))S
0 45 M(Set src proxy_id to your protected subnet/mask)S
0 31.8 M(French page with ipsec.conf, Netscreen screen shots \(X.509, may need to revert to PSK...\))S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(For Other Implementations)S
468.652 0 M(122)S
GR
SP
%%Page: 123 152
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(A report of a company using Netscreen with FreeS/WAN on a large scale \(FreeS/WAN road warriors?\))S
0 660.6 M(Back to chart)S
/F9 SF 0 634.2 M(Nortel Contivity)S
/F4 SF 36 607.8 M(Nortel supports IPsec-over-UDP NAT traversal.)S
/Fc SF 28.19 607.8 M(\267 )S
/F4 SF 36 594.6 M(Some older versions of Contivity and FreeS/WAN will not communicate.)S
/Fc SF 28.19 594.6 M(\267 )S
/F4 SF 36 581.4 M(FreeS/WAN cannot be used as a "client" to a Nortel Contivity server, but can be used as a)S
36 568.2 M(branch-office tunnel.)S
/Fc SF 28.19 581.4 M(\267 )S
/F4 SF 36 541.8 M(Contivity does not send Distinguished Names in the order FS wants them \(X.509\).)S
/Fc SF 28.19 541.8 M(\267 )S
/F4 SF 36 528.6 M(Connections may time out after 30-40 minutes idle.)S
/Fc SF 28.19 528.6 M(\267 )S
/F4 SF 0 502.2 M(JJ Streicher-Bremer's mini HOWTO for old &new software. \(PSK with two subnets\))S
0 489 M(French page with configs \(X.509\). This succeeds using the above X.509 tip.)S
0 462.6 M(Back to chart)S
/F9 SF 0 436.2 M(Radguard)S
/F4 SF 0 409.8 M(Marko Hausalo's configs \(PSK\). Note: These do create a connection, as you can see by "IPsec SA)S
0 396.6 M(established".)S
0 383.4 M(Claudia Schmeing's comments)S
0 357 M(Back to chart)S
/F9 SF 0 330.6 M(Raptor \(NT or Solaris\))S
/F4 SF 36 304.2 M(Now known as Symantec Enterprise Firewall.)S
/Fc SF 28.19 304.2 M(\267 )S
/F4 SF 36 291 M(The Raptor does not normally come with X.509, but this may be available as an add-on.)S
/Fc SF 28.19 291 M(\267 )S
/F4 SF 36 277.8 M(Raptor requires alphanumberic PSK values, whereas FreeS/WAN uses hex.)S
/Fc SF 28.19 277.8 M(\267 )S
/F4 SF 36 264.6 M(Raptor's tunnel endpoint may be a host, subnet or group of subnets \(see this message \). FreeS/WAN)S
36 251.4 M(cannot handle the group of subnets; you must create separate connections for each in order to)S
36 238.2 M(interoperate.)S
/Fc SF 28.19 264.6 M(\267 )S
/F4 SF 36 225 M(Some versions of Raptor accept only single DES. According to this German message, the Raptor)S
36 211.8 M(Mobile Client demo offers single DES only.)S
/Fc SF 28.19 225 M(\267 )S
/F4 SF 0 185.4 M(Peter Mazinger's settings \(PSK\))S
0 172.2 M(Peter Gerland's configs \(PSK\))S
0 159 M(Charles Griebel's configs \(PSK\).)S
0 145.8 M(Lumir Srch's tips \(PSK\))S
0 119.4 M(John Hardy's configs \(Manual\))S
0 106.2 M(Older Raptors want 3DES keys in 3 parts \(Manual\).)S
0 93 M(Different keys for each direction? \(Manual\))S
0 66.6 M(Back to chart)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(For Other Implementations)S
468.652 0 M(123)S
GR
SP
%%Page: 124 153
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F9 SF 0 687 M(Redcreek Ravlin)S
/F4 SF 36 660.6 M(Known issue #1: The Ravlin expects a quick mode renegotiation right after every Main Mode)S
36 647.4 M(negotiation.)S
/Fc SF 28.19 660.6 M(\267 )S
/F4 SF 36 634.2 M(Known issue #2: The Ravlin tries to negotiate a zero connection lifetime, which it takes to mean)S
36 621 M("infinite". Jim Hague's patch addresses both issues.)S
/Fc SF 28.19 634.2 M(\267 )S
/F4 SF 36 607.8 M(Interop works with Ravlin Firmware > 3.33. Includes tips \(PSK\).)S
/Fc SF 28.19 607.8 M(\267 )S
/F4 SF 0 581.4 M(Back to chart)S
/F9 SF 0 555 M(SonicWall)S
/F4 SF 36 528.6 M(Sonicwall cannot be used for Road Warrior setups)S
/Fc SF 28.19 528.6 M(\267 )S
/F4 SF 36 515.4 M(At one point, only Sonicwall PRO supported triple DES.)S
/Fc SF 28.19 515.4 M(\267 )S
/F4 SF 36 502.2 M(Older Sonicwalls \(before Nov 2001\) feature Diffie Hellman group 1 only.)S
/Fc SF 28.19 502.2 M(\267 )S
/F4 SF 0 475.8 M(Paul Wouters' config \(PSK\))S
0 462.6 M(Dilan Arumainathan's configuration \(PSK\))S
0 449.4 M(Dariush's setup... only opens one way \(PSK\))S
0 436.2 M(Andreas Steffen's tips \(X.509\))S
0 409.8 M(Back to chart)S
/F9 SF 0 383.4 M(Sun Solaris)S
/F4 SF 36 357 M(Solaris 8+ has a native \(in kernel\) IPsec implementation.)S
/Fc SF 28.19 357 M(\267 )S
/F4 SF 36 343.8 M(Solaris does not seem to support tunnel mode, but you can make IP-in-IP tunnels instead, like this.)S
/Fc SF 28.19 343.8 M(\267 )S
/F4 SF 0 317.4 M(Reports of some successful interops from a fellow @sun.com. See also these follow up posts.)S
0 304.2 M(Aleks Shenkman's configs \(Manual in transport mode\))S
0 277.8 M(Back to chart)S
/F9 SF 0 251.4 M(Symantec)S
/F4 SF 36 225 M(The Raptor, covered above, is now known as Symantec Enterprise Firewall.)S
/Fc SF 28.19 225 M(\267 )S
/F4 SF 36 211.8 M(Symantec's "distinguished name" is a KEY_ID. See Andreas Steffen's post, below.)S
/Fc SF 28.19 211.8 M(\267 )S
/F4 SF 0 185.4 M(Andreas Steffen's configs for Symantec 200R \(PSK\))S
0 159 M(Back to chart)S
/F9 SF 0 132.6 M(Watchguard Firebox)S
/F4 SF 36 106.2 M(Automatic keying works with WatchGuard 5.0+ only.)S
/Fc SF 28.19 106.2 M(\267 )S
/F4 SF 36 93 M(Seen to interoperate with WatchGuard 1000, II, III; firmware v. 5, 6..)S
/Fc SF 28.19 93 M(\267 )S
/F4 SF 36 79.8 M(For manual keying, Watchguard's Policy Manager expects SPI numbers and encryption and)S
36 66.6 M(authentication keys in decimal \(not hex\).)S
/Fc SF 28.19 79.8 M(\267 )S
/F4 SF 0 40.2 M(WatchGuard's HOWTO \(PSK\))S
0 27 M(Ronald C. Riviera's Settings \(PSK\))S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(For Other Implementations)S
468.652 0 M(124)S
GR
SP
%%Page: 125 154
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(Walter Wickersham's Notes \(PSK\))S
0 673.8 M(Max Enders' Configs \(Manual\))S
0 647.4 M(Old known issue with auto keying)S
0 634.2 M(Tips on key generation and format \(Manual\))S
0 607.8 M(Back to chart)S
/F9 SF 0 581.4 M(Xedia Access Point/QVPN)S
/F4 SF 0 555 M(Hybrid IPsec/L2TP connection settings \(X.509\))S
0 541.8 M(Xedia's LAN-LAN links don't use multiple tunnels)S
0 528.6 M(     That explanation, continued)S
0 502.2 M(Back to chart)S
/F9 SF 0 475.8 M(Zyxel)S
/F4 SF 36 449.4 M(The Zyxel Zywall is a rebranded SSH Sentinel box. See also our section on SSH.)S
/Fc SF 28.19 449.4 M(\267 )S
/F4 SF 36 436.2 M(There seems to be a problem with keeping this connection alive. This is caused at the Zyxel end. See)S
36 423 M(this brief discussion and solution.)S
/Fc SF 28.19 436.2 M(\267 )S
/F4 SF 0 396.6 M(Zyxel's Zywall to FreeS/WAN instructions \(PSK\))S
0 383.4 M(Zyxel's Prestige to FreeS/WAN instructions \(PSK\). Note: not all Prestige versions include VPN software.)S
0 370.2 M(Fabrice Cahen's HOWTO \(PSK\))S
0 330.6 M(Back to chart)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(For Other Implementations)S
468.652 0 M(125)S
GR
SP
%%Page: 126 155
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
198.525 250.4 M 29.6 0.7 F
198.525 234.335 M 0.7 16.8 F
227.437 234.335 M 0.7 16.8 F
198.525 234.335 M 29.6 0.7 F
227.437 250.4 M 72.4 0.7 F
227.437 234.335 M 0.7 16.8 F
299.139 234.335 M 0.7 16.8 F
227.437 234.335 M 72.4 0.7 F
299.139 250.4 M 55.3 0.7 F
299.139 234.335 M 0.7 16.8 F
353.725 234.335 M 0.7 16.8 F
299.139 234.335 M 55.3 0.7 F
353.725 250.4 M 55.3 0.7 F
353.725 234.335 M 0.7 16.8 F
408.299 234.335 M 0.7 16.8 F
353.725 234.335 M 55.3 0.7 F
78.701 234.335 M 120.5 0.7 F
78.701 218.27 M 0.7 16.8 F
198.525 218.27 M 0.7 16.8 F
78.701 218.27 M 120.5 0.7 F
198.525 234.335 M 29.6 0.7 F
198.525 218.27 M 0.7 16.8 F
227.437 218.27 M 0.7 16.8 F
198.525 218.27 M 29.6 0.7 F
227.437 234.335 M 72.4 0.7 F
227.437 218.27 M 0.7 16.8 F
299.139 218.27 M 0.7 16.8 F
227.437 218.27 M 72.4 0.7 F
299.139 234.335 M 55.3 0.7 F
299.139 218.27 M 0.7 16.8 F
353.725 218.27 M 0.7 16.8 F
299.139 218.27 M 55.3 0.7 F
353.725 234.335 M 55.3 0.7 F
353.725 218.27 M 0.7 16.8 F
408.299 218.27 M 0.7 16.8 F
353.725 218.27 M 55.3 0.7 F
78.701 218.27 M 120.5 0.7 F
78.701 202.206 M 0.7 16.8 F
198.525 202.206 M 0.7 16.8 F
78.701 202.206 M 120.5 0.7 F
198.525 218.27 M 29.6 0.7 F
198.525 202.206 M 0.7 16.8 F
227.437 202.206 M 0.7 16.8 F
198.525 202.206 M 29.6 0.7 F
227.437 218.27 M 72.4 0.7 F
227.437 202.206 M 0.7 16.8 F
299.139 202.206 M 0.7 16.8 F
227.437 202.206 M 72.4 0.7 F
299.139 218.27 M 55.3 0.7 F
299.139 202.206 M 0.7 16.8 F
353.725 202.206 M 0.7 16.8 F
299.139 202.206 M 55.3 0.7 F
353.725 218.27 M 55.3 0.7 F
353.725 202.206 M 0.7 16.8 F
408.299 202.206 M 0.7 16.8 F
353.725 202.206 M 55.3 0.7 F
78.701 202.206 M 120.5 0.7 F
78.701 186.141 M 0.7 16.8 F
198.525 186.141 M 0.7 16.8 F
78.701 186.141 M 120.5 0.7 F
198.525 202.206 M 29.6 0.7 F
198.525 186.141 M 0.7 16.8 F
227.437 186.141 M 0.7 16.8 F
198.525 186.141 M 29.6 0.7 F
227.437 202.206 M 72.4 0.7 F
227.437 186.141 M 0.7 16.8 F
299.139 186.141 M 0.7 16.8 F
227.437 186.141 M 72.4 0.7 F
299.139 202.206 M 55.3 0.7 F
299.139 186.141 M 0.7 16.8 F
353.725 186.141 M 0.7 16.8 F
299.139 186.141 M 55.3 0.7 F
353.725 202.206 M 55.3 0.7 F
353.725 186.141 M 0.7 16.8 F
408.299 186.141 M 0.7 16.8 F
353.725 186.141 M 55.3 0.7 F
78.701 186.141 M 120.5 0.7 F
78.701 170.076 M 0.7 16.8 F
198.525 170.076 M 0.7 16.8 F
78.701 170.076 M 120.5 0.7 F
198.525 186.141 M 29.6 0.7 F
198.525 170.076 M 0.7 16.8 F
227.437 170.076 M 0.7 16.8 F
198.525 170.076 M 29.6 0.7 F
227.437 186.141 M 72.4 0.7 F
227.437 170.076 M 0.7 16.8 F
299.139 170.076 M 0.7 16.8 F
227.437 170.076 M 72.4 0.7 F
299.139 186.141 M 55.3 0.7 F
299.139 170.076 M 0.7 16.8 F
353.725 170.076 M 0.7 16.8 F
299.139 170.076 M 55.3 0.7 F
353.725 186.141 M 55.3 0.7 F
353.725 170.076 M 0.7 16.8 F
408.299 170.076 M 0.7 16.8 F
353.725 170.076 M 55.3 0.7 F
20 FS/F9 SF 0 678 M(Performance of FreeS/WAN)S
11 FS/F4 SF 0 649.8 M(The performance of FreeS/WAN is adequate for most applications.)S
0 623.4 M(In normal operation, the main concern is the overhead for encryption, decryption and authentication of the)S
0 610.2 M(actual IPsec \(ESP and/or AH\) data packets. Tunnel setup and rekeying occur so much less frequently than)S
0 597 M(packet processing that, in general, their overheads are not worth worrying about.)S
0 570.6 M(At startup, however, tunnel setup overheads may be significant. If you reboot a gateway and it needs to)S
0 557.4 M(establish many tunnels, expect some delay. This and other issues for large gateways are discussed below.)S
17 FS/F9 SF 0 525 M(Published material)S
11 FS/F4 SF 0 497.4 M(The University of Wales at Aberystwyth has done quite detailed speed tests and put their results on the web.)S
0 471 M(Davide Cerri's thesis \(in Italian\) includes performance results for FreeS/WAN and for TLS. He posted an)S
0 457.8 M(English summary on the mailing list.)S
0 431.4 M(Steve Bellovin used one of AT&T Research's FreeS/WAN gateways as his data source for an analysis of the)S
0 418.2 M(cache sizes required for key swapping in IPsec. Available as text or PDF slides for a talk on the topic.)S
0 391.8 M(See also the NAI work mentioned in the next section.)S
17 FS/F9 SF 0 359.4 M(Estimating CPU overheads)S
11 FS/F4 SF 0 331.8 M(We can come up with a formula that roughly relates CPU speed to the rate of IPsec processing possible. It is)S
0 318.6 M(far from exact, but should be usable as a first approximation.)S
0 292.2 M(An analysis of authentication overheads for high-speed networks, including some tests using FreeS/WAN, is)S
0 279 M(on the NAI Labs site. In particular, see figure 3 in this PDF document. Their estimates of overheads, measured)S
0 265.8 M(in Pentium II cycles per byte processed are:)S
/F5 SF 200.458 237.967 M(IPsec)S
229.37 237.967 M(authentication)S
301.071 237.967 M(encryption)S
355.657 237.967 M(cycles/byte)S
/F4 SF 80.133 221.903 M(Linux IP stack alone)S
199.958 221.903 M(no)S
228.869 221.903 M(no)S
300.571 221.903 M(no)S
401.367 221.903 M(5)S
80.133 205.838 M(IPsec without crypto)S
199.958 205.838 M(yes)S
228.869 205.838 M(no)S
300.571 205.838 M(no)S
395.867 205.838 M(11)S
80.133 189.773 M(IPsec, authentication only)S
199.958 189.773 M(yes)S
228.869 189.773 M(SHA-1)S
300.571 189.773 M(no)S
395.867 189.773 M(24)S
80.133 173.708 M(IPsec with encryption)S
199.958 173.708 M(yes)S
228.869 173.708 M(yes)S
300.571 173.708 M(yes)S
364.396 173.708 M(not tested)S
0 145.876 M(Overheads for IPsec with encryption were not tested in the NAI work, but Antoon Bosselaers' web page gives)S
0 132.676 M(cost for his optimised Triple DES implementation as 928 Pentium cycles per block, or 116 per byte. Adding)S
0 119.476 M(that to the 24 above, we get 140 cycles per byte for IPsec with encryption.)S
0 93.076 M(At 140 cycles per byte, a 140 MHz machine can handle a megabyte -- 8 megabits -- per second. Speeds for)S
0 79.876 M(other machines will be proportional to this. To saturate a link with capacity C megabits per second, you need a)S
0 66.676 M(machine running at)S
/Fa SF ( C * 140/8 = C * 17.5)S
/F4 SF ( MHz.)S
0 40.276 M(However, that estimate is not precise. It ignores the differences between:)S
/F8 SF 0 0 M(Performance of FreeS/WAN)S
468.652 0 M(126)S
GR
SP
%%Page: 127 156
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
-0 407.6 M 154.0 0.7 F
-0 391.535 M 0.7 16.8 F
153.279 391.535 M 0.7 16.8 F
-0 391.535 M 154.0 0.7 F
153.279 407.6 M 334.4 0.7 F
153.279 391.535 M 0.7 16.8 F
487 391.535 M 0.7 16.8 F
153.279 391.535 M 334.4 0.7 F
-0 391.535 M 108.1 0.7 F
-0 349.07 M 0.7 43.2 F
107.383 349.07 M 0.7 43.2 F
-0 349.07 M 108.1 0.7 F
107.383 391.535 M 46.6 0.7 F
107.383 349.07 M 0.7 43.2 F
153.279 349.07 M 0.7 43.2 F
107.383 349.07 M 46.6 0.7 F
153.279 391.535 M 52.4 0.7 F
153.279 349.07 M 0.7 43.2 F
204.917 349.07 M 0.7 43.2 F
153.279 349.07 M 52.4 0.7 F
204.917 391.535 M 122.2 0.7 F
204.917 349.07 M 0.7 43.2 F
326.37 349.07 M 0.7 43.2 F
204.917 349.07 M 122.2 0.7 F
326.37 391.535 M 161.3 0.7 F
326.37 349.07 M 0.7 43.2 F
487 349.07 M 0.7 43.2 F
326.37 349.07 M 161.3 0.7 F
-0 349.07 M 108.1 0.7 F
-0 333.006 M 0.7 16.8 F
107.383 333.006 M 0.7 16.8 F
-0 333.006 M 108.1 0.7 F
107.383 349.07 M 46.6 0.7 F
107.383 333.006 M 0.7 16.8 F
153.279 333.006 M 0.7 16.8 F
107.383 333.006 M 46.6 0.7 F
153.279 349.07 M 52.4 0.7 F
153.279 333.006 M 0.7 16.8 F
204.917 333.006 M 0.7 16.8 F
153.279 333.006 M 52.4 0.7 F
-0 333.006 M 108.1 0.7 F
-0 316.941 M 0.7 16.8 F
107.383 316.941 M 0.7 16.8 F
-0 316.941 M 108.1 0.7 F
107.383 333.006 M 46.6 0.7 F
107.383 316.941 M 0.7 16.8 F
153.279 316.941 M 0.7 16.8 F
107.383 316.941 M 46.6 0.7 F
153.279 333.006 M 52.4 0.7 F
153.279 316.941 M 0.7 16.8 F
204.917 316.941 M 0.7 16.8 F
153.279 316.941 M 52.4 0.7 F
204.917 349.07 M 122.2 0.7 F
204.917 316.941 M 0.7 32.8 F
326.37 316.941 M 0.7 32.8 F
204.917 316.941 M 122.2 0.7 F
326.37 349.07 M 161.3 0.7 F
326.37 316.941 M 0.7 32.8 F
487 316.941 M 0.7 32.8 F
326.37 316.941 M 161.3 0.7 F
-0 316.941 M 108.1 0.7 F
-0 300.876 M 0.7 16.8 F
107.383 300.876 M 0.7 16.8 F
-0 300.876 M 108.1 0.7 F
107.383 316.941 M 46.6 0.7 F
107.383 300.876 M 0.7 16.8 F
153.279 300.876 M 0.7 16.8 F
107.383 300.876 M 46.6 0.7 F
153.279 316.941 M 52.4 0.7 F
153.279 300.876 M 0.7 16.8 F
204.917 300.876 M 0.7 16.8 F
153.279 300.876 M 52.4 0.7 F
204.917 316.941 M 122.2 0.7 F
204.917 300.876 M 0.7 16.8 F
326.37 300.876 M 0.7 16.8 F
204.917 300.876 M 122.2 0.7 F
326.37 316.941 M 161.3 0.7 F
326.37 300.876 M 0.7 16.8 F
487 300.876 M 0.7 16.8 F
326.37 300.876 M 161.3 0.7 F
-0 300.876 M 108.1 0.7 F
-0 284.812 M 0.7 16.8 F
107.383 284.812 M 0.7 16.8 F
-0 284.812 M 108.1 0.7 F
107.383 300.876 M 46.6 0.7 F
107.383 284.812 M 0.7 16.8 F
153.279 284.812 M 0.7 16.8 F
107.383 284.812 M 46.6 0.7 F
153.279 300.876 M 52.4 0.7 F
153.279 284.812 M 0.7 16.8 F
204.917 284.812 M 0.7 16.8 F
153.279 284.812 M 52.4 0.7 F
204.917 300.876 M 122.2 0.7 F
204.917 284.812 M 0.7 16.8 F
326.37 284.812 M 0.7 16.8 F
204.917 284.812 M 122.2 0.7 F
326.37 300.876 M 161.3 0.7 F
326.37 284.812 M 0.7 16.8 F
487 284.812 M 0.7 16.8 F
326.37 284.812 M 161.3 0.7 F
-0 284.812 M 108.1 0.7 F
-0 255.547 M 0.7 30.0 F
107.383 255.547 M 0.7 30.0 F
-0 255.547 M 108.1 0.7 F
107.383 284.812 M 46.6 0.7 F
107.383 255.547 M 0.7 30.0 F
153.279 255.547 M 0.7 30.0 F
107.383 255.547 M 46.6 0.7 F
153.279 284.812 M 52.4 0.7 F
153.279 255.547 M 0.7 30.0 F
204.917 255.547 M 0.7 30.0 F
153.279 255.547 M 52.4 0.7 F
204.917 284.812 M 122.2 0.7 F
204.917 255.547 M 0.7 30.0 F
326.37 255.547 M 0.7 30.0 F
204.917 255.547 M 122.2 0.7 F
326.37 284.812 M 161.3 0.7 F
326.37 255.547 M 0.7 30.0 F
487 255.547 M 0.7 30.0 F
326.37 255.547 M 161.3 0.7 F
-0 255.547 M 108.1 0.7 F
-0 239.482 M 0.7 16.8 F
107.383 239.482 M 0.7 16.8 F
-0 239.482 M 108.1 0.7 F
107.383 255.547 M 46.6 0.7 F
107.383 239.482 M 0.7 16.8 F
153.279 239.482 M 0.7 16.8 F
107.383 239.482 M 46.6 0.7 F
153.279 255.547 M 52.4 0.7 F
153.279 239.482 M 0.7 16.8 F
204.917 239.482 M 0.7 16.8 F
153.279 239.482 M 52.4 0.7 F
204.917 255.547 M 122.2 0.7 F
204.917 239.482 M 0.7 16.8 F
326.37 239.482 M 0.7 16.8 F
204.917 239.482 M 122.2 0.7 F
326.37 255.547 M 161.3 0.7 F
326.37 239.482 M 0.7 16.8 F
487 239.482 M 0.7 16.8 F
326.37 239.482 M 161.3 0.7 F
-0 239.482 M 108.1 0.7 F
-0 223.417 M 0.7 16.8 F
107.383 223.417 M 0.7 16.8 F
-0 223.417 M 108.1 0.7 F
107.383 239.482 M 46.6 0.7 F
107.383 223.417 M 0.7 16.8 F
153.279 223.417 M 0.7 16.8 F
107.383 223.417 M 46.6 0.7 F
153.279 239.482 M 52.4 0.7 F
153.279 223.417 M 0.7 16.8 F
204.917 223.417 M 0.7 16.8 F
153.279 223.417 M 52.4 0.7 F
-0 223.417 M 108.1 0.7 F
-0 207.353 M 0.7 16.8 F
107.383 207.353 M 0.7 16.8 F
-0 207.353 M 108.1 0.7 F
107.383 223.417 M 46.6 0.7 F
107.383 207.353 M 0.7 16.8 F
153.279 207.353 M 0.7 16.8 F
107.383 207.353 M 46.6 0.7 F
153.279 223.417 M 52.4 0.7 F
153.279 207.353 M 0.7 16.8 F
204.917 207.353 M 0.7 16.8 F
153.279 207.353 M 52.4 0.7 F
204.917 239.482 M 282.8 0.7 F
204.917 207.353 M 0.7 32.8 F
487 207.353 M 0.7 32.8 F
204.917 207.353 M 282.8 0.7 F
11 FS/F4 SF 36 687 M(NAI's test packets and real traffic)S
/Fc SF 28.19 687 M(\267 )S
/F4 SF 36 673.8 M(NAI's Pentium II cycles, Bosselaers' Pentium cycles, and your machine's cycles)S
/Fc SF 28.19 673.8 M(\267 )S
/F4 SF 36 660.6 M(different 3DES implementations)S
/Fc SF 28.19 660.6 M(\267 )S
/F4 SF 36 647.4 M(SHA-1 and MD5)S
/Fc SF 28.19 647.4 M(\267 )S
/F4 SF 0 621 M(and does not account for some overheads you will almost certainly have:)S
36 594.6 M(communication on the client-side interface)S
/Fc SF 28.19 594.6 M(\267 )S
/F4 SF 36 581.4 M(switching between multiple tunnels -- re-keying, cache reloading and so on)S
/Fc SF 28.19 581.4 M(\267 )S
/F4 SF 0 555 M(so we suggest using)S
/Fa SF ( C * 25)S
/F4 SF ( to get an estimate with a bit of a built-in safety factor.)S
0 528.6 M(This covers only IP and IPsec processing. If you have other loads on your gateway -- for example if it is also)S
0 515.4 M(working as a firewall -- then you will need to add your own safety factor atop that.)S
0 489 M(This estimate matches empirical data reasonably well. For example, Metheringham's tests, described below,)S
0 475.8 M(show a 733 topping out between 32 and 36 Mbit/second, pushing data as fast as it can down a 100 Mbit link.)S
0 462.6 M(Our formula suggests you need at least an 800 to handle a fully loaded 32 Mbit link. The two results are)S
0 449.4 M(consistent.)S
0 423 M(Some examples using this estimation method:)S
/F5 SF 55.261 395.167 M(Interface)S
265.904 395.167 M(Machine speed in MHz)S
41.773 365.903 M(Type)S
109.404 372.503 M(Mbit per)S
114.442 359.303 M(second)S
158.325 372.503 M(Estimate)S
159.238 359.303 M(Mbit*25)S
224.542 372.503 M(Minimum IPSEC)S
246.399 359.303 M(gateway)S
346.031 379.103 M(Minimum with other load)S
/F4 SF 376.6 352.703 M(\(e.g. firewall\))S
1.432 336.638 M(DSL)S
146.347 336.638 M(1)S
167.13 336.638 M(25 MHz)S
206.349 330.038 M(whatever you have)S
327.802 330.038 M(133, or better if you have it)S
1.432 320.573 M(cable modem)S
146.347 320.573 M(3)S
167.13 320.573 M(75 MHz)S
/F7 SF 1.432 304.509 M(any link, light load)S
146.347 304.509 M(5)S
/F4 SF 161.63 304.509 M(125 MHz)S
206.349 304.509 M(133)S
327.802 304.509 M(200+,)S
/F7 SF ( almost any surplus machine)S
/F4 SF 1.432 288.444 M(Ethernet)S
140.847 288.444 M(10)S
161.63 288.444 M(250 MHz)S
206.349 288.444 M(surplus 266 or 300)S
327.802 288.444 M(500+)S
/F7 SF 1.432 272.379 M(fast link, moderate)S
1.432 259.179 M(load)S
140.847 265.779 M(20)S
/F4 SF 161.63 265.779 M(500 MHz)S
206.349 265.779 M(500)S
327.802 272.379 M(800+,)S
/F7 SF ( any current off-the-shelf)S
327.802 259.179 M(PC)S
/F4 SF 1.432 243.114 M(T3 or E3)S
140.847 243.114 M(45)S
156.13 243.114 M(1125 MHz)S
206.349 243.114 M(1200)S
327.802 243.114 M(1500+)S
1.432 227.05 M(fast Ethernet)S
135.347 227.05 M(100)S
156.13 227.05 M(2500 MHz)S
213.975 220.45 M(// not feasible with 3DES in software on current machines //)S
1.432 210.985 M(OC3)S
135.347 210.985 M(155)S
156.13 210.985 M(3875 MHz)S
0 183.153 M(Such an estimate is far from exact, but should be usable as minimum requirement for planning. The key)S
0 169.953 M(observations are:)S
36 143.553 M(older)S
/F7 SF ( surplus machines)S
/F4 SF ( are fine for IPsec gateways at loads up to)S
/F7 SF ( 5 megabits per second)S
/F4 SF ( or so)S
/Fc SF 28.19 143.553 M(\267 )S
/F4 SF 36 130.353 M(a)S
/F7 SF ( mid-range new machine)S
/F4 SF ( can handle IPsec at rates up to)S
/F7 SF ( 20 megabits per second)S
/F4 SF ( or more)S
/Fc SF 28.19 130.353 M(\267 )S
14 FS/F9 SF 0 100.953 M(Higher performance alternatives)S
11 FS/F4 SF 0 73.953 M(AES is a new US government block cipher standard, designed to replace the obsolete DES. If FreeS/WAN)S
0 60.753 M(using 3DES is not fast enough for your application, the AES patch may help.)S
0 34.353 M(To date \(March 2002\) we have had only one mailing list report of measurements with the patch applied. It)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Higher performance alternatives)S
468.652 0 M(127)S
GR
SP
%%Page: 128 157
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(indicates that, at least for the tested load on that user's network,)S
/F7 SF ( AES roughly doubles IPsec throughput)S
/F4 SF (. If)S
0 673.8 M(further testing confirms this, it may prove possible to saturate an OC3 link in software on a high-end box.)S
0 647.4 M(Also, some work is being done toward support of hardware IPsec acceleration which might extend the range)S
0 634.2 M(of requirements FreeS/WAN could meet.)S
14 FS/F9 SF 0 604.8 M(Other considerations)S
11 FS/F4 SF 0 577.8 M(CPU speed may be the main issue for IPsec performance, but of course it isn't the only one.)S
0 551.4 M(You need good ethernet cards or other network interface hardware to get the best performance. See this)S
0 538.2 M(ethernet information page and this Linux network driver page.)S
0 511.8 M(The current FreeS/WAN kernel code is largely single-threaded. It is SMP safe, and will run just fine on a)S
0 498.6 M(multiprocessor machine \(discussion\), but the load within the kernel is not shared effectively. This means that,)S
0 485.4 M(for example to saturate a T3 -- which needs about a 1200 MHz machine -- you cannot expect something)S
0 472.2 M(like a dual 800 to do the job.)S
0 445.8 M(On the other hand, SMP machines do tend to share loads well so -- provided one CPU is fast enough for the)S
0 432.6 M(IPsec work -- a multiprocessor machine may be ideal for a gateway with a mixed load.)S
17 FS/F9 SF 0 400.2 M(Many tunnels from a single gateway)S
11 FS/F4 SF 0 372.6 M(FreeS/WAN allows a single gateway machine to build tunnels to many others. There may, however, be some)S
0 359.4 M(problems for large numbers as indicated in this message from the mailing list:)S
9 FS/F0 SF 0 335 M(Subject: Re: Maximum number of ipsec tunnels?)S
0 324.2 M(   Date: Tue, 18 Apr 2000)S
0 313.4 M(   From: "John S. Denker" <jsd@research.att.com>)S
0 291.8 M(Christopher Ferris wrote:)S
0 270.2 M(>> What are the maximum number ipsec tunnels FreeS/WAN can handle??)S
0 248.6 M(Henry Spencer wrote:)S
0 227 M(>There is no particular limit.  Some of the setup procedures currently)S
0 216.2 M(>scale poorly to large numbers of connections, but there are \(clumsy\))S
0 205.4 M(>workarounds for that now, and proper fixes are coming.)S
0 183.8 M(1\) "Large" numbers means anything over 50 or so.  I routinely run boxes)S
0 173 M(with about 200 tunnels.  Once you get more than 50 or so, you need to worry)S
0 162.2 M(about several scalability issues:)S
0 140.6 M(a\) You need to put a "-" sign in syslogd.conf, and rotate the logs daily)S
0 129.8 M(not weekly.)S
0 108.2 M(b\) Processor load per tunnel is small unless the tunnel is not up, in which)S
0 97.4 M(case a new half-key gets generated every 90 seconds, which can add up if)S
0 86.6 M(you've got a lot of down tunnels.)S
0 65 M(c\) There's other bits of lore you need when running a large number of)S
0 54.2 M(tunnels.  For instance, systematically keeping the .conf file free of)S
0 43.4 M(conflicts requires tools that aren't shipped with the standard freeswan)S
0 32.6 M(package.)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Other considerations)S
468.652 0 M(128)S
GR
SP
%%Page: 129 158
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 678.2 M(d\) The pluto startup behavior is quadratic.  With 200 tunnels, this eats up)S
0 667.4 M(several minutes at every restart.   I'm told fixes are coming soon.)S
0 645.8 M(2\) Other than item \(1b\), the CPU load depends mainly on the size of the)S
0 635 M(pipe attached, not on the number of tunnels.)S
11 FS/F4 SF 0 609 M(It is worth noting that item \(1b\) applies only to repeated attempts to re-key a data connection \(IPsec SA,)S
0 595.8 M(Phase 2\) over an established keying connection \(ISAKMP SA, Phase 1\). There are two ways to reduce this)S
0 582.6 M(overhead using settings in ipsec.conf\(5\):)S
36 556.2 M(set)S
/Fa SF ( keyingtries)S
/F4 SF ( to some small value to limit repetitions)S
/Fc SF 28.19 556.2 M(\267 )S
/F4 SF 36 543 M(set)S
/Fa SF ( keylife)S
/F4 SF ( to a short time so that a failing data connection will be cleaned up when the keying)S
36 529.8 M(connection is reset.)S
/Fc SF 28.19 543 M(\267 )S
/F4 SF 0 503.4 M(The overheads for establishing keying connections \(ISAKMP SAs, Phase 1\) are lower because for these Pluto)S
0 490.2 M(does not perform expensive operations before receiving a reply from the peer.)S
0 463.8 M(A gateway that does a lot of rekeying -- many tunnels and/or low settings for tunnel lifetimes -- will also)S
0 450.6 M(need a lot of random numbers from the random\(4\) driver.)S
17 FS/F9 SF 0 418.2 M(Low-end systems)S
11 FS/F6 SF 0 390.6 M(Even a 486 can handle a T1 line)S
/F4 SF (, according to this mailing list message:)S
9 FS/F0 SF 0 366.2 M(Subject: Re: linux-ipsec: IPSec Masquerade)S
0 355.4 M(   Date: Fri, 15 Jan 1999 11:13:22 -0500)S
0 344.6 M(   From: Michael Richardson )S
0 323 M(. . . A 486/66 has been clocked by Phil Karn to do)S
0 312.2 M(10Mb/s encryption.. that uses all the CPU, so half that to get some CPU,)S
0 301.4 M(and you have 5Mb/s. 1/3 that for 3DES and you get 1.6Mb/s....)S
11 FS/F4 SF 0 275.4 M(and a piece of mail from project technical lead Henry Spencer:)S
9 FS/F0 SF 0 251 M(Oh yes, and a new timing point for Sandy's docs...  A P60 -- yes, a 60MHz)S
0 240.2 M(Pentium, talk about antiques -- running a host-to-host tunnel to another)S
0 229.4 M(machine shows an FTP throughput \(that is, end-to-end results with a real)S
0 218.6 M(protocol\) of slightly over 5Mbit/s either way.  \(The other machine is much)S
0 207.8 M(faster, the network is 100Mbps, and the ether cards are good ones... so)S
0 197 M(the P60 is pretty definitely the bottleneck.\))S
11 FS/F4 SF 0 171 M(From the above, and from general user experience as reported on the list, it seems clear that a cheap surplus)S
0 157.8 M(machine -- a reasonable 486, a minimal Pentium box, a Sparc 5, ... -- can easily handle a home office or a)S
0 144.6 M(small company connection using any of:)S
36 118.2 M(ADSL service)S
/Fc SF 28.19 118.2 M(\267 )S
/F4 SF 36 105 M(cable modem)S
/Fc SF 28.19 105 M(\267 )S
/F4 SF 36 91.8 M(T1)S
/Fc SF 28.19 91.8 M(\267 )S
/F4 SF 36 78.6 M(E1)S
/Fc SF 28.19 78.6 M(\267 )S
/F4 SF 0 52.2 M(If available, we suggest using a Pentium 133 or better. This should ensure that, even under maximum load,)S
0 39 M(IPsec will use less than half the CPU cycles. You then have enough left for other things you may want on your)S
0 25.8 M(gateway -- firewalling, web caching, DNS and such.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Low-end systems)S
468.652 0 M(129)S
GR
SP
%%Page: 130 159
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
17 FS/F9 SF 0 681 M(Measuring KLIPS)S
11 FS/F4 SF 0 653.4 M(Here is some additional data from the mailing list.)S
9 FS/F0 SF 0 629 M(Subject: FreeSWAN \(specically KLIPS\) performance measurements)S
0 618.2 M(   Date: Thu, 01 Feb 2001)S
0 607.4 M(   From: Nigel Metheringham <Nigel.Metheringham@intechnology.co.uk>)S
0 585.8 M(I've spent a happy morning attempting performance tests against KLIPS )S
0 575 M(\(this is due to me not being able to work out the CPU usage of KLIPS so )S
0 564.2 M(resorting to the crude measurements of maximum throughput to give a )S
0 553.4 M(baseline to work out loading of a box\).)S
0 531.8 M(Measurements were done using a set of 4 boxes arranged in a line, each )S
0 521 M(connected to the next by 100Mbit duplex ethernet.  The inner 2 had an )S
0 510.2 M(ipsec tunnel between them \(shared secret, but I was doing measurements )S
0 499.4 M(when the tunnel was up and running - keying should not be an issue )S
0 488.6 M(here\).  The outer pair of boxes were traffic generators or traffic sink.)S
0 467 M(The crypt boxes are Compaq DL380s - Uniprocessor PIII/733 with 256K )S
0 456.2 M(cache.  They have 128M main memory.  Nothing significant was running on )S
0 445.4 M(the boxes other than freeswan.  The kernel was a 2.2.19pre7 patched )S
0 434.6 M(with freeswan and ext3.)S
0 413 M(Without an ipsec tunnel in the chain \(ie the 2 inner boxes just being )S
0 402.2 M(100BaseT routers\), throughput \(measured with ttcp\) was between 10644 )S
0 391.4 M(and 11320 KB/sec)S
0 369.8 M(With an ipsec tunnel in place, throughput was between 3268 and 3402 )S
0 359 M(KB/sec)S
0 337.4 M(These measurements are for data pushed across a TCP link, so the )S
0 326.6 M(traffic on the wire between the 2 ipsec boxes would have been higher )S
0 315.8 M(than this....)S
0 294.2 M(vmstat \(run during some other tests, so not affecting those figures\) on )S
0 283.4 M(the encrypting box shows approx 50% system & 50% idle CPU - which I )S
0 272.6 M(don't believe at all.  Interactive feel of the box was significantly )S
0 261.8 M(sluggish.)S
0 240.2 M(I also tried running the kernel profiler \(see man readprofile\) during )S
0 229.4 M(test runs.)S
0 207.8 M(A box doing primarily decrypt work showed basically nothing happening - )S
0 197 M(I assume interrupts were off.)S
0 186.2 M(A box doing encrypt work showed the following:-)S
0 175.4 M( Ticks Function                                   Load)S
0 164.6 M( ~~~~~ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~    ~~~~~~)S
0 153.8 M(   956 total                                      0.0010)S
0 143 M(   532 des_encrypt2                               0.1330)S
0 132.2 M(   110 MD5Transform                               0.0443)S
0 121.4 M(    97 kmalloc                                    0.1880)S
0 110.6 M(    39 des_encrypt3                               0.1336)S
0 99.8 M(    23 speedo_interrupt                           0.0298)S
0 89 M(    14 skb_copy_expand                            0.0250)S
0 78.2 M(    13 ipsec_tunnel_start_xmit                    0.0009)S
0 67.4 M(    13 Decode                                     0.1625)S
0 56.6 M(    11 handle_IRQ_event                           0.1019)S
0 45.8 M(    11 .des_ncbc_encrypt_end                      0.0229)S
0 35 M(    10 speedo_start_xmit                          0.0188)S
0 24.2 M(     9 satoa                                      0.0225)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Measuring KLIPS)S
468.652 0 M(130)S
GR
SP
%%Page: 131 160
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(     8 kfree                                      0.0118)S
0 678.2 M(     8 ip_fragment                                0.0121)S
0 667.4 M(     7 ultoa                                      0.0365)S
0 656.6 M(     5 speedo_rx                                  0.0071)S
0 645.8 M(     5 .des_encrypt2_end                          5.0000)S
0 635 M(     4 _stext                                     0.0140)S
0 624.2 M(     4 ip_fw_check                                0.0035)S
0 613.4 M(     2 rj_match                                   0.0034)S
0 602.6 M(     2 ipfw_output_check                          0.0200)S
0 591.8 M(     2 inet_addr_type                             0.0156)S
0 581 M(     2 eth_copy_and_sum                           0.0139)S
0 570.2 M(     2 dev_get                                    0.0294)S
0 559.4 M(     2 addrtoa                                    0.0143)S
0 548.6 M(     1 speedo_tx_buffer_gc                        0.0024)S
0 537.8 M(     1 speedo_refill_rx_buf                       0.0022)S
0 527 M(     1 restore_all                                0.0667)S
0 516.2 M(     1 number                                     0.0020)S
0 505.4 M(     1 net_bh                                     0.0021)S
0 494.6 M(     1 neigh_connected_output                     0.0076)S
0 483.8 M(     1 MD5Final                                   0.0083)S
0 473 M(     1 kmem_cache_free                            0.0016)S
0 462.2 M(     1 kmem_cache_alloc                           0.0022)S
0 451.4 M(     1 __kfree_skb                                0.0060)S
0 440.6 M(     1 ipsec_rcv                                  0.0001)S
0 429.8 M(     1 ip_rcv                                     0.0014)S
0 419 M(     1 ip_options_fragment                        0.0071)S
0 408.2 M(     1 ip_local_deliver                           0.0023)S
0 397.4 M(     1 ipfw_forward_check                         0.0139)S
0 386.6 M(     1 ip_forward                                 0.0011)S
0 375.8 M(     1 eth_header                                 0.0040)S
0 365 M(     1 .des_encrypt3_end                          0.0833)S
0 354.2 M(     1 des_decrypt3                               0.0034)S
0 343.4 M(     1 csum_partial_copy_generic                  0.0045)S
0 332.6 M(     1 call_out_firewall                          0.0125)S
0 311 M(Hope this data is helpful to someone... however the lack of visibility )S
0 300.2 M(into the decrypt side makes things less clear)S
17 FS/F9 SF 0 268.2 M(Speed with compression)S
11 FS/F4 SF 0 240.6 M(Another user reported some results for connections with and without IP compression:)S
9 FS/F0 SF 0 216.2 M(Subject: [Users] Speed with compression)S
0 205.4 M(   Date: Fri, 29 Jun 2001)S
0 194.6 M(   From: John McMonagle <johnm@advocap.org>)S
0 173 M(Did a couple tests with compression using the new 1.91 freeswan.)S
0 151.4 M(Running between 2 sites with cable modems.  Both  using approximately)S
0 140.6 M(130 mhz pentium.)S
0 119 M(Transferred files with ncftp.)S
0 97.4 M(Compressed file was a 6mb compressed  installation file.)S
0 86.6 M(Non compressed was 18mb /var/lib/rpm/packages.rpm)S
0 65 M(                            Compressed vpn          regular vpn)S
0 54.2 M(Compress file                42.59 kBs               42.08 kBs)S
0 43.4 M(regular file                110.84 kBs               41.66 kBs)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Speed with compression)S
468.652 0 M(131)S
GR
SP
%%Page: 132 161
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(Load  was about 0 either way.)S
0 678.2 M(Ping times were very similar  a bit above 9 ms.)S
0 656.6 M(Compression looks attractive to me.)S
11 FS/F4 SF 0 630.6 M(Later in the same thread, project technical lead Henry Spencer added:)S
9 FS/F0 SF 0 606.2 M(> is there a reason not to switch compression on?  I have large gateway boxes)S
0 595.4 M(> connecting 3 connections, one of them with a measly DS1 link...)S
0 573.8 M(Run some timing tests with and without, with data and loads representative)S
0 563 M(of what you expect in production.  That's the definitive way to decide. )S
0 552.2 M(If compression is a net loss, then obviously, leave it turned off.  If it)S
0 541.4 M(doesn't make much difference, leave it off for simplicity and hence)S
0 530.6 M(robustness.  If there's a substantial gain, by all means turn it on. )S
0 509 M(If both ends support compression and can successfully negotiate a)S
0 498.2 M(compressed connection \(trivially true if both are FreeS/WAN 1.91\), then)S
0 487.4 M(the crucial question is CPU cycles. )S
0 465.8 M(Compression has some overhead, so one question is whether *your* data)S
0 455 M(compresses well enough to save you more CPU cycles \(by reducing the volume)S
0 444.2 M(of data going through CPU-intensive encryption/decryption\) than it costs)S
0 433.4 M(you.  Last time I ran such tests on data that was reasonably compressible)S
0 422.6 M(but not deliberately contrived to be so, this generally was not true --)S
0 411.8 M(compression cost extra CPU cycles -- so compression was worthwhile only if)S
0 401 M(the link, not the CPU, was the bottleneck.  However, that was before the)S
0 390.2 M(slow-compression bug was fixed.  I haven't had a chance to re-run those)S
0 379.4 M(tests yet, but it sounds like I'd probably see a different result. )S
11 FS/F4 SF 0 353.4 M(The bug he refers to was a problem with the compression libraries that had us using C code, rather than)S
0 340.2 M(assembler, for compression. It was fixed before 1.91.)S
17 FS/F9 SF 0 307.8 M(Methods of measuring)S
11 FS/F4 SF 0 280.2 M(If you want to measure the loads FreeS/WAN puts on a system, note that tools such as top or measurements)S
0 267 M(such as load average are more-or-less useless for this. They are not designed to measure something that does)S
0 253.8 M(most of its work inside the kernel.)S
0 227.4 M(Here is a message from FreeS/WAN kernel programmer Richard Guy Briggs on this:)S
9 FS/F0 SF 0 203 M(> I have a batch of boxes doing Freeswan stuff.)S
0 192.2 M(> I want to measure the CPU loading of the Freeswan tunnels, but am )S
0 181.4 M(> having trouble seeing how I get some figures out...)S
0 170.6 M(> )S
0 159.8 M(>  - Keying etc is in userspace so will show up on the per-process)S
0 149 M(>    and load average etc \(ie pluto's load\))S
0 127.4 M(Correct.)S
0 105.8 M(>  - KLIPS is in the kernel space, and does not show up in load average)S
0 95 M(>    I think also that the KLIPS per-packet processing stuff is running)S
0 84.2 M(>    as part of an interrupt handler so it does not show up in the)S
0 73.4 M(>    /proc/stat system_cpu or even idle_cpu figures)S
0 51.8 M(It is not running in interrupt handler.  It is in the bottom half.)S
0 41 M(This is somewhere between user context \(careful, this is not)S
0 30.2 M(userspace!\) and hardware interrupt context.)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Methods of measuring)S
468.652 0 M(132)S
GR
SP
%%Page: 133 162
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 678.2 M(> Is this correct, and is there any means of instrumenting how much the )S
0 667.4 M(> cpu is being loaded - I don't like the idea of a system running out of )S
0 656.6 M(> steam whilst still showing 100% idle CPU :-\))S
0 635 M(vmstat seems to do a fairly good job, but use a running tally to get a)S
0 624.2 M(good idea.  A one-off call to vmstat gives different numbers than a)S
0 613.4 M(running stat.  To do this, put an interval on your vmstat command)S
0 602.6 M(line.)S
11 FS/F4 SF 0 576.6 M(and another suggestion from the same thread:)S
9 FS/F0 SF 0 552.2 M(Subject: Re: Measuring the CPU usage of Freeswan)S
0 541.4 M(   Date: Mon, 29 Jan 2001)S
0 530.6 M(   From: Patrick Michael Kane <modus@pr.es.to>)S
0 509 M(The only truly accurate way to accurately track FreeSWAN CPU usage is to use)S
0 498.2 M(a CPU soaker. You run it on an unloaded system as a benchmark, then start up)S
0 487.4 M(FreeSWAN and take the difference to determine how much FreeSWAN is eating.)S
0 476.6 M(I believe someone has done this in the past, so you may find something in)S
0 465.8 M(the FreeSWAN archives.  If not, someone recently posted a URL to a CPU)S
0 455 M(soaker benchmark tool on linux-kernel.)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Methods of measuring)S
468.652 0 M(133)S
GR
SP
%%Page: 134 163
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(Testing FreeS/WAN)S
11 FS/F4 SF 0 649.8 M(This document discusses testing FreeS/WAN.)S
0 623.4 M(Not all types of testing are described here. Other parts of the documentation describe some tests:)S
/F6 SF 0 597 M(installation document)S
/F4 SF 36 583.8 M(testing for a successful install)S
/F6 SF 0 570.6 M(configuration document)S
/F4 SF 36 557.4 M(basic tests for a working configuration)S
/F6 SF 0 544.2 M(web links document)S
/F4 SF 36 531 M(General information on tests for interoperability between various IPsec implementations. This)S
36 517.8 M(includes links to several test sites.)S
/F6 SF 0 504.6 M(interoperation document.)S
/F4 SF 36 491.4 M(More specific information on FreeS/WAN interoperation with other implementations.)S
/F6 SF 0 478.2 M(performance document)S
/F4 SF 36 465 M(performance measurements)S
0 438.6 M(The test setups and procedures described here can also be used in other testing, but this document focuses on)S
0 425.4 M(testing the IPsec functionality of FreeS/WAN.)S
17 FS/F9 SF 0 393 M(Testing opportunistic connections)S
11 FS/F4 SF 0 365.4 M(This section teaches you how to test your opportunistically encrypted \(OE\) connections. To set up OE, please)S
0 352.2 M(see the easy instructions in our quickstart guide.)S
14 FS/F9 SF 0 322.8 M(Basic OE Test)S
11 FS/F4 SF 0 295.8 M(This test is for basic OE functionality. For additional tests, keep reading.)S
0 269.4 M(Be sure IPsec is running. You can see whether it is with:)S
9 FS/F0 SF 0 245 M(    ipsec setup status)S
11 FS/F4 SF 0 219 M(If need be, you can restart it with:)S
9 FS/F0 SF 0 194.6 M(    service ipsec restart)S
11 FS/F4 SF 0 168.6 M(Load a FreeS/WAN test website from the host on which you're running FreeS/WAN. Note: the feds may be)S
0 155.4 M(watching these sites. Type one of:)S
9 FS/F0 SF 0 131 M(   links oetest.freeswan.org)S
0 107 M(   links oetest.freeswan.nl)S
11 FS/F4 SF 0 81 M(A positive result looks like this:)S
9 FS/F0 SF 0 56.6 M(   You  seem  to  be  connecting  from:  192.0.2.11 which DNS says is:)S
0 45.8 M(   gateway.example.com)S
0 35 M(     _________________________________________________________________)S
11 FS/F8 SF 0 0 M(Testing FreeS/WAN)S
468.652 0 M(134)S
GR
SP
%%Page: 135 164
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(   Status E-route)S
0 678.2 M(   OE    enabled    16    192.139.46.73/32    ->    192.0.2.11/32   =>)S
0 667.4 M(   tun0x2097@192.0.2.11)S
0 656.6 M(   OE    enabled    176    192.139.46.77/32    ->   192.0.2.11/32   =>)S
0 645.8 M(   tun0x208a@192.0.2.11)S
11 FS/F4 SF 0 619.8 M(If you see this, congratulations! Your OE box will now encrypt its own traffic whenever it can. If you have)S
0 606.6 M(difficulty, see our OE troubleshooting tips.)S
14 FS/F9 SF 0 577.2 M(OE Gateway Test)S
11 FS/F4 SF 0 550.2 M(If you've set up FreeS/WAN to protect a subnet behind your gateway, you'll need to run another simple test,)S
0 537 M(which can be done from a machine running any OS. That's right, your Windows box can be protected by)S
0 523.8 M(opportunistic encryption without any FreeS/WAN install or configuration on that box. From)S
/F7 SF ( each protected)S
0 510.6 M(subnet node)S
/F4 SF (, load the FreeS/WAN website with:)S
9 FS/F0 SF 0 486.2 M(   links oetest.freeswan.org)S
0 462.2 M(   links oetest.freeswan.nl)S
11 FS/F4 SF 0 436.2 M(A positive result looks like this:)S
9 FS/F0 SF 0 411.8 M(   You  seem  to  be  connecting  from:  192.0.2.98 which DNS says is:)S
0 401 M(   box98.example.com)S
0 390.2 M(     _________________________________________________________________)S
0 368.6 M(   Status E-route)S
0 357.8 M(   OE    enabled    16    192.139.46.73/32    ->    192.0.2.98/32   =>)S
0 347 M(   tun0x134ed@192.0.2.11)S
0 336.2 M(   OE    enabled    176    192.139.46.77/32    ->   192.0.2.11/32   =>)S
0 325.4 M(   tun0x134d2@192.0.2.11)S
11 FS/F4 SF 0 299.4 M(If you see this, congratulations! Your OE gateway will now encrypt traffic for this subnet node whenever it)S
0 286.2 M(can. If you have difficulty, see our OE troubleshooting tips.)S
14 FS/F9 SF 0 256.8 M(Additional OE tests)S
11 FS/F4 SF 0 229.8 M(When testing OE, you will often find it useful to execute this command on the FreeS/WAN host:)S
9 FS/F0 SF 0 205.4 M(   ipsec eroute)S
11 FS/F4 SF 0 179.4 M(If you have established a connection \(either for or for a subnet node\) you will see a result like:)S
9 FS/F0 SF 0 155 M(    192.0.2.11/32   -> 192.139.46.73/32  => tun0x149f@192.139.46.38)S
11 FS/F4 SF 0 129 M(Key:)S
1.432 101.168 M(1.)S
13.384 101.168 M(192.0.2.11/32)S
83.394 101.168 M(Local start point of the protected traffic.)S
1.432 85.103 M(2.)S
13.384 85.103 M(192.0.2.194/32)S
83.394 85.103 M(Remote end point of the protected traffic.)S
1.432 69.038 M(3.)S
13.384 69.038 M(192.0.48.38)S
83.394 69.038 M(Remote FreeS/WAN node \(gateway or host\). May be the same as \(2\).)S
1.432 46.374 M(4.)S
13.384 46.374 M([not shown])S
83.394 52.974 M(Local FreeS/WAN node \(gateway or host\), where you've produced the output. May be the)S
83.394 39.774 M(same as \(1\).)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(OE Gateway Test)S
468.652 0 M(135)S
GR
SP
%%Page: 136 165
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(For extra assurance, you may wish to use a packet sniffer such as tcpdump to verify that packets are being)S
0 673.8 M(encrypted. You should see output that indicates)S
/F7 SF ( ESP)S
/F4 SF ( encrypted data, for example:)S
9 FS/F0 SF 0 649.4 M(    02:17:47.353750 PPPoE  [ses 0x1e12] IP 154: xy.example.com > oetest.freeswan.org: ESP\(spi=0x87150d16,seq=0x55\))S
17 FS/F9 SF 0 617.4 M(Testing with User Mode Linux)S
11 FS/F4 SF 0 589.8 M(User Mode Linux allows you to run Linux as a user process on another Linux machine.)S
0 563.4 M(As of 1.92, the distribution has a new directory named testing. It contains a collection of test scripts and)S
0 550.2 M(sample configurations. Using these, you can bring up several copies of Linux in user mode and have them)S
0 537 M(build tunnels to each other. This lets you do some testing of a FreeS/WAN configuration on a single machine.)S
0 510.6 M(You need a moderately well-endowed machine for this to work well. Each UML wants about 16 megs of)S
0 497.4 M(memory by default, which is plenty for FreeS/WAN usage. Typical regression testing only occasionally uses)S
0 484.2 M(as many as 4 UMLs. If one is doing nothing else with the machine \(in particular, not running X on it\), then)S
0 471 M(128 megs and a 500MHz CPU are fine.)S
0 444.6 M(Documentation on these scripts is here. There is also documentation on automated testing here.)S
17 FS/F9 SF 0 412.2 M(Configuration for a testbed network)S
11 FS/F4 SF 0 384.6 M(A common test setup is to put a machine with dual Ethernet cards in between two gateways under test. You)S
0 371.4 M(need at least five machines; two gateways, two clients and a testing machine in the middle.)S
0 345 M(The central machine both routes packets and provides a place to run diagnostic software for checking IPsec)S
0 331.8 M(packets. See next section for discussion of using tcpdump\(8\) for this.)S
0 305.4 M(This makes things more complicated than if you just connected the two gateway machines directly to each)S
0 292.2 M(other, but it also makes your test setup much more like the environment you actually use IPsec in. Those)S
0 279 M(environments nearly always involve routing, and quite a few apparent IPsec failures turn out to be problems)S
0 265.8 M(with routing or with firewalls dropping packets. This approach lets you deal with those problems on your test)S
0 252.6 M(setup.)S
0 226.2 M(What you end up with looks like:)S
14 FS/F9 SF 0 196.8 M(Testbed network)S
9 FS/F0 SF 0 171.8 M(      subnet a.b.c.0/24)S
0 161 M(             |)S
0 150.2 M(      eth1 = a.b.c.1)S
0 139.4 M(         gate1)S
0 128.6 M(      eth0 = 192.168.p.1)S
0 117.8 M(             |)S
0 107 M(             |)S
0 96.2 M(      eth0 = 192.168.p.2)S
0 85.4 M(         route/monitor box)S
0 74.6 M(      eth1 = 192.168.q.2)S
0 63.8 M(             |)S
0 53 M(             |)S
0 42.2 M(      eth0 = 192.168.q.1)S
0 31.4 M(         gate2)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Testing with User Mode Linux)S
468.652 0 M(136)S
GR
SP
%%Page: 137 166
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(      eth1 = x.y.z.1)S
0 678.2 M(              |)S
0 667.4 M(       subnet x.y.z.0/24)S
0 643.4 M(Where p and q are any convenient values that do not interfere with other)S
0 632.6 M(routes you may have. The ipsec.conf\(5\) file then has, among other things:)S
0 608.6 M(conn abc-xyz)S
0 597.8 M(      left=192.168.p.1)S
0 587 M(      leftnexthop=192.168.p.2)S
0 576.2 M(      right=192.168.q.1)S
0 565.4 M(      rightnexthop=192.168.q.2)S
11 FS/F4 SF 0 539.4 M(Once that works, you can remove the "route/monitor box", and connect the two gateways to the Internet. The)S
0 526.2 M(only parameters in ipsec.conf\(5\) that need to change are the four shown above. You replace them with values)S
0 513 M(appropriate for your Internet connection, and change the eth0 IP addresses and the default routes on both)S
0 499.8 M(gateways.)S
0 473.4 M(Note that nothing on either subnet needs to change. This lets you test most of your IPsec setup before)S
0 460.2 M(connecting to the insecure Internet.)S
14 FS/F9 SF 0 430.8 M(Using packet sniffers in testing)S
11 FS/F4 SF 0 403.8 M(A number of tools are available for looking at packets. We will discuss using tcpdump\(8\), a common Linux)S
0 390.6 M(tool included in most distributions. Alternatives offerring more-or-less the same functionality include:)S
/F6 SF 0 364.2 M(Ethereal)S
/F4 SF 36 351 M(Several people on our mailing list report a preference for this over tcpdump.)S
/F6 SF 0 337.8 M(windump)S
/F4 SF 36 324.6 M(a Windows version of tcpdump\(8\), possibly handy if you have Windows boxes in your network)S
/F6 SF 0 311.4 M(Sniffit)S
/F4 SF 36 298.2 M(A linux sniffer that we don't know much about. If you use it, please comment on our mailing list.)S
0 271.8 M(See also this index of packet sniffers.)S
0 245.4 M(tcpdump\(8\) may misbehave if run on the gateways themselves. It is designed to look into a normal IP stack)S
0 232.2 M(and may become confused if you ask it to display data from a stack which has IPsec in play.)S
0 205.8 M(At one point, the problem was quite severe. Recent versions of tcpdump, however, understand IPsec well)S
0 192.6 M(enough to be usable on a gateway. You can get the latest version from tcpdump.org.)S
0 166.2 M(Even with a recent tcpdump, some care is required. Here is part of a post from Henry on the topic:)S
9 FS/F0 SF 0 141.8 M(> a\) data from sunset to sunrise or the other way is not being)S
0 131 M(> encrypted \(I am using tcpdump \(ver. 3.4\) -x/ping -p to check)S
0 120.2 M(> packages\) )S
0 98.6 M(What *interface* is tcpdump being applied to?  Use the -i option to)S
0 87.8 M(control this.  It matters!  If tcpdump is looking at the ipsecN)S
0 77 M(interfaces, e.g. ipsec0, then it is seeing the packets before they are)S
0 66.2 M(encrypted or after they are decrypted, so of course they don't look)S
0 55.4 M(encrypted.  You want to have tcpdump looking at the actual hardware)S
0 44.6 M(interfaces, e.g. eth0. )S
0 23 M(Actually, the only way to be *sure* what you are sending on the wire is to)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Using packet sniffers in testing)S
468.652 0 M(137)S
GR
SP
%%Page: 138 167
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(have a separate machine eavesdropping on the traffic.  Nothing you can do)S
0 678.2 M(on the machines actually running IPsec is 100% guaranteed reliable in this)S
0 667.4 M(area \(although tcpdump is a lot better now than it used to be\).)S
11 FS/F4 SF 0 641.4 M(The most certain way to examine IPsec packets is to look at them on the wire. For security, you need to be)S
0 628.2 M(certain, so we recommend doing that. To do so, you need a)S
/F7 SF ( separate sniffer machine located between the two)S
0 615 M(gateways)S
/F4 SF (. This machine can be routing IPsec packets, but it must not be an IPsec gateway. Network)S
0 601.8 M(configuration for such testing is discussed above.)S
0 575.4 M(Here's another mailing list message with advice on using tcpdump\(8\):)S
9 FS/F0 SF 0 551 M(Subject: RE: [Users] Encrypted???)S
0 540.2 M(   Date: Thu, 29 Nov 2001)S
0 529.4 M(   From: "Joe Patterson" <jpatterson@asgardgroup.com>)S
0 507.8 M(tcpdump -nl -i $EXT-IF proto 50)S
0 486.2 M(-nl tells it not to buffer output or resolve names \(if you don't do that it)S
0 475.4 M(may confuse you by not outputing anything for a while\), -i $EXT-IF \(replace)S
0 464.6 M(with your external interface\) tells it what interface to listen on, and)S
0 453.8 M(proto 50 is ESP.  Use "proto 51" if for some odd reason you're using AH, and)S
0 443 M("udp port 500" if you want to see the isakmp key exchange/tunnel setup)S
0 432.2 M(packets.)S
0 410.6 M(You can also run `tcpdump -nl -i ipsec0` to see what traffic is on that)S
0 399.8 M(virtual interface.  Anything you see there *should* be either encrypted or)S
0 389 M(dropped \(unless you've turned on some strange options in your ipsec.conf)S
0 378.2 M(file\))S
0 356.6 M(Another very handy thing is ethereal \(http://www.ethereal.com/\) which runs)S
0 345.8 M(on just about anything, has a nice gui interface \(or a nice text-based)S
0 335 M(interface\), and does a great job of protocol  breakdown.  For ESP and AH)S
0 324.2 M(it'll basically just tell you that there's a packet of that protocol, and)S
0 313.4 M(what the spi is, but for isakmp it'll actually show you a lot of the tunnel)S
0 302.6 M(setup information \(until it gets to the point in the protocol where isakmp)S
0 291.8 M(is encrypted....\))S
17 FS/F9 SF 0 259.8 M(Verifying encryption)S
11 FS/F4 SF 0 232.2 M(The question of how to verify that messages are actually encrypted has been extensively discussed on the)S
0 219 M(mailing list. See this thread.)S
0 192.6 M(If you just want to verify that packets are encrypted, look at them with a packet sniffer \(see previous section\))S
0 179.4 M(located between the gateways. The packets should, except for some of the header information, be utterly)S
0 166.2 M(unintelligible.)S
/F7 SF ( The output of good encryption looks exactly like random noise)S
/F4 SF (.)S
0 139.8 M(A packet sniffer can only tell you that the data you looked at was encrypted. If you have stronger requirements)S
0 126.6 M(-- for example if your security policy requires verification that plaintext is not leaked during startup or under)S
0 113.4 M(various anomolous conditions -- then you will need to devise much more thorough tests. If you do that,)S
0 100.2 M(please post any results or methodological details which your security policy allows you to make public.)S
0 73.8 M(You can put recognizable data into ping packets with something like:)S
9 FS/F0 SF 0 49.4 M(        ping -p feedfacedeadbeef 11.0.1.1)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Verifying encryption)S
468.652 0 M(138)S
GR
SP
%%Page: 139 168
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M("feedfacedeadbeef" is a legal hexadecimal pattern that is easy to pick out of hex dumps.)S
0 660.6 M(For other protocols, you may need to check if you have encrypted data or ASCII text. Encrypted data has)S
0 647.4 M(approximately equal frequencies for all 256 possible characters. ASCII text has most characters in the)S
0 634.2 M(printable range 0x20-0x7f, a few control characters less than 0x20, and none at all in the range 0x80-0xff.)S
0 621 M(0x20, space, is a good character to look for. In normal English text space occurs about once in seven)S
0 607.8 M(characters, versus about once in 256 for random or encrypted data.)S
0 581.4 M(One thing to watch for: the output of good compression, like that of good encryption, looks just like random)S
0 568.2 M(noise. You cannot tell just by looking at a data stream whether it has been compressed, encrypted, or both.)S
0 555 M(You need a little care not to mistake compressed data for encrypted data in your testing.)S
0 528.6 M(Note also that weak encryption also produces random-looking output. You cannot tell whether the encryption)S
0 515.4 M(is strong by looking at the output. To be sure of that, you would need to have both the algorithms and the)S
0 502.2 M(implementation examined by experts.)S
0 475.8 M(For IPsec, you can get partial assurance from interoperability tests. See our interop document. When twenty)S
0 462.6 M(products all claim to implement 3DES, and they all talk to each other, you can be fairly sure they have it right.)S
0 449.4 M(Of course, you might wonder whether all the implementers are consipring to trick you or, more plausibly,)S
0 436.2 M(whether some implementations might have "back doors" so they can get also it wrong when required.. If)S
0 423 M(you're seriously worried about things like that, you need to get the code you use audited \(good luck if it is not)S
0 409.8 M(Open Source\), or perhaps to talk to a psychiatrist about treatments for paranoia.)S
17 FS/F9 SF 0 377.4 M(Mailing list pointers)S
11 FS/F4 SF 0 349.8 M(Additional information on testing can be found in these mailing list messages:)S
36 323.4 M(a user's detailed setup diary for his testbed network)S
/Fc SF 28.19 323.4 M(\267 )S
/F4 SF 36 310.2 M(a FreeS/WAN team member's notes from testing at an IPsec interop "bakeoff")S
/Fc SF 28.19 310.2 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Mailing list pointers)S
468.652 0 M(139)S
GR
SP
%%Page: 140 169
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(Kernel configuration for FreeS/WAN)S
11 FS/F4 SF 0 649.8 M(This section lists many of the options available when configuring a Linux kernel, and explains how they)S
0 636.6 M(should be set on a FreeS/WAN IPsec gateway.)S
17 FS/F9 SF 0 604.2 M(Not everyone needs to worry about kernel configuration)S
11 FS/F4 SF 0 576.6 M(Note that in many cases you do not need to mess with these.)S
0 550.2 M(You may have a Linux distribution which comes with FreeS/WAN installed \(see this list\). In that case, you)S
0 537 M(need not do a FreeS/WAN installation or a kernel configuration. Of course, you might still want to configure)S
0 523.8 M(and rebuild your kernel to improve performance or security. This can be done with standard tools described in)S
0 510.6 M(the Kernel HowTo.)S
0 484.2 M(If you need to install FreeS/WAN, then you do need to configure a kernel. However, you may choose to do)S
0 471 M(that using the simplest procedure:)S
36 444.6 M(Configure, build and test a kernel for your system before adding FreeS/WAN. See the Kernel HowTo)S
36 431.4 M(for details.)S
/F7 SF ( This step cannot be skipped)S
/F4 SF (. FreeS/WAN needs the results of your configuration.)S
/Fc SF 28.19 444.6 M(\267 )S
/F4 SF 36 418.2 M(Then use FreeS/WAN's)S
/Fa SF ( make oldgo)S
/F4 SF ( command. This sets everything FreeS/WAN needs and retains)S
36 405 M(your values everywhere else.)S
/Fc SF 28.19 418.2 M(\267 )S
/F4 SF 0 378.6 M(This document is for those who choose to configure their FreeS/WAN kernel themselves.)S
17 FS/F9 SF 0 346.2 M(Assumptions and notation)S
11 FS/F4 SF 0 318.6 M(Help text for most kernel options is included with the kernel files, and is accessible from within the)S
0 305.4 M(configuration utilities. We assume you will refer to that, and to the Kernel HowTo, as necessary. This)S
0 292.2 M(document covers only the FreeS/WAN-specific aspects of the problem.)S
0 265.8 M(To avoid duplication, this document section does not cover settings for the additional IPsec-related kernel)S
0 252.6 M(options which become available after you have patched your kernel with FreeS/WAN patches. There is help)S
0 239.4 M(text for those available from within the configuration utility.)S
0 213 M(We assume a common configuration in which the FreeS/WAN IPsec gateway is also doing ipchains\(8\))S
0 199.8 M(firewalling for a local network, and possibly masquerading as well.)S
0 173.4 M(Some suggestions below are labelled as appropriate for "a true paranoid". By this we mean they may cause)S
0 160.2 M(inconvenience and it is not entirely clear they are necessary, but they appear to be the safest choice. Not using)S
0 147 M(them might entail some risk. Of course one suggested mantra for security administrators is: "I know I'm)S
0 133.8 M(paranoid. I wonder if I'm paranoid enough.")S
14 FS/F9 SF 0 104.4 M(Labels used)S
11 FS/F4 SF 0 77.4 M(Six labels are used to indicate how options should be set. We mark the labels with [square brackets]. For two)S
0 64.2 M(of these labels, you have no choice:)S
/F6 SF 0 37.8 M([required])S
/F4 SF 36 24.6 M(essential for FreeS/WAN operation.)S
/F8 SF 0 0 M(Kernel configuration for FreeS/WAN)S
468.652 0 M(140)S
GR
SP
%%Page: 141 170
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F6 SF 0 687 M([incompatible])S
/F4 SF 36 673.8 M(incompatible with FreeS/WAN.)S
0 647.4 M(those must be set correctly or FreeS/WAN will not work)S
0 621 M(FreeS/WAN should work with any settings of the others, though of course not all combinations have been)S
0 607.8 M(tested. We do label these in various ways, but)S
/F6 SF ( these labels are only suggestions)S
/F4 SF (.)S
/F6 SF 0 581.4 M([recommended])S
/F4 SF 36 568.2 M(useful on most FreeS/WAN gateways)S
/F6 SF 0 555 M([disable])S
/F4 SF 36 541.8 M(an unwelcome complication on a FreeS/WAN gateway.)S
/F6 SF 0 528.6 M([optional])S
/F4 SF 36 515.4 M(Your choice. We outline issues you might consider.)S
/F6 SF 0 502.2 M([anything])S
/F4 SF 36 489 M(This option has no direct effect on FreeS/WAN and related tools, so you should be able to set it as)S
36 475.8 M(you please.)S
0 449.4 M(Of course complexity is an enemy in any effort to build secure systems.)S
/F7 SF ( For maximum security, any feature)S
0 436.2 M(that can reasonably be turned off should be)S
/F4 SF (. "If in doubt, leave it out.")S
17 FS/F9 SF 0 403.8 M(Kernel options for FreeS/WAN)S
11 FS/F4 SF 0 376.2 M(Indentation is based on the nesting shown by 'make menuconfig' with a 2.2.16 kernel for the i386 architecture.)S
/F6 SF 0 349.8 M(Code maturity and level options)S
36 336.6 M(Prompt for development ... code/drivers)S
/F4 SF 72 323.4 M([optional] If this is)S
/Fa SF ( no)S
/F4 SF (, experimental drivers are not shown in later menus.)S
72 297 M(For most FreeS/WAN work,)S
/Fa SF ( no)S
/F4 SF ( is the preferred setting. Using new or untested components is)S
72 283.8 M(too risky for a security gateway.)S
72 257.4 M(However, for some hardware \(such as the author's network cards\) the only drivers available)S
72 244.2 M(are marked)S
/Fa SF ( new/experimental)S
/F4 SF (. In such cases, you must enable this option or your cards will)S
72 231 M(not appear under "network device support". A true paranoid would leave this option off and)S
72 217.8 M(replace the cards.)S
/F6 SF 36 204.6 M(Processor type and features)S
/F4 SF 72 191.4 M([anything])S
/F6 SF 36 178.2 M(Loadable module support)S
72 165 M(Enable loadable module support)S
/F4 SF 108 151.8 M([optional] A true paranoid would disable this. An attacker who has root access to)S
108 138.6 M(your machine can fairly easily install a bogus module that does awful things,)S
108 125.4 M(provided modules are enabled. A common tool for attackers is a "rootkit", a set of)S
108 112.2 M(tools the attacker uses once he or she has become root on your system. The kit)S
108 99 M(introduces assorted additional compromises so that the attacker will continue to)S
108 85.8 M("own" your system despite most things you might do to recovery the situation. For)S
108 72.6 M(Linux, there is a tool called knark which is basically a rootkit packaged as a kernel)S
108 59.4 M(module.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Kernel options for FreeS/WAN)S
468.652 0 M(141)S
GR
SP
%%Page: 142 171
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 108 687 M(With modules disabled, an attacker cannot install a bogus module. The only way he)S
108 673.8 M(can achieve the same effects is to install a new kernel and reboot. This is considerably)S
108 660.6 M(more likely to be noticed.)S
108 634.2 M(Many FreeS/WAN gateways run with modules enabled. This simplifies some)S
108 621 M(administrative tasks and some ipchains features are available only as modules. Once)S
108 607.8 M(an enemy has root on your machine your security is nil, so arguably defenses which)S
108 594.6 M(come into play only in that situation are pointless.)S
/F6 SF 72 581.4 M(Set version information ....)S
/F4 SF 108 568.2 M([optional] This provides a check to prevent loading modules compiled for a different)S
108 555 M(kernel.)S
/F6 SF 72 541.8 M(Kernel module loader)S
/F4 SF 108 528.6 M([disable] It gives little benefit on a typical FreeS/WAN gate and entails some risk.)S
/F6 SF 36 515.4 M(General setup)S
/F4 SF 72 502.2 M(We list here only the options that matter for FreeS/WAN.)S
/F6 SF 72 489 M(Networking support)S
/F4 SF 108 475.8 M([required])S
/F6 SF 72 462.6 M(Sysctl interface)S
/F4 SF 108 449.4 M([optional] If this option is turned on and the)S
/Fa SF ( /proc)S
/F4 SF ( filesystem installed, then you can)S
108 436.2 M(control various system behaviours by writing to files under)S
/Fa SF ( /proc/sys)S
/F4 SF (. For example:)S
9 FS/F0 SF 108 411.8 M(        echo 1 > /proc/sys/net/ipv4/ipforward)S
11 FS/F4 SF 108 385.8 M(turns IP forwarding on.)S
108 359.4 M(Disabling this option breaks many firewall scripts. A true paranoid would disable it)S
108 346.2 M(anyway since it might conceivably be of use to an attacker.)S
/F6 SF 36 333 M(Plug and Play support)S
/F4 SF 72 319.8 M([anything])S
/F6 SF 36 306.6 M(Block devices)S
/F4 SF 72 293.4 M([anything])S
/F6 SF 36 280.2 M(Networking options)S
72 267 M(Packet socket)S
/F4 SF 108 253.8 M([optional] This kernel feature supports tools such as tcpdump\(8\) which communicate)S
108 240.6 M(directly with network hardware, bypassing kernel protocols. This is very much a)S
108 227.4 M(two-edged sword:)S
144 214.2 M(such tools can be very useful to the firewall admin, especially during initial)S
144 201 M(testing)S
/Fc SF 135.816 214.2 M(\340 )S
/F4 SF 144 187.8 M(should an evildoer breach your firewall, such tools could give him or her a)S
144 174.6 M(great deal of information about the rest of your network)S
/Fc SF 135.816 187.8 M(\340 )S
/F4 SF 108 161.4 M(We recommend disabling this option on production gateways.)S
/F6 SF 72 148.2 M(Kernel/User netlink socket)S
/F4 SF 108 135 M([optional] Required if you want to use advanced router features.)S
/F6 SF 72 121.8 M(Routing messages)S
/F4 SF 108 108.6 M([optional])S
/F6 SF 72 95.4 M(Netlink device emulation)S
/F4 SF 108 82.2 M([optional])S
/F6 SF 72 69 M(Network firewalls)S
/F4 SF 108 55.8 M([recommended] You need this if the IPsec gateway also functions as a firewall.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Kernel options for FreeS/WAN)S
468.652 0 M(142)S
GR
SP
%%Page: 143 172
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 108 687 M(Even if the IPsec gateway is not your primary firewall, we suggest setting this so that)S
108 673.8 M(you can protect the gateway with at least basic local packet filters.)S
/F6 SF 72 660.6 M(Socket filtering)S
/F4 SF 108 647.4 M([disable] This enables an older filtering interface. We suggest using ipchains\(8\))S
108 634.2 M(instead. To do that, set the "Network firewalls" option just above, and not this one.)S
/F6 SF 72 621 M(Unix domain sockets)S
/F4 SF 108 607.8 M([required] These sockets are used for communication between the ipsec\(8\) commands)S
108 594.6 M(and the ipsec_pluto\(8\) daemon.)S
/F6 SF 72 581.4 M(TCP/IP networking)S
/F4 SF 108 568.2 M([required])S
/F6 SF 108 555 M(IP: multicasting)S
/F4 SF 144 541.8 M([anything])S
/F6 SF 108 528.6 M(IP: advanced router)S
/F4 SF 144 515.4 M([optional] This gives you policy routing, which some people have used to)S
144 502.2 M(good advantage in their scripts for FreeS/WAN gateway management. It is)S
144 489 M(not used in our distributed scripts, so not required unless you want it for)S
144 475.8 M(custom scripts. It requires the netlink interface between kernel code and the)S
144 462.6 M(iproute2\(8\) command.)S
/F6 SF 108 449.4 M(IP: kernel level autoconfiguration)S
/F4 SF 144 436.2 M([disable] It gives little benefit on a typical FreeS/WAN gate and entails some)S
144 423 M(risk.)S
/F6 SF 108 409.8 M(IP: firewall packet netlink device)S
/F4 SF 144 396.6 M([disable])S
/F6 SF 108 383.4 M(IP: transparent proxy support)S
/F4 SF 144 370.2 M([optional] This is required in some firewall configurations, but should be)S
144 357 M(disabled unless you have a definite need for it.)S
/F6 SF 108 343.8 M(IP: masquerading)S
/F4 SF 144 330.6 M([optional] Required if you want to use non-routable private IP addresses for)S
144 317.4 M(your local network.)S
/F6 SF 108 304.2 M(IP: Optimize as router not host)S
/F4 SF 144 291 M([recommended])S
/F6 SF 108 277.8 M(IP: tunneling)S
/F4 SF 144 264.6 M([required])S
/F6 SF 108 251.4 M(IP: GRE tunnels over IP)S
/F4 SF 144 238.2 M([anything])S
/F6 SF 108 225 M(IP: aliasing support)S
/F4 SF 144 211.8 M([anything])S
/F6 SF 108 198.6 M(IP: ARP daemon support \(EXPERIMENTAL\))S
/F4 SF 144 185.4 M(Not required on most systems, but might prove useful on heavily-loaded)S
144 172.2 M(gateways.)S
/F6 SF 108 159 M(IP: TCP syncookie support)S
/F4 SF 144 145.8 M([recommended] It provides a defense against a denial of service attack which)S
144 132.6 M(uses bogus TCP connection requests to waste resources on the victim)S
144 119.4 M(machine.)S
/F6 SF 108 106.2 M(IP: Reverse ARP)S
108 93 M(IP: large window support)S
/F4 SF 144 79.8 M([recommended] unless you have less than 16 meg RAM)S
/F6 SF 72 66.6 M(IPv6)S
/F4 SF 108 53.4 M([optional] FreeS/WAN does not currently support IPv6, though work on integrating)S
108 40.2 M(FreeS/WAN with the Linux IPv6 stack has begun. Details.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Kernel options for FreeS/WAN)S
468.652 0 M(143)S
GR
SP
%%Page: 144 173
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 108 687 M(It should be possible to use IPv4 FreeS/WAN on a machine which also does IPv6.)S
108 673.8 M(This combination is not yet well tested. We would be quite interested in hearing)S
108 660.6 M(results from anyone expermenting with it, via the mailing list.)S
108 634.2 M(We do not recommend using IPv6 on production FreeS/WAN gateways until more)S
108 621 M(testing has been done.)S
/F6 SF 72 607.8 M(Novell IPX)S
/F4 SF 108 594.6 M([disable])S
/F6 SF 72 581.4 M(Appletalk)S
/F4 SF 108 568.2 M([disable] Quite a few Linux installations use IP but also have some other protocol,)S
108 555 M(such as Appletalk or IPX, for communication with local desktop machines. In theory)S
108 541.8 M(it should be possible to configure IPsec for the IP side of things without interfering)S
108 528.6 M(with the second protocol.)S
108 502.2 M(We do not recommend this. Keep the software on your gateway as simple as possible.)S
108 489 M(If you need a Linux-based Appletalk or IPX server, use a separate machine.)S
/F6 SF 36 475.8 M(Telephony support)S
/F4 SF 72 462.6 M([anything])S
/F6 SF 36 449.4 M(SCSI support)S
/F4 SF 72 436.2 M([anything])S
/F6 SF 36 423 M(I2O device support)S
/F4 SF 72 409.8 M([anything])S
/F6 SF 36 396.6 M(Network device support)S
/F4 SF 72 383.4 M([anything] should work, but there are some points to note.)S
72 357 M(The development team test almost entirely on 10 or 100 megabit Ethernet and modems. In)S
72 343.8 M(principle, any device that can do IP should be just fine for IPsec, but in the real world any)S
72 330.6 M(device that has not been well-tested is somewhat risky. By all means try it, but don't bet your)S
72 317.4 M(project on it until you have solid test results.)S
72 291 M(If you disabled experimental drivers in the Code maturity section above, then those drivers)S
72 277.8 M(will not be shown here. Check that option before going off to hunt for missing drivers.)S
72 251.4 M(If you want Linux to automatically find more than one ethernet interface at boot time, you)S
72 238.2 M(need to:)S
108 211.8 M(compile the appropriate driver\(s\) into your kernel. Modules will not work for this)S
/Fc SF 100.19 211.8 M(\267 )S
/F4 SF 108 198.6 M(add a line such as)S
9 FS/F0 SF 108 174.2 M(   append="ether=0,0,eth0 ether=0,0,eth1")S
11 FS/F4 SF 108 148.2 M(to your /etc/lilo.conf file. In some cases you may need to specify parameters such as)S
108 135 M(IRQ or base address. The example uses "0,0" for these, which tells the system to)S
108 121.8 M(search. If the search does not succeed on your hardware, then you should retry with)S
108 108.6 M(explicit parameters. See the lilo.conf\(5\) man page for details.)S
/Fc SF 100.19 198.6 M(\267 )S
/F4 SF 108 95.4 M(run lilo\(8\))S
/Fc SF 100.19 95.4 M(\267 )S
/F4 SF 72 82.2 M(Having Linux find the cards this way is not necessary, but is usually more convenient than)S
72 69 M(loading modules in your boot scripts.)S
/F6 SF 36 55.8 M(Amateur radio support)S
/F4 SF 72 42.6 M([anything])S
/F6 SF 36 29.4 M(IrDA \(infrared\) support)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Kernel options for FreeS/WAN)S
468.652 0 M(144)S
GR
SP
%%Page: 145 174
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 72 687 M([anything])S
/F6 SF 36 673.8 M(ISDN subsystem)S
/F4 SF 72 660.6 M([anything])S
/F6 SF 36 647.4 M(Old CDROM drivers)S
/F4 SF 72 634.2 M([anything])S
/F6 SF 36 621 M(Character devices)S
/F4 SF 72 607.8 M(The only required character device is:)S
/F6 SF 72 594.6 M(random\(4\))S
/F4 SF 108 581.4 M([required] This is a source of random numbers which are required for many)S
108 568.2 M(cryptographic protocols, including several used in IPsec.)S
108 541.8 M(If you are comfortable with C source code, it is likely a good idea to go in and adjust)S
108 528.6 M(the)S
/Fa SF ( #define)S
/F4 SF ( lines in)S
/Fa SF ( /usr/src/linux/drivers/char/random.c)S
/F4 SF ( to ensure that all sources)S
108 515.4 M(of randomness are enabled. Relying solely on keyboard and mouse randomness is)S
108 502.2 M(dubious procedure for a gateway machine. You could also increase the randomness)S
108 489 M(pool size from the default 512 bytes \(128 32-bit words\).)S
/F6 SF 36 475.8 M(Filesystems)S
/F4 SF 72 462.6 M([anything] should work, but we suggest limiting a gateway machine to the standard Linux)S
72 449.4 M(ext2 filesystem in most cases.)S
/F6 SF 36 436.2 M(Network filesystems)S
/F4 SF 72 423 M([disable] These systems are an unnecessary risk on an IPsec gateway.)S
/F6 SF 36 409.8 M(Console drivers)S
/F4 SF 72 396.6 M([anything])S
/F6 SF 36 383.4 M(Sound)S
/F4 SF 72 370.2 M([anything] should work, but we suggest enabling sound only if you plan to use audible alarms)S
72 357 M(for firewall problems.)S
/F6 SF 36 343.8 M(Kernel hacking)S
/F4 SF 72 330.6 M([disable] This might be enabled on test machines, but should not be on production gateways.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Kernel options for FreeS/WAN)S
468.652 0 M(145)S
GR
SP
%%Page: 146 175
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(Other configuration possibilities)S
11 FS/F4 SF 0 649.8 M(This document describes various options for FreeS/WAN configuration which are less used or more complex)S
0 636.6 M(\(often both\) than the standard cases described in our config and quickstart documents.)S
17 FS/F9 SF 0 604.2 M(Some rules of thumb about configuration)S
14 FS/F9 SF 0 573.6 M(Tunnels are cheap)S
11 FS/F4 SF 0 546.6 M(Nearly all of the overhead in IPsec processing is in the encryption and authentication of packets. Our)S
0 533.4 M(performance document discusses these overheads.)S
0 507 M(Beside those overheads, the cost of managing additional tunnels is trivial. Whether your gateway supports one)S
0 493.8 M(tunnel or ten just does not matter. A hundred might be a problem; there is a section on this in the performance)S
0 480.6 M(document.)S
0 454.2 M(So, in nearly all cases, if using multiple tunnels gives you a reasonable way to describe what you need to do,)S
0 441 M(you should describe it that way in your configuration files.)S
0 414.6 M(For example, one user recently asked on a mailing list about this network configuration:)S
9 FS/F0 SF 0 390.2 M(        netA---gwA---gwB---netB)S
0 379.4 M(                            |----netC)S
0 357.8 M(   netA and B are secured netC not.)S
0 347 M(   netA and gwA can not access netC)S
11 FS/F4 SF 0 321 M(The user had constructed only one tunnel, netA to netB, and wanted to know how to use ip-route to get netC)S
0 307.8 M(packets into it. This is entirely unnecessary. One of the replies was:)S
9 FS/F0 SF 0 283.4 M(  The simplest way and indeed the right way to)S
0 272.6 M(  solve this problem is to set up two connections:)S
0 251 M(        leftsubnet=NetA)S
0 240.2 M(        left=gwA)S
0 229.4 M(        right=gwB)S
0 218.6 M(        rightsubnet=NetB)S
0 207.8 M(  and)S
0 197 M(        leftsubnet=NetA)S
0 186.2 M(        left=gwA)S
0 175.4 M(        right=gwB)S
0 164.6 M(        rightsubnet=NetC)S
11 FS/F4 SF 0 138.6 M(This would still be correct even if we added nets D, E, F, ... to the above diagram and needed twenty tunnels.)S
0 112.2 M(Of course another possibility would be to just use one tunnel, with a subnet mask that includes both netB and)S
0 99 M(netC \(or B, C, D, ...\). See next section.)S
0 72.6 M(In general, you can construct as many tunnels as you need. Networks like netC in this example that do not)S
0 59.4 M(connect directly to the gateway are fine, as long as the gateway can route to them.)S
/F8 SF 0 0 M(Other configuration possibilities)S
468.652 0 M(146)S
GR
SP
%%Page: 147 176
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(The number of tunnels can become an issue if it reaches 50 or so. This is discussed in the performance)S
0 673.8 M(document. Look there for information on supporting hundreds of Road Warriors from one gateway.)S
0 647.4 M(If you find yourself with too many tunnels for some reason like having eight subnets at one location and nine)S
0 634.2 M(at another so you end up with 9*8=72 tunnels, read the next section here.)S
14 FS/F9 SF 0 604.8 M(Subnet sizes)S
11 FS/F4 SF 0 577.8 M(The subnets used in)S
/Fa SF ( leftsubnet)S
/F4 SF ( and)S
/Fa SF ( rightsubnet)S
/F4 SF ( can be of any size that fits your needs, and they need not)S
0 564.6 M(correspond to physical networks.)S
0 538.2 M(You adjust the size by changing the subnet mask, the number after the slash in the subnet description. For)S
0 525 M(example)S
36 498.6 M(in 192.168.100.0/24 the /24 mask says 24 bits are used to designate the network. This leave 8 bits to)S
36 485.4 M(label machines. This subnet has 256 addresses. .0 and .255 are reserved, so it can have 254 machines.)S
/Fc SF 28.19 498.6 M(\267 )S
/F4 SF 36 472.2 M(A subnet with a /23 mask would be twice as large, 512 addresses.)S
/Fc SF 28.19 472.2 M(\267 )S
/F4 SF 36 459 M(A subnet with a /25 mask would be half the size, 128 addresses.)S
/Fc SF 28.19 459 M(\267 )S
/F4 SF 36 445.8 M(/0 is the whole Internet)S
/Fc SF 28.19 445.8 M(\267 )S
/F4 SF 36 432.6 M(/32 is a single machine)S
/Fc SF 28.19 432.6 M(\267 )S
/F4 SF 0 406.2 M(As an example of using these in connection descriptions, suppose your company's head office has four)S
0 393 M(physical networks using the address ranges:)S
/F6 SF 0 366.6 M(192.168.100.0/24)S
/F4 SF 36 353.4 M(development)S
/F6 SF 0 340.2 M(192.168.101.0/24)S
/F4 SF 36 327 M(production)S
/F6 SF 0 313.8 M(192.168.102.0/24)S
/F4 SF 36 300.6 M(marketing)S
/F6 SF 0 287.4 M(192.168.103.0/24)S
/F4 SF 36 274.2 M(administration)S
0 247.8 M(You can use exactly those subnets in your connection descriptions, or use larger subnets to grant broad access)S
0 234.6 M(if required:)S
/F6 SF 0 208.2 M(leftsubnet=192.168.100.0/24)S
/F4 SF 36 195 M(remote hosts can access only development)S
/F6 SF 0 181.8 M(leftsubnet=192.168.100.0/23)S
/F4 SF 36 168.6 M(remote hosts can access development or production)S
/F6 SF 0 155.4 M(leftsubnet=192.168.102.0/23)S
/F4 SF 36 142.2 M(remote hosts can access marketing or administration)S
/F6 SF 0 129 M(leftsubnet=192.168.100.0/22)S
/F4 SF 36 115.8 M(remote hosts can access any of the four departments)S
0 89.4 M(or use smaller subnets to restrict access:)S
/F6 SF 0 63 M(leftsubnet=192.168.103.0/24)S
/F4 SF 36 49.8 M(remote hosts can access any machine in administration)S
/F6 SF 0 36.6 M(leftsubnet=192.168.103.64/28)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Subnet sizes)S
468.652 0 M(147)S
GR
SP
%%Page: 148 177
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(remote hosts can access only certain machines in administration.)S
/F6 SF 0 673.8 M(leftsubnet=192.168.103.42/32)S
/F4 SF 36 660.6 M(remote hosts can access only one particular machine in administration)S
0 634.2 M(To be exact, 192.68.103.64/28 means all addresses whose top 28 bits match 192.168.103.64. There are 16 of)S
0 621 M(these because there are 16 possibilities for the remainingg 4 bits. Their addresses are 192.168.103.64 to)S
0 607.8 M(192.168.103.79.)S
0 581.4 M(Each connection description can use a different subnet if required.)S
0 555 M(It is possible to use all the examples above on the same FreeS/WAN gateway, each in a different connection)S
0 541.8 M(description, perhaps for different classes of user or for different remote offices.)S
0 515.4 M(It is also possible to have multiple tunnels using different)S
/Fa SF ( leftsubnet)S
/F4 SF ( descriptions with the same)S
/Fa SF ( right)S
/F4 SF (. For)S
0 502.2 M(example, when the marketing manager is on the road he or she might have access to:)S
/F6 SF 0 475.8 M(leftsubnet=192.168.102.0/24)S
/F4 SF 36 462.6 M(all machines in marketing)S
/F6 SF 0 449.4 M(192.168.101.32/29)S
/F4 SF 36 436.2 M(some machines in production)S
/F6 SF 0 423 M(leftsubnet=192.168.103.42/32)S
/F4 SF 36 409.8 M(one particular machine in administration)S
0 383.4 M(This takes three tunnels, but tunnels are cheap. If the laptop is set up to build all three tunnels automatically,)S
0 370.2 M(then he or she can access all these machines concurrently, perhaps from different windows.)S
14 FS/F9 SF 0 340.8 M(Other network layouts)S
11 FS/F4 SF 0 313.8 M(Here is the usual network picture for a site-to-site VPN::)S
9 FS/F0 SF 0 289.4 M(     Sunset==========West------------------East=========Sunrise)S
0 278.6 M(           local net       untrusted net       local net)S
11 FS/F4 SF 0 252.6 M(and for the Road Warrior::)S
9 FS/F0 SF 0 228.2 M(                                           telecommuter's PC or)S
0 217.4 M(                                           traveller's laptop)S
0 206.6 M(     Sunset==========West------------------East)S
0 195.8 M(         corporate LAN     untrusted net)S
11 FS/F4 SF 0 169.8 M(Other configurations are also possible.)S
/F9 SF 0 143.4 M(The Internet as a big subnet)S
/F4 SF 0 117 M(A telecommuter might have:)S
9 FS/F0 SF 0 92.6 M(     Sunset==========West------------------East ================= firewall --- the Internet)S
0 81.8 M(         home network      untrusted net        corporate network)S
11 FS/F4 SF 0 55.8 M(This can be described as a special case of the general subnet-to-subnet connection. The subnet on the right is)S
0 42.6 M(0.0.0.0/0, the whole Internet.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Other network layouts)S
468.652 0 M(148)S
GR
SP
%%Page: 149 178
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(West \(the home gateway\) can have its firewall rules set up so that only IPsec packets to East are allowed out.)S
0 673.8 M(It will then behave as if its only connection to the world was a wire to East.)S
0 647.4 M(When machines on the home network need to reach the Internet, they do so via the tunnel, East and the)S
0 634.2 M(corporate firewall. From the viewpoint of the Internet \(perhaps of some EvilDoer trying to break in!\), those)S
0 621 M(home office machines are behind the firewall and protected by it.)S
/F9 SF 0 594.6 M(Wireless)S
/F4 SF 0 568.2 M(Another possible configuration comes up when you do not trust the local network, either because you have)S
0 555 M(very high security standards or because your are using easily-intercepted wireless signals.)S
0 528.6 M(Some wireless networks have built-in encryption called WEP, but its security is dubious. It is a fairly)S
0 515.4 M(common practice to use IPsec instead.)S
0 489 M(In this case, part of your network may look like this:)S
9 FS/F0 SF 0 464.6 M(          West-----------------------------East == the rest of your network)S
0 453.8 M(     workstation   untrusted wireless net)S
11 FS/F4 SF 0 427.8 M(Of course, there would likely be several wireless workstations, each with its own IPsec tunnel to the East)S
0 414.6 M(gateway.)S
0 388.2 M(The connection descriptions look much like Road Warrior descriptions:)S
36 361.8 M(each workstation should have its own unique)S
72 348.6 M(identifier for IPsec)S
/Fc SF 60.967 348.6 M(\250 )S
/F4 SF 72 335.4 M(RSA key)S
/Fc SF 60.967 335.4 M(\250 )S
/F4 SF 72 322.2 M(connection description.)S
/Fc SF 60.967 322.2 M(\250 )S
28.19 361.8 M(\267 )S
/F4 SF 36 309 M(on the gateway, use)S
/Fa SF ( left=%any)S
/F4 SF (, or the workstation IP address)S
/Fc SF 28.19 309 M(\267 )S
/F4 SF 36 295.8 M(on workstations,)S
/Fa SF ( left=%defaultroute)S
/F4 SF (, or the workstation IP address)S
/Fc SF 28.19 295.8 M(\267 )S
/Fa SF 36 282.6 M(leftsubnet=)S
/F4 SF ( is not used.)S
/Fc SF 28.19 282.6 M(\267 )S
/F4 SF 0 256.2 M(The)S
/Fa SF ( rightsubnet=)S
/F4 SF ( parameter might be set in any of several ways:)S
/F6 SF 0 229.8 M(rightsubnet=0.0.0.0/0)S
/F4 SF 36 216.6 M(allowing workstations to access the entire Internet \(see above\))S
/F6 SF 0 203.4 M(rightsubnet=a.b.c.0/24)S
/F4 SF 36 190.2 M(allowing access to your entire local network)S
/F6 SF 0 177 M(rightsubnet=a.b.c.d/32)S
/F4 SF 36 163.8 M(restricting the workstation to connecting to a particular server)S
0 137.4 M(Of course you can mix and match these as required. For example, a university might allow faculty full Internet)S
0 124.2 M(access while letting student laptops connect only to a group of lab machines.)S
17 FS/F9 SF 0 91.8 M(Choosing connection types)S
11 FS/F4 SF 0 64.2 M(One choice you need to make before configuring additional connections is what type or types of connections)S
0 51 M(you will use. There are several options, and you can use more than one concurrently.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Other network layouts)S
468.652 0 M(149)S
GR
SP
%%Page: 150 179
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(Manual vs. automatic keying)S
11 FS/F4 SF 0 657 M(IPsec allows two types of connections, with manual or automatic keying. FreeS/WAN starts them with)S
0 643.8 M(commands such as:)S
9 FS/F0 SF 0 619.4 M(        ipsec manual --up )S
/Fa SF (name)S
/F0 SF 0 608.6 M(        ipsec auto --up )S
/Fa SF (name)S
11 FS/F4 SF 0 582.6 M(The difference is in how they are keyed.)S
/F6 SF 0 556.2 M(Manually keyed connections)S
/F4 SF 36 543 M(use keys stored in ipsec.conf.)S
/F6 SF 0 529.8 M(Automatically keyed connections)S
/F4 SF 36 516.6 M(use keys automatically generated by the Pluto key negotiation daemon. The key negotiation protocol,)S
36 503.4 M(IKE, must authenticate the other system. \(It is vulnerable to a man-in-the-middle attack if used)S
36 490.2 M(without authentication.\) We currently support two authentication methods:)S
72 477 M(using shared secrets stored in ipsec.secrets.)S
/Fc SF 63.816 477 M(\340 )S
/F4 SF 72 463.8 M(RSA public key authentication, with our machine's private key in ipsec.secrets. Public keys)S
72 450.6 M(for other machines may either be placed in ipsec.conf or provided via DNS.)S
/Fc SF 63.816 463.8 M(\340 )S
/F4 SF 36 437.4 M(A third method, using RSA keys embedded in X.509 certtificates, is provided by user patches.)S
0 411 M(Manually keyed connections provide weaker security than automatically keyed connections. An opponent)S
0 397.8 M(who reads ipsec.secrets\(5\) gets your encryption key and can read all data encrypted by it. If he or she has an)S
0 384.6 M(archive of old messages, all of them back to your last key change are also readable.)S
0 358.2 M(With automatically-\(re\)-keyed connections, an opponent who reads ipsec.secrets\(5\) gets the key used to)S
0 345 M(authenticate your system in IKE -- the shared secret or your private key, depending what authentication)S
0 331.8 M(mechanism is in use. However, he or she does not automatically gain access to any encryption keys or any)S
0 318.6 M(data.)S
0 292.2 M(An attacker who has your authentication key can mount a man-in-the-middle attack and, if that succeeds, he)S
0 279 M(or she will get encryption keys and data. This is a serious danger, but it is better than having the attacker read)S
0 265.8 M(everyting as soon as he or she breaks into ipsec.secrets\(5\).. Moreover, the keys change often so an opponent)S
0 252.6 M(who gets one key does not get a large amount of data. To read all your data, he or she would have to do a)S
0 239.4 M(man-in-the-middle attack at every key change.)S
0 213 M(We discuss using manual keying in production below, but this is)S
/F7 SF ( not recommended)S
/F4 SF ( except in special)S
0 199.8 M(circumstances, such as needing to communicate with some implementation that offers no auto-keyed mode)S
0 186.6 M(compatible with FreeS/WAN.)S
0 160.2 M(Manual keying may also be useful for testing. There is some discussion of this in our FAQ.)S
14 FS/F9 SF 0 130.8 M(Authentication methods for auto-keying)S
11 FS/F4 SF 0 103.8 M(The IKE protocol which Pluto uses to negotiate connections between gateways must use some form of)S
0 90.6 M(authentication of peers. A gateway must know who it is talking to before it can create a secure connection. We)S
0 77.4 M(support two basic methods for this authentication:)S
36 51 M(shared secrets, stored in ipsec.secrets\(5\))S
/Fc SF 28.19 51 M(\267 )S
/F4 SF 36 37.8 M(RSA authentication)S
/Fc SF 28.19 37.8 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Manual vs. automatic keying)S
468.652 0 M(150)S
GR
SP
%%Page: 151 180
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(There are, howver, several variations on the RSA theme, using different methods of managing the RSA keys:)S
36 660.6 M(our RSA private key in ipsec.secrets\(5\) with other gateways' public keys)S
/F6 SF 36 647.4 M(either)S
/F4 SF 72 634.2 M(stored in ipsec.conf\(5\))S
/F6 SF 36 621 M(or)S
/F4 SF 72 607.8 M(looked up via DNS)S
/Fc SF 28.19 660.6 M(\267 )S
/F4 SF 36 594.6 M(authentication with x.509 certificates.; See our links section for information on user-contributed)S
36 581.4 M(patches for this.:)S
/Fc SF 28.19 594.6 M(\267 )S
/F4 SF 0 555 M(Public keys in ipsec.conf\(5\) give a reasonably straightforward method of specifying keys for explicitly)S
0 541.8 M(configured connections.)S
0 515.4 M(Putting public keys in DNS allows us to support opportunistic encryption. Any two FreeS/WAN gateways can)S
0 502.2 M(provide secure communication, without either of them having any preset information about the other.)S
0 475.8 M(X.509 certificates may be required to interface to various PKIs.)S
14 FS/F9 SF 0 446.4 M(Advantages of public key methods)S
11 FS/F4 SF 0 419.4 M(Authentication with a public key method such as RSA has some important advantages over using shared)S
0 406.2 M(secrets.)S
36 379.8 M(no problem of secure transmission of secrets)S
72 366.6 M(A shared secret must be shared, so you have the problem of transmitting it securely to the)S
72 353.4 M(other party. If you get this wrong, you have no security.)S
/Fc SF 60.967 366.6 M(\250 )S
/F4 SF 72 340.2 M(With a public key technique, you transmit only your public key. The system is designed to)S
72 327 M(ensure that it does not matter if an enemy obtains public keys. The private key never leaves)S
72 313.8 M(your machine.)S
/Fc SF 60.967 340.2 M(\250 )S
28.19 379.8 M(\267 )S
/F4 SF 36 300.6 M(easier management)S
72 287.4 M(Suppose you have 20 branch offices all connecting to one gateway at head office, and all)S
72 274.2 M(using shared secrets. Then the head office admin has 20 secrets to manage. Each of them must)S
72 261 M(be kept secret not only from outsiders, but also from 19 of the branch office admins. The)S
72 247.8 M(branch office admins have only one secret each to manage.)S
72 221.4 M(If the branch offices need to talk to each other, this becomes problematic. You need another)S
72 208.2 M(20*19/2 = 190 secrets for branch-to-branch communication, each known to exactly two)S
72 195 M(branches. Now all the branch admins have the headache of handling 20 keys, each shared)S
72 181.8 M(with exactly one other branch or with head office.)S
72 155.4 M(For larger numbers of branches, the number of connections and secrets increases)S
72 142.2 M(quadratically and managing them becomes a nightmare. A 1000-gateway fully connected)S
72 129 M(network needs 499,500 secrets, each known to exactly two players. There are ways to reduce)S
72 115.8 M(this problem, for example by introducing a central key server, but these involve additional)S
72 102.6 M(communication overheads, more administrative work, and new threats that must be carefully)S
72 89.4 M(guarded against.)S
/Fc SF 60.967 287.4 M(\250 )S
/F4 SF 72 76.2 M(With public key techniques, the)S
/F6 SF ( only)S
/F4 SF ( thing you have to keep secret is your private key, and)S
/F6 SF 72 63 M(you keep that secret from everyone)S
/F4 SF (.)S
72 36.6 M(As network size increaes, the number of public keys used increases linearly with the number)S
/Fc SF 60.967 76.2 M(\250 )S
28.19 300.6 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Advantages of public key methods)S
468.652 0 M(151)S
GR
SP
%%Page: 152 181
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 72 687 M(of nodes. This still requires careful administration in large applications, but is nothing like the)S
72 673.8 M(disaster of a quadratic increase. On a 1000-gateway network, you have 1000 private keys,)S
72 660.6 M(each of which must be kept secure on one machine, and 1000 public keys which must be)S
72 647.4 M(distributed. This is not a trivial problem, but it is manageable.)S
36 634.2 M(does not require fixed IP addresses)S
72 621 M(When shared secrets are used in IPsec, the responder must be able to tell which secret to use)S
72 607.8 M(by looking at the IP address on the incoming packets. When the other parties do not have a)S
72 594.6 M(fixed IP address to be identified by \(for example, on nearly all dialup ISP connections and)S
72 581.4 M(many cable or ADSL links\), this does not work well -- all must share the same secret!)S
/Fc SF 60.967 621 M(\250 )S
/F4 SF 72 568.2 M(When RSA authentication is in use, the initiator can identify itself by name before the key)S
72 555 M(must be determined. The responder then checks that the message is signed with the public key)S
72 541.8 M(corresponding to that name.)S
/Fc SF 60.967 568.2 M(\250 )S
28.19 634.2 M(\267 )S
/F4 SF 0 515.4 M(There is also a disadvantage:)S
36 489 M(your private key is a single point of attack, extremely valuable to an enemy)S
72 475.8 M(with shared secrets, an attacker who steals your ipsec.secrets file can impersonate you or try)S
72 462.6 M(man-in-the-middle attacks, but can only attack connections described in that file)S
/Fc SF 60.967 475.8 M(\250 )S
/F4 SF 72 449.4 M(an attacker who steals your private key gains the chance to attack not only existing)S
72 436.2 M(connections)S
/F6 SF ( but also any future connections)S
/F4 SF ( created using that key)S
/Fc SF 60.967 449.4 M(\250 )S
28.19 489 M(\267 )S
/F4 SF 0 409.8 M(This is partly counterbalanced by the fact that the key is never transmitted and remains under your control at)S
0 396.6 M(all times. It is likely necessary, however, to take account of this in setting security policy. For example, you)S
0 383.4 M(should change gateway keys when an administrator leaves the company, and should change them periodically)S
0 370.2 M(in any case.)S
0 343.8 M(Overall, public key methods are)S
/F7 SF ( more secure, more easily managed and more flexible)S
/F4 SF (. We recommend that)S
0 330.6 M(they be used for all connections, unless there is a compelling reason to do otherwise.)S
17 FS/F9 SF 0 298.2 M(Using shared secrets in production)S
11 FS/F4 SF 0 270.6 M(Generally, public key methods are preferred for reasons given above, but shared secrets can be used with no)S
0 257.4 M(loss of security, just more work and perhaps more need to take precautions.)S
0 231 M(What I call "shared secrets" are sometimes also called "pre-shared keys". They are used only for for)S
0 217.8 M(authentication, never for encryption. Calling them "pre-shared keys" has confused some users into thinking)S
0 204.6 M(they were encryption keys, so I prefer to avoid the term..)S
0 178.2 M(If you are interoperating with another IPsec implementation, you may find its documentation calling them)S
0 165 M("passphrases".)S
14 FS/F9 SF 0 135.6 M(Putting secrets in ipsec.secrets\(5\))S
11 FS/F4 SF 0 108.6 M(If shared secrets are to be used to authenticate communication for the Diffie-Hellman key exchange in the)S
0 95.4 M(IKE protocol, then those secrets must be stored in)S
/Fa SF ( /etc/ipsec.secrets)S
/F4 SF (. For details, see the ipsec.secrets\(5\))S
0 82.2 M(man page.)S
0 55.8 M(A few considerations are vital:)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Using shared secrets in production)S
468.652 0 M(152)S
GR
SP
%%Page: 153 182
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(make the secrets long and unguessable. Since they need not be remembered by humans, very long)S
36 673.8 M(ugly strings may be used. We suggest using our ipsec_ranbits\(8\) utility to generate long \(128 bits or)S
36 660.6 M(more\) random strings.)S
/Fc SF 28.19 687 M(\267 )S
/F4 SF 36 647.4 M(transmit secrets securely. You have to share them with other systems, but you lose if they are)S
36 634.2 M(intercepted and used against you. Use PGP, SSH, hand delivery of a floppy disk which is then)S
36 621 M(destroyed, or some other trustworthy method to deliver them.)S
/Fc SF 28.19 647.4 M(\267 )S
/F4 SF 36 607.8 M(store secrets securely, in root-owned files with permissions rw------.)S
/Fc SF 28.19 607.8 M(\267 )S
/F4 SF 36 594.6 M(limit sharing of secrets. Alice, Bob, Carol and Dave may all talk to each other, but only Alice and Bob)S
36 581.4 M(should know the secret for an Alice-Bob link.)S
/Fc SF 28.19 594.6 M(\267 )S
/F7 SF 36 568.2 M(do not share private keys)S
/F4 SF (. The private key for RSA authentication of your system is stored in)S
36 555 M(ipsec.secrets\(5\), but it is a different class of secret from the pre-shared keys used for the "shared)S
36 541.8 M(secret" authentication. No-one but you should have the RSA private key.)S
/Fc SF 28.19 568.2 M(\267 )S
/F4 SF 0 515.4 M(Each line has the IP addresses of the two gateways plus the secret. It should look something like this:)S
9 FS/F0 SF 0 491 M(        10.0.0.1 11.0.0.1 : PSK "jxTR1lnmSjuj33n4W51uW3kTR55luUmSmnlRUuWnkjRj3UuTV4T3USSu23Uk55nWu5TkTUnjT")S
11 FS/Fa SF 0 465 M(PSK)S
/F4 SF ( indicates the use of a)S
/F7 SF ( p)S
/F4 SF (re-)S
/F7 SF (s)S
/F4 SF (hared)S
/F7 SF ( k)S
/F4 SF (ey. The quotes and the whitespace shown are required.)S
0 438.6 M(You can use any character string as your secret. For security, it should be both long and extremely hard to)S
0 425.4 M(guess. We provide a utility to generate such strings, ipsec_ranbits\(8\).)S
0 399 M(You want the same secret on the two gateways used, so you create a line with that secret and the two gateway)S
0 385.8 M(IP addresses. The installation process supplies an example secret, useful)S
/F6 SF ( only)S
/F4 SF ( for testing. You must change it)S
0 372.6 M(for production use.)S
14 FS/F9 SF 0 343.2 M(File security)S
11 FS/F4 SF 0 316.2 M(You must deliver this file, or the relevant part of it, to the other gateway machine by some)S
/F7 SF ( secure)S
/F4 SF ( means.)S
/F6 SF 0 303 M(Don't just FTP or mail the file!)S
/F4 SF ( It is vital that the secrets in it remain secret. An attacker who knew those could)S
0 289.8 M(easily have)S
/F6 SF ( all the data on your "secure" connection)S
/F4 SF (.)S
0 263.4 M(This file must be owned by root and should have permissions)S
/Fa SF ( rw-------)S
/F4 SF (.)S
14 FS/F9 SF 0 234 M(Shared secrets for road warriors)S
11 FS/F4 SF 0 207 M(You can use a shared secret to support a single road warrior connecting to your gateway, and this is a)S
0 193.8 M(reasonable thing to do in some circumstances. Public key methods have advantages, discussed above, but they)S
0 180.6 M(are not critical in this case.)S
0 154.2 M(To do this, the line in ipsec.secrets\(5\) is something like:)S
9 FS/F0 SF 0 129.8 M(        10.0.0.1 0.0.0.0 : PSK "jxTR1lnmSjuj33n4W51uW3kTR55luUmSmnlRUuWnkjRj3UuTV4T3USSu23Uk55nWu5TkTUnjT")S
11 FS/F4 SF 0 103.8 M(where the)S
/Fa SF ( 0.0.0.0)S
/F4 SF ( means that any IP address is acceptable.)S
/F7 SF 0 77.4 M(For more than one road warrior, shared secrets are not recommended.)S
/F4 SF ( If shared secrets are used, then when)S
0 64.2 M(the responder needs to look up the secret, all it knows about the sender is an IP address. This is fine if the)S
0 51 M(sender is at a fixed IP address specified in the config file. It is also fine if only one road warrior uses the)S
0 37.8 M(wildcard)S
/Fa SF ( 0.0.0.0)S
/F4 SF ( address. However, if you have more than one road warrior using shared secret)S
0 24.6 M(authentication, then they must all use that wildcard and therefore)S
/F7 SF ( all road warriors using PSK autentication)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(File security)S
468.652 0 M(153)S
GR
SP
%%Page: 154 183
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F7 SF 0 687 M(must use the same secret)S
/F4 SF (. Obviously, this is insecure.)S
/F7 SF 0 660.6 M(For multiple road warriors, use public key authentication.)S
/F4 SF ( Each roadwarrior can then have its own identity)S
0 647.4 M(\(our)S
/Fa SF ( leftid=)S
/F4 SF ( or)S
/Fa SF ( rightid=)S
/F4 SF ( parameters\), its own public/private key pair, and its own secure connection.)S
17 FS/F9 SF 0 615 M(Using manual keying in production)S
11 FS/F4 SF 0 587.4 M(Generally, automatic keying is preferred over manual keying for production use because it is both easier to)S
0 574.2 M(manage and more secure. Automatic keying frees the admin from much of the burden of managing keys)S
0 561 M(securely, and can provide perfect forward secrecy. This is discussed in more detail above.)S
0 534.6 M(However, it is possible to use manual keying in production if that is what you want to do. This might be)S
0 521.4 M(necessary, for example, in order to interoperate with some device that either does not provide automatic)S
0 508.2 M(keying or provides it in some version we cannot talk to.)S
0 481.8 M(Note that with manual keying)S
/F7 SF ( all security rests with the keys)S
/F4 SF (. If an adversary acquires your keys, you've had)S
0 468.6 M(it. He or she can read everything ever sent with those keys, including old messages he or she may have)S
0 455.4 M(archived.)S
0 429 M(You need to)S
/F7 SF ( be really paranoid about keys)S
/F4 SF ( if you're going to rely on manual keying for anything important.)S
36 402.6 M(keep keys in files with 600 permissions, owned by root)S
/Fc SF 28.19 402.6 M(\267 )S
/F4 SF 36 389.4 M(be extremely careful about security of your gateway systems. Anyone who breaks into a gateway and)S
36 376.2 M(gains root privileges can get all your keys and read everything ever encrypted with those keys, both)S
36 363 M(old messages he has archived and any new ones you may send.)S
/Fc SF 28.19 389.4 M(\267 )S
/F4 SF 36 349.8 M(change keys regularly. This can be a considerable bother, \(and provides an excellent reason to)S
36 336.6 M(consider automatic keying instead\), but it is)S
/F6 SF ( absolutely essential)S
/F4 SF ( for security. Consider a manually)S
36 323.4 M(keyed system in which you leave the same key in place for months:)S
72 310.2 M(an attacker can have a very large sample of text sent with that key to work with. This makes)S
72 297 M(various cryptographic attacks much more likely to succeed.)S
/Fc SF 60.967 310.2 M(\250 )S
/F4 SF 72 283.8 M(The chances of the key being compromised in some non-cryptographic manner -- a spy)S
72 270.6 M(finds it on a discarded notepad, someone breaks into your server or your building and steals it,)S
72 257.4 M(a staff member is bribed, tricked, seduced or coerced into revealing it, etc. -- also increase)S
72 244.2 M(over time.)S
/Fc SF 60.967 283.8 M(\250 )S
/F4 SF 72 231 M(a successful attacker can read everything ever sent with that key. This makes any successful)S
72 217.8 M(attack extremely damaging.)S
/Fc SF 60.967 231 M(\250 )S
/F4 SF 36 204.6 M(It is clear that you must change keys often to have any useful security. The only question is how)S
36 191.4 M(often.)S
/Fc SF 28.19 349.8 M(\267 )S
/F4 SF 36 178.2 M(use PGP or SSH for all key transfers)S
/Fc SF 28.19 178.2 M(\267 )S
/F4 SF 36 165 M(don't edit files with keys in them when someone can look over your shoulder)S
/Fc SF 28.19 165 M(\267 )S
/F4 SF 36 151.8 M(worry about network security; could someone get keys by snooping packets on the LAN between)S
36 138.6 M(your X desktop and the gateway?)S
/Fc SF 28.19 151.8 M(\267 )S
/F4 SF 36 125.4 M(lock up your backup tapes for the gateway system)S
/Fc SF 28.19 125.4 M(\267 )S
/F4 SF 36 112.2 M(... and so on)S
/Fc SF 28.19 112.2 M(\267 )S
/F4 SF 0 85.8 M(Linux FreeS/WAN provides some facilities to help with this. In particular, it is good policy to)S
/F7 SF ( keep keys in)S
0 72.6 M(separate files)S
/F4 SF ( so you can edit configuration information in /etc/ipsec.conf without exposing keys to "shoulder)S
0 59.4 M(surfers" or network snoops. We support this with the)S
/Fa SF ( also=)S
/F4 SF ( and)S
/Fa SF ( include)S
/F4 SF ( syntax in ipsec.conf\(5\).)S
0 33 M(See the last example in our examples file. In the /etc/ipsec.conf)S
/Fa SF ( conn samplesep)S
/F4 SF ( section, it has the line:)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Using manual keying in production)S
468.652 0 M(154)S
GR
SP
%%Page: 155 184
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(        also=samplesep-keys)S
11 FS/F4 SF 0 663 M(which tells the "ipsec manual" script to insert the configuration description labelled "samplesep-keys" if it)S
0 649.8 M(can find it. The /etc/ipsec.conf file must also have a line such as:)S
9 FS/F0 SF 0 625.4 M(include ipsec.*.conf)S
11 FS/F4 SF 0 599.4 M(which tells it to read other files. One of those other files then might contain the additional data:)S
9 FS/F0 SF 0 575 M(conn samplesep-keys)S
0 564.2 M(  spi=0x200)S
0 553.4 M(  esp=3des-md5-96)S
0 542.6 M(  espenckey=0x01234567_89abcdef_02468ace_13579bdf_12345678_9abcdef0)S
0 531.8 M(  espauthkey=0x12345678_9abcdef0_2468ace0_13579bdf)S
11 FS/F4 SF 0 505.8 M(The first line matches the label in the "also=" line, so the indented lines are inserted. The net effect is exactly)S
0 492.6 M(as if the inserted lines had occurred in the original file in place of the "also=" line.)S
0 466.2 M(Variables set here are:)S
/F6 SF 0 439.8 M(spi)S
/F4 SF 36 426.6 M(A number needed by the manual keying code. Any 3-digit hex number will do, but if you have more)S
36 413.4 M(than one manual connection then)S
/F7 SF ( spi must be different)S
/F4 SF ( for each connection.)S
/F6 SF 0 400.2 M(esp)S
/F4 SF 36 387 M(Options for ESP \(Encapsulated Security Payload\), the usual IPsec encryption mode. Settings here are)S
36 373.8 M(for encryption using triple DES and authentication using MD5. Note that encryption without)S
36 360.6 M(authentication should not be used; it is insecure.)S
/F6 SF 0 347.4 M(espenkey)S
/F4 SF 36 334.2 M(Key for ESP encryption. Here, a 192-bit hex number for triple DES.)S
/F6 SF 0 321 M(espauthkey)S
/F4 SF 36 307.8 M(Key for ESP authentication. Here, a 128-bit hex number for MD5.)S
/F7 SF 0 281.4 M(Note)S
/F4 SF ( that the)S
/F7 SF ( example keys we supply)S
/F4 SF ( are intended)S
/F7 SF ( only for testing)S
/F4 SF (. For real use, you should go to automatic)S
0 268.2 M(keying. If that is not possible, create your own keys for manual mode and keep them secret)S
0 241.8 M(Of course, any files containing keys)S
/F7 SF ( must)S
/F4 SF ( have 600 permissions and be owned by root.)S
0 215.4 M(If you connect in this way to multiple sites, we recommend that you keep keys for each site in a separate file)S
0 202.2 M(and adopt some naming convention that lets you pick them all up with a single "include" line. This minimizes)S
0 189 M(the risk of losing several keys to one error or attack and of accidentally giving another site admin keys which)S
0 175.8 M(he or she has no business knowing.)S
0 149.4 M(Also note that if you have multiple manually keyed connections on a single machine, then the)S
/Fa SF ( spi)S
/F4 SF ( parameter)S
0 136.2 M(must be different for each one. Any 3-digit hex number is OK, provided they are different for each)S
0 123 M(connection. We reserve the range 0x100 to 0xfff for manual connections. Pluto assigns SPIs from 0x1000 up)S
0 109.8 M(for automatically keyed connections.)S
0 83.4 M(If ipsec.conf\(5\) contains keys for manual mode connections, then it too must have permissions)S
/Fa SF ( rw-------)S
/F4 SF (.)S
0 70.2 M(We recommend instead that, if you must manual keying in production, you keep the keys in separate files.)S
0 43.8 M(Note also that ipsec.conf is installed with permissions)S
/Fa SF ( rw-r--r--)S
/F4 SF (. If you plan to use manually keyed)S
0 30.6 M(connections for anything more than initial testing, you)S
/F5 SF ( must)S
/F4 SF (:)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Using manual keying in production)S
468.652 0 M(155)S
GR
SP
%%Page: 156 185
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(either change permissions to)S
/Fa SF ( rw-------)S
/Fc SF 28.19 687 M(\267 )S
/F4 SF 36 673.8 M(or store keys separately in secure files and access them via include statements in ipsec.conf.)S
/Fc SF 28.19 673.8 M(\267 )S
/F4 SF 0 647.4 M(We recommend the latter method for all but the simplest configurations.)S
14 FS/F9 SF 0 618 M(Creating keys with ranbits)S
11 FS/F4 SF 0 591 M(You can create new random keys with the ranbits\(8\) utility. For example, the commands:)S
9 FS/F0 SF 0 566.6 M(      umask 177)S
0 555.8 M(      ipsec ranbits 192  > temp)S
0 545 M(      ipsec ranbits 128 >> temp)S
11 FS/F4 SF 0 519 M(create keys in the sizes needed for our default algorithms:)S
36 492.6 M(192-bit key for 3DES encryption)S
36 479.4 M(\(only 168 bits are used; parity bits are ignored\))S
/Fc SF 28.19 492.6 M(\267 )S
/F4 SF 36 466.2 M(128-bit key for keyed MD5 authentication)S
/Fc SF 28.19 466.2 M(\267 )S
/F4 SF 0 439.8 M(If you want to use SHA instead of MD5, that requires a 160-bit key)S
0 413.4 M(Note that any)S
/F7 SF ( temporary files)S
/F4 SF ( used must be kept)S
/F7 SF ( secure)S
/F4 SF ( since they contain keys. That is the reason for the)S
0 400.2 M(umask command above. The temporary file should be deleted as soon as you are done with it. You may also)S
0 387 M(want to change the umask back to its default value after you are finished working on keys.)S
0 360.6 M(The ranbits utility may pause for a few seconds if not enough entropy is available immediately. See)S
0 347.4 M(ipsec_ranbits\(8\) and random\(4\) for details. You may wish to provide some activity to feed entropy into the)S
0 334.2 M(system. For example, you might move the mouse around, type random characters, or do)S
/Fa SF ( du /usr > /dev/null)S
/F4 SF 0 321 M(in the background.)S
17 FS/F9 SF 0 288.6 M(Setting up connections at boot time)S
11 FS/F4 SF 0 261 M(You can tell the system to set up connections automatically at boot time by putting suitable stuff in)S
0 247.8 M(/etc/ipsec.conf on both systems. The relevant section of the file is labelled by a line reading)S
/Fa SF ( config setup)S
/F4 SF (.)S
0 221.4 M(Details can be found in the ipsec.conf\(5\) man page. We also provide a file of example configurations.)S
0 195 M(The most likely options are something like:)S
/F6 SF 0 168.6 M(interfaces="ipsec0=eth0 ipsec1=ppp0")S
/F4 SF 36 155.4 M(Tells KLIPS which interfaces to use. Up to four interfaces numbered ipsec[0-3] are supported. Each)S
36 142.2 M(interface can support an arbitrary number of tunnels.)S
36 115.8 M(Note that for PPP, you give the ppp[0-9] device name here, not the underlying device such as modem)S
36 102.6 M(\(or eth1 if you are using PPPoE\).)S
/F6 SF 0 89.4 M(interfaces=%defaultroute)S
/F4 SF 36 76.2 M(Alternative setting, useful in simple cases. KLIPS will pick up both its interface and the next hop)S
36 63 M(information from the settings of the Linux default route.)S
/F6 SF 0 49.8 M(forwardcontrol=no)S
/F4 SF 36 36.6 M(Normally "no". Set to "yes" if the IP forwarding option is disabled in your network configuration.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Creating keys with ranbits)S
468.652 0 M(156)S
GR
SP
%%Page: 157 186
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(\(This can be set as a kernel configuration option or later. e.g. on Redhat, it's in /etc/sysconfig/network)S
36 673.8 M(and on SuSE you can adjust it with Yast.\) Linux FreeS/WAN will then enable forwarding when)S
36 660.6 M(starting up and turn it off when going down. This is used to ensure that no packets will be forwarded)S
36 647.4 M(before IPsec comes up and takes control.)S
/F6 SF 0 634.2 M(syslog=daemon.error)S
/F4 SF 36 621 M(Used in messages to the system logging daemon \(syslogd\) to specify what type of software is sending)S
36 607.8 M(the messages. If the settings are "daemon.error" as in our example, then syslogd treats the messages as)S
36 594.6 M(error messages from a daemon.)S
36 568.2 M(Note that Pluto does not currently pay attention to this variable. The variable controls setup messages)S
36 555 M(only.)S
/F6 SF 0 541.8 M(klipsdebug=)S
/F4 SF 36 528.6 M(Debug settings for KLIPS.)S
/F6 SF 0 515.4 M(plutodebug=)S
/F4 SF 36 502.2 M(Debug settings for Pluto.)S
/F6 SF 0 489 M(... for both the above DEBUG settings)S
/F4 SF 36 475.8 M(Normally, leave empty as shown above for no debugging output.)S
36 462.6 M(Use "all" for maximum information.)S
36 449.4 M(See ipsec_klipsdebug\(8\) and ipsec_pluto\(8\) man page for other options. Beware that if you set)S
36 436.2 M(/etc/ipsec.conf to enable debug output, your system's log files may get large quickly.)S
/F6 SF 0 423 M(dumpdir=/safe/directory)S
/F4 SF 36 409.8 M(Normally, programs started by ipsec setup don't crash. If they do, by default, no core dump will be)S
36 396.6 M(produced because such dumps would contain secrets. If you find you need to debug such crashes, you)S
36 383.4 M(can set dumpdir to the name of a directory in which to collect the core file.)S
/F6 SF 0 370.2 M(manualstart=)S
/F4 SF 36 357 M(List of manually keyed connections to be automatically started at boot time. Useful for testing, but not)S
36 343.8 M(for long term use. Connections which are automatically started should also be automatically)S
36 330.6 M(re-keyed.)S
/F6 SF 0 317.4 M(pluto=yes)S
/F4 SF 36 304.2 M(Whether to start Pluto when ipsec startup is done.)S
36 291 M(This parameter is optional and defaults to "yes" if not present.)S
36 264.6 M("yes" is strongly recommended for production use so that the keying daemon \(Pluto\) will)S
36 251.4 M(automatically re-key the connections regularly. The ipsec-auto parameters ikelifetime, ipseclifetime)S
36 238.2 M(and reykeywindow give you control over frequency of rekeying.)S
/F6 SF 0 225 M(plutoload="reno-van reno-adam reno-nyc")S
/F4 SF 36 211.8 M(List of tunnels \(by name, e.g. fred-susan or reno-van in our examples\) to be loaded into Pluto's)S
36 198.6 M(internal database at startup. In this example, Pluto loads three tunnels into its database when it is)S
36 185.4 M(started.)S
36 159 M(If plutoload is "%search", Pluto will load any connections whose description includes "auto=add" or)S
36 145.8 M("auto=start".)S
/F6 SF 0 132.6 M(plutostart="reno-van reno-adam reno-nyc")S
/F4 SF 36 119.4 M(List of tunnels to attempt to negotiate when Pluto is started.)S
36 93 M(If plutostart is "%search", Pluto will start any connections whose description includes "auto=start".)S
36 66.6 M(Note that, for a connection intended to be permanent,)S
/F7 SF ( both gateways should be set try to start)S
/F4 SF ( the)S
36 53.4 M(tunnel. This allows quick recovery if either gateway is rebooted or has its IPsec restarted. If only one)S
36 40.2 M(gateway is set to start the tunnel and the other gateway restarts, the tunnel may not be rebuilt.)S
/F6 SF 0 27 M(plutowait=no)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Creating keys with ranbits)S
468.652 0 M(157)S
GR
SP
%%Page: 158 187
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(Controls whether Pluto waits for one tunnel to be established before starting to negotiate the next.)S
36 673.8 M(You might set this to "yes")S
72 660.6 M(if your gateway is a very limited machine and you need to conserve resources.)S
/Fc SF 63.816 660.6 M(\340 )S
/F4 SF 72 647.4 M(for debugging; the logs are clearer if only one connection is brought up at a time)S
/Fc SF 63.816 647.4 M(\340 )S
/F4 SF 36 634.2 M(For a busy and resource-laden production gateway, you likely want "no" so that connections are)S
36 621 M(brought up in parallel and the whole process takes less time.)S
0 594.6 M(The example assumes you are at the Reno office and will use IPsec to Vancouver, New York City and)S
0 581.4 M(Amsterdam.)S
17 FS/F9 SF 0 549 M(Multiple tunnels between the same two gateways)S
11 FS/F4 SF 0 521.4 M(Consider a pair of subnets, each with a security gateway, connected via the Internet:)S
9 FS/F0 SF 0 497 M(         192.168.100.0/24           left subnet)S
0 486.2 M(              |)S
0 475.4 M(         192.168.100.1)S
0 464.6 M(         North Gateway)S
0 453.8 M(         101.101.101.101            left)S
0 443 M(              |)S
0 432.2 M(         101.101.101.1              left next hop)S
0 421.4 M(         [Internet])S
0 410.6 M(         202.202.202.1              right next hop)S
0 399.8 M(              |)S
0 389 M(         202.202.202.202            right)S
0 378.2 M(         South gateway)S
0 367.4 M(         192.168.200.1)S
0 356.6 M(              |)S
0 345.8 M(         192.168.200.0/24           right subnet)S
11 FS/F4 SF 0 319.8 M(A tunnel specification such as:)S
9 FS/F0 SF 0 295.4 M(conn northnet-southnet)S
0 284.6 M(      left=101.101.101.101)S
0 273.8 M(      leftnexthop=101.101.101.1)S
0 263 M(      leftsubnet=192.168.100.0/24)S
0 252.2 M(      leftfirewall=yes)S
0 241.4 M(      right=202.202.202.202)S
0 230.6 M(      rightnexthop=202.202.202.1)S
0 219.8 M(      rightsubnet=192.168.200.0/24)S
0 209 M(      rightfirewall=yes)S
11 FS/F4 SF 0 183 M(will allow machines on the two subnets to talk to each other. You might test this by pinging from polarbear)S
0 169.8 M(\(192.168.100.7\) to penguin \(192.168.200.5\).)S
0 143.4 M(However,)S
/F7 SF ( this does not cover other traffic you might want to secure)S
/F4 SF (. To handle all the possibilities, you)S
0 130.2 M(might also want these connection descriptions:)S
9 FS/F0 SF 0 105.8 M(conn northgate-southnet)S
0 95 M(      left=101.101.101.101)S
0 84.2 M(      leftnexthop=101.101.101.1)S
0 73.4 M(      right=202.202.202.202)S
0 62.6 M(      rightnexthop=202.202.202.1)S
0 51.8 M(      rightsubnet=192.168.200.0/24)S
0 41 M(      rightfirewall=yes)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Multiple tunnels between the same two gateways)S
468.652 0 M(158)S
GR
SP
%%Page: 159 188
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(conn northnet-southgate)S
0 678.2 M(      left=101.101.101.101)S
0 667.4 M(      leftnexthop=101.101.101.1)S
0 656.6 M(      leftsubnet=192.168.100.0/24)S
0 645.8 M(      leftfirewall=yes)S
0 635 M(      right=202.202.202.202)S
0 624.2 M(      rightnexthop=202.202.202.1)S
11 FS/F4 SF 0 598.2 M(Without these, neither gateway can do IPsec to the remote subnet. There is no IPsec tunnel or eroute set up for)S
0 585 M(the traffic.)S
0 558.6 M(In our example, with the non-routable 192.168.* addresses used, packets would simply be discarded. In a)S
0 545.4 M(different configuration, with routable addresses for the remote subnet,)S
/F7 SF ( they would be sent unencrypted)S
/F4 SF ( since)S
0 532.2 M(there would be no IPsec eroute and there would be a normal IP route.)S
0 505.8 M(You might also want:)S
9 FS/F0 SF 0 481.4 M(conn northgate-southgate)S
0 470.6 M(      left=101.101.101.101)S
0 459.8 M(      leftnexthop=101.101.101.1)S
0 449 M(      right=202.202.202.202)S
0 438.2 M(      rightnexthop=202.202.202.1)S
11 FS/F4 SF 0 412.2 M(This is required if you want the two gateways to speak IPsec to each other.)S
0 385.8 M(This requires a lot of duplication of details. Judicious use of)S
/Fa SF ( also=)S
/F4 SF ( and)S
/Fa SF ( include)S
/F4 SF ( can reduce this problem.)S
0 359.4 M(Note that, while FreeS/WAN supports all four tunnel types, not all implementations do. In particular, some)S
0 346.2 M(versions of Windows 2000 and the freely downloadable version of PGP provide only "client" functionality.)S
0 333 M(You cannot use them as gateways with a subnet behind them. To get that functionality, you must upgrade to)S
0 319.8 M(Windows 2000 server or the commercially available PGP products.)S
14 FS/F9 SF 0 290.4 M(One tunnel plus advanced routing)S
11 FS/F4 SF 0 263.4 M(It is also possible to use the new routing features in 2.2 and later kernels to avoid most needs for multple)S
0 250.2 M(tunnels. Here is one mailing list message on the topic:)S
9 FS/F0 SF 0 225.8 M(Subject: Re: linux-ipsec: IPSec packets not entering tunnel?)S
0 215 M(   Date: Mon, 20 Nov 2000)S
0 204.2 M(   From: Justin Guyett <jfg@sonicity.com>)S
0 182.6 M(On Mon, 20 Nov 2000, Claudia Schmeing wrote:)S
0 161 M(> Right                                                         Left)S
0 150.2 M(>                      "home"                "office")S
0 139.4 M(> 10.92.10.0/24 ---- 24.93.85.110 ========= 216.175.164.91 ---- 10.91.10.24/24)S
0 128.6 M(>)S
0 117.8 M(> I've created all four tunnels, and can ping to test each of them,)S
0 107 M(> *except* homegate-officenet.)S
0 85.4 M(I keep wondering why people create all four tunnels.  Why not route)S
0 74.6 M(traffic generated from home to 10.91.10.24/24 out ipsec0 with iproute2?)S
0 63.8 M(And 99% of the time you don't need to access "office" directly, which)S
0 53 M(means you can eliminate all but the subnet<->subnet connection.)S
11 FS/F4 SF 0 27 M(and FreeS/WAN technical lead Henry Spencer's comment:)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(One tunnel plus advanced routing)S
468.652 0 M(159)S
GR
SP
%%Page: 160 189
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(> I keep wondering why people create all four tunnels.  Why not route)S
0 678.2 M(> traffic generated from home to 10.91.10.24/24 out ipsec0 with iproute2?)S
0 656.6 M(This is feasible, given some iproute2 attention to source addresses, but)S
0 645.8 M(it isn't something we've documented yet... \(partly because we're still)S
0 635 M(making some attempt to support 2.0.xx kernels, which can't do this, but)S
0 624.2 M(mostly because we haven't caught up with it yet\).)S
0 602.6 M(> And 99% of the time you don't need to access "office" directly, which)S
0 591.8 M(> means you can eliminate all but the subnet<->subnet connection.)S
0 570.2 M(Correct in principle, but people will keep trying to ping to or from the)S
0 559.4 M(gateways during testing, and sometimes they want to run services on the)S
0 548.6 M(gateway machines too.)S
17 FS/F9 SF 0 516.6 M(An Opportunistic Gateway)S
14 FS/F9 SF 0 486 M(Start from full opportunism)S
11 FS/F4 SF 0 459 M(Full opportunism allows you to initiate and receive opportunistic connections on your machine. The)S
0 445.8 M(remaining instructions in this section assume you have first set up full opportunism on your gateway using)S
0 432.6 M(these instructions. Both sets of instructions require mailing DNS records to your ISP. Collect DNS records for)S
0 419.4 M(both the gateway \(above\) and the subnet nodes \(below\) before contacting your ISP.)S
14 FS/F9 SF 0 390 M(Reverse DNS TXT records for each protected machine)S
11 FS/F4 SF 0 363 M(You need these so that your Opportunistic peers can:)S
36 336.6 M(discover the gateway's address, knowing only the IP address that packets are bound for)S
/Fc SF 28.19 336.6 M(\267 )S
/F4 SF 36 323.4 M(verify that the gateway is authorised to encrypt for that endpoint)S
/Fc SF 28.19 323.4 M(\267 )S
/F4 SF 0 297 M(On the gateway, generate a TXT record with:)S
9 FS/F0 SF 0 272.6 M(    ipsec showhostkey --txt 192.0.2.11)S
11 FS/F4 SF 0 246.6 M(Use your gateway address in place of 192.0.2.11.)S
0 220.2 M(You should see \(keys are trimmed for clarity throughout our example\):)S
9 FS/F0 SF 0 195.8 M(    ; RSA 2048 bits  gateway.example.com   Sat Apr 15 13:53:22 2000)S
0 185 M(    IN TXT  "X-IPsec-Server\(10\)=192.0.2.11" " AQOF8tZ2...+buFuFn/")S
11 FS/F5 SF 0 159 M(This MUST BE the same key as in your gateway's TXT record, or nothing will work.)S
/F4 SF 0 132.6 M(In a text file, make one copy of this TXT record for each subnet node:)S
9 FS/F0 SF 0 108.2 M(    ; RSA 2048 bits  gateway.example.com   Sat Apr 15 13:53:22 2000)S
0 97.4 M(    IN TXT  "X-IPsec-Server\(10\)=192.0.2.11" " AQOF8tZ2...+buFuFn/")S
0 75.8 M(    ; RSA 2048 bits  gateway.example.com   Sat Apr 15 13:53:22 2000)S
0 65 M(    IN TXT  "X-IPsec-Server\(10\)=192.0.2.11" " AQOF8tZ2...+buFuFn/")S
0 43.4 M(    ; RSA 2048 bits  gateway.example.com   Sat Apr 15 13:53:22 2000)S
0 32.6 M(    IN TXT  "X-IPsec-Server\(10\)=192.0.2.11" " AQOF8tZ2...+buFuFn/")S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(An Opportunistic Gateway)S
468.652 0 M(160)S
GR
SP
%%Page: 161 190
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(Above each entry, insert a line like this:)S
9 FS/F0 SF 0 662.6 M(    98.2.0.192.in-addr.arpa. IN PTR arthur.example.com.)S
11 FS/F4 SF 0 636.6 M(It must include:)S
36 610.2 M(The subnet node's address in reverse map format. For example, 192.0.2.120 becomes)S
/Fa SF 36 597 M(120.2.0.192.in-addr.arpa.)S
/F4 SF (. Note the final period.)S
/Fc SF 28.19 610.2 M(\267 )S
/Fa SF 36 583.8 M(IN PTR)S
/Fc SF 28.19 583.8 M(\267 )S
/F4 SF 36 570.6 M(The node's name, ie.)S
/Fa SF ( arthur.example.com.)S
/F4 SF (. Note the final period.)S
/Fc SF 28.19 570.6 M(\267 )S
/F4 SF 0 544.2 M(The result will be a file of TXT records, like this:)S
9 FS/F0 SF 0 519.8 M(    98.2.0.192.in-addr.arpa. IN PTR arthur.example.com.)S
0 509 M(    ; RSA 2048 bits  gateway.example.com   Sat Apr 15 13:53:22 2000)S
0 498.2 M(    IN TXT  "X-IPsec-Server\(10\)=192.0.2.11" " AQOF8tZ2...+buFuFn/")S
0 476.6 M(    99.2.0.192.in-addr.arpa. IN PTR ford.example.com.)S
0 465.8 M(    ; RSA 2048 bits  gateway.example.com   Sat Apr 15 13:53:22 2000)S
0 455 M(    IN TXT  "X-IPsec-Server\(10\)=192.0.2.11" " AQOF8tZ2...+buFuFn/")S
0 433.4 M(    100.2.0.192.in-addr.arpa. IN PTR trillian.example.com.)S
0 422.6 M(    ; RSA 2048 bits  gateway.example.com   Sat Apr 15 13:53:22 2000)S
0 411.8 M(    IN TXT  "X-IPsec-Server\(10\)=192.0.2.11" " AQOF8tZ2...+buFuFn/")S
14 FS/F9 SF 0 382.8 M(Publish your records)S
11 FS/F4 SF 0 355.8 M(Ask your ISP to publish all the reverse DNS records you have collected. There may be a delay of up to 48)S
0 342.6 M(hours as the records propagate.)S
14 FS/F9 SF 0 313.2 M(...and test them)S
11 FS/F4 SF 0 286.2 M(Check a couple of records with commands like this one:)S
9 FS/F0 SF 0 261.8 M(    ipsec verify --host ford.example.com)S
0 251 M(    ipsec verify --host trillian.example.com)S
11 FS/F4 SF 0 225 M(The)S
/Fa SF ( verify)S
/F4 SF ( command checks for TXT records for both the subnet host and its gateway. You should see output)S
0 211.8 M(like:)S
9 FS/F0 SF 0 187.4 M(    ...)S
0 176.6 M(    Looking for TXT in reverse map: 99.2.0.192.in-addr.arpa [OK])S
0 165.8 M(    ...)S
0 155 M(    Looking for TXT in reverse map: 11.2.0.192.in-addr.arpa   [OK])S
0 144.2 M(    ...)S
0 133.4 M(    Looking for TXT in reverse map: 100.2.0.192.in-addr.arpa [OK])S
0 122.6 M(    ...)S
0 111.8 M(    Looking for TXT in reverse map: 11.2.0.192.in-addr.arpa   [OK])S
0 101 M(    ...)S
14 FS/F9 SF 0 72 M(No Configuration Needed)S
11 FS/F4 SF 0 45 M(FreeS/WAN 2.x ships with a built-in, automatically enabled OE connection)S
/Fa SF ( conn packetdefault)S
/F4 SF ( which)S
0 31.8 M(applies OE, if possible, to all outbound traffic routed through the FreeS/WAN box. The ipsec.conf\(5\) manual)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Publish your records)S
468.652 0 M(161)S
GR
SP
%%Page: 162 191
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(describes this connection in detail. While the effect is much the same as)S
/Fa SF ( private-or-clear)S
/F4 SF (, the)S
0 673.8 M(implementation is different: notably, it does not use policy groups.)S
0 647.4 M(You can create more complex OE configurations for traffic forwarded through a FreeS/WAN box, as)S
0 634.2 M(explained in our policy groups document, or disable OE using these instructions.)S
17 FS/F9 SF 0 601.8 M(Extruded Subnets)S
11 FS/F4 SF 0 574.2 M(What we call extruded subnets are a special case of VPNs.)S
0 547.8 M(If your buddy has some unused IP addresses, in his subnet far off at the other side of the Internet, he can loan)S
0 534.6 M(them to you... provided that the connection between you and him is fast enough to carry all the traffic between)S
0 521.4 M(your machines and the rest of the Internet. In effect, he "extrudes" a part of his address space over the network)S
0 508.2 M(to you, with your Internet traffic appearing to originate from behind his Internet gateway.)S
0 481.8 M(As far as the Internet is concerned, your new extruded net is behind your buddy's gateway. You route all your)S
0 468.6 M(packets for the Internet at large out his gateway, and receive return packets the same way. You route your)S
0 455.4 M(local packets locally.)S
0 429 M(Suppose your friend has a.b.c.0/24 and wants to give you a.b.c.240/28. The initial situation is:)S
9 FS/F0 SF 0 404.6 M(    subnet           gateway          Internet)S
0 393.8 M(  a.b.c.0/24    a.b.c.1    p.q.r.s)S
11 FS/F4 SF 0 367.8 M(where anything from the Internet destined for any machine in a.b.c.0/24 is routed via p.q.r.s and that gateway)S
0 354.6 M(knows what to do from there.)S
0 328.2 M(Of course it is quite normal for various smaller subnets to exist behind your friend's gateway. For example,)S
0 315 M(your friend's company might have a.b.c.16/28=development, a.b.c.32/28=marketing and so on. The Internet)S
0 301.8 M(neither knows not cares about this; it just delivers packets to the p.q.r.s and lets the gateway do whatever)S
0 288.6 M(needs to be done from there.)S
0 262.2 M(What we want to do is take a subnet, perhaps a.b.c.240/28, out of your friend's physical location)S
/F6 SF ( while still)S
0 249 M(having your friend's gateway route to it)S
/F4 SF (. As far as the Internet is concerned, you remain behind that gateway.)S
9 FS/F0 SF 0 224.6 M(    subnet           gateway          Internet       your gate  extruded)S
0 203 M(  a.b.c.0/24   a.b.c.1     p.q.r.s              d.e.f.g         a.b.c.240/28                )S
0 181.4 M(                           ========== tunnel ==========)S
11 FS/F4 SF 0 155.4 M(The extruded addresses have to be a complete subnet.)S
0 129 M(In our example, the friend's security gateway is also his Internet gateway, but this is not necessary. As long as)S
0 115.8 M(all traffic from the Internet to his addresses passes through the Internet gate, the security gate could be a)S
0 102.6 M(machine behind that. The IG would need to route all traffic for the extruded subnet to the SG, and the SG)S
0 89.4 M(could handle the rest.)S
0 63 M(First, configure your subnet using the extruded addresses. Your security gateway's interface to your subnet)S
0 49.8 M(needs to have an extruded address \(possibly using a Linux virtual interface, if it also has to have a different)S
0 36.6 M(address\). Your gateway needs to have a route to the extruded subnet, pointing to that interface. The other)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Extruded Subnets)S
468.652 0 M(162)S
GR
SP
%%Page: 163 192
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(machines at your site need to have addresses in that subnet, and default routes pointing to your gateway.)S
0 660.6 M(If any of your friend's machines need to talk to the extruded subnet,)S
/F6 SF ( they)S
/F4 SF ( need to have a route for the extruded)S
0 647.4 M(subnet, pointing at his gateway.)S
0 621 M(Then set up an IPsec subnet-to-subnet tunnel between your gateway and his, with your subnet specified as)S
0 607.8 M(the extruded subnet, and his subnet specified as "0.0.0.0/0".)S
0 581.4 M(The tunnel description should be:)S
9 FS/F0 SF 0 557 M(conn extruded)S
0 546.2 M(        left=p.q.r.s)S
0 535.4 M(        leftsubnet=0.0.0.0/0)S
0 524.6 M(        right=d.e.f.g)S
0 513.8 M(        rightsubnet=a.b.c.0/28)S
11 FS/F4 SF 0 487.8 M(If either side was doing firewalling for the extruded subnet before the IPsec connection is set up, you'll need)S
0 474.6 M(to poke holes in your firewall to allow packets through.)S
0 448.2 M(And it all just works. Your SG routes traffic for 0.0.0.0/0 -- that is, the whole Internet -- through the tunnel)S
0 435 M(to his SG, which then sends it onward as if it came from his subnet. When traffic for the extruded subnet)S
0 421.8 M(arrives at his SG, it gets sent through the tunnel to your SG, which passes it to the right machine.)S
0 395.4 M(Remember that when ipsec_manual or ipsec_auto takes a connection down, it)S
/F6 SF ( does not undo the route)S
/F4 SF ( it made)S
0 382.2 M(for that connection. This lets you take a connection down and bring up a new one, or a modified version of the)S
0 369 M(old one, without having to rebuild the route it uses and without any risk of packets which should use IPsec)S
0 355.8 M(accidentally going out in the clear. Because the route always points into KLIPS, the packets will always go)S
0 342.6 M(there. Because KLIPS temporarily has no idea what to do with them \(no eroute for them\), they will be)S
0 329.4 M(discarded.)S
0 303 M(If you)S
/F6 SF ( do)S
/F4 SF ( want to take the route down, this is what the "unroute" operation in manual and auto is for. Just do)S
0 289.8 M(an unroute after doing the down.)S
0 263.4 M(Note that the route for a connection may have replaced an existing non-IPsec route. Nothing in Linux)S
0 250.2 M(FreeS/WAN will put that pre-IPsec route back. If you need it back, you have to create it with the route)S
0 237 M(command.)S
17 FS/F9 SF 0 204.6 M(Road Warrior with virtual IP address)S
11 FS/F4 SF 0 177 M(Please note that Super FreeS/WAN now features DHCP-over-IPsec, which is an alternate procedure for)S
0 163.8 M(Virtual IP address assignment.)S
0 137.4 M(Here is a mailing list message about another way to configure for road warrior support:)S
9 FS/F0 SF 0 113 M(Subject: Re: linux-ipsec: understanding the vpn)S
0 102.2 M(   Date: Thu, 28 Oct 1999 10:43:22 -0400)S
0 91.4 M(   From: Irving Reid <irving@nevex.com>)S
0 69.8 M(>  local-------linux------internet------mobile)S
0 59 M(>  LAN        box                         user)S
0 48.2 M(>  ...)S
0 26.6 M(>  now when the mobile user connects to the linux box)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Road Warrior with virtual IP address)S
468.652 0 M(163)S
GR
SP
%%Page: 164 193
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(>  it is given a virtual IP address, i have configured it to)S
0 678.2 M(>  be in the 10.x.x.x range. mobile user and linux box )S
0 667.4 M(>  have a tunnel between them with these IP addresses.)S
0 645.8 M(>   Uptil this all is fine.)S
0 624.2 M(If it is possible to configure your mobile client software *not* to)S
0 613.4 M(use a virtual IP address, that will make your life easier. It is easier)S
0 602.6 M(to configure FreeS/WAN to use the actual address the mobile user gets)S
0 591.8 M(from its ISP.)S
0 570.2 M(Unfortunately, some Windows clients don't let you choose.)S
0 548.6 M(>  what i would like to know is that how does the mobile)S
0 537.8 M(>  user communicate with other computers on the local)S
0 527 M(>  LAN , of course with the vpn ?)S
0 505.4 M(>   what IP address should the local LAN )S
0 494.6 M(>  computers have ? I guess their default gateway )S
0 483.8 M(>  should be the linux box ? and does the linux box need)S
0 473 M(>  to be a 2 NIC card box or one is fine.)S
0 451.4 M(As someone else stated, yes, the Linux box would usually be the default)S
0 440.6 M(IP gateway for the local lan.)S
0 419 M(However...)S
0 397.4 M(If you mobile user has software that *must* use a virtual IP address,)S
0 386.6 M(the whole picture changes. Nobody has put much effort into getting)S
0 375.8 M(FreeS/WAN to play well in this environment, but here's a sketch of one)S
0 365 M(approach:)S
0 343.4 M(Local Lan 1.0.0.0/24)S
0 332.6 M(    |)S
0 321.8 M(    +- Linux FreeS/WAN 1.0.0.2)S
0 311 M(    |)S
0 300.2 M(    | 1.0.0.1)S
0 289.4 M( Router)S
0 278.6 M(    | 2.0.0.1)S
0 267.8 M(    |)S
0 257 M(Internet)S
0 246.2 M(    |)S
0 235.4 M(    | 3.0.0.1)S
0 224.6 M(Mobile User)S
0 213.8 M(      Virtual Address: 1.0.0.3)S
0 192.2 M(Note that the Local Lan network \(1.0.0.x\) can be registered, routable)S
0 181.4 M(addresses.)S
0 159.8 M(Now, the Mobile User sets up an IPSec security association with the)S
0 149 M(Linux box \(1.0.0.2\); it should ESP encapsulate all traffic to the)S
0 138.2 M(network 1.0.0.x **EXCEPT** UDP port 500. 500/udp is required for the key)S
0 127.4 M(negotiation, which needs to work outside of the IPSec tunnel.)S
0 105.8 M(On the Linux side, there's a bunch of stuff you need to do by hand \(for)S
0 95 M(now\). FreeS/WAN should correctly handle setting up the IPSec SA and)S
0 84.2 M(routes, but I haven't tested it so this may not work...)S
0 62.6 M(The FreeS/WAN conn should look like:)S
0 41 M(conn mobile)S
0 30.2 M(        right=1.0.0.2)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Road Warrior with virtual IP address)S
468.652 0 M(164)S
GR
SP
%%Page: 165 194
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(        rightsubnet=1.0.0.0/24)S
0 678.2 M(        rightnexthop=1.0.0.1)S
0 667.4 M(        left=0.0.0.0  # The infamous "road warrior")S
0 656.6 M(        leftsubnet=1.0.0.3/32)S
0 635 M(Note that the left subnet contains *only* the remote host's virtual)S
0 624.2 M(address.)S
0 602.6 M(Hopefully the routing table on the FreeS/WAN box ends up looking like)S
0 591.8 M(this:)S
0 570.2 M(% netstat -rn)S
0 559.4 M(Kernel IP routing table)S
0 548.6 M(Destination     Gateway      Genmask         Flags   MSS Window  irtt Iface)S
0 537.8 M(1.0.0.0         0.0.0.0      255.255.255.0   U      1500 0          0 eth0)S
0 527 M(127.0.0.0       0.0.0.0      255.0.0.0       U      3584 0          0 lo)S
0 516.2 M(0.0.0.0         1.0.0.1      0.0.0.0         UG     1500 0          0 eth0)S
0 505.4 M(1.0.0.3         1.0.0.1      255.255.255.255 UG     1433 0          0 ipsec0)S
0 483.8 M(So, if anybody sends a packet for 1.0.0.3 to the Linux box, it should)S
0 473 M(get bundled up and sent through the tunnel. To get the packets for)S
0 462.2 M(1.0.0.3 to the Linux box in the first place, you need to use "proxy)S
0 451.4 M(ARP".)S
0 429.8 M(How this works is: when a host or router on the local Ethernet segment)S
0 419 M(wants to send a packet to 1.0.0.3, it sends out an Ethernet level)S
0 408.2 M(broadcast "ARP request". If 1.0.0.3 was on the local LAN, it would)S
0 397.4 M(reply, saying "send IP packets for 1.0.0.3 to my Ethernet address".)S
0 375.8 M(Instead, you need to set up the Linux box so that _it_ answers ARP)S
0 365 M(requests for 1.0.0.3, even though that isn't its IP address. That)S
0 354.2 M(convinces everyone else on the lan to send 1.0.0.3 packets to the Linux)S
0 343.4 M(box, where the usual FreeS/WAN processing and routing take over.)S
0 321.8 M(% arp -i eth0 -s 1.0.0.3 -D eth0 pub)S
0 300.2 M(This says, if you see an ARP request on interface eth0 asking for)S
0 289.4 M(1.0.0.3, respond with the Ethernet address of interface eth0.)S
0 267.8 M(Now, as I said at the very beginning, if it is *at all* possible to)S
0 257 M(configure your client *not* to use the virtual IP address, you can avoid)S
0 246.2 M(this whole mess.)S
17 FS/F9 SF 0 214.2 M(Dynamic Network Interfaces)S
11 FS/F4 SF 0 186.6 M(Sometimes you have to cope with a situation where the network interface\(s\) aren't all there at boot. The)S
0 173.4 M(common example is notebooks with PCMCIA.)S
14 FS/F9 SF 0 144.001 M(Basics)S
11 FS/F4 SF 0 117.001 M(The key issue here is that the)S
/Fa SF ( config setup)S
/F4 SF ( section of the)S
/Fa SF ( /etc/ipsec.conf)S
/F4 SF ( configuration file lists the)S
0 103.801 M(connection between ipsecN and hardware interfaces, in the)S
/Fa SF ( interfaces=)S
/F4 SF ( variable. At any time when)S
/Fa SF ( ipsec)S
0 90.601 M(setup start)S
/F4 SF ( or)S
/Fa SF ( ipsec setup restart)S
/F4 SF ( is run this variable)S
/F7 SF ( must)S
/F4 SF ( correspond to the current real situation. More)S
0 77.401 M(precisely, it)S
/F7 SF ( must not)S
/F4 SF ( mention any hardware interfaces which don't currently exist. The difficulty is that an)S
/Fa SF 0 64.201 M(ipsec setup start)S
/F4 SF ( command is normally run at boot time so interfaces that are not up then are mis-handled.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Dynamic Network Interfaces)S
468.652 0 M(165)S
GR
SP
%%Page: 166 195
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(Boot Time)S
11 FS/F4 SF 0 657 M(Normally, an)S
/Fa SF ( ipsec setup start)S
/F4 SF ( is run at boot time. However, if the hardware situation at boot time is)S
0 643.8 M(uncertain, one of two things must be done.)S
36 617.4 M(One possibility is simply not to have IPsec brought up at boot time. To do this:)S
9 FS/F0 SF 36 593 M(        chkconfig --level 2345 ipsec off)S
11 FS/F4 SF 36 567 M(That's for modern Red Hats or other Linuxes with chkconfig. Systems which lack this will require)S
36 553.8 M(fiddling with symlinks in /etc/rc.d/rc?.d or the equivalent.)S
/Fc SF 28.19 617.4 M(\267 )S
/F4 SF 36 540.6 M(Another possibility is to bring IPsec up with no interfaces, which is less aesthetically satisfying but)S
36 527.4 M(simpler. Just put)S
9 FS/F0 SF 36 503 M(        interfaces=)S
11 FS/F4 SF 36 477 M(in the configuration file. KLIPS and Pluto will be started, but won't do anything.)S
/Fc SF 28.19 540.6 M(\267 )S
14 FS/F9 SF 0 447.6 M(Change Time)S
11 FS/F4 SF 0 420.6 M(When the hardware *is* in place, IPsec has to be made aware of it. Someday there may be a nice way to do)S
0 407.4 M(this.)S
0 381 M(Right now, the way to do it is to fix the)S
/Fa SF ( /etc/ipsec.conf)S
/F4 SF ( file appropriately, so)S
/Fa SF ( interfaces)S
/F4 SF ( reflects the new)S
0 367.8 M(situation, and then restart the IPsec subsystem. This does break any existing IPsec connections.)S
0 341.4 M(If IPsec wasn't brought up at boot time, do)S
9 FS/F0 SF 0 317 M(        ipsec setup start)S
11 FS/F4 SF 0 291 M(while if it was, do)S
9 FS/F0 SF 0 266.6 M(        ipsec setup restart)S
11 FS/F4 SF 0 240.6 M(which won't be as quick.)S
0 214.2 M(If some of the hardware is to be taken out, before doing that, amend the configuration file so interfaces no)S
0 201 M(longer includes it, and do)S
9 FS/F0 SF 0 176.6 M(        ipsec setup restart)S
11 FS/F4 SF 0 150.6 M(Again, this breaks any existing connections.)S
17 FS/F9 SF 0 118.2 M(Unencrypted tunnels)S
11 FS/F4 SF 0 90.6 M(Sometimes you might want to create a tunnel without encryption. Often this is a bad idea, even if you have)S
0 77.4 M(some data which need not be private. See this discussion.)S
0 51 M(The IPsec protocols provide two ways to do build such tunnels:)S
/F6 SF 0 24.6 M(using ESP with null encryption)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Boot Time)S
468.652 0 M(166)S
GR
SP
%%Page: 167 196
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(not supported by FreeS/WAN)S
/F6 SF 0 673.8 M(using AH without ESP)S
/F4 SF 36 660.6 M(supported for manually keyed connections)S
36 647.4 M(possible with explicit commands via ipsec_whack\(8\) \(see this list message\))S
36 634.2 M(not supported in the ipsec_auto\(8\) scripts.)S
0 607.8 M(One situation in which this comes up is when otherwise some data would be encrypted twice. Alice wants a)S
0 594.6 M(secure tunnel from her machine to Bob's. Since she's behind one security gateway and he's behind another,)S
0 581.4 M(part of the tunnel that they build passes through the tunnel that their site admins have built between the)S
0 568.2 M(gateways. All of Alice and Bob's messages are encrypted twice.)S
0 541.8 M(There are several ways to handle this.)S
36 515.4 M(Just accept the overhead of double encryption. The site admins might choose this if any of the)S
36 502.2 M(following apply:)S
72 489 M(policy says encrypt everything \(usually, it should\))S
/Fc SF 60.967 489 M(\250 )S
/F4 SF 72 475.8 M(they don't entirely trust Alice and Bob \(usually, if they don't have to, they shouldn't\))S
/Fc SF 60.967 475.8 M(\250 )S
/F4 SF 72 462.6 M(if they don't feel the saved cycles are worth the time they'd need to build a non-encrypted)S
72 449.4 M(tunnel for Alice and Bob's packets \(often, they aren't\))S
/Fc SF 60.967 462.6 M(\250 )S
28.19 515.4 M(\267 )S
/F4 SF 36 436.2 M(Use a plain IP-in-IP tunnel. These are not well documented. A good starting point is in the Linux)S
36 423 M(kernel source tree, in /usr/src/linux/drivers/net/README.tunnel.)S
/Fc SF 28.19 436.2 M(\267 )S
/F4 SF 36 409.8 M(Use a manually-keyed AH-only tunnel.)S
/Fc SF 28.19 409.8 M(\267 )S
/F4 SF 0 383.4 M(Note that if Alice and Bob want end-to-end security, they must build a tunnel end-to-end between their)S
0 370.2 M(machines or use some other end-to-end tool such as PGP or SSL that suits their data. The only question is)S
0 357 M(whether the admins build some special unencrypted tunnel for those already-encrypted packets.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Boot Time)S
468.652 0 M(167)S
GR
SP
%%Page: 168 197
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(Installing FreeS/WAN)S
11 FS/F4 SF 0 649.8 M(This document will teach you how to install Linux FreeS/WAN. If your distribution comes with Linux)S
0 636.6 M(FreeS/WAN, we offer tips to get you started.)S
17 FS/F9 SF 0 604.2 M(Requirements)S
11 FS/F4 SF 0 576.6 M(To install FreeS/WAN you must:)S
36 550.2 M(be running Linux with the 2.4 or 2.2 kernel series. See this kernel compatibility table.)S
36 537 M(We also have experimental support for 2.6 kernels. Here are two basic approaches:)S
72 523.8 M(install FreeS/WAN, including its KLIPS kernel code. This will remove the native IPsec stack)S
72 510.6 M(and replace it with KLIPS.)S
/Fc SF 60.967 523.8 M(\250 )S
/F4 SF 72 497.4 M(install the FreeS/WAN userland tools \(keying daemon and supporting scripts\) for use with 2.6)S
72 484.2 M(kernel native IPsec,)S
/Fc SF 60.967 497.4 M(\250 )S
/F4 SF 36 471 M(See also these known issues with 2.6.)S
/Fc SF 28.19 550.2 M(\267 )S
/F4 SF 36 457.8 M(have root access to your Linux box)S
/Fc SF 28.19 457.8 M(\267 )S
/F4 SF 36 444.6 M(choose the version of FreeS/WAN you wish to install based on mailing list reports)S
/Fc SF 28.19 444.6 M(\267 )S
17 FS/F9 SF 0 412.2 M(Choose your install method)S
11 FS/F4 SF 0 384.6 M(There are three basic ways to get FreeS/WAN onto your system:)S
36 358.2 M(activating and testing a FreeS/WAN that shipped with your Linux distribution)S
/Fc SF 28.19 358.2 M(\267 )S
/F4 SF 36 345 M(RPM install)S
/Fc SF 28.19 345 M(\267 )S
/F4 SF 36 331.8 M(Install from source)S
/Fc SF 28.19 331.8 M(\267 )S
17 FS/F9 SF 0 286.2 M(FreeS/WAN ships with some Linuxes)S
11 FS/F4 SF 0 258.6 M(FreeS/WAN comes with these distributions.)S
0 232.2 M(If you're running one of these, include FreeS/WAN in the choices you make during installation, or add it later)S
0 219 M(using the distribution's tools.)S
14 FS/F9 SF 0 189.6 M(FreeS/WAN may be altered...)S
11 FS/F4 SF 0 162.6 M(Your distribution may have integrated extra features, such as Andreas Steffen's X.509 patch, into)S
0 149.4 M(FreeS/WAN. It may also use custom startup script locations or directory names.)S
14 FS/F9 SF 0 120 M(You might need to create an authentication keypair)S
11 FS/F4 SF 0 93 M(If your FreeS/WAN came with your distribution, you may wish to generate a fresh RSA key pair. FreeS/WAN)S
0 79.8 M(will use these keys for authentication.)S
0 53.4 M(To do this, become root, and type:)S
9 FS/F0 SF 0 29 M(    ipsec newhostkey --output /etc/ipsec.secrets --hostname xy.example.com)S
11 FS/F8 SF 0 0 M(Installing FreeS/WAN)S
468.652 0 M(168)S
GR
SP
%%Page: 169 198
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(    chmod 600 /etc/ipsec.secrets)S
11 FS/F4 SF 0 663 M(where you replace xy.example.com with your machine's fully-qualified domain name. Generate some)S
0 649.8 M(randomness, for example by wiggling your mouse, to speed the process.)S
0 623.4 M(The resulting ipsec.secrets looks like:)S
9 FS/F0 SF 0 599 M(: RSA   {)S
0 588.2 M(        # RSA 2192 bits   xy.example.com   Sun Jun 8 13:42:19 2003)S
0 577.4 M(        # for signatures only, UNSAFE FOR ENCRYPTION)S
0 566.6 M(        #pubkey=0sAQOFppfeE3cC7wqJi...)S
0 555.8 M(        Modulus: 0x85a697de137702ef0...)S
0 545 M(        # everything after this point is secret)S
0 534.2 M(        PrivateExponent: 0x16466ea5033e807...)S
0 523.4 M(        Prime1: 0xdfb5003c8947b7cc88759065...)S
0 512.6 M(        Prime2: 0x98f199b9149fde11ec956c814...)S
0 501.8 M(        Exponent1: 0x9523557db0da7a885af90aee...)S
0 491 M(        Exponent2: 0x65f6667b63153eb69db8f300dbb...)S
0 480.2 M(        Coefficient: 0x90ad00415d3ca17bebff123413fc518...)S
0 469.4 M(        })S
0 458.6 M(# do not change the indenting of that "}")S
11 FS/F4 SF 0 432.6 M(In the actual file, the strings are much longer.)S
14 FS/F9 SF 0 403.2 M(Start and test FreeS/WAN)S
11 FS/F4 SF 0 376.2 M(You can now start FreeS/WAN and test whether it's been successfully installed..)S
17 FS/F9 SF 0 330.6 M(RPM install)S
11 FS/F4 SF 0 303 M(These instructions are for a recent Red Hat with a stock Red Hat kernel. We know that Mandrake and SUSE)S
0 289.8 M(also produce FreeS/WAN RPMs. If you're running either, install using your distribution's tools.)S
14 FS/F9 SF 0 260.4 M(Download RPMs)S
11 FS/F4 SF 0 233.4 M(Decide which functionality you need:)S
36 207 M(standard FreeS/WAN RPMs. Use these shortcuts:)S
72 193.8 M(\(for 2.6 kernels: userland only\))S
72 180.6 M(ncftpget ftp://ftp.xs4all.nl/pub/crypto/freeswan/binaries/RedHat-RPMs/\\*userland*)S
/Fc SF 60.967 193.8 M(\250 )S
/F4 SF 72 167.4 M(\(for 2.4 kernels\))S
72 154.2 M(ncftpget ftp://ftp.xs4all.nl/pub/crypto/freeswan/binaries/RedHat-RPMs/`uname -r | tr -d)S
72 141 M('a-wy-z'`/\\*)S
/Fc SF 60.967 167.4 M(\250 )S
/F4 SF 72 127.8 M(or view all the offerings at our FTP site.)S
/Fc SF 60.967 127.8 M(\250 )S
28.19 207 M(\267 )S
/F4 SF 36 114.6 M(unofficial Super FreeS/WAN RPMs, which include Andreas Steffen's X.509 patch and more. Super)S
36 101.4 M(FreeS/WAN RPMs do not currently include Network Address Translation \(NAT\) traversal, but Super)S
36 88.2 M(FreeS/WAN source does.)S
/Fc SF 28.19 114.6 M(\267 )S
/F4 SF 0 48.6 M(For 2.6 kernels, get the latest FreeS/WAN userland RPM, for example:)S
9 FS/F0 SF 0 24.2 M(    freeswan-userland-2.03.9-0.i386.rpm)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Start and test FreeS/WAN)S
468.652 0 M(169)S
GR
SP
%%Page: 170 199
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(Note: FreeS/WAN's support for 2.6 kernel IPsec is preliminary. Please see 2.6.known-issues, and the latest)S
0 673.8 M(mailing list reports.)S
0 647.4 M(Change to your new FreeS/WAN directory, and make and install the)S
0 621 M(For 2.4 kernels, get both kernel and userland RPMs. Check your kernel version with)S
9 FS/F0 SF 0 596.6 M(    uname -r)S
11 FS/F4 SF 0 570.6 M(Get a kernel module which matches that version. For example:)S
9 FS/F0 SF 0 546.2 M(    freeswan-module-2.03_2.4.20_20.9-0.i386.rpm)S
11 FS/F4 SF 0 520.2 M(Note: These modules)S
/F5 SF ( will only work on the Red Hat kernel they were built for)S
/F4 SF (, since they are very)S
0 507 M(sensitive to small changes in the kernel.)S
0 480.6 M(Get FreeS/WAN utilities to match. For example:)S
9 FS/F0 SF 0 456.2 M(    freeswan-userland-2.03_2.4.20_20.9-0.i386.rpm)S
14 FS/F9 SF 0 427.2 M(For freeswan.org RPMs: check signatures)S
11 FS/F4 SF 0 400.2 M(While you're at our ftp site, grab the RPM signing key)S
9 FS/F0 SF 0 375.8 M(    freeswan-rpmsign.asc)S
11 FS/F4 SF 0 349.8 M(If you're running RedHat 8.x or later, import this key into the RPM database:)S
9 FS/F0 SF 0 325.4 M(    rpm --import freeswan-rpmsign.asc)S
11 FS/F4 SF 0 299.4 M(For RedHat 7.x systems, you'll need to add it to your PGP keyring:)S
9 FS/F0 SF 0 275 M(    pgp -ka freeswan-rpmsign.asc)S
11 FS/F4 SF 0 249 M(Check the digital signatures on both RPMs using:)S
9 FS/F0 SF 0 224.6 M(    rpm --checksig freeswan*.rpm )S
11 FS/F4 SF 0 198.6 M(You should see that these signatures are good:)S
9 FS/F0 SF 0 174.2 M(    freeswan-module-2.03_2.4.20_20.9-0.i386.rpm: pgp md5 OK)S
0 163.4 M(    freeswan-userland-2.03_2.4.20_20.9-0.i386.rpm: pgp md5 OK)S
14 FS/F9 SF 0 134.4 M(Install the RPMs)S
11 FS/F4 SF 0 107.4 M(Become root:)S
9 FS/F0 SF 0 83 M(    su)S
11 FS/F4 SF 0 57 M(For a first time install, use:)S
9 FS/F0 SF 0 32.6 M(    rpm -ivh freeswan*.rpm)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(For freeswan.org RPMs: check signatures)S
468.652 0 M(170)S
GR
SP
%%Page: 171 200
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(To upgrade existing RPMs \(and keep all .conf files in place\), use:)S
9 FS/F0 SF 0 662.6 M(    rpm -Uvh freeswan*.rpm)S
11 FS/F4 SF 0 636.6 M(If you're upgrading from FreeS/WAN 1.x to 2.x RPMs, and encounter problems, see this note.)S
14 FS/F9 SF 0 607.2 M(Start and Test FreeS/WAN)S
11 FS/F4 SF 0 580.2 M(Now, start FreeS/WAN and test your install.)S
17 FS/F9 SF 0 534.6 M(Install from Source)S
14 FS/F9 SF 0 504 M(Decide what functionality you need)S
11 FS/F4 SF 0 477 M(Your choices are:)S
36 450.6 M(standard FreeS/WAN,)S
/Fc SF 28.19 450.6 M(\267 )S
/F4 SF 36 437.4 M(standard FreeS/WAN plus any of these user-supported patches, or)S
/Fc SF 28.19 437.4 M(\267 )S
/F4 SF 36 424.2 M(Super FreeS/WAN, an unofficial FreeS/WAN pre-patched with many of the above. Provides)S
36 411 M(additional algorithms, X.509, SA deletion, dead peer detection, and Network Address Translation)S
36 397.8 M(\(NAT\) traversal.)S
/Fc SF 28.19 424.2 M(\267 )S
14 FS/F9 SF 0 368.4 M(Download FreeS/WAN)S
11 FS/F4 SF 0 341.4 M(Download the source tarball you've chosen, along with any patches.)S
14 FS/F9 SF 0 312 M(For freeswan.org source: check its signature)S
11 FS/F4 SF 0 285 M(While you're at our ftp site, get our source signing key)S
9 FS/F0 SF 0 260.6 M(    freeswan-sigkey.asc)S
11 FS/F4 SF 0 234.6 M(Add it to your PGP keyring:)S
9 FS/F0 SF 0 210.2 M(    pgp -ka freeswan-sigkey.asc)S
11 FS/F4 SF 0 184.2 M(Check the signature using:)S
9 FS/F0 SF 0 159.8 M(    pgp freeswan-2.03.tar.gz.sig freeswan-2.03.tar.gz)S
11 FS/F4 SF 0 133.8 M(You should see something like:)S
9 FS/F0 SF 0 109.4 M(    Good signature from user "Linux FreeS/WAN Software Team \(build@freeswan.org\)".)S
0 98.6 M(    Signature made 2002/06/26 21:04 GMT using 2047-bit key, key ID 46EAFCE1)S
14 FS/F9 SF 0 69.6 M(Untar, unzip)S
11 FS/F4 SF 0 42.6 M(As root, unpack your FreeS/WAN source into)S
/Fa SF ( /usr/src)S
/F4 SF (.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Start and Test FreeS/WAN)S
468.652 0 M(171)S
GR
SP
%%Page: 172 201
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(    su)S
0 678.2 M(    mv freeswan-2.03.tar.gz /usr/src)S
0 667.4 M(    cd /usr/src)S
0 656.6 M(    tar -xzf freeswan-2.03.tar.gz)S
14 FS/F9 SF 0 627.6 M(Patch if desired)S
11 FS/F4 SF 0 600.6 M(Now's the time to add any patches. The contributor may have special instructions, or you may simply use the)S
0 587.4 M(patch command.)S
14 FS/F9 SF 0 558 M(... and Make)S
11 FS/F4 SF 0 531 M(Choose one of the methods below.)S
/F9 SF 0 504.6 M(Userland-only Install for 2.6 kernels)S
/F4 SF 0 465 M(Note: FreeS/WAN's support for 2.6 kernel IPsec is preliminary. Please see 2.6.known-issues, and the latest)S
0 451.8 M(mailing list reports.)S
0 425.4 M(Change to your new FreeS/WAN directory, and make and install the FreeS/WAN userland tools.)S
9 FS/F0 SF 0 401 M(    cd /usr/src/freeswan-2.03)S
0 390.2 M(    make programs)S
0 379.4 M(    make install)S
11 FS/F4 SF 0 353.4 M(Now, start FreeS/WAN and test your install.)S
/F9 SF 0 327 M(KLIPS install for 2.2, 2.4, or 2.6 kernels)S
/F4 SF 0 287.4 M(To make a modular version of KLIPS, along with other FreeS/WAN programs you'll need, use the command)S
0 274.2 M(sequence below. This will change to your new FreeS/WAN directory, make the FreeS/WAN module \(and)S
0 261 M(other stuff\), and install it all.)S
9 FS/F0 SF 0 236.6 M(    cd /usr/src/freeswan-2.03)S
0 225.8 M(    make oldmod)S
0 215 M(    make minstall)S
11 FS/F4 SF 0 189 M(Start FreeS/WAN and test your install.)S
0 162.6 M(To link KLIPS statically into your kernel \(using your old kernel settings\), and install other FreeS/WAN)S
0 149.4 M(components, do:)S
9 FS/F0 SF 0 125 M(    cd /usr/src/freeswan-2.03)S
0 114.2 M(    make oldmod)S
0 103.4 M(    make minstall)S
11 FS/F4 SF 0 77.4 M(Reboot your system and test your install.)S
0 51 M(For other ways to compile KLIPS, see our Makefile.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Patch if desired)S
468.652 0 M(172)S
GR
SP
%%Page: 173 202
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
17 FS/F9 SF 0 681 M(Start FreeS/WAN and test your install)S
11 FS/F4 SF 0 653.4 M(Bring FreeS/WAN up with:)S
9 FS/F0 SF 0 629 M(    service ipsec start)S
11 FS/F4 SF 0 603 M(This is not necessary if you've rebooted.)S
17 FS/F9 SF 0 557.4 M(Test your install)S
11 FS/F4 SF 0 529.8 M(To check that you have a successful install, run:)S
9 FS/F0 SF 0 505.4 M(    ipsec verify)S
11 FS/F4 SF 0 479.4 M(You should see at least:)S
9 FS/F0 SF 0 455 M(    Checking your system to see if IPsec got installed and started correctly)S
0 444.2 M(    Version check and ipsec on-path                             [OK])S
0 433.4 M(    Checking for KLIPS support in kernel                        [OK])S
0 422.6 M(    Checking for RSA private key \(/etc/ipsec.secrets\)           [OK])S
0 411.8 M(    Checking that pluto is running                              [OK])S
11 FS/F4 SF 0 385.8 M(If any of these first four checks fails, see our troubleshooting guide.)S
17 FS/F9 SF 0 353.4 M(Making FreeS/WAN play well with others)S
11 FS/F4 SF 0 325.8 M(There are at least a couple of things on your system that might interfere with FreeS/WAN, and now's a good)S
0 312.6 M(time to check these:)S
36 286.2 M(Firewalling. You need to allow UDP 500 through your firewall, plus ESP \(protocol 50\) and AH)S
36 273 M(\(protocol 51\). For more information, see our updated firewalls document \(coming soon\).)S
/Fc SF 28.19 286.2 M(\267 )S
/F4 SF 36 259.8 M(Network address translation. Do not NAT the packets you will be tunneling.)S
/Fc SF 28.19 259.8 M(\267 )S
17 FS/F9 SF 0 227.4 M(Configure for your needs)S
11 FS/F4 SF 0 199.8 M(You'll need to configure FreeS/WAN for your local site. Have a look at our opportunism quickstart guide to)S
0 186.6 M(see if that easy method is right for your needs. Or, see how to configure a network-to-network or Road)S
0 173.4 M(Warrior style VPN.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Start FreeS/WAN and test your install)S
468.652 0 M(173)S
GR
SP
%%Page: 174 203
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(How to configure FreeS/WAN)S
11 FS/F4 SF 0 649.8 M(This page will teach you how to configure a simple network-to-network link or a Road Warrior connection)S
0 636.6 M(between two Linux FreeS/WAN boxes.)S
0 610.2 M(See also these related documents:)S
36 583.8 M(our quickstart guide to opportunistic encryption)S
/Fc SF 28.19 583.8 M(\267 )S
/F4 SF 36 570.6 M(our guide to configuration with policy groups)S
/Fc SF 28.19 570.6 M(\267 )S
/F4 SF 36 557.4 M(our advanced configuration document)S
/Fc SF 28.19 557.4 M(\267 )S
/F4 SF 0 531 M(The network-to-network setup allows you to connect two office networks into one Virtual Private Network,)S
0 517.8 M(while the Road Warrior connection secures a laptop's telecommute to work. Our examples also show the basic)S
0 504.6 M(procedure on the Linux FreeS/WAN side where another IPsec peer is in play.)S
0 478.2 M(Shortcut to net-to-net.)S
0 465 M(Shortcut to Road Warrior.)S
17 FS/F9 SF 0 432.6 M(Requirements)S
11 FS/F4 SF 0 405 M(To configure the network-to-network connection you must have:)S
36 378.6 M(two Linux gateways with static IPs)S
/Fc SF 28.19 378.6 M(\267 )S
/F4 SF 36 365.4 M(a network behind each gate. Networks must have non-overlapping IP ranges.)S
/Fc SF 28.19 365.4 M(\267 )S
/F4 SF 36 352.2 M(Linux FreeS/WAN installed on both gateways)S
/Fc SF 28.19 352.2 M(\267 )S
/Fa SF 36 339 M(tcpdump)S
/F4 SF ( on the local gate, to test the connection)S
/Fc SF 28.19 339 M(\267 )S
/F4 SF 0 312.6 M(For the Road Warrior you need:)S
36 286.2 M(one Linux box with a static IP)S
/Fc SF 28.19 286.2 M(\267 )S
/F4 SF 36 273 M(a Linux laptop with a dynamic IP)S
/Fc SF 28.19 273 M(\267 )S
/F4 SF 36 259.8 M(Linux FreeS/WAN installed on both)S
/Fc SF 28.19 259.8 M(\267 )S
/F4 SF 36 246.6 M(for testing,)S
/Fa SF ( tcpdump)S
/F4 SF ( on your gateway or laptop)S
/Fc SF 28.19 246.6 M(\267 )S
/F4 SF 0 220.2 M(If both IPs are dynamic, your situation is a bit trickier. Your best bet is a variation on the Road Warrior, as)S
0 207 M(described in this mailing list message.)S
17 FS/F9 SF 0 174.6 M(Net-to-Net connection)S
14 FS/F9 SF 0 144 M(Gather information)S
11 FS/F4 SF 0 117 M(For each gateway, compile the following information:)S
36 90.6 M(gateway IP)S
/Fc SF 28.19 90.6 M(\267 )S
/F4 SF 36 77.4 M(IP range of the subnet you will be protecting. This doesn't have to be your whole physical subnet.)S
/Fc SF 28.19 77.4 M(\267 )S
/F4 SF 36 64.2 M(a name by which that gateway can identify itself for IPsec negotiations. Its form is a Fully Qualified)S
36 51 M(Domain Name preceded by an @ sign, ie. @xy.example.com.)S
36 37.8 M(It does not need to be within a domain that you own. It can be a made-up name.)S
/Fc SF 28.19 64.2 M(\267 )S
/F8 SF 0 0 M(How to configure FreeS/WAN)S
468.652 0 M(174)S
GR
SP
%%Page: 175 204
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F9 SF 0 687 M(Get your leftrsasigkey)S
/F4 SF 0 660.6 M(On your local Linux FreeS/WAN gateway, print your IPsec public key:)S
9 FS/F0 SF 0 636.2 M(    ipsec showhostkey --left)S
11 FS/F4 SF 0 610.2 M(The output should look like this \(with the key shortened for easy reading\):)S
9 FS/F0 SF 0 585.8 M(    # RSA 2048 bits   xy.example.com   Fri Apr 26 15:01:41 2002)S
0 575 M(    leftrsasigkey=0sAQOnwiBPt...)S
11 FS/F4 SF 0 549 M(Don't have a key? Use)S
/Fa SF ( ipsec newhostkey)S
/F4 SF ( to create one.)S
/F9 SF 0 522.6 M(...and your rightrsasigkey)S
/F4 SF 0 496.2 M(Get a console on the remote side:)S
9 FS/F0 SF 0 471.8 M(    ssh2 ab.example.com)S
11 FS/F4 SF 0 445.8 M(In that window, type:)S
9 FS/F0 SF 0 421.4 M(    ipsec showhostkey --right)S
11 FS/F4 SF 0 395.4 M(You'll see something like:)S
9 FS/F0 SF 0 371 M(    # RSA 2192 bits   ab.example.com   Thu May 16 15:26:20 2002)S
0 360.2 M(    rightrsasigkey=0sAQOqH55O...)S
14 FS/F9 SF 0 331.2 M(Edit)S
/Fb SF ( /etc/ipsec.conf)S
11 FS/F4 SF 0 304.2 M(Back on the local gate, copy our template to)S
/Fa SF ( /etc/ipsec.conf)S
/F4 SF (. \(on Mandrake,)S
/Fa SF ( /etc/freeswan/ipsec.conf)S
/F4 SF (\).)S
0 291 M(Substitute the information you've gathered for our example data.)S
9 FS/F0 SF 0 266.6 M(conn net-to-net)S
0 255.8 M(    left=192.0.2.2                 # Local vitals)S
0 245 M(    leftsubnet=192.0.2.128/29      # )S
0 234.2 M(    leftid=@xy.example.com         #   )S
0 223.4 M(    leftrsasigkey=0s1LgR7/oUM...   #)S
0 212.6 M(    leftnexthop=%defaultroute      # correct in many situations )S
0 201.8 M(    right=192.0.2.9                # Remote vitals)S
0 191 M(    rightsubnet=10.0.0.0/24        #)S
0 180.2 M(    rightid=@ab.example.com        # )S
0 169.4 M(    rightrsasigkey=0sAQOqH55O...   #)S
0 158.6 M(    rightnexthop=%defaultroute     # correct in many situations)S
0 147.8 M(    auto=add                       # authorizes but doesn't start this )S
0 137 M(                                   # connection at startup)S
11 FS/F4 SF 0 111 M("Left" and "right" should represent the machines that have FreeS/WAN installed on them, and "leftsubnet")S
0 97.8 M(and "rightsubnet" machines that are being protected. /32 is assumed for left/right and left/rightsubnet)S
0 84.6 M(parameters.)S
0 58.2 M(Copy)S
/Fa SF ( conn net-to-net)S
/F4 SF ( to the remote-side /etc/ipsec.conf. If you've made no other modifications to either)S
/Fa SF 0 45 M(ipsec.conf)S
/F4 SF (, simply:)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Gather information)S
468.652 0 M(175)S
GR
SP
%%Page: 176 205
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(    scp2 ipsec.conf root@ab.example.com:/etc/ipsec.conf)S
14 FS/F9 SF 0 660 M(Start your connection)S
11 FS/F4 SF 0 633 M(Locally, type:)S
9 FS/F0 SF 0 608.6 M(    ipsec auto --up net-to-net)S
11 FS/F4 SF 0 582.6 M(You should see:)S
9 FS/F0 SF 0 558.2 M(    104 "net-net" #223: STATE_MAIN_I1: initiate)S
0 547.4 M(    106 "net-net" #223: STATE_MAIN_I2: sent MI2, expecting MR2)S
0 536.6 M(    108 "net-net" #223: STATE_MAIN_I3: sent MI3, expecting MR3)S
0 525.8 M(    004 "net-net" #223: STATE_MAIN_I4: ISAKMP SA established)S
0 515 M(    112 "net-net" #224: STATE_QUICK_I1: initiate)S
0 504.2 M(    004 "net-net" #224: STATE_QUICK_I2: sent QI2, IPsec SA established)S
11 FS/F4 SF 0 478.2 M(The important thing is)S
/Fa SF ( IPsec SA established)S
/F4 SF (. If you're unsuccessful, see our troubleshooting tips.)S
14 FS/F9 SF 0 448.8 M(Do not MASQ or NAT packets to be tunneled)S
11 FS/F4 SF 0 421.8 M(If you are using IP masquerade or Network Address Translation \(NAT\) on either gateway, you must now)S
0 408.6 M(exempt the packets you wish to tunnel from this treatment. For example, if you have a rule like:)S
9 FS/F0 SF 0 384.2 M(iptables -t nat -A POSTROUTING -o eth0 -s 10.0.0.0/24 -j MASQUERADE)S
11 FS/F4 SF 0 358.2 M(change it to something like:)S
9 FS/F0 SF 0 333.8 M(iptables -t nat -A POSTROUTING -o eth0 -s 10.0.0.0/24 -d \\! 192.0.2.128/29 -j MASQUERADE)S
11 FS/F4 SF 0 307.8 M(This may be necessary on both gateways.)S
14 FS/F9 SF 0 278.4 M(Test your connection)S
11 FS/F4 SF 0 251.4 M(Sit at one of your local subnet nodes \(not the gateway\), and ping a subnet node on the other \(again, not the)S
0 238.2 M(gateway\).)S
9 FS/F0 SF 0 213.8 M(    ping fileserver.toledo.example.com)S
11 FS/F4 SF 0 187.8 M(While still pinging, go to the local gateway and snoop your outgoing interface, for example:)S
9 FS/F0 SF 0 163.4 M(    tcpdump -i ppp0)S
11 FS/F4 SF 0 137.4 M(You want to see ESP \(Encapsulating Security Payload\) packets moving)S
/F5 SF ( back and forth)S
/F4 SF ( between the two)S
0 124.2 M(gateways at the same frequency as your pings:)S
9 FS/F0 SF 0 99.8 M(    19:16:32.046220 192.0.2.2 > 192.0.2.9: ESP\(spi=0x3be6c4dc,seq=0x3\))S
0 89 M(    19:16:32.085630 192.0.2.9 > 192.0.2.2: ESP\(spi=0x5fdd1cf8,seq=0x6\))S
11 FS/F4 SF 0 63 M(If you see this, congratulations are in order! You have a tunnel which will protect any IP data from one subnet)S
0 49.8 M(to the other, as it passes between the two gates. If not, go and troubleshoot.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Start your connection)S
468.652 0 M(176)S
GR
SP
%%Page: 177 206
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(Note: your new tunnel protects only net-net traffic, not gateway-gateway, or gateway-subnet. If you need)S
0 673.8 M(this \(for example, if machines on one net need to securely contact a fileserver on the IPsec gateway\), you'll)S
0 660.6 M(need to create extra connections.)S
14 FS/F9 SF 0 631.2 M(Finishing touches)S
11 FS/F4 SF 0 604.2 M(Now that your connection works, name it something sensible, like:)S
9 FS/F0 SF 0 579.8 M(conn winstonnet-toledonet)S
11 FS/F4 SF 0 553.8 M(To have the tunnel come up on-boot, replace)S
9 FS/F0 SF 0 529.4 M(    auto=add)S
11 FS/F4 SF 0 503.4 M(with:)S
9 FS/F0 SF 0 479 M(    auto=start)S
11 FS/F4 SF 0 453 M(Copy these changes to the other side, for example:)S
9 FS/F0 SF 0 428.6 M(    scp2 ipsec.conf root@ab.example.com:/etc/ipsec.conf)S
11 FS/F4 SF 0 402.6 M(Enjoy!)S
17 FS/F9 SF 0 370.2 M(Road Warrior Configuration)S
14 FS/F9 SF 0 339.6 M(Gather information)S
11 FS/F4 SF 0 312.6 M(You'll need to know:)S
36 286.2 M(the gateway's static IP)S
/Fc SF 28.19 286.2 M(\267 )S
/F4 SF 36 273 M(the IP range of the subnet behind that gateway)S
/Fc SF 28.19 273 M(\267 )S
/F4 SF 36 259.8 M(a name by which each side can identify itself for IPsec negotiations. Its form is a Fully Qualified)S
36 246.6 M(Domain Name preceded by an @ sign, ie. @road.example.com.)S
36 233.4 M(It does not need to be within a domain that you own. It can be a made-up name.)S
/Fc SF 28.19 259.8 M(\267 )S
/F9 SF 0 207 M(Get your leftrsasigkey...)S
/F4 SF 0 180.6 M(On your laptop, print your IPsec public key:)S
9 FS/F0 SF 0 156.2 M(    ipsec showhostkey --left)S
11 FS/F4 SF 0 130.2 M(The output should look like this \(with the key shortened for easy reading\):)S
9 FS/F0 SF 0 105.8 M(    # RSA 2192 bits   road.example.com   Sun Jun  9 02:45:02 2002)S
0 95 M(    leftrsasigkey=0sAQPIPN9uI...)S
11 FS/F4 SF 0 69 M(Don't have a key? See these instructions.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Finishing touches)S
468.652 0 M(177)S
GR
SP
%%Page: 178 207
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F9 SF 0 687 M(...and your rightrsasigkey)S
/F4 SF 0 660.6 M(Get a console on the gateway:)S
9 FS/F0 SF 0 636.2 M(    ssh2 xy.example.com)S
11 FS/F4 SF 0 610.2 M(View the gateway's public key with:)S
9 FS/F0 SF 0 585.8 M(    ipsec showhostkey --right)S
11 FS/F4 SF 0 559.8 M(This will yield something like)S
9 FS/F0 SF 0 535.4 M(    # RSA 2048 bits   xy.example.com   Fri Apr 26 15:01:41 2002)S
0 524.6 M(    rightrsasigkey=0sAQOnwiBPt...)S
14 FS/F9 SF 0 495.6 M(Customize)S
/Fb SF ( /etc/ipsec.conf)S
11 FS/F4 SF 0 468.6 M(On your laptop, copy this template to)S
/Fa SF ( /etc/ipsec.conf)S
/F4 SF (. \(on Mandrake,)S
/Fa SF ( /etc/freeswan/ipsec.conf)S
/F4 SF (\). Substitute)S
0 455.4 M(the information you've gathered for our example data.)S
9 FS/F0 SF 0 431 M(conn road)S
0 420.2 M(    left=%defaultroute             # Picks up our dynamic IP )S
0 409.4 M(    leftnexthop=%defaultroute      # )S
0 398.6 M(    leftid=@road.example.com       # Local information)S
0 387.8 M(    leftrsasigkey=0sAQPIPN9uI...   #)S
0 377 M(    right=192.0.2.10               # Remote information)S
0 366.2 M(    rightsubnet=10.0.0.0/24        #)S
0 355.4 M(    rightid=@xy.example.com        # )S
0 344.6 M(    rightrsasigkey=0sAQOnwiBPt...  #)S
0 333.8 M(    auto=add                       # authorizes but doesn't start this)S
0 323 M(                                   # connection at startup)S
11 FS/F4 SF 0 297 M(The template for the gateway is different. Notice how it reverses)S
/Fa SF ( left)S
/F4 SF ( and)S
/Fa SF ( right)S
/F4 SF (, in keeping with our)S
0 283.8 M(convention that)S
/F7 SF ( L)S
/F4 SF (eft is)S
/F7 SF ( L)S
/F4 SF (ocal,)S
/F7 SF ( R)S
/F4 SF (ight)S
/F7 SF ( R)S
/F4 SF (emote. Be sure to switch your rsasigkeys in keeping with this.)S
9 FS/F0 SF 0 259.4 M(    ssh2 xy.example.com)S
0 248.6 M(    vi /etc/ipsec.conf)S
11 FS/F4 SF 0 222.6 M(and add:)S
9 FS/F0 SF 0 198.2 M(conn road)S
0 187.4 M(    left=192.0.2.2                 # Gateway's information)S
0 176.6 M(    leftid=@xy.example.com         #)S
0 165.8 M(    leftsubnet=192.0.2.128/29      #)S
0 155 M(    leftrsasigkey=0sAQOnwiBPt...   #)S
0 144.2 M(    rightnexthop=%defaultroute     # correct in many situations)S
0 133.4 M(    right=%any                     # Wildcard: we don't know the laptop's IP)S
0 122.6 M(    rightid=@road.example.com      #)S
0 111.8 M(    rightrsasigkey=0sAQPIPN9uI...  #)S
0 101 M(    auto=add                       # authorizes but doesn't start this)S
0 90.2 M(                                   # connection at startup)S
14 FS/F9 SF 0 61.2 M(Start your connection)S
11 FS/F4 SF 0 34.2 M(You must start the connection from the Road Warrior side. On your laptop, type:)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Gather information)S
468.652 0 M(178)S
GR
SP
%%Page: 179 208
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(    ipsec auto --start net-to-net)S
11 FS/F4 SF 0 663 M(You should see:)S
9 FS/F0 SF 0 638.6 M(104 "net-net" #223: STATE_MAIN_I1: initiate)S
0 627.8 M(106 "road" #301: STATE_MAIN_I2: sent MI2, expecting MR2)S
0 617 M(108 "road" #301: STATE_MAIN_I3: sent MI3, expecting MR3)S
0 606.2 M(004 "road" #301: STATE_MAIN_I4: ISAKMP SA established)S
0 595.4 M(112 "road" #302: STATE_QUICK_I1: initiate)S
0 584.6 M(004 "road" #302: STATE_QUICK_I2: sent QI2, IPsec SA established)S
11 FS/F4 SF 0 558.6 M(Look for)S
/Fa SF ( IPsec SA established)S
/F4 SF (. If you're unsuccessful, see our troubleshooting tips.)S
14 FS/F9 SF 0 529.2 M(Do not MASQ or NAT packets to be tunneled)S
11 FS/F4 SF 0 502.2 M(If you are using IP masquerade or Network Address Translation \(NAT\) on either gateway, you must now)S
0 489 M(exempt the packets you wish to tunnel from this treatment. For example, if you have a rule like:)S
9 FS/F0 SF 0 464.6 M(iptables -t nat -A POSTROUTING -o eth0 -s 10.0.0.0/24 -j MASQUERADE)S
11 FS/F4 SF 0 438.6 M(change it to something like:)S
9 FS/F0 SF 0 414.2 M(iptables -t nat -A POSTROUTING -o eth0 -s 10.0.0.0/24 -d \\! 192.0.2.128/29 -j MASQUERADE)S
14 FS/F9 SF 0 385.2 M(Test your connection)S
11 FS/F4 SF 0 358.2 M(From your laptop, ping a subnet node behind the remote gateway. Do not choose the gateway itself for this)S
0 345 M(test.)S
9 FS/F0 SF 0 320.6 M(    ping ns.winston.example.com)S
11 FS/F4 SF 0 294.6 M(Snoop the packets exiting the laptop, with a command like:)S
9 FS/F0 SF 0 270.2 M(    tcpdump -i wlan0)S
11 FS/F4 SF 0 244.2 M(You have success if you see \(Encapsulating Security Payload\) packets travelling)S
/F5 SF ( in both directions)S
/F4 SF (:)S
9 FS/F0 SF 0 219.8 M(    19:16:32.046220 192.0.2.2 > 192.0.2.9: ESP\(spi=0x3be6c4dc,seq=0x3\))S
0 209 M(    19:16:32.085630 192.0.2.9 > 192.0.2.2: ESP\(spi=0x5fdd1cf8,seq=0x6\))S
11 FS/F4 SF 0 183 M(If you do, great! Traffic between your Road Warrior and the net behind your gateway is protected. If not, see)S
0 169.8 M(our troubleshooting hints.)S
0 143.4 M(Your new tunnel protects only traffic addressed to the net, not to the IPsec gateway itself. If you need the)S
0 130.2 M(latter, you'll want to make an extra tunnel..)S
14 FS/F9 SF 0 100.8 M(Finishing touches)S
11 FS/F4 SF 0 73.8 M(On both ends, name your connection wisely, like:)S
9 FS/F0 SF 0 49.4 M(conn mike-to-office)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Do not MASQ or NAT packets to be tunneled)S
468.652 0 M(179)S
GR
SP
%%Page: 180 209
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F5 SF 0 687 M(On the laptop only,)S
/F4 SF ( replace)S
9 FS/F0 SF 0 662.6 M(    auto=add)S
11 FS/F4 SF 0 636.6 M(with:)S
9 FS/F0 SF 0 612.2 M(    auto=start)S
11 FS/F4 SF 0 586.2 M(so that you'll be connected on-boot.)S
0 559.8 M(Happy telecommuting!)S
14 FS/F9 SF 0 530.4 M(Multiple Road Warriors)S
11 FS/F4 SF 0 503.4 M(If you're using RSA keys, as we did in this example, you can add as many Road Warriors as you like. The)S
0 490.2 M(left/rightid parameter lets Linux FreeS/WAN distinguish between multiple Road Warrior peers, each with its)S
0 477 M(own public key.)S
0 450.6 M(The situation is different for shared secrets \(PSK\). During a PSK negotiation, ID information is not available)S
0 437.4 M(at the time Pluto is trying to determine which secret to use, so, effectively, you can only define one)S
0 424.2 M(Roadwarrior connection. All your PSK road warriors must therefore share one secret.)S
17 FS/F9 SF 0 391.8 M(What next?)S
11 FS/F4 SF 0 364.2 M(Using the principles illustrated here, you can try variations such as:)S
36 337.8 M(a telecommuter with a static IP)S
/Fc SF 28.19 337.8 M(\267 )S
/F4 SF 36 324.6 M(a road warrior with a subnet behind it)S
/Fc SF 28.19 324.6 M(\267 )S
/F4 SF 0 298.2 M(Or, look at some of our more complex configuration examples..)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Multiple Road Warriors)S
468.652 0 M(180)S
GR
SP
%%Page: 181 210
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(Linux FreeS/WAN background)S
11 FS/F4 SF 0 649.8 M(This section discusses a number of issues which have three things in common:)S
36 623.4 M(They are not specifically FreeS/WAN problems)S
/Fc SF 28.19 623.4 M(\267 )S
/F4 SF 36 610.2 M(You may have to understand them to get FreeS/WAN working right)S
/Fc SF 28.19 610.2 M(\267 )S
/F4 SF 36 597 M(They are not simple questions)S
/Fc SF 28.19 597 M(\267 )S
/F4 SF 0 570.6 M(Grouping them here lets us provide the explanations some users will need without unduly complicating the)S
0 557.4 M(main text.)S
0 531 M(The explanations here are intended to be adequate for FreeS/WAN purposes \(please comment to the users)S
0 517.8 M(mailing list if you don't find them so\), but they are not trying to be complete or definitive. If you need more)S
0 504.6 M(information, see the references provided in each section.)S
17 FS/F9 SF 0 472.2 M(Some DNS background)S
11 FS/F4 SF 0 444.6 M(Opportunistic encryption requires that the gateway systems be able to fetch public keys, and other)S
0 431.4 M(IPsec-related information, from each other's DNS \(Domain Name Service\) records.)S
0 405 M(DNS is a distributed database that maps names to IP addresses and vice versa.)S
0 378.6 M(Much good reference material is available for DNS, including:)S
36 352.2 M(the DNS HowTo)S
/Fc SF 28.19 352.2 M(\267 )S
/F4 SF 36 339 M(the standard DNS reference book)S
/Fc SF 28.19 339 M(\267 )S
/F4 SF 36 325.8 M(Linux Network Administrator's Guide)S
/Fc SF 28.19 325.8 M(\267 )S
/F4 SF 36 312.6 M(BIND overview)S
/Fc SF 28.19 312.6 M(\267 )S
/F4 SF 36 299.4 M(BIND 9 Administrator's Reference)S
/Fc SF 28.19 299.4 M(\267 )S
/F4 SF 0 273 M(We give only a brief overview here, intended to help you use DNS for FreeS/WAN purposes.)S
14 FS/F9 SF 0 243.6 M(Forward and reverse maps)S
11 FS/F4 SF 0 216.6 M(Although the implementation is distributed, it is often useful to speak of DNS as if it were just two enormous)S
0 203.4 M(tables:)S
36 177 M(the forward map: look up a name, get an IP address)S
/Fc SF 28.19 177 M(\267 )S
/F4 SF 36 163.8 M(the reverse map: look up an IP address, get a name)S
/Fc SF 28.19 163.8 M(\267 )S
/F4 SF 0 137.4 M(Both maps can optionally contain additional data. For opportunistic encryption, we insert the data need for)S
0 124.2 M(IPsec authentication.)S
0 97.8 M(A system named gateway.example.com with IP address 10.20.30.40 should have at least two DNS records,)S
0 84.6 M(one in each map:)S
/F6 SF 0 58.2 M(gateway.example.com. IN A 10.20.30.40)S
/F4 SF 36 45 M(used to look up the name and get an IP address)S
/F6 SF 0 31.8 M(40.30.20.10.in-addr.arpa. IN PTR gateway.example.com.)S
/F8 SF 0 0 M(Linux FreeS/WAN background)S
468.652 0 M(181)S
GR
SP
%%Page: 182 211
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(used for reverse lookups, looking up an address to get the associated name. Notice that the digits here)S
36 673.8 M(are in reverse order; the actual address is 10.20.30.40 but we use 40.30.20.10 here.)S
14 FS/F9 SF 0 644.4 M(Hierarchy and delegation)S
11 FS/F4 SF 0 617.4 M(For both maps there is a hierarchy of DNS servers and a system of delegating authority so that, for example:)S
36 591 M(the DNS administrator for example.com can create entries of the form)S
/Fa SF ( name)S
/F4 SF (.example.com)S
/Fc SF 28.19 591 M(\267 )S
/F4 SF 36 577.8 M(the example.com admin cannot create an entry for counterexample.com; only someone with authority)S
36 564.6 M(for .com can do that)S
/Fc SF 28.19 577.8 M(\267 )S
/F4 SF 36 551.4 M(an admin might have authority for 20.10.in-addr.arpa.)S
/Fc SF 28.19 551.4 M(\267 )S
/F4 SF 36 538.2 M(in either map, authority can be delegated)S
72 525 M(the example.com admin could give you authority for westcoast.example.com)S
/Fc SF 60.967 525 M(\250 )S
/F4 SF 72 511.8 M(the 20.10.in-addr.arpa admin could give you authority for 30.20.10.in-addr.arpa)S
/Fc SF 60.967 511.8 M(\250 )S
28.19 538.2 M(\267 )S
/F4 SF 0 485.4 M(DNS zones are the units of delegation. There is a hierarchy of zones.)S
14 FS/F9 SF 0 456 M(Syntax of DNS records)S
11 FS/F4 SF 0 429 M(Returning to the example records:)S
9 FS/F0 SF 0 404.6 M(        gateway.example.com. IN A 10.20.30.40)S
0 393.8 M(        40.30.20.10.in-addr.arpa. IN PTR gateway.example.com.)S
11 FS/F4 SF 0 367.8 M(some syntactic details are:)S
36 341.4 M(the IN indicates that these records are for)S
/F7 SF ( In)S
/F4 SF (ternet addresses)S
/Fc SF 28.19 341.4 M(\267 )S
/F4 SF 36 328.2 M(The final periods in '.com.' and '.arpa.' are required. They indicate the root of the domain name)S
36 315 M(system.)S
/Fc SF 28.19 328.2 M(\267 )S
/F4 SF 0 288.6 M(The capitalised strings after IN indicate the type of record. Possible types include:)S
/F7 SF 36 262.2 M(A)S
/F4 SF (ddress, for forward lookups)S
/Fc SF 28.19 262.2 M(\267 )S
/F7 SF 36 249 M(P)S
/F4 SF (oin)S
/F7 SF (T)S
/F4 SF (e)S
/F7 SF (R)S
/F4 SF (, for reverse lookups)S
/Fc SF 28.19 249 M(\267 )S
/F7 SF 36 235.8 M(C)S
/F4 SF (anonical)S
/F7 SF ( NAME)S
/F4 SF (, records to support aliasing, multiple names for one address)S
/Fc SF 28.19 235.8 M(\267 )S
/F7 SF 36 222.6 M(M)S
/F4 SF (ail e)S
/F7 SF (X)S
/F4 SF (change, used in mail routing)S
/Fc SF 28.19 222.6 M(\267 )S
/F7 SF 36 209.4 M(SIG)S
/F4 SF (nature, used in secure DNS)S
/Fc SF 28.19 209.4 M(\267 )S
/F7 SF 36 196.2 M(KEY)S
/F4 SF (, used in secure DNS)S
/Fc SF 28.19 196.2 M(\267 )S
/F7 SF 36 183 M(T)S
/F4 SF (e)S
/F7 SF (XT)S
/F4 SF (, a multi-purpose record type)S
/Fc SF 28.19 183 M(\267 )S
/F4 SF 0 156.6 M(To set up for opportunistic encryption, you add some TXT records to your DNS data. Details are in our)S
0 143.4 M(quickstart document.)S
14 FS/F9 SF 0 114 M(Cacheing, TTL and propagation delay)S
11 FS/F4 SF 0 87 M(DNS information is extensively cached. With no caching, a lookup by your system of "www.freeswan.org")S
0 73.8 M(might involve:)S
36 47.4 M(your system asks your nameserver for "www.freeswan.org")S
/Fc SF 28.19 47.4 M(\267 )S
/F4 SF 36 34.2 M(local nameserver asks root server about ".org", gets reply)S
/Fc SF 28.19 34.2 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Hierarchy and delegation)S
468.652 0 M(182)S
GR
SP
%%Page: 183 212
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(local nameserver asks .org nameserver about "freeswan.org", gets reply)S
/Fc SF 28.19 687 M(\267 )S
/F4 SF 36 673.8 M(local nameserver asks freeswan.org nameserver about "www.freeswan.org", gets reply)S
/Fc SF 28.19 673.8 M(\267 )S
/F4 SF 0 647.4 M(However, this can be a bit inefficient. For example, if you are in the Phillipines, the closest a root server is in)S
0 634.2 M(Japan. That might send you to a .org server in the US, and then to freeswan.org in Holland. If everyone did all)S
0 621 M(those lookups every time they clicked on a web link, the net would grind to a halt.)S
0 594.6 M(Nameservers therefore cache information they look up. When you click on another link at www.freeswan.org,)S
0 581.4 M(your local nameserver has the IP address for that server in its cache, and no further lookups are required.)S
0 555 M(Intermediate results are also cached. If you next go to lists.freeswan.org, your nameserver can just ask the)S
0 541.8 M(freeswan.org nameserver for that address; it does not need to query the root or .org nameservers because it has)S
0 528.6 M(a cached address for the freeswan.org zone server.)S
0 502.2 M(Of course, like any cacheing mechanism, this can create problems of consistency. What if the administrator)S
0 489 M(for freeswan.org changes the IP address, or the authentication key, for www.freeswan.org? If you use old)S
0 475.8 M(information from the cache, you may get it wrong. On the other hand, you cannot afford to look up fresh)S
0 462.6 M(information every time. Nor can you expect the freeswan.org server to notify you; that isn't in the protocols.)S
0 436.2 M(The solution that is in the protocols is fairly simple. Cacheable records are marked with Time To Live \(TTL\))S
0 423 M(information. When the time expires, the caching server discards the record. The next time someone asks for it,)S
0 409.8 M(the server fetches a fresh copy. Of course, a server may also discard records before their TTL expires if it is)S
0 396.6 M(running out of cache space.)S
0 370.2 M(This implies that there will be some delay before the new version of a changed record propagates around the)S
0 357 M(net. Until the TTLs on all copies of the old record expire, some users will see it because that is what is in their)S
0 343.8 M(cache. Other users may see the new record immediately because they don't have an old one cached.)S
17 FS/F9 SF 0 311.4 M(Problems with packet fragmentation)S
11 FS/F4 SF 0 283.8 M(It seems, from mailing list reports, to be moderately common for problems to crop up in which small packets)S
0 270.6 M(pass through the IPsec tunnels just fine but larger packets fail.)S
0 244.2 M(These problems are caused by various devices along the way mis-handling either packet fragments or path)S
0 231 M(MTU discovery.)S
0 204.6 M(IPsec makes packets larger by adding an ESP or AH header. This can tickle assorted bugs in fragment)S
0 191.4 M(handling in routers and firewalls, or in path MTU discovery mechanisms, and cause a variety of symptoms)S
0 178.2 M(which are both annoying and, often, quite hard to diagnose.)S
0 151.8 M(An explanation from project technical lead Henry Spencer:)S
9 FS/F0 SF 0 127.4 M(The problem is IP fragmentation; more precisely, the problem is that the)S
0 116.6 M(second, third, etc. fragments of an IP packet are often difficult for)S
0 105.8 M(filtering mechanisms to classify.)S
0 84.2 M(Routers cannot rely on reassembling the packet, or remembering what was in)S
0 73.4 M(earlier fragments, because the fragments may be out of order or may even)S
0 62.6 M(follow different routes.  So any general, worst-case filtering decision)S
0 51.8 M(pretty much has to be made on each fragment independently.  \(If the router)S
0 41 M(knows that it is the only route to the destination, so all fragments)S
0 30.2 M(*must* pass through it, reassembly would be possible... but most routers)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Problems with packet fragmentation)S
468.652 0 M(183)S
GR
SP
%%Page: 184 213
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(don't want to bother with the complications of that.\))S
0 667.4 M(All fragments carry roughly the original IP header, but any higher-level)S
0 656.6 M(header is \(for IP purposes\) just the first part of the packet data... so)S
0 645.8 M(only the first fragment carries that.  So, for example, on examining the)S
0 635 M(second fragment of a TCP packet, you could tell that it's TCP, but not)S
0 624.2 M(what port number it is destined for -- that information is in the TCP)S
0 613.4 M(header, which appears in the first fragment only. )S
0 591.8 M(The result of this classification difficulty is that stupid routers and)S
0 581 M(over-paranoid firewalls may just throw fragments away.  To get through)S
0 570.2 M(them, you must reduce your MTU enough that fragmentation will not occur.)S
0 559.4 M(\(In some cases, they might be willing to attempt reassembly, but have very)S
0 548.6 M(limited resources to devote to it, meaning that packets must be small and)S
0 537.8 M(fragments few in number, leading to the same conclusion:  smaller MTU.\))S
11 FS/F4 SF 0 511.8 M(In addition to the problem Henry describes, you may also have trouble with path MTU discovery.)S
0 485.4 M(By default, FreeS/WAN uses a large MTU for the ipsec device. This avoids some problems, but may)S
0 472.2 M(complicate others. Here's an explanation from Claudia:)S
9 FS/F0 SF 0 447.8 M(Here are a couple of pieces of background information. Apologies if you)S
0 437 M(have seen these already. An excerpt from one of my old posts:)S
0 415.4 M(    An MTU of 16260 on ipsec0 is usual. The IPSec device defaults to this )S
0 404.6 M(    high MTU so that it does not fragment incoming packets before encryption )S
0 393.8 M(    and encapsulation. If after IPSec processing packets are larger than 1500,)S
0 383 M(    [ie. the mtu of eth0] then eth0 will fragment them. )S
0 361.4 M(    Adding IPSec headers adds a certain number of bytes to each packet. )S
0 350.6 M(    The MTU of the IPSec interface refers to the maximum size of the packet)S
0 339.8 M(    before the IPSec headers are added. In some cases, people find it helpful )S
0 329 M(    to set ipsec0's MTU to 1500-\(IPSec header size\), which IIRC is about 1430.)S
0 307.4 M(    That way, the resulting encapsulated packets don't exceed 1500. On most )S
0 296.6 M(    networks, packets less than 1500 will not need to be fragmented.)S
0 275 M(and... \(from Henry Spencer\))S
0 253.4 M(    The way it *ought* to work is that the MTU advertised by the ipsecN)S
0 242.6 M(    interface should be that of the underlying hardware interface, less a)S
0 231.8 M(    pinch for the extra headers needed. )S
0 210.2 M(    Unfortunately, in certain situations this breaks many applications.)S
0 199.4 M(    There is a widespread implicit assumption that the smallest MTUs are )S
0 188.6 M(    at the ends of paths, not in the middle, and another that MTUs are )S
0 177.8 M(    never less than 1500.  A lot of code is unprepared to handle paths )S
0 167 M(    where there is an "interior minimum" in the MTU, especially when it's )S
0 156.2 M(    less than 1500. So we advertise a big MTU and just let the resulting )S
0 145.4 M(    big packets fragment.)S
0 123.8 M(This usually works, but we do get bitten in cases where some intermediate)S
0 113 M(point can't handle all that fragmentation.  We can't win on this one.)S
11 FS/F4 SF 0 87 M(The MTU can be changed with an)S
/Fa SF ( overridemtu=)S
/F4 SF ( statement in the)S
/Fa SF ( config setup)S
/F4 SF ( section of ipsec.conf.5.)S
0 60.6 M(For a discussion of MTU issues and some possible solutions using Linux advanced routing facilities, see the)S
0 47.4 M(Linux 2.4 Advanced Routing HOWTO. For a discussion of MTU and NAT \(Network Address Translation\),)S
0 34.2 M(see James Carter's MTU notes.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Problems with packet fragmentation)S
468.652 0 M(184)S
GR
SP
%%Page: 185 214
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
17 FS/F9 SF 0 681 M(Network address translation \(NAT\))S
11 FS/F7 SF 0 653.4 M(N)S
/F4 SF (etwork)S
/F7 SF ( A)S
/F4 SF (ddress)S
/F7 SF ( T)S
/F4 SF (ranslation is a service provided by some gateway machines. Calling it NAPT \(adding the)S
0 640.2 M(word)S
/F7 SF ( P)S
/F4 SF (ort\) would be more precise, but we will follow the widespread usage.)S
0 613.8 M(A gateway doing NAT rewrites the headers of packets it is forwarding, changing one or more of:)S
36 587.4 M(source address)S
/Fc SF 28.19 587.4 M(\267 )S
/F4 SF 36 574.2 M(source port)S
/Fc SF 28.19 574.2 M(\267 )S
/F4 SF 36 561 M(destination address)S
/Fc SF 28.19 561 M(\267 )S
/F4 SF 36 547.8 M(destination port)S
/Fc SF 28.19 547.8 M(\267 )S
/F4 SF 0 521.4 M(On Linux 2.4, NAT services are provided by the netfilter\(8\) firewall code. There are several Netfilter HowTos)S
0 508.2 M(including one on NAT.)S
0 481.8 M(For older versions of Linux, this was referred to as "IP masquerade" and different tools were used. See this)S
0 468.6 M(resource page.)S
0 442.2 M(Putting an IPsec gateway behind a NAT gateway is not recommended. See our firewalls document.)S
14 FS/F9 SF 0 412.8 M(NAT to non-routable addresses)S
11 FS/F4 SF 0 385.8 M(The most common application of NAT uses private non-routable addresses.)S
0 359.4 M(Often a home or small office network will have:)S
36 333 M(one connection to the Internet)S
/Fc SF 28.19 333 M(\267 )S
/F4 SF 36 319.8 M(one assigned publicly visible IP address)S
/Fc SF 28.19 319.8 M(\267 )S
/F4 SF 36 306.6 M(several machines that all need access to the net)S
/Fc SF 28.19 306.6 M(\267 )S
/F4 SF 0 280.2 M(Of course this poses a problem since several machines cannot use one address. The best solution might be to)S
0 267 M(obtain more addresses, but often this is impractical or uneconomical.)S
0 240.6 M(A common solution is to have:)S
36 214.2 M(non-routable addresses on the local network)S
/Fc SF 28.19 214.2 M(\267 )S
/F4 SF 36 201 M(the gateway machine doing NAT)S
/Fc SF 28.19 201 M(\267 )S
/F4 SF 36 187.8 M(all packets going outside the LAN rewritten to have the gateway as their source address)S
/Fc SF 28.19 187.8 M(\267 )S
/F4 SF 0 161.4 M(The client machines are set up with reserved non-routable IP addresses defined in RFC 1918. The)S
0 148.2 M(masquerading gateway, the machine with the actual link to the Internet, rewrites packet headers so that all)S
0 135 M(packets going onto the Internet appear to come from one IP address, that of its Internet interface. It then gets)S
0 121.8 M(all the replies, does some table lookups and more header rewriting, and delivers the replies to the appropriate)S
0 108.6 M(client machines.)S
0 82.2 M(As far as anyone else on the Internet is concerned, the systems behind the gateway are completely hidden.)S
0 69 M(Only one machine with one IP address is visible.)S
0 42.6 M(For IPsec on such a gateway, you can entirely ignore the NAT in:)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Network address translation \(NAT\))S
468.652 0 M(185)S
GR
SP
%%Page: 186 215
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(ipsec.conf\(5\))S
/Fc SF 28.19 687 M(\267 )S
/F4 SF 36 673.8 M(firewall rules affecting your Internet-side interface)S
/Fc SF 28.19 673.8 M(\267 )S
/F4 SF 0 647.4 M(Those can be set up exactly as they would be if your gateway had no other systems behind it.)S
0 621 M(You do, however, have to take account of the NAT in firewall rules which affect packet forwarding.)S
14 FS/F9 SF 0 591.6 M(NAT to routable addresses)S
11 FS/F4 SF 0 564.6 M(NAT to routable addresses is also possible, but is less common and may make for rather tricky routing)S
0 551.4 M(problems. We will not discuss it here. See the Netfilter HowTos.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(NAT to routable addresses)S
468.652 0 M(186)S
GR
SP
%%Page: 187 216
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(FreeS/WAN script examples)S
11 FS/F4 SF 0 649.8 M(This file is intended to hold a collection of user-written example scripts or configuration files for use with)S
0 636.6 M(FreeS/WAN.)S
0 610.2 M(So far it has only one entry.)S
17 FS/F9 SF 0 577.8 M(Poltorak's Firewall script)S
9 FS/F0 SF 0 552.2 M(From: Poltorak Serguei <poltorak@dataforce.net>)S
0 541.4 M(Subject: [Users] Using FreeS/WAN)S
0 530.6 M(Date: Tue, 16 Oct 2001)S
0 509 M(Hello.)S
0 487.4 M(I'm using FreeS/WAN IPsec for half a year. I learned a lot of things about)S
0 476.6 M(it and I think it would be interesting for someone to see the result of my)S
0 465.8 M(experiments and usage of FreeS/WAN. If you find a mistake in this)S
0 455 M(file, please e-mail me. And excuse me for my english... I'm learning.. :\))S
0 433.4 M(I'll talk about vary simple configuration:)S
0 411.8 M(addresses prefix = 192.168)S
0 390.2 M(    lan1          sgw1     .0.0/24 \(Internet\)       sgw2            lan2)S
0 379.4 M(  .1.0/24---[ .1.1 ; .0.1 ]===================[ .0.10 ; . 2.10 ]---.2.0/24)S
0 347 M(We need to let lan1 see lan2 across Internet like it is behind sgw1. The)S
0 336.2 M(same for lan2. And we need to do IPX bridge for Novel Clients and NDS)S
0 325.4 M(synchronization.)S
0 303.8 M(my config:)S
0 293 M(------------------- ipsec.conf -------------------)S
0 282.2 M(conn lan1-lan2)S
0 271.4 M(        type=tunnel)S
0 260.6 M(        compress=yes)S
0 249.8 M(        #-------------------)S
0 239 M(        left=192.168.0.1)S
0 228.2 M(        leftsubnet=192.168.1.0/24)S
0 217.4 M(        #-------------------)S
0 206.6 M(        right=192.168.0.10)S
0 195.8 M(        rightsubnet=192.168.2.0/24)S
0 185 M(        #-------------------)S
0 174.2 M(        auth=esp)S
0 163.4 M(        authby=secret)S
0 152.6 M(--------------- end of ipsec.conf ----------------)S
0 131 M(ping .2.x from .1.y   \(y != 1\))S
0 120.2 M(It works?? Fine. Let's continue...)S
0 98.6 M(Why y != 1 ?? Because kernel of sgw1 have 2 IP addresses and it will choose)S
0 87.8 M(the first IP \(which is used to go to Internet\) .0.1 and the packet won't go)S
0 77 M(through IPsec tunnel :\(  But if do ping on .1.1 kernel will respond from)S
0 66.2 M(that address \(.1.1\) and the packet will be tunneled. The same problem occurred then)S
0 55.4 M(.2.x sends a packet to .1.2 which is down at the moment. What happens? .1.1)S
0 44.6 M(sends ARP requesting .1.2... after 3 tries it send to .2.x an destunreach,)S
0 33.8 M(but from his "natural" IP or .0.1 . So the error message won't be delivered!)S
0 23 M(It's a big problem...)S
11 FS/F8 SF 0 0 M(FreeS/WAN script examples)S
468.652 0 M(187)S
GR
SP
%%Page: 188 217
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 678.2 M(Resolution... One can manipulate with ipsec0 or ipsec0:0 to solve the)S
0 667.4 M(problem \(if ipsec0 has .1.1 kernel will send packets correctly\), but there)S
0 656.6 M(are powerful and elegant iproute2 :\) We simply need to change source address)S
0 645.8 M(of packet that goes to other secure lan. This is done with)S
0 624.2 M(ip route replace 192.168.2.0/24 via 192.168.0.10 dev ipsec0 src 192.168.1.1)S
0 602.6 M(Cool!! Now it works!!)S
0 581 M(The second step. We want install firewall on sgw1 and sgw2. Encryption of )S
0 570.2 M(traffic without security isn't a good idea. I don't use {left|right}firewall, )S
0 559.4 M(because I'm running firewall from init scripts.)S
0 537.8 M(We want IPsec data between lan1-lan2, some ICMP errors \(destination)S
0 527 M(unreachable, TTL exceeded, parameter problem and source quench\), replying on )S
0 516.2 M(pings from both lans and Internet, ipxtunnel data for IPX and of course SSH)S
0 505.4 M(between sgw1 and sgw2 and from/to one specified host.)S
0 483.8 M(I'm using ipchains. With iptables there are some changes.)S
0 462.2 M(---------------- rc.firewall ---------------------)S
0 451.4 M(#!/bin/sh)S
0 440.6 M(#)S
0 429.8 M(# Firewall for IPsec lan1-lan2)S
0 419 M(#)S
0 397.4 M(IPC=/sbin/ipchains)S
0 386.6 M(ANY=0.0.0.0/0)S
0 365 M(# left)S
0 354.2 M(SGW1_EXT=192.168.0.1)S
0 343.4 M(SGW1_INT=192.168.1.1)S
0 332.6 M(LAN1=192.168.1.0/24)S
0 311 M(# right)S
0 300.2 M(SGW2_EXT=192.168.0.10)S
0 289.4 M(SGW2_INT=192.168.2.10)S
0 278.6 M(LAN2=192.168.2.0/24)S
0 257 M(# SSH from and to this host)S
0 246.2 M(SSH_PEER_HOST=_SOME_HOST_)S
0 224.6 M(# this is for left. exchange these values for right.)S
0 213.8 M(MY_EXT=$SGW1_EXT)S
0 203 M(MY_INT=$SGW1_INT)S
0 192.2 M(PEER_EXT=$SGW2_EXT)S
0 181.4 M(PEER_INT=$SGW2_INT)S
0 170.6 M(INT_IF=eth1)S
0 159.8 M(EXT_IF=eth0)S
0 149 M(IPSEC_IF=ipsec0)S
0 138.2 M(MY_LAN=$LAN1)S
0 127.4 M(PEER_LAN=$LAN2)S
0 105.8 M($IPC -F)S
0 95 M($IPC -P input DENY)S
0 84.2 M($IPC -P forward DENY)S
0 73.4 M($IPC -P output DENY)S
0 51.8 M(# Loopback traffic)S
0 41 M($IPC -A input -i lo -j ACCEPT)S
0 30.2 M($IPC -A output -i lo -j ACCEPT)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(FreeS/WAN script examples)S
468.652 0 M(188)S
GR
SP
%%Page: 189 218
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 678.2 M(# for IPsec SGW1-SGW2)S
0 667.4 M(## IKE)S
0 656.6 M($IPC -A input -p udp -s $PEER_EXT 500 -d $MY_EXT 500 -i $EXT_IF -j ACCEPT)S
0 645.8 M($IPC -A output -p udp -s $MY_EXT 500 -d $PEER_EXT 500 -i $EXT_IF -j ACCEPT)S
0 635 M(## ESP)S
0 624.2 M($IPC -A input -p 50 -s $PEER_EXT -d $MY_EXT -i $EXT_IF -j ACCEPT)S
0 613.4 M(### we don't need this line ### $IPC -A output -p 50 -s $MY_EXT -d $PEER_EXT -i $EXT_IF -j ACCEPT)S
0 602.6 M(## forward LAN1-LAN2)S
0 591.8 M($IPC -A forward -s $MY_LAN -d $PEER_LAN -i $IPSEC_IF -j ACCEPT)S
0 581 M($IPC -A forward -s $PEER_LAN -d $MY_LAN -i $INT_IF -j ACCEPT)S
0 570.2 M($IPC -A output -s $PEER_LAN -d $MY_LAN -i $INT_IF -j ACCEPT)S
0 559.4 M($IPC -A input -s $PEER_LAN -d $MY_LAN -i $IPSEC_IF -j ACCEPT)S
0 548.6 M($IPC -A input -s $MY_LAN -d $PEER_LAN -i $INT_IF -j ACCEPT)S
0 537.8 M($IPC -A output -s $MY_LAN -d $PEER_LAN -i $IPSEC_IF -j ACCEPT)S
0 516.2 M(# ICMP)S
0 505.4 M(#)S
0 494.6 M(## Dest unreachable)S
0 483.8 M(### from/to Internet)S
0 473 M($IPC -A input -p icmp --icmp-type destination-unreachable -s $ANY -d $MY_EXT -i $EXT_IF -j ACCEPT)S
0 462.2 M($IPC -A output -p icmp --icmp-type destination-unreachable -s $MY_EXT -d $ANY -i $EXT_IF -j ACCEPT)S
0 451.4 M(### from/to Lan)S
0 440.6 M($IPC -A input -p icmp --icmp-type destination-unreachable -s $ANY -d $MY_INT -i $INT_IF -j ACCEPT)S
0 429.8 M($IPC -A output -p icmp --icmp-type destination-unreachable -s $MY_INT -d $ANY -i $INT_IF -j ACCEPT)S
0 419 M(### from/to Peer Lan)S
0 408.2 M($IPC -A input -p icmp --icmp-type destination-unreachable -s $ANY -d $MY_INT -i $IPSEC_IF -j ACCEPT)S
0 397.4 M($IPC -A output -p icmp --icmp-type destination-unreachable -s $MY_INT -d $ANY -i $IPSEC_IF -j ACCEPT)S
0 386.6 M(#)S
0 375.8 M(## Source quench)S
0 365 M(### from/to Internet)S
0 354.2 M($IPC -A input -p icmp --icmp-type source-quench -s $ANY -d $MY_EXT -i $EXT_IF -j ACCEPT)S
0 343.4 M($IPC -A output -p icmp --icmp-type source-quench -s $MY_EXT -d $ANY -i $EXT_IF -j ACCEPT)S
0 332.6 M(### from/to Lan)S
0 321.8 M($IPC -A input -p icmp --icmp-type source-quench -s $ANY -d $MY_INT -i $INT_IF -j ACCEPT)S
0 311 M($IPC -A output -p icmp --icmp-type source-quench -s $MY_INT -d $ANY -i $INT_IF -j ACCEPT)S
0 300.2 M(### from/to Peer Lan)S
0 289.4 M($IPC -A input -p icmp --icmp-type source-quench -s $ANY -d $MY_INT -i $IPSEC_IF -j ACCEPT)S
0 278.6 M($IPC -A output -p icmp --icmp-type source-quench -s $MY_INT -d $ANY -i $IPSEC_IF -j ACCEPT)S
0 267.8 M(#)S
0 257 M(## Parameter problem)S
0 246.2 M(### from/to Internet)S
0 235.4 M($IPC -A input -p icmp --icmp-type parameter-problem -s $ANY -d $MY_EXT -i $EXT_IF -j ACCEPT)S
0 224.6 M($IPC -A output -p icmp --icmp-type parameter-problem -s $MY_EXT -d $ANY -i $EXT_IF -j ACCEPT)S
0 213.8 M(### from/to Lan)S
0 203 M($IPC -A input -p icmp --icmp-type parameter-problem -s $ANY -d $MY_INT -i $INT_IF -j ACCEPT)S
0 192.2 M($IPC -A output -p icmp --icmp-type parameter-problem -s $MY_INT -d $ANY -i $INT_IF -j ACCEPT)S
0 181.4 M(### from/to Peer Lan)S
0 170.6 M($IPC -A input -p icmp --icmp-type parameter-problem -s $ANY -d $MY_INT -i $IPSEC_IF -j ACCEPT)S
0 159.8 M($IPC -A output -p icmp --icmp-type parameter-problem -s $MY_INT -d $ANY -i $IPSEC_IF -j ACCEPT)S
0 149 M(#)S
0 138.2 M(## Time To Live exceeded)S
0 127.4 M(### from/to Internet)S
0 116.6 M($IPC -A input -p icmp --icmp-type time-exceeded -s $ANY -d $MY_EXT -i $EXT_IF -j ACCEPT)S
0 105.8 M($IPC -A output -p icmp --icmp-type time-exceeded -s $MY_EXT -d $ANY -i $EXT_IF -j ACCEPT)S
0 95 M(### to Lan)S
0 84.2 M($IPC -A input -p icmp --icmp-type time-exceeded -s $ANY -d $MY_INT -i $INT_IF -j ACCEPT)S
0 73.4 M($IPC -A output -p icmp --icmp-type time-exceeded -s $MY_INT -d $ANY -i $INT_IF -j ACCEPT)S
0 62.6 M(### to Peer Lan)S
0 51.8 M($IPC -A input -p icmp --icmp-type time-exceeded -s $ANY -d $MY_INT -i $IPSEC_IF -j ACCEPT)S
0 41 M($IPC -A output -p icmp --icmp-type time-exceeded -s $MY_INT -d $ANY -i $IPSEC_IF -j ACCEPT)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(FreeS/WAN script examples)S
468.652 0 M(189)S
GR
SP
%%Page: 190 219
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(# ICMP PINGs)S
0 678.2 M(## from Internet)S
0 667.4 M($IPC -A input -p icmp -s $ANY -d $MY_EXT --icmp-type echo-request  -i $EXT_IF -j ACCEPT)S
0 656.6 M($IPC -A output -p icmp -s $MY_EXT -d $ANY --icmp-type echo-reply  -i $EXT_IF -j ACCEPT)S
0 645.8 M(## from LAN)S
0 635 M($IPC -A input -p icmp -s $ANY -d $MY_INT --icmp-type echo-request -i $INT_IF -j ACCEPT)S
0 624.2 M($IPC -A output -p icmp -s $MY_INT -d $ANY --icmp-type echo-reply  -i $INT_IF -j ACCEPT)S
0 613.4 M(## from Peer LAN)S
0 602.6 M($IPC -A input -p icmp -s $ANY -d $MY_INT --icmp-type echo-request -i $IPSEC_IF -j ACCEPT)S
0 591.8 M($IPC -A output -p icmp -s $MY_INT -d $ANY --icmp-type echo-reply  -i $IPSEC_IF -j ACCEPT)S
0 570.2 M(# SSH)S
0 559.4 M(## from SSH_PEER_HOST)S
0 548.6 M($IPC -A input -p tcp -s $SSH_PEER_HOST -d $MY_EXT 22 -i $EXT_IF -j ACCEPT)S
0 537.8 M($IPC -A output -p tcp \\! -y -s $MY_EXT 22 -d $SSH_PEER_HOST -i $EXT_IF -j ACCEPT)S
0 527 M(## to SSH_PEER_HOST)S
0 516.2 M($IPC -A input -p tcp \\! -y -s $SSH_PEER_HOST 22 -d $MY_EXT -i $EXT_IF -j ACCEPT)S
0 505.4 M($IPC -A output -p tcp -s $MY_EXT -d $SSH_PEER_HOST 22 -i $EXT_IF -j ACCEPT)S
0 494.6 M(## from PEER)S
0 483.8 M($IPC -A input -p tcp -s $PEER_EXT -d $MY_EXT 22 -i $EXT_IF -j ACCEPT)S
0 473 M($IPC -A output -p tcp \\! -y -s $MY_EXT 22 -d $PEER_EXT -i $EXT_IF -j ACCEPT)S
0 462.2 M(## to PEER)S
0 451.4 M($IPC -A input -p tcp \\! -y -s $PEER_EXT 22 -d $MY_EXT -i $EXT_IF -j ACCEPT)S
0 440.6 M($IPC -A output -p tcp -s $MY_EXT -d $PEER_EXT 22 -i $EXT_IF -j ACCEPT)S
0 419 M(# ipxtunnel)S
0 408.2 M($IPC -A input -p udp -s $PEER_INT 2005 -d $MY_INT 2005 -i $IPSEC_IF -j ACCEPT)S
0 397.4 M($IPC -A output -p udp -s $MY_INT 2005 -d $PEER_INT 2005 -i $IPSEC_IF -j ACCEPT)S
0 375.8 M(---------------- end of rc.firewall ----------------------)S
0 354.2 M(To understand this we need to look on this scheme:)S
0 332.6 M(           ++-----------------------<----------------------------+)S
0 321.8 M(           || ipsec0                                             |)S
0 311 M(           \\/                                                    |)S
0 300.2 M( eth0  +--------+    /---------/ yes  /---------/ yes +-----------------------+)S
0 289.4 M(------>| INPUT  |-->/ ?local? /----->/ ?IPsec? /----->| decrypt &decapsulate |)S
0 278.6 M( eth1  +--------+  /---------/      /---------/       +-----------------------+)S
0 267.8 M(                       || no            || no)S
0 257 M(                       \\/               \\/)S
0 246.2 M(                  +----------+      +---------+        +-------+)S
0 235.4 M(                  | routing  |      |  local  |        | local |)S
0 224.6 M(                  | decision |      | deliver |        | send  |)S
0 213.8 M(                  +----------+      +---------+        +-------+)S
0 203 M(                       ||                                 ||)S
0 192.2 M(                       \\/                                 \\/)S
0 181.4 M(                   +---------+                       +----------+)S
0 170.6 M(                   | forward |                       | routing  |)S
0 159.8 M(                   +---------+                       | decision |)S
0 149 M(                       ||                            +----------+)S
0 138.2 M(                       ||                                  ||)S
0 127.4 M(                       ++----------------<-----------------++)S
0 116.6 M(                       ||)S
0 105.8 M(                       \\/)S
0 95 M(                   +--------+ eth0)S
0 84.2 M(                   | OUTPUT | eth1)S
0 73.4 M(                   +--------+ ipsec0)S
0 62.6 M(                       ||)S
0 51.8 M(                       \\/)S
0 41 M(                   /---------/ yes +-----------------------+)S
0 30.2 M(                  / ?IPsec? /----->| encrypt &encapsulate |)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(FreeS/WAN script examples)S
468.652 0 M(190)S
GR
SP
%%Page: 191 220
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(                 /---------/       +-----------------------+)S
0 678.2 M(                      || no                    ||)S
0 667.4 M(                      ||                       ||)S
0 656.6 M(                      ||                       \\/   eth0, eth1)S
0 645.8 M(                      ++-----------------------++-------------->)S
0 624.2 M(This explain how a packet traverse TCP/IP stack in IPsec capable kernel.)S
0 602.6 M(FIX ME, please, if there are any errors)S
0 581 M(Test the new firewall now.)S
0 548.6 M(Now about IPX. I tried 3 programs for tunneling IPX: tipxd, SIB and ipxtunnel)S
0 527 M(tipxd didn't send packets.. :\()S
0 516.2 M(SIB and ipxtunnel worked fine :\))S
0 505.4 M(With ipxtunnel there was a little problem. In sources there are an error.)S
0 483.8 M(--------------------- in main.c ------------------------)S
0 473 M(<       bytes += p.len;)S
0 462.2 M(---)S
0 451.4 M(>       bytes += len;)S
0 440.6 M(--------------------------------------------------------)S
0 419 M(After this FIX everything goes right...)S
0 397.4 M(------------------- /etc/ipxtunnel.conf ----------------)S
0 386.6 M(port    2005)S
0 375.8 M(remote  192.168.101.97    2005)S
0 365 M(interface eth1)S
0 354.2 M(--------------- end of /etc/ipxtunnel.conf -------------)S
0 332.6 M(I use IPX tunnel between .1.1 and .2.10 so we don't need to encrypt nor)S
0 321.8 M(authenticate encapsulated IPX packets, it is done with IPsec.)S
0 300.2 M(If you don't wont to use iproute2 to change source IP you need to use SIB)S
0 289.4 M(\(it is able to bind local address\) or establish tunnel between .0.1 and)S
0 278.6 M(.0.10 \(external IPs, you need to do encryption in the program, but it isn't)S
0 267.8 M(strong\).)S
0 246.2 M(For now I'm using ipxtunnel.)S
0 224.6 M(I think that's all for the moment. If there are any error, please e-mail me: )S
0 213.8 M(poltorak@df.ru . It would be cool if someone puts the scheme of TCP/IP in)S
0 203 M(kernel and firewall example on FreeS/WAN's manual pages.)S
0 181.4 M(PoltoS)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(FreeS/WAN script examples)S
468.652 0 M(191)S
GR
SP
%%Page: 192 221
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(How to configure to use "make check")S
17 FS/F9 SF 0 643.8 M(What is "make check")S
11 FS/F4 SF 0 616.2 M("make check" is a target in the top level makefile. It takes care of running a number of unit and system tests to)S
0 603 M(confirm that FreeSWAN has been compiled correctly, and that no new bugs have been introduced.)S
0 576.6 M(As FreeSWAN contains both kernel and userspace components, doing testing of FreeSWAN requires that the)S
0 563.4 M(kernel be simulated. This is typically difficult to do as a kernel requires that it be run on bare hardware. A)S
0 550.2 M(technology has emerged that makes this simpler. This is User Mode Linux.)S
0 523.8 M(User-Mode Linux is a way to build a Linux kernel such that it can run as a process under another Linux \(or in)S
0 510.6 M(the future other\) kernel. Presently, this can only be done for 2.4 guest kernels. The host kernel can be 2.2 or)S
0 497.4 M(2.4.)S
0 471 M("make check" expects to be able to build User-Mode Linux kernels with FreeSWAN included. To do this it)S
0 457.8 M(needs to have some files downloaded and extracted prior to running "make check". This is described in the)S
0 444.6 M(UML testing document.)S
0 418.2 M(After having run the example in the UML testing document and successfully brought up the four machine)S
0 405 M(combination, you are ready to use "make check")S
17 FS/F9 SF 0 372.6 M(Running "make check")S
11 FS/F4 SF 0 345 M("make check" works by walking the FreeSWAN source tree invoking the "check" target at each node. At)S
0 331.8 M(present there are tests defined only for the )S
/F0 SF (klips)S
/F4 SF ( directory. These tests will use the UML infrastructure to)S
0 318.6 M(test out pieces of the )S
/F0 SF (klips)S
/F4 SF ( code.)S
0 292.2 M(The results of the tests can be recorded. If the environment variable )S
/F0 SF ($REGRESSRESULTS)S
/F4 SF ( is non-null, then)S
0 279 M(the results of each test will be recorded. This can be used as part of a nightly regression testing system, see)S
0 265.8 M(Nightly testing for more details.)S
0 239.4 M("make check" otherwise prints a minimal amount of output for each test, and indicates pass/fail status of each)S
0 226.2 M(test as they are run. Failed tests do not cause failure of the target in the form of exit codes.)S
/F8 SF 0 0 M(How to configure to use "make check")S
468.652 0 M(192)S
GR
SP
%%Page: 193 222
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(How to write a "make check" test)S
17 FS/F9 SF 0 643.8 M(Structure of a test)S
11 FS/F4 SF 0 616.2 M(Each test consists of a set of directories under )S
/F0 SF (testing/)S
/F4 SF (. There are directories for )S
/F0 SF (klips)S
/F4 SF (, )S
/F0 SF (pluto)S
/F4 SF (,)S
/F0 SF 0 603 M(packaging)S
/F4 SF ( and )S
/F0 SF (libraries)S
/F4 SF (. Each directory has a list of tests to run is stored in a file called )S
/F0 SF (TESTLIST)S
/F4 SF ( in)S
0 589.8 M(that directory. e.g. )S
/F0 SF (testing/klips/TESTLIST)S
/F4 SF (.)S
17 FS/F9 SF 0 557.4 M(The TESTLIST)S
11 FS/F4 SF 0 529.8 M(This isn't actually a shell script. It just looks like one. Some tools other than /bin/sh process it. Lines that start)S
0 516.6 M(with # are comments.)S
9 FS/F0 SF 0 492.2 M(# test-kind     directory-containing-test       expectation     [PR#])S
11 FS/F4 SF 0 466.2 M(The first word provides the test type, detailed below.)S
0 439.8 M(The second word is the name of the test to run. This the directory in which the test case is to be found..)S
0 413.4 M(The third word may be one of:)S
/F6 SF 0 387 M(blank/good)S
/F4 SF 36 373.8 M(the test is believed to function, report failure)S
/F6 SF 0 360.6 M(bad)S
/F4 SF 36 347.4 M(the test is known to fail, report unexpected success)S
/F6 SF 0 334.2 M(suspended)S
/F4 SF 36 321 M(the test should not be run)S
0 294.6 M(The fourth word may be a number, which is a PR# if the test is failing.)S
17 FS/F9 SF 0 262.2 M(Test kinds)S
11 FS/F4 SF 0 234.6 M(The test types are:)S
/F6 SF 0 208.2 M(skiptest)S
/F4 SF 36 195 M(means run no test.)S
/F6 SF 0 181.8 M(ctltest)S
/F4 SF 36 168.6 M(means run a single system without input/output.)S
/F6 SF 0 155.4 M(klipstest)S
/F4 SF 36 142.2 M(means run a single system with input/output networks)S
/F6 SF 0 129 M(umlplutotest)S
/F4 SF 36 115.8 M(means run a pair of systems)S
/F6 SF 0 102.6 M(umlXhost)S
/F4 SF 36 89.4 M(run an arbitrary number of systems)S
/F6 SF 0 76.2 M(suntest \(TBD\))S
/F4 SF 36 63 M(means run a quad of east/west/sunrise/sunset)S
/F6 SF 0 49.8 M(roadtest \(TBD\))S
/F4 SF 36 36.6 M(means run a trio of east-sunrise + warrior)S
/F8 SF 0 0 M(How to write a "make check" test)S
468.652 0 M(193)S
GR
SP
%%Page: 194 223
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F6 SF 0 687 M(extrudedtest \(TBD\))S
/F4 SF 36 673.8 M(means run a quad of east-sunrise + warriorsouth + park)S
/F6 SF 0 660.6 M(mkinsttest)S
/F4 SF 36 647.4 M(a test of the "make install" machinery.)S
/F6 SF 0 634.2 M(kernel_test_patch)S
/F4 SF 36 621 M(a test of the "make kernelpatch" machinery.)S
0 594.6 M(Tests marked \(TBD\) have yet to be fully defined.)S
0 568.2 M(Each test directory has a file in it called )S
/F0 SF (testparams.sh)S
/F4 SF (. This file sets a number of environment variables)S
0 555 M(to define the parameters of the test.)S
17 FS/F9 SF 0 522.6 M(Common parameters)S
11 FS/F6 SF 0 495 M(TESTNAME)S
/F4 SF 36 481.8 M(the name of the test \(repeated for checking purposes\))S
/F6 SF 0 468.6 M(TEST_TYPE)S
/F4 SF 36 455.4 M(the type of the test \(repeat of type type above\))S
/F6 SF 0 442.2 M(TESTHOST)S
/F4 SF 36 429 M(the name of the UML machine to run for the test, typically "east" or "west")S
/F6 SF 0 415.8 M(TEST_PURPOSE)S
/F4 SF 36 402.6 M(The purpose of the test is one of:)S
/F6 SF 36 389.4 M(goal)S
/F4 SF 72 376.2 M(The goal purpose is where a test is defined for code that is not yet finished. The test indicates)S
72 363 M(when the goals have in fact been reached.)S
/F6 SF 36 349.8 M(regress)S
/F4 SF 72 336.6 M(This is a test to determine that a previously existing bug has been repaired. This test will)S
72 323.4 M(initially be created to reproduce the bug in isolation, and then the bug will be fixed.)S
/F6 SF 36 310.2 M(exploit)S
/F4 SF 72 297 M(This is a set of packets/programs that causes a vulnerability to be exposed. It is a specific)S
72 283.8 M(variation of the regress option.)S
/F6 SF 0 270.6 M(TEST_GOAL_ITEM)S
/F4 SF 36 257.4 M(in the case of a goal test, this is a reference to the requirements document)S
/F6 SF 0 244.2 M(TEST_PROB_REPORT)S
/F4 SF 36 231 M(in the case of regression test, this the problem report number from GNATS)S
/F6 SF 0 217.8 M(TEST_EXPLOIT_URL)S
/F4 SF 36 204.6 M(in the case of an exploit, this is a URL referencing the paper explaining the origin of the test and the)S
36 191.4 M(origin of exploit software)S
/F6 SF 0 178.2 M(REF_CONSOLE_OUTPUT)S
/F4 SF 36 165 M(a file in the test directory that contains the sanitized console output against which to compare the)S
36 151.8 M(output of the actual test.)S
/F6 SF 0 138.6 M(REF_CONSOLE_FIXUPS)S
/F4 SF 36 125.4 M(a list of scripts \(found in )S
/F0 SF (klips/test/fixups)S
/F4 SF (\) to apply to sanitize the console output of the)S
36 112.2 M(machine under test. These are typically perl, awk or sed scripts that remove things in the kernel output)S
36 99 M(that change each time the test is run and/or compiled.)S
/F6 SF 0 85.8 M(INIT_SCRIPT)S
/F4 SF 36 72.6 M(a file of commands that is fed into the virtual machine's console in single user mode prior to starting)S
36 59.4 M(the tests. This file will usually set up any eroute's and SADB entries that are required for the test.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Common parameters)S
468.652 0 M(194)S
GR
SP
%%Page: 195 224
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(Lines beginning with # are skipped. Blank lines are skipped. Otherwise, a shell prompted is waited for)S
36 673.8 M(each time \(consisting of )S
/F0 SF (\\n#)S
/F4 SF (\) and then the command is sent. Note that the prompt is waited for before)S
36 660.6 M(the command and not after, so completion of the last command in the script is not required. This is)S
36 647.4 M(often used to invoke a program to monitor the system, e.g. )S
/F0 SF (ipsec pf_key)S
/F4 SF (.)S
/F6 SF 0 634.2 M(RUN_SCRIPT)S
/F4 SF 36 621 M(a file of commands that is fed into the virtual machine's console in single user mode, before the)S
36 607.8 M(packets are sent. On single machine tests, this script doesn't provide any more power than)S
36 594.6 M(INIT_SCRIPT, but is implemented for consistency's sake.)S
/F6 SF 0 581.4 M(FINAL_SCRIPT)S
/F4 SF 36 568.2 M(a file of commands that is fed into the virtual machine's console in single user mode after the final)S
36 555 M(packet is sent. Similar to INIT_SCRIPT, above. If not specified, then the single command "halt" is)S
36 541.8 M(sent. If specified, then the script should end with a halt command to nicely shutdown the UML.)S
/F6 SF 0 528.6 M(CONSOLEDIFFDEBUG)S
/F4 SF 36 515.4 M(If set to "true" then the series of console fixups \(see REF_CONSOLE_FIXUPS\) will be output after it)S
36 502.2 M(is constructed. \(It should be set to "false", or unset otherwise\))S
/F6 SF 0 489 M(NETJIGDEBUG)S
/F4 SF 36 475.8 M(If set to "true" then the series of console fixups \(see REF_CONSOLE_FIXUPS\) will be output after it)S
36 462.6 M(is constructed. \(It should be set to "false", or unset otherwise\))S
/F6 SF 0 449.4 M(NETJIGTESTDEBUG)S
/F4 SF 36 436.2 M(If set to "netjig", then the results of talking to the )S
/F0 SF (uml_netjig)S
/F4 SF ( will be printed to stderr during the)S
36 423 M(test. In addition, the jig will be invoked with --debug, which causes it to log its process ID, and wait)S
36 409.8 M(60 seconds before continuing. This can be used if you are trying to debug the )S
/F0 SF (uml_netjig)S
/F4 SF ( program)S
36 396.6 M(itself.)S
/F6 SF 0 383.4 M(HOSTTESTDEBUG)S
/F4 SF 36 370.2 M(If set to "hosttest", then the results of taling to the consoles of the UMLs will be printed to stderr)S
36 357 M(during the test.)S
/F6 SF 0 343.8 M(NETJIGWAITUSER)S
/F4 SF 36 330.6 M(If set to "waituser", then the scripts will wait forever for user input before they shut the tests down.)S
36 317.4 M(Use this is if you are debugging through the kernel.)S
/F6 SF 0 304.2 M(PACKETRATE)S
/F4 SF 36 291 M(A number, in miliseconds \(default is 500ms\) at which packets will be replayed by the netjig.)S
17 FS/F9 SF 0 258.6 M(KLIPStest paramaters)S
11 FS/F4 SF 0 231 M(The klipstest function starts a program \()S
/F0 SF (testing/utils/uml_netjig/uml_netjig)S
/F4 SF (\) to setup a bunch)S
0 217.8 M(of I/O sockets \(that simulate network interfaces\). It then exports the references to these sockets to the)S
0 204.6 M(environment and invokes \(using system\(\)\) a given script. It waits for the script to finish.)S
0 178.2 M(The script invoked \()S
/F0 SF (testing/utils/host-test.tcl)S
/F4 SF (\) is a TCL expect script that arranges to start the)S
0 165 M(UML and configure it appropriately for the test. The configuration is done with the script given above for)S
/Fa SF 0 151.8 M(INIT_SCRIPT)S
/F4 SF (. The TCL script then forks, leaves the UML in the background and exits. uml_netjig)S
0 138.6 M(continues. It then starts listening to the simulated network answering ARPs and inserting packets as)S
0 125.4 M(appropriate.)S
0 99 M(The klipstest function invokes )S
/F0 SF (uml_netjig)S
/F4 SF ( with arguments to capture output from network interface\(s\) and)S
0 85.8 M(insert packets as appropriate:)S
/F6 SF 0 59.4 M(PUB_INPUT)S
/F4 SF 36 46.2 M(a pcap file to feed in on the public \(encrypted\) interface. \(typically, eth1\))S
/F6 SF 0 33 M(PRIV_INPUT)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(KLIPStest paramaters)S
468.652 0 M(195)S
GR
SP
%%Page: 196 225
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(a pcap file to feed in on the private \(plain-text\) interface \(typically, eth0\).)S
/F6 SF 0 673.8 M(REF_PUB_OUTPUT)S
/F4 SF 36 660.6 M(a text file containing tcpdump output. Packets on the public \(eth1\) interface are captured to a pcap file)S
36 647.4 M(by )S
/F0 SF (uml_netjig)S
/F4 SF (. The klipstest function then uses tcpdump on the file to produce text output, which)S
36 634.2 M(is compared to the file given.)S
/F6 SF 0 621 M(REF_PUB_FILTER)S
/F4 SF 36 607.8 M(a program that will filter the TCPDUMP output to do further processing. Defaults to "cat".)S
/F6 SF 0 594.6 M(REF_PRIV_OUTPUT)S
/F4 SF 36 581.4 M(a text file containing tcpdump output. Packets on the private \(eth0\) interface are captured and)S
36 568.2 M(compared after conversion by tcpdump, as with)S
/Fa SF ( REFPUBOUTPUT)S
/F4 SF (.)S
/F6 SF 0 555 M(REF_PRIV_FILTER)S
/F4 SF 36 541.8 M(a program that will filter the TCPDUMP output to do further processing. Defaults to "cat".)S
/F6 SF 0 528.6 M(EXITONEMPTY)S
/F4 SF 36 515.4 M(a flag for )S
/F0 SF (uml_netjig)S
/F4 SF (. It should contain "--exitonempty" of uml_netjig should exit when all of the)S
36 502.2 M(input \()S
/Fa SF (PUBINPUT)S
/F4 SF (,)S
/Fa SF (PRIVINPUT)S
/F4 SF (\) packets have been injected.)S
/F6 SF 0 489 M(ARPREPLY)S
/F4 SF 36 475.8 M(a flag for )S
/F0 SF (uml_netjig)S
/F4 SF (. It should contain "--arpreply" if )S
/F0 SF (uml_netjig)S
/F4 SF ( should reply to ARP)S
36 462.6 M(requests. One will typically set this to avoid having to fudge the ARP cache manually.)S
/F6 SF 0 449.4 M(TCPDUMPFLAGS)S
/F4 SF 36 436.2 M(a set of flags for the tcpdump used when converting captured output. Typical values will include "-n")S
36 423 M(to turn off DNS, and often "-E" to set the decryption key \(tcpdump 3.7.1 and higher only\) for ESP)S
36 409.8 M(packets. The "-t" flag \(turn off timestamps\) is provided automatically)S
/F6 SF 0 396.6 M(NETJIG_EXTRA)S
/F4 SF 36 383.4 M(additional comments to be sent to the netjig. This may arrange to record or create additional networks,)S
36 370.2 M(or may toggle options.)S
17 FS/F9 SF 0 337.8 M(mkinsttest paramaters)S
11 FS/F4 SF 0 310.2 M(The basic concept of the )S
/F0 SF (mkinsttest)S
/F4 SF ( test type is that it performs a "make install" to a temporary)S
0 297 M($DESTDIR. The resulting tree can then be examined to determine if it was done properly. The files can be)S
0 283.8 M(uninstalled to determine if the file list was correct, or the contents of files can be examined more precisely.)S
/F6 SF 0 257.4 M(INSTALL_FLAGS)S
/F4 SF 36 244.2 M(If set, then an install will be done. This provides the set of flags to provide for the install. The target to)S
36 231 M(be used \(usually "install"\) must be among the flags.)S
/F6 SF 0 217.8 M(POSTINSTALL_SCRIPT)S
/F4 SF 36 204.6 M(If set, a script to run after initial "make install". Two arguments are provided: an absolute path to the)S
36 191.4 M(root of the FreeSWAN src tree, and an absolute path to the temporary installation area.)S
/F6 SF 0 178.2 M(INSTALL2_FLAGS)S
/F4 SF 36 165 M(If set, a second install will be done using these flags. Similarly to INSTALL_FLAGS, the target must)S
36 151.8 M(be among the flags.)S
/F6 SF 0 138.6 M(UNINSTALL_FLAGS)S
/F4 SF 36 125.4 M(If set, an uninstall will be done using these flags. Similarly to INSTALL_FLAGS, the target \(usually)S
36 112.2 M("uninstall"\) must be among the flags.)S
/F6 SF 0 99 M(REF_FIND_f_l_OUTPUT)S
/F4 SF 36 85.8 M(If set, a )S
/F0 SF (find $ROOT \( -type f -or -type -l \))S
/F4 SF ( will be done to get a list of a real files)S
36 72.6 M(and symlinks. The resulting file will be compared to the file listed by this option.)S
/F6 SF 0 59.4 M(REF_FILE_CONTENTS)S
/F4 SF 36 46.2 M(If set, it should point to a file containing records for the form:)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(mkinsttest paramaters)S
468.652 0 M(196)S
GR
SP
%%Page: 197 226
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 46.8 689 M(reffile)S
100.8 689 M(samplefile)S
11 FS/F4 SF 36 663 M(one record per line. A diff between the provided reference file, and the sample file \(located in the)S
36 649.8 M(temporary installation root\) will be done for each record.)S
17 FS/F9 SF 0 617.4 M(rpm_build_install_test paramaters)S
11 FS/F4 SF 0 589.8 M(The )S
/F0 SF (rpm_build_install_test)S
/F4 SF ( type is to verify that the proper packing list is produced by "make rpm",)S
0 576.6 M(and that the mechanisms for building the kernel modules produce consistent results.)S
/F6 SF 0 550.2 M(RPM_KERNEL_SOURCE)S
/F4 SF 36 537 M(Point to an extracted copy of the RedHat kernel source code. Variables from the environment may be)S
36 523.8 M(used.)S
/F6 SF 0 510.6 M(REF_RPM_CONTENTS)S
/F4 SF 36 497.4 M(This is a file containing one record per line. Each record consists of a RPM name \(may contain)S
36 484.2 M(wildcards\) and a filename to compare the contents to. The RPM will be located and a file list will be)S
36 471 M(produced with rpm2cpio.)S
17 FS/F9 SF 0 438.6 M(libtest paramaters)S
11 FS/F4 SF 0 411 M(The libtest test is for testing library routines. The library file is expected to provided an )S
/F0 SF (#ifdef)S
/F4 SF ( by the name)S
0 397.8 M(of)S
/Fa SF ( library)S
/F4 SF (. The libtest type invokes the C compiler to compile this file, links it against )S
/F0 SF (libfreeswan.a)S
/F4 SF ( \(to)S
0 384.6 M(resolve any other dependancies\) and runs the test with the )S
/F0 SF (-r)S
/F4 SF ( argument to invoke a regression test.)S
0 358.2 M(The library test case is expected to do a self-test, exiting with status code 0 if everything is okay, and with)S
0 345 M(non-zero otherwise. A core dump \(exit code greater than 128\) is noted specifically.)S
0 318.6 M(Unlike other tests, there are no subdirectories required, or other parameters to set.)S
17 FS/F9 SF 0 286.2 M(umlplutotest paramaters)S
11 FS/F4 SF 0 258.6 M(The umlplutotest function starts a pair of user mode line processes. This is a 2-host version of umlXhost. The)S
0 245.4 M("EAST" and "WEST" slots are defined.)S
17 FS/F9 SF 0 213 M(umlXhost parameters)S
11 FS/F4 SF 0 185.4 M(The umlXtest function starts an arbitrary number of user mode line processes.)S
0 159 M(The script invoked \()S
/F0 SF (testing/utils/Xhost-test.tcl)S
/F4 SF (\) is a TCL expect script that arranges to start)S
0 145.8 M(each UML and configure it appropriately for the test. It then starts listening \(using uml_netjig\) to the)S
0 132.6 M(simulated network answering ARPs and inserting packets as appropriate.)S
0 106.2 M(umlXtest has a series of slots, each of which should be filled by a host. The list of slots is controlled by the)S
0 93 M(variable, XHOST_LIST. This variable should be set to a space seperated list of slots. The former umlplutotest)S
0 79.8 M(is now implemented as a variation of the umlXhost test, with XHOST_LIST="EAST WEST".)S
0 53.4 M(For each host slot that is defined, a series of variables should be filled in, defining what configuration scripts)S
0 40.2 M(to use for that host.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(rpm_build_install_test paramaters)S
468.652 0 M(197)S
GR
SP
%%Page: 198 227
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(The following are used to control the console input and output to the system. Where the string ${host} is)S
0 673.8 M(present, the host slot should be filled in. I.e. for the two host system with XHOST_LIST="EAST WEST",)S
0 660.6 M(then the variables: EAST_INIT_SCRIPT and WEST_INIT_SCRIPT will exist.)S
/F6 SF 0 634.2 M(${host}HOST)S
/F4 SF 36 621 M(The name of the UML host which will fill this slot)S
/F6 SF 0 607.8 M(${host}_INIT_SCRIPT)S
/F4 SF 36 594.6 M(a file of commands that is fed into the virtual machine's console in single user mode prior to starting)S
36 581.4 M(the tests. This file will usually set up any eroute's and SADB entries that are required for the test.)S
36 568.2 M(Similar to INIT_SCRIPT, above.)S
/F6 SF 0 555 M(${host}_RUN_SCRIPT)S
/F4 SF 36 541.8 M(a file of commands that is fed into the virtual machine's console in single user mode, before the)S
36 528.6 M(packets are sent. This set of commands is run after all of the virtual machines are initialized. I.e. after)S
36 515.4 M(EAST_INIT_SCRIPT)S
/F5 SF ( AND)S
/F4 SF ( WEST_INIT_SCRIPT. This script can therefore do things that require)S
36 502.2 M(that all machines are properly configured.)S
/F6 SF 0 489 M(${host}_RUN2_SCRIPT)S
/F4 SF 36 475.8 M(a file of commands that is fed into the virtual machine's console in single user mode, after the packets)S
36 462.6 M(are sent. This set of commands is run before any of the virtual machines have been shut down. \(I.e.)S
36 449.4 M(before EAST_FINAL_SCRIPT)S
/F5 SF ( AND)S
/F4 SF ( WEST_FINAL_SCRIPT.\) This script can therefore catch)S
36 436.2 M(post-activity status reports.)S
/F6 SF 0 423 M(${host}_FINAL_SCRIPT)S
/F4 SF 36 409.8 M(a file of commands that is fed into the virtual machine's console in single user mode after the final)S
36 396.6 M(packet is sent. Similar to INIT_SCRIPT, above. If not specified, then the single command "halt" is)S
36 383.4 M(sent. Note that when this script is run, the other virtual machines may already have been killed. If)S
36 370.2 M(specified, then the script should end with a halt command to nicely shutdown the UML.)S
/F6 SF 0 357 M(REF_${host}_CONSOLE_OUTPUT)S
/F4 SF 36 343.8 M(Similar to REF_CONSOLE_OUTPUT, above.)S
0 317.4 M(Some additional flags apply to all hosts:)S
/F6 SF 0 291 M(REF_CONSOLE_FIXUPS)S
/F4 SF 36 277.8 M(a list of scripts \(found in )S
/F0 SF (klips/test/fixups)S
/F4 SF (\) to apply to sanitize the console output of the)S
36 264.6 M(machine under test. These are typically perl, awk or sed scripts that remove things in the kernel output)S
36 251.4 M(that change each time the test is run and/or compiled.)S
0 225 M(In addition to input to the console, the networks may have input fed to them:)S
/F6 SF 0 198.6 M(EAST_INPUT/WEST_INPUT)S
/F4 SF 36 185.4 M(a pcap file to feed in on the private network side of each network. The "EAST" and "WEST" here)S
36 172.2 M(refer to the networks, not the hosts.)S
/F6 SF 0 159 M(REF_PUB_FILTER)S
/F4 SF 36 145.8 M(a program that will filter the TCPDUMP output to do further processing. Defaults to "cat".)S
/F6 SF 0 132.6 M(REF_EAST_FILTER/REF_WEST_FILTER)S
/F4 SF 36 119.4 M(a program that will filter the TCPDUMP output to do further processing. Defaults to "cat".)S
36 106.2 M(<)S
/F6 SF 0 93 M(TCPDUMPFLAGS)S
/F4 SF 36 79.8 M(a set of flags for the tcpdump used when converting captured output. Typical values will include "-n")S
36 66.6 M(to turn off DNS, and often "-E" to set the decryption key \(tcpdump 3.7.1 and higher only\) for ESP)S
36 53.4 M(packets. The "-t" flag \(turn off timestamps\) is provided automatically)S
/F6 SF 0 40.2 M(REF_EAST_OUTPUT/REF_WEST_OUTPUT)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(rpm_build_install_test paramaters)S
468.652 0 M(198)S
GR
SP
%%Page: 199 228
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(a text file containing tcpdump output. Packets on the private \(eth0\) interface are captured and)S
36 673.8 M(compared after conversion by tcpdump, as with)S
/Fa SF ( REF_PUB_OUTPUT)S
/F4 SF (.)S
36 660.6 M(There are two additional environment variables that may be set on the command line:)S
/F6 SF 36 634.2 M(NETJIGVERBOSE=verbose export NETJIGVERBOSE)S
/F4 SF 72 621 M(If set, then the test output will be "chatty", and let you know what commands it is running,)S
72 607.8 M(and as packets are sent. Without it set, the output is limited to success/failure messages.)S
/F6 SF 36 594.6 M(NETJIGTESTDEBUG=netjig export NETJIGTESTDEBUG)S
/F4 SF 72 581.4 M(This will enable debugging of the communication with uml_netjig, and turn on debugging in)S
72 568.2 M(this utility. This does not imply NETJIGVERBOSE.)S
/F6 SF 0 555 M(HOSTTESTDEBUG=hosttest export HOSTTESTDEBUG)S
/F4 SF 36 541.8 M(This will show all interactions with the user-mode-linux consoles)S
17 FS/F9 SF 0 509.4 M(kernel_patch_test paramaters)S
11 FS/F4 SF 0 481.8 M(The kernel_patch_test function takes some kernel source, copies it with lndir, and then applies the patch as)S
0 468.6 M(produced by "make kernelpatch".)S
0 442.2 M(The following are used to control the input and output to the system:)S
/F6 SF 0 415.8 M(KERNEL_NAME)S
/F4 SF 36 402.6 M(the kernel name, typically something like "linus" or "rh")S
/F6 SF 0 389.4 M(KERNEL_VERSION)S
/F4 SF 36 376.2 M(the kernel version number, as in "2.2" or "2.4".)S
/F6 SF 0 363 M(KERNEL_${KERNEL_NAME}${KERNEL_VERSION}_SRC)S
/F4 SF 36 349.8 M(This variable should set in the environment, probably in ~/freeswan-regress-env.sh. Examples of this)S
36 336.6 M(variables would be KERNEL_LINUS2_0_SRC or KERNEL_RH7_3_SRC. This variable should)S
36 323.4 M(point to an extracted copy of the kernel source in question.)S
/F6 SF 0 310.2 M(REF_PATCH_OUTPUT)S
/F4 SF 36 297 M(a copy of the patch output to compare against)S
/F6 SF 0 283.8 M(KERNEL_PATCH_LEAVE_SOURCE)S
/F4 SF 36 270.6 M(If set to a non-empty string, then the patched kernel source is not removed at the end of the test. This)S
36 257.4 M(will typically be set in the environment while debugging.)S
17 FS/F9 SF 0 225 M(module_compile paramaters)S
11 FS/F4 SF 0 197.4 M(The module_compile test attempts to build the KLIPS module against a given set of kernel source. This is also)S
0 184.2 M(done by the RPM tests, but in a very specific manner.)S
0 157.8 M(There are two variations of this test - one where the kernel either doesn't need to be configured, or is already)S
0 144.6 M(done, and tests were there is a local configuration file.)S
0 118.2 M(Where the kernel doesn't need to be configured, the kernel source that is found is simply used. It may be a)S
0 105 M(RedHat-style kernel, where one can cause it to configure itself via rhconfig.h-style definitions. Or, it may)S
0 91.8 M(just be a kernel tree that has been configured.)S
0 65.4 M(If the variable KERNEL_CONFIG_FILE is set, then a new directory is created for the kernel source. It is)S
0 52.2 M(populated with lndir\(1\). The referenced file is then copied in as .config, and "make oldconfig" is used to)S
0 39 M(configure the kernel. This resulting kernel is then used as the reference source.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(kernel_patch_test paramaters)S
468.652 0 M(199)S
GR
SP
%%Page: 200 229
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(In all cases, the kernel source is found the same was for the kernelpatch test, i.e. via)S
0 673.8 M(KERNEL_VERSION/KERNEL_NAME and)S
0 660.6 M(KERNEL_${KERNEL_NAME}${KERNEL_VERSION}_SRC.)S
0 634.2 M(Once there is kernel source, the module is compiled using the top-level "make module" target.)S
0 607.8 M(The test is considered successful if an executable is found in OUTPUT/module/ipsec.o at the end of the test.)S
/F6 SF 0 581.4 M(KERNEL_NAME)S
/F4 SF 36 568.2 M(the kernel name, typically something like "linus" or "rh")S
/F6 SF 0 555 M(KERNEL_VERSION)S
/F4 SF 36 541.8 M(the kernel version number, as in "2.2" or "2.4".)S
/F6 SF 0 528.6 M(KERNEL_${KERNEL_NAME}${KERNEL_VERSION}_SRC)S
/F4 SF 36 515.4 M(This variable should set in the environment, probably in ~/freeswan-regress-env.sh. Examples of this)S
36 502.2 M(variables would be KERNEL_LINUS2_0_SRC or KERNEL_RH7_3_SRC. This variable should)S
36 489 M(point to an extracted copy of the kernel source in question.)S
/F6 SF 0 475.8 M(KERNEL_CONFIG_FILE)S
/F4 SF 36 462.6 M(The configuration file for the kernel.)S
/F6 SF 0 449.4 M(KERNEL_PATCH_LEAVE_SOURCE)S
/F4 SF 36 436.2 M(If set to a non-empty string, then the configured kernel source is not removed at the end of the test.)S
36 423 M(This will typically be set in the environment while debugging.)S
/F6 SF 0 409.8 M(MODULE_DEF_INCLUDE)S
/F4 SF 36 396.6 M(The include file that will be used to configure the KLIPS module, and possibly the kernel source.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(kernel_patch_test paramaters)S
468.652 0 M(200)S
GR
SP
%%Page: 201 230
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(Current pitfalls)S
11 FS/F6 SF 0 649.8 M("tcpdump dissector" not available.)S
/F4 SF 36 636.6 M(This is a non-fatal warning. If uml_netjig is invoked with the -t option, then it will attempt to use)S
36 623.4 M(tcpdump's dissector to decode each packet that it processes. The dissector is presently not available,)S
36 610.2 M(so this option it normally turned off at compile time. The dissector library will be released with)S
36 597 M(tcpdump version 4.0.)S
/F8 SF 0 0 M(Current pitfalls)S
468.652 0 M(201)S
GR
SP
%%Page: 202 231
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(User-Mode-Linux Testing guide)S
11 FS/F4 SF 0 649.8 M(User mode linux is a way to compile a linux kernel such that it can run as a process in another linux system)S
0 636.6 M(\(potentially as a *BSD or Windows process later\). See http://user-mode-linux.sourceforge.net/)S
0 610.2 M(UML is a good platform for testing and experimenting with FreeS/WAN. It allows several network nodes to)S
0 597 M(be simulated on a single machine. Creating, configuring, installing, monitoring, and controling these nodes is)S
0 583.8 M(generally easier and easier to script with UML than real hardware.)S
0 557.4 M(You'll need about 500Mb of disk space for a full sunrise-east-west-sunset setup. You can possibly get this)S
0 544.2 M(down by 130Mb if you remove the sunrise/sunset kernel build. If you just want to run, then you can even)S
0 531 M(remove the east/west kernel build.)S
0 504.6 M(Nothing need be done as super user. In a couple of steps, we note where super user is required to install)S
0 491.4 M(commands in system-wide directories, but ~/bin could be used instead. UML seems to use a system-wide)S
0 478.2 M(/tmp/uml directory so different users may interfere with one another. Later UMLs use ~/.uml instead, so)S
0 465 M(multiple users running UML tests should not be a problem, but note that a single user running the UML tests)S
0 451.8 M(will only be able run one set. Further, UMLs sometimes get stuck and hang around. These "zombies" \(most)S
0 438.6 M(will actually be in the "T" state in the process table\) will interfere with subsequent tests.)S
17 FS/F9 SF 0 406.2 M(Preliminary Notes on BIND)S
11 FS/F4 SF 0 378.6 M(As of 2003/3/1, the Light-Weight Resolver is used by pluto. This requires that BIND9 be running. It also)S
0 365.4 M(requires that BIND9 development libraries be present in the build environment. The DNSSEC code is only)S
0 352.2 M(truly functional in BIND9 snapshots. The library code could be 9.2.2, we believe. We are using BIND9)S
0 339 M(20021115 snapshot code from ftp://ftp.isc.org/isc/bind9/snapshots.)S
0 312.6 M(FreeS/WAN may well require a newer BIND than is on your system. Many distributions have moved to)S
0 299.4 M(BIND9.2.2 recently due to a security advisory. BIND is five components.)S
36 273 M(named)S
25 273 M(1. )S
36 259.8 M(dnssec-*)S
25 259.8 M(2. )S
36 246.6 M(client side resolver libraries)S
25 246.6 M(3. )S
36 233.4 M(client side utility libraries I thought there were lib and named parts to dnsssec...)S
25 233.4 M(4. )S
36 220.2 M(dynamic DNS update utilities)S
25 220.2 M(5. )S
0 193.8 M(The only piece that we need for *building* is #4. That's the only part that has to be on the build host. What is)S
0 180.6 M(the difference between resolver and util libs? If you want to edit testing/baseconfigs/all/etc/bind, you'll need a)S
0 167.4 M(snapshot version. The resolver library contains the resolver. FreeS/WAN has its own copy of that in)S
0 154.2 M(lib/liblwres.)S
17 FS/F9 SF 0 121.8 M(Steps to Install UML for FreeS/WAN)S
11 FS/F4 SF 36 94.2 M(Get the following files:)S
72 81 M(from http://www.sandelman.ottawa.on.ca/freeswan/uml/ umlfreeroot-15.1.tar.gz \(or highest)S
72 67.8 M(numbered one\). This is a debian potato root file system. You can use this even on a Redhat)S
72 54.6 M(host, as it has the newer GLIBC2.2 libraries as well.)S
61.616 81 M(a. )S
72 41.4 M(From ftp://ftp.xs4all.nl/pub/crypto/freeswan/ a snapshot or release \(1.92 or better\))S
61 41.4 M(b. )S
25 94.2 M(1. )S
/F8 SF 0 0 M(User-Mode-Linux Testing guide)S
468.652 0 M(202)S
GR
SP
%%Page: 203 232
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 72 687 M(From a http://www.kernel.org mirror, the virgin 2.4.19 kernel. Please realize that we have)S
72 673.8 M(defaults in our tree for kernel configuration. We try to track the latest UML kernels. If you)S
72 660.6 M(use a newer kernel, you may have faults in the kernel build process. You can see what the)S
72 647.4 M(latest that is being regularly tested by visiting freeswan-regress-env.sh.)S
61.616 687 M(c. )S
72 634.2 M(Get http://ftp.nl.linux.org/uml/ uml-patch-2.4.19-47.bz2 or the one associated with your)S
72 621 M(kernel. As of 2003/03/05, uml-patch-2.4.19-47.bz2 works for us.)S
/F7 SF ( More recent versions of)S
72 607.8 M(the patch have not been tested by us.)S
/F4 SF 61 634.2 M(d. )S
72 594.6 M(You'll probably want to visit http://user-mode-linux.sourceforge.net and get the UML)S
72 581.4 M(utilities. These are not needed for the build or interactive use \(but recommended\). They are)S
72 568.2 M(necessary for the regression testing procedures used by "make check". We currently use)S
72 555 M(uml_utilities_20020212.tar.bz2.)S
61.616 594.6 M(e. )S
72 541.8 M(You need tcpdump version 3.7.1 or better. This is newer than the version included in most)S
72 528.6 M(LINUX distributions. You can check the version of an installed tcpdump with the --version)S
72 515.4 M(flag. If you need a newer tcpdump fetch both tcpdump and libpcap source tar files from)S
72 502.2 M(http://www.tcpdump.org/ or a mirror.)S
62.837 541.8 M(f. )S
36 489 M(Pick a suitable place, and extract the following files:)S
72 475.8 M(2.4.19 kernel. For instance:)S
9 FS/F0 SF 77.4 451.4 M(           cd /c2/kernel)S
72 440.6 M(           tar xzvf ../download/pub/linux/kernel/v2.4/linux-2.4.19.tar.gz)S
11 FS/F4 SF 61.616 475.8 M(a. )S
72 417 M(extract the umlfreeroot file)S
9 FS/F0 SF 77.4 392.6 M(           mkdir -p /c2/user-mode-linux/basic-root)S
72 381.8 M(           cd /c2/user-mode-linux/basic-root)S
72 371 M(           tar xzvf ../download/umlfreeroot-15.1.tar.gz)S
11 FS/F4 SF 61 417 M(b. )S
72 347.4 M(FreeSWAN itself \(or checkout "all" from CVS\))S
9 FS/F0 SF 77.4 323 M(           mkdir -p /c2/freeswan/sandbox)S
72 312.2 M(           cd /c2/freeswan/sandbox)S
72 301.4 M(           tar xzvf ../download/snapshot.tar.gz)S
11 FS/F4 SF 61.616 347.4 M(c. )S
25 489 M(2. )S
36 277.8 M(If you need to build a newer tcpdump:)S
72 264.6 M(Make sure you have OpenSSL installed -- it is needed for cryptographic routines.)S
/Fc SF 60.967 264.6 M(\250 )S
/F4 SF 72 251.4 M(Unpack libpcap and tcpdump source in parallel directories \(the tcpdump build procedures)S
72 238.2 M(look for libpcap next door\).)S
/Fc SF 60.967 251.4 M(\250 )S
/F4 SF 72 225 M(Change directory into the libpcap source directory and then build the library:)S
9 FS/F0 SF 77.4 200.6 M(       ./configure)S
72 189.8 M(        make)S
11 FS/Fc SF 60.967 225 M(\250 )S
/F4 SF 72 166.2 M(Change into the tcpdump source directory, build tcpdump, and install it.)S
9 FS/F0 SF 77.4 141.8 M(       ./configure)S
72 131 M(        make)S
72 120.2 M(        # Need to be superuser to install in system directories.)S
72 109.4 M(        # Installing in ~/bin would be an alternative.)S
72 98.6 M(        su -c "make install")S
11 FS/Fc SF 60.967 166.2 M(\250 )S
/F4 SF 25 277.8 M(3. )S
36 75 M(If you need the uml utilities, unpack them somewhere then build and install them:)S
9 FS/F0 SF 41.4 50.6 M(       cd tools)S
36 39.8 M(        make all)S
36 29 M(        # Need to be superuser to install in system directories.)S
11 FS/F4 SF 25 75 M(4. )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(User-Mode-Linux Testing guide)S
468.652 0 M(203)S
GR
SP
%%Page: 204 233
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 36 689 M(        # Installing in ~/bin would be an alternative.)S
36 678.2 M(        su -c "make install BIN_DIR=/usr/local/bin")S
11 FS/F4 SF 36 654.6 M(set up the configuration file)S
/F0 SF 72 641.4 M(cd /c2/freeswan/sandbox/freeswan-1.97/testing/utils)S
/Fc SF 60.967 641.4 M(\250 )S
/F4 SF 72 628.2 M(copy umlsetup-sample.sh to ../../umlsetup.sh: )S
/F0 SF ( cp umlsetup-sample.sh)S
72 615 M(../../umlsetup.sh)S
/Fc SF 60.967 628.2 M(\250 )S
/F4 SF 72 601.8 M(open up ../../umlsetup.sh in your favorite editor.)S
/Fc SF 60.967 601.8 M(\250 )S
/F4 SF 72 588.6 M(change POOLSPACE= to point to the place with at least 500Mb of disk. Best if it is on the)S
72 575.4 M(same partition as the "umlfreeroot" extraction, as it will attempt to use hard links if possible)S
72 562.2 M(to save disk space.)S
/Fc SF 60.967 588.6 M(\250 )S
/F4 SF 72 549 M(Set TESTINGROOT if you intend to run the script outside of the sandbox/snapshot/release)S
72 535.8 M(directory. Otherwise, it will configure itself.)S
/Fc SF 60.967 549 M(\250 )S
/F4 SF 72 522.6 M(KERNPOOL should point to the directory with your 2.4.19 kernel tree. This tree should be)S
72 509.4 M(unconfigured! This is the directory you used in step 2a.)S
/Fc SF 60.967 522.6 M(\250 )S
/F4 SF 72 496.2 M(UMLPATCH should point at the bz2 file you downloaded at 1d. If using a kernel that already)S
72 483 M(includes the patch, set this to /dev/null.)S
/Fc SF 60.967 496.2 M(\250 )S
/F4 SF 72 469.8 M(FREESWANDIR should point at the directory where you unpacked the snapshot/release.)S
72 456.6 M(Include the "freeswan-snap2001sep16b" or whatever in it. If you are running from CVS, then)S
72 443.4 M(you point at the directory where top, klips, etc. are. The script will fix up the directory so that)S
72 430.2 M(it can be used.)S
/Fc SF 60.967 469.8 M(\250 )S
/F4 SF 72 417 M(BASICROOT should be set to the directory used in 2b, or to the directory that you created)S
72 403.8 M(with RPMs.)S
/Fc SF 60.967 417 M(\250 )S
/F4 SF 72 390.6 M(SHAREDIR should be set to the directory used in 2c, to /usr/share for Debian potato users, or)S
72 377.4 M(to $BASICROOT/usr/share.)S
/Fc SF 60.967 390.6 M(\250 )S
/F4 SF 25 654.6 M(5. )S
9 FS/F0 SF 36 366.2 M(cd $TESTINGROOT/utils)S
36 355.4 M(sh make-uml.sh)S
11 FS/F4 SF 36 329.4 M(It will grind for awhile. If there are errors it will bail. If so, run it under "script" and send the output to)S
36 316.2 M(bugs@lists.freeswan.org.)S
25 364.2 M(6. )S
36 303 M(You will have a bunch of stuff under $POOLSPACE. Open four xterms:)S
9 FS/F0 SF 36 278.6 M(    for i in sunrise sunset east west)S
36 267.8 M(    do)S
36 257 M(        xterm -name $i -title $i -e $POOLSPACE/$i/start.sh &    done)S
11 FS/F4 SF 25 303 M(7. )S
36 244.2 M(Login as root. Password is "root" \(Note, these virtual machines are networked together, but are not)S
36 231 M(configured to talk to the rest of the world.\))S
25 244.2 M(8. )S
36 217.8 M(verify that pluto started on east/west, run "ipsec look")S
25 217.8 M(9. )S
36 204.6 M(login to sunrise. run "ping sunset")S
19.5 204.6 M(10. )S
36 191.4 M(login to west. run "tcpdump -p -i eth1 -n" \(tcpdump must be version 3.7.1 or newer\))S
19.5 191.4 M(11. )S
36 178.2 M(Closing a console xterm will shut down that UML.)S
19.5 178.2 M(12. )S
36 165 M(You can "make check", if you want to. It is run from /c2/freeswan/sandbox/freeswan-1.97.)S
19.5 165 M(13. )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(User-Mode-Linux Testing guide)S
468.652 0 M(204)S
GR
SP
%%Page: 205 234
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(Debugging the kernel with GDB)S
11 FS/F4 SF 0 649.8 M(With User-Mode-Linux, you can debug the kernel using GDB. See)S
0 636.6 M(http://user-mode-linux.sourceforge.net/debugging.html.)S
0 610.2 M(Typically, one will want to address a test case for a failing situation. Running GDB from Emacs, or from other)S
0 597 M(front ends is possible. First start GDB.)S
0 570.6 M(Tell it to open the UMLPOOL/swan/linux program.)S
0 544.2 M(Note the PID of GDB:)S
9 FS/F0 SF 0 519.8 M(marajade-[projects/freeswan/mgmt/planning] mcr 1029 %ps ax | grep gdb)S
0 509 M( 1659 pts/9    SN     0:00 /usr/bin/gdb -fullname -cd /mara4/freeswan/kernpatch/UMLPOOL/swan/ linux)S
11 FS/F4 SF 0 483 M(Set the following in the environment:)S
9 FS/F0 SF 0 458.6 M(UML_east_OPT="debug gdb-pid=1659")S
11 FS/F4 SF 0 432.6 M(Then start the user-mode-linux in the test scheme you wish:)S
9 FS/F0 SF 0 408.2 M(marajade-[kernpatch/testing/klips/east-icmp-02] mcr 1220 %../../utils/runme.sh)S
11 FS/F4 SF 0 382.2 M(The user-mode-linux will stop on boot, giving you a chance to attach to the process:)S
9 FS/F0 SF 0 357.8 M(\(gdb\) file linux)S
0 347 M(Reading symbols from linux...done.)S
0 336.2 M(\(gdb\) attach 1)S
0 325.4 M(Attaching to program: /mara4/freeswan/kernpatch/UMLPOOL/swan/linux, process 1)S
0 314.6 M(0xa0118bc1 in kill \(\) at hostfs_kern.c:770)S
11 FS/F4 SF 0 288.6 M(At this point, break points should be created as appropriate.)S
17 FS/F9 SF 0 256.2 M(Other notes about debugging)S
11 FS/F4 SF 0 228.6 M(If you are running a standard test, after all the packets are sent, the UML will be shutdown. This can cause)S
0 215.4 M(problems, because the UML may get terminated while you are debugging.)S
0 189 M(The environment variable )S
/F0 SF (NETJIGWAITUSER)S
/F4 SF ( can be set to "waituser". If so, then the testing system will)S
0 175.8 M(prompt before exiting the test.)S
0 149.4 M(The environment variable )S
/F0 SF (UML_GETTY)S
/F4 SF ( if set, will cause each UML to spawn a getty on /dev/tty1, and will)S
0 136.2 M(wait for it to exit before continuing.)S
/F8 SF 0 0 M(Debugging the kernel with GDB)S
468.652 0 M(205)S
GR
SP
%%Page: 206 235
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(User-Mode-Linux mysteries)S
11 FS/F4 SF 36 649.8 M(running more than one UML of the same name \(e.g. "west"\) can cause problems.)S
/Fc SF 28.19 649.8 M(\267 )S
/F4 SF 36 636.6 M(running more than one UML from the same root file system is not a good idea.)S
/Fc SF 28.19 636.6 M(\267 )S
/F4 SF 36 623.4 M(all this means that running "make check" twice on the same machine is probably not a good idea.)S
/Fc SF 28.19 623.4 M(\267 )S
/F4 SF 36 610.2 M(occationally, UMLs will get stuck. This can happen like: 15134 ? T 0:00)S
36 597 M(/spare/hugh/uml/uml2.4.18-sept5/umlbuild/east/linux \(east\) [/bin/sh] 15138 ? T 0:00)S
36 583.8 M(/spare/hugh/uml/uml2.4.18-sept5/umlbuild/east/linux \(east\) [halt] these will need to be killed. Note)S
36 570.6 M(that they are in "T"racing mode.)S
/Fc SF 28.19 610.2 M(\267 )S
/F4 SF 36 557.4 M(UMLs can also hang, and will report "Tracing myself and I can't get out". This is a bug in UML.)S
36 544.2 M(There are ways to find out what is going on and report this to the UML people, but we don't know the)S
36 531 M(magic right now.)S
/Fc SF 28.19 557.4 M(\267 )S
/F8 SF 0 0 M(User-Mode-Linux mysteries)S
468.652 0 M(206)S
GR
SP
%%Page: 207 236
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(Getting more info from uml_netjig)S
11 FS/F4 SF 0 649.8 M(uml_netjig can be compiled with a built-in tcpdump. This uses not-yet-released code from)S
0 636.6 M(www.tcpdump.org. Please see the instructions in )S
/F0 SF (testing/utils/uml_netjig/Makefile)S
/F4 SF (.)S
/F8 SF 0 0 M(Getting more info from uml_netjig)S
468.652 0 M(207)S
GR
SP
%%Page: 208 237
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(History and politics of cryptography)S
11 FS/F4 SF 0 649.8 M(Cryptography has a long and interesting history, and has been the subject of considerable political)S
0 636.6 M(controversy.)S
17 FS/F9 SF 0 604.2 M(Introduction)S
14 FS/F9 SF 0 573.6 M(History)S
11 FS/F4 SF 0 546.6 M(The classic book on the history of cryptography is David Kahn's The Codebreakers. It traces codes and)S
0 533.4 M(codebreaking from ancient Egypt to the 20th century.)S
0 507 M(Diffie and Landau Privacy on the Line: The Politics of Wiretapping and Encryption covers the history from)S
0 493.8 M(the First World War to the 1990s, with an emphasis on the US.)S
/F9 SF 0 467.4 M(World War II)S
/F4 SF 0 441 M(During the Second World War, the British "Ultra" project achieved one of the greatest intelligence triumphs)S
0 427.8 M(in the history of warfare, breaking many Axis codes. One major target was the Enigma cipher machine, a)S
0 414.6 M(German device whose users were convinced it was unbreakable. The American "Magic" project had some)S
0 401.4 M(similar triumphs against Japanese codes.)S
0 375 M(There are many books on this period. See our bibliography for several. Two I particularly like are:)S
36 348.6 M(Andrew Hodges has done a superb biography of Alan Turing, a key player among the Ultra)S
36 335.4 M(codebreakers. Turing was also an important computer pioneer. The terms Turing test and Turing)S
36 322.2 M(machine are named for him, as is the ACM's highest technical award.)S
/Fc SF 28.19 348.6 M(\267 )S
/F4 SF 36 309 M(Neal Stephenson's Cryptonomicon is a novel with cryptography central to the plot. Parts of it take)S
36 295.8 M(place during WW II, other parts today.)S
/Fc SF 28.19 309 M(\267 )S
/F4 SF 0 269.4 M(Bletchley Park, where much of the Ultra work was done, now has a museum and a web site.)S
0 243 M(The Ultra work introduced three major innovations.)S
36 216.6 M(The first break of Enigma was achieved by Polish Intelligence in 1931. Until then most)S
36 203.4 M(code-breakers had been linguists, but a different approach was needed to break machine ciphers.)S
36 190.2 M(Polish Intelligence recruited bright young mathematicians to crack the "unbreakable" Enigma. When)S
36 177 M(war came in 1939, the Poles told their allies about this, putting Britain on the road to Ultra. The)S
36 163.8 M(British also adopted a mathematical approach.)S
/Fc SF 28.19 216.6 M(\267 )S
/F4 SF 36 150.6 M(Machines were extensively used in the attacks. First the Polish "Bombe" for attacking Enigma, then)S
36 137.4 M(British versions of it, then machines such as Collosus for attacking other codes. By the end of the war,)S
36 124.2 M(some of these machines were beginning to closely resemble digital computers. After the war, a team)S
36 111 M(at Manchester University, several old Ultra hands included, built one of the world's first actual)S
36 97.8 M(general-purpose digital computers.)S
/Fc SF 28.19 150.6 M(\267 )S
/F4 SF 36 84.6 M(Ultra made codebreaking a large-scale enterprise, producing intelligence on an industrial scale. This)S
36 71.4 M(was not a "black chamber", not a hidden room in some obscure government building with a small)S
36 58.2 M(crew of code-breakers. The whole operation -- from wholesale interception of enemy)S
36 45 M(communications by stations around the world, through large-scale code-breaking and analysis of the)S
36 31.8 M(decrypted material \(with an enormous set of files for cross-referencing\), to delivery of intelligence to)S
/Fc SF 28.19 84.6 M(\267 )S
/F8 SF 0 0 M(History and politics of cryptography)S
468.652 0 M(208)S
GR
SP
%%Page: 209 238
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(field commanders -- was huge, and very carefully managed.)S
0 660.6 M(So by the end of the war, Allied code-breakers were expert at large-scale mechanised code-breaking. The)S
0 647.4 M(payoffs were enormous.)S
/F9 SF 0 621 M(Postwar and Cold War)S
/F4 SF 0 594.6 M(The wartime innovations were enthusiastically adopted by post-war and Cold War signals intelligence)S
0 581.4 M(agencies. Presumably many nations now have some agency capable of sophisticated attacks on)S
0 568.2 M(communications security, and quite a few engage in such activity on a large scale.)S
0 541.8 M(America's NSA, for example, is said to be both the world's largest employer of mathematicians and the)S
0 528.6 M(world's largest purchaser of computer equipment. Such claims may be somewhat exaggerated, but beyond)S
0 515.4 M(doubt the NSA -- and similar agencies in other countries -- have some excellent mathematicians, lots of)S
0 502.2 M(powerful computers, sophisticated software, and the organisation and funding to apply them on a large scale.)S
0 489 M(Details of the NSA budget are secret, but there are some published estimates.)S
0 462.6 M(Changes in the world's communications systems since WW II have provided these agencies with new targets.)S
0 449.4 M(Cracking the codes used on an enemy's military or diplomatic communications has been common practice for)S
0 436.2 M(centuries. Extensive use of radio in war made large-scale attacks such as Ultra possible. Modern)S
0 423 M(communications make it possible to go far beyond that. Consider listening in on cell phones, or intercepting)S
0 409.8 M(electronic mail, or tapping into the huge volumes of data on new media such as fiber optics or satellite links.)S
0 396.6 M(None of these targets existed in 1950. All of them can be attacked today, and almost certainly are being)S
0 383.4 M(attacked.)S
0 357 M(The Ultra story was not made public until the 1970s. Much of the recent history of codes and code-breaking)S
0 343.8 M(has not been made public, and some of it may never be. Two important books are:)S
36 317.4 M(Bamford's The Puzzle Palace, a history of the NSA)S
/Fc SF 28.19 317.4 M(\267 )S
/F4 SF 36 304.2 M(Hager's Secret Power, about the Echelon system -- the US, UK, Canada, Australia and New Zealand)S
36 291 M(co-operating to monitor much of the world's communications.)S
/Fc SF 28.19 304.2 M(\267 )S
/F4 SF 0 264.6 M(Note that these books cover only part of what is actually going on, and then only the activities of nations open)S
0 251.4 M(and democratic enough that \(some of\) what they are doing can be discovered. A full picture, including:)S
36 225 M(actions of the English-speaking democracies not covered in those books)S
/Fc SF 28.19 225 M(\267 )S
/F4 SF 36 211.8 M(actions of other more-or-less sane governments)S
/Fc SF 28.19 211.8 M(\267 )S
/F4 SF 36 198.6 M(the activities of various more-or-less insane governments)S
/Fc SF 28.19 198.6 M(\267 )S
/F4 SF 36 185.4 M(possibilities for unauthorized action by government employees)S
/Fc SF 28.19 185.4 M(\267 )S
/F4 SF 36 172.2 M(possible actions by large non-government organisations: corporations, criminals, or conspiracies)S
/Fc SF 28.19 172.2 M(\267 )S
/F4 SF 0 145.8 M(might be really frightening.)S
/F9 SF 0 119.4 M(Recent history -- the crypto wars)S
/F4 SF 0 93 M(Until quite recently, cryptography was primarily a concern of governments, especially of the military, of)S
0 79.8 M(spies, and of diplomats. Much of it was extremely secret.)S
0 53.4 M(In recent years, that has changed a great deal. With computers and networking becoming ubiquitous,)S
0 40.2 M(cryptography is now important to almost everyone. Among the developments since the 1970s:)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(History)S
468.652 0 M(209)S
GR
SP
%%Page: 210 239
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(The US gov't established the Data Encryption Standard, DES, a block cipher for cryptographic)S
36 673.8 M(protection of unclassfied documents.)S
/Fc SF 28.19 687 M(\267 )S
/F4 SF 36 660.6 M(DES also became widely used in industry, especially regulated industries such as banking.)S
/Fc SF 28.19 660.6 M(\267 )S
/F4 SF 36 647.4 M(Other nations produced their own standards, such as GOST in the Soviet Union.)S
/Fc SF 28.19 647.4 M(\267 )S
/F4 SF 36 634.2 M(Public key cryptography was invented by Diffie and Hellman.)S
/Fc SF 28.19 634.2 M(\267 )S
/F4 SF 36 621 M(Academic conferences such as Crypto and Eurocrypt began.)S
/Fc SF 28.19 621 M(\267 )S
/F4 SF 36 607.8 M(Several companies began offerring cryptographic products: RSA, PGP, the many vendors with PKI)S
36 594.6 M(products, ...)S
/Fc SF 28.19 607.8 M(\267 )S
/F4 SF 36 581.4 M(Cryptography appeared in other products: operating systems, word processors, ...)S
/Fc SF 28.19 581.4 M(\267 )S
/F4 SF 36 568.2 M(Network protocols based on crypto were developed: SSH, SSL, IPsec, ...)S
/Fc SF 28.19 568.2 M(\267 )S
/F4 SF 36 555 M(Crytography came into widespread use to secure bank cards, terminals, ...)S
/Fc SF 28.19 555 M(\267 )S
/F4 SF 36 541.8 M(The US government replaced DES with the much stronger Advanced Encryption Standard, AES)S
/Fc SF 28.19 541.8 M(\267 )S
/F4 SF 0 515.4 M(This has led to a complex ongoing battle between various mainly government groups wanting to control the)S
0 502.2 M(spread of crypto and various others, notably the computer industry and the cypherpunk crypto advocates,)S
0 489 M(wanting to encourage widespread use.)S
0 462.6 M(Steven Levy has written a fine history of much of this, called Crypto: How the Code rebels Beat the)S
0 449.4 M(Government -- Saving Privacy in the Digital Age.)S
0 423 M(The FreeS/WAN project is to a large extent an outgrowth of cypherpunk ideas. Our reasons for doing the)S
0 409.8 M(project can be seen in these quotes from the Cypherpunk Manifesto:)S
36 383.4 M(Privacy is necessary for an open society in the electronic age. ...)S
36 357 M(We cannot expect governments, corporations, or other large, faceless organizations to grant)S
36 343.8 M(us privacy out of their beneficence. It is to their advantage to speak of us, and we should)S
36 330.6 M(expect that they will speak. ...)S
36 304.2 M(We must defend our own privacy if we expect to have any. ...)S
36 277.8 M(Cypherpunks write code. We know that someone has to write software to defend privacy, and)S
36 264.6 M(since we can't get privacy unless we all do, we're going to write it. We publish our code so)S
36 251.4 M(that our fellow Cypherpunks may practice and play with it. Our code is free for all to use,)S
36 238.2 M(worldwide. We don't much care if you don't approve of the software we write. We know that)S
36 225 M(software can't be destroyed and that a widely dispersed system can't be shut down.)S
36 198.6 M(Cypherpunks deplore regulations on cryptography, for encryption is fundamentally a private)S
36 185.4 M(act. ...)S
36 159 M(For privacy to be widespread it must be part of a social contract. People must come and)S
36 145.8 M(together deploy these systems for the common good. ...)S
0 119.4 M(To quote project leader John Gilmore:)S
36 93 M(We are literally in a race between our ability to build and deploy technology, and their ability)S
36 79.8 M(to build and deploy laws and treaties. Neither side is likely to back down or wise up until it)S
36 66.6 M(has definitively lost the race.)S
0 40.2 M(If FreeS/WAN reaches its goal of making opportunistic encryption widespread so that secure communication)S
0 27 M(can become the default for a large part of the net, we will have struck a major blow.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(History)S
468.652 0 M(210)S
GR
SP
%%Page: 211 240
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(Politics)S
11 FS/F4 SF 0 657 M(The political problem is that nearly all governments want to monitor their enemies' communications, and)S
0 643.8 M(some want to monitor their citizens. They may be very interested in protecting some of their own)S
0 630.6 M(communications, and often some types of business communication, but not in having everyone able to)S
0 617.4 M(communicate securely. They therefore attempt to restrict availability of strong cryptography as much as)S
0 604.2 M(possible.)S
0 577.8 M(Things various governments have tried or are trying include:)S
36 551.4 M(Echelon, a monitor-the-world project of the US, UK, NZ, Australian and Canadian signals)S
36 538.2 M(intelligence agencies. See this collection of links and this story on the French Parliament's reaction.)S
/Fc SF 28.19 551.4 M(\267 )S
/F4 SF 36 525 M(Others governments may well have their own Echelon-like projects. To quote the Dutch Minister of)S
36 511.8 M(Defense, as reported in a German magazine:)S
72 485.4 M(The government believes not only the governments associated with Echelon are able)S
72 472.2 M(to intercept communication systems, but that it is an activity of the investigative)S
72 459 M(authorities and intelligence services of many countries with governments of different)S
72 445.8 M(political signature.)S
36 419.4 M(Even if they have nothing on the scale of Echelon, most intelligence agencies and police forces)S
36 406.2 M(certainly have some interception capability.)S
/Fc SF 28.19 525 M(\267 )S
/F4 SF 36 393 M(NSA tapping of submarine communication cables, described in this article)S
/Fc SF 28.19 393 M(\267 )S
/F4 SF 36 379.8 M(A proposal for international co-operation on Internet surveillance.)S
/Fc SF 28.19 379.8 M(\267 )S
/F4 SF 36 366.6 M(Alleged sabotage of security products by the NSA \(the US signals intelligence agency\).)S
/Fc SF 28.19 366.6 M(\267 )S
/F4 SF 36 353.4 M(The German armed forces and some government departments will stop using American software for)S
36 340.2 M(fear of NSA "back doors", according to this news story.)S
/Fc SF 28.19 353.4 M(\267 )S
/F4 SF 36 327 M(The British Regulation of Investigatory Powers bill. See this web page. and perhaps this cartoon.)S
/Fc SF 28.19 327 M(\267 )S
/F4 SF 36 313.8 M(A Russian ban on cryptography)S
/Fc SF 28.19 313.8 M(\267 )S
/F4 SF 36 300.6 M(Chinese controls on net use.)S
/Fc SF 28.19 300.6 M(\267 )S
/F4 SF 36 287.4 M(The FBI's carnivore system for covert searches of email. See this news coverage and this risk)S
36 274.2 M(assessment. The government had an external review of some aspects of this system done. See this)S
36 261 M(analysis of that review. Possible defenses against Carnivore include:)S
72 247.8 M(PGP for end-to-end mail encryption)S
/Fc SF 60.967 247.8 M(\250 )S
/F4 SF 72 234.6 M(secure sendmail for server-to-server encryption)S
/Fc SF 60.967 234.6 M(\250 )S
/F4 SF 72 221.4 M(IPsec encryption on the underlying IP network)S
/Fc SF 60.967 221.4 M(\250 )S
28.19 287.4 M(\267 )S
/F4 SF 36 208.2 M(export laws restricting strong cryptography as a munition. See discussion below.)S
/Fc SF 28.19 208.2 M(\267 )S
/F4 SF 36 195 M(various attempts to convince people that fundamentally flawed cryptography, such as encryption with)S
36 181.8 M(a back door for government access to data or with inadequate key lengths, was adequate for their)S
36 168.6 M(needs.)S
/Fc SF 28.19 195 M(\267 )S
/F4 SF 0 142.2 M(Of course governments are by no means the only threat to privacy and security on the net. Other threats)S
0 129 M(include:)S
36 102.6 M(industrial espionage, as for example in this news story)S
/Fc SF 28.19 102.6 M(\267 )S
/F4 SF 36 89.4 M(attacks by organised criminals, as in this large-scale attack)S
/Fc SF 28.19 89.4 M(\267 )S
/F4 SF 36 76.2 M(collection of personal data by various companies.)S
72 63 M(for example, consider the various corporate winners of Privacy International's Big Brother)S
72 49.8 M(Awards.)S
/Fc SF 60.967 63 M(\250 )S
/F4 SF 72 36.6 M(Zero Knowledge sell tools to defend against this)S
/Fc SF 60.967 36.6 M(\250 )S
28.19 76.2 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Politics)S
468.652 0 M(211)S
GR
SP
%%Page: 212 241
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(individuals may also be a threat in a variety of ways and for a variety of reasons)S
/Fc SF 28.19 687 M(\267 )S
/F4 SF 36 673.8 M(in particular, an individual with access to government or industry data collections could do)S
36 660.6 M(considerable damage using that data in unauthorized ways.)S
/Fc SF 28.19 673.8 M(\267 )S
/F4 SF 0 634.2 M(One study enumerates threats and possible responses for small and medium businesses. VPNs are a key part)S
0 621 M(of the suggested strategy.)S
0 594.6 M(We consider privacy a human right. See the UN's Universal Declaration of Human Rights, article twelve:)S
36 568.2 M(No one shall be subjected to arbitrary interference with his privacy, family, home or)S
36 555 M(correspondence, nor to attacks upon his honor and reputation. Everyone has the right to the)S
36 541.8 M(protection of the law against such interference or attacks.)S
0 515.4 M(Our objective is to help make privacy possible on the Internet using cryptography strong enough not even)S
0 502.2 M(those well-funded government agencies are likely to break it. If we can do that, the chances of anyone else)S
0 489 M(breaking it are negliible.)S
14 FS/F9 SF 0 459.6 M(Links)S
11 FS/F4 SF 0 432.6 M(Many groups are working in different ways to defend privacy on the net and elsewhere. Please consider)S
0 419.4 M(contributing to one or more of these groups:)S
36 393 M(the EFF's Privacy Now! campaign)S
/Fc SF 28.19 393 M(\267 )S
/F4 SF 36 379.8 M(the Global Internet Liberty Campaign)S
/Fc SF 28.19 379.8 M(\267 )S
/F4 SF 36 366.6 M(Computer Professionals for Social Responsibility)S
/Fc SF 28.19 366.6 M(\267 )S
/F4 SF 0 340.2 M(For more on these issues see:)S
36 313.8 M(Steven Levy \(Newsweek's chief technology writer and author of the classic "Hackers"\) new book)S
36 300.6 M(Crypto: How the Code Rebels Beat the Government--Saving Privacy in the Digital Age)S
/Fc SF 28.19 313.8 M(\267 )S
/F4 SF 36 287.4 M(Simson Garfinkel \(Boston Globe columnist and author of books on PGP and Unix Security\) book)S
36 274.2 M(Database Nation: the death of privacy in the 21st century)S
/Fc SF 28.19 287.4 M(\267 )S
/F4 SF 0 247.8 M(There are several collections of crypto quotes on the net.)S
0 221.4 M(See also the bibliography and our list of web references on cryptography law and policy.)S
14 FS/F9 SF 0 192 M(Outline of this section)S
11 FS/F4 SF 0 165 M(The remainder of this section includes two pieces of writing by our project leader)S
36 138.6 M(his rationale for starting this)S
/Fc SF 28.19 138.6 M(\267 )S
/F4 SF 36 125.4 M(another discussion of project goals)S
/Fc SF 28.19 125.4 M(\267 )S
/F4 SF 0 99 M(and discussions of:)S
36 72.6 M(why we do not use DES)S
/Fc SF 28.19 72.6 M(\267 )S
/F4 SF 36 59.4 M(cryptography export laws)S
/Fc SF 28.19 59.4 M(\267 )S
/F4 SF 36 46.2 M(why government access to keys is not a good idea)S
/Fc SF 28.19 46.2 M(\267 )S
/F4 SF 36 33 M(the myth that short keys are adequate for some security requirements)S
/Fc SF 28.19 33 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Links)S
468.652 0 M(212)S
GR
SP
%%Page: 213 242
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(and a section on press coverage of FreeS/WAN.)S
17 FS/F9 SF 0 654.6 M(From our project leader)S
11 FS/F4 SF 0 627 M(FreeS/WAN project founder John Gilmore wrote a web page about why we are doing this. The version below)S
0 613.8 M(is slightly edited, to fit this format and to update some links. For a version without these edits, see his home)S
0 600.6 M(page.)S
14 FS/F9 SF 82.08 571.2 M(Swan: Securing the Internet against Wiretapping)S
11 FS/F4 SF 0 544.2 M(My project for 1996 was to)S
/F5 SF ( secure 5% of the Internet traffic against passive wiretapping)S
/F4 SF (. It didn't happen)S
0 531 M(in 1996, so I'm still working on it in 1997, 1998, and 1999! If we get 5% in 1999 or 2000, we can secure 20%)S
0 517.8 M(the next year, against both active and passive attacks; and 80% the following year. Soon the whole Internet)S
0 504.6 M(will be private and secure. The project is called S/WAN or S/Wan or Swan for Secure Wide Area Network;)S
0 491.4 M(since it's free software, we call it FreeSwan to distinguish it from various commercial implementations. RSA)S
0 478.2 M(came up with the term "S/WAN". Our main web site is at http://www.freeswan.org/. Want to help?)S
0 451.8 M(The idea is to deploy PC-based boxes that will sit between your local area network and the Internet \(near your)S
0 438.6 M(firewall or router\) which opportunistically encrypt your Internet packets. Whenever you talk to a machine)S
0 425.4 M(\(like a Web site\) that doesn't support encryption, your traffic goes out "in the clear" as usual. Whenever you)S
0 412.2 M(connect to a machine that does support this kind of encryption, this box automatically encrypts all your)S
0 399 M(packets, and decrypts the ones that come in. In effect, each packet gets put into an "envelope" on one side of)S
0 385.8 M(the net, and removed from the envelope when it reaches its destination. This works for all kinds of Internet)S
0 372.6 M(traffic, including Web access, Telnet, FTP, email, IRC, Usenet, etc.)S
0 346.2 M(The encryption boxes are standard PC's that use freely available Linux software that you can download over)S
0 333 M(the Internet or install from a cheap CDROM.)S
0 306.6 M(This wasn't just my idea; lots of people have been working on it for years. The encryption protocols for these)S
0 293.4 M(boxes are called IPSEC \(IP Security\). They have been developed by the IP Security Working Group of the)S
0 280.2 M(Internet Engineering Task Force, and will be a standard part of the next major version of the Internet protocols)S
0 267 M(\(IPv6\). For today's \(IP version 4\) Internet, they are an option.)S
0 240.6 M(The Internet Architecture Board and Internet Engineering Steering Group have taken a strong stand that the)S
0 227.4 M(Internet should use powerful encryption to provide security and privacy. I think these protocols are the best)S
0 214.2 M(chance to do that, because they can be deployed very easily, without changing your hardware or software or)S
0 201 M(retraining your users. They offer the best security we know how to build, using the Triple-DES, RSA, and)S
0 187.8 M(Diffie-Hellman algorithms.)S
0 161.4 M(This "opportunistic encryption box" offers the "fax effect". As each person installs one for their own use, it)S
0 148.2 M(becomes more valuable for their neighbors to install one too, because there's one more person to use it with.)S
0 135 M(The software automatically notices each newly installed box, and doesn't require a network administrator to)S
0 121.8 M(reconfigure it. Instead of "virtual private networks" we have a "REAL private network"; we add privacy to the)S
0 108.6 M(real network instead of layering a manually-maintained virtual network on top of an insecure Internet.)S
/F9 SF 0 82.2 M(Deployment of IPSEC)S
/F4 SF 0 55.8 M(The US government would like to control the deployment of IP Security with its crypto export laws. This isn't)S
0 42.6 M(a problem for my effort, because the cryptographic work is happening outside the United States. A foreign)S
0 29.4 M(philanthropist, and others, have donated the resources required to add these protocols to the Linux operating)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(From our project leader)S
468.652 0 M(213)S
GR
SP
%%Page: 214 243
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(system. Linux is a complete, freely available operating system for IBM PC's and several kinds of workstation,)S
0 673.8 M(which is compatible with Unix. It was written by Linus Torvalds, and is still maintained by a talented team of)S
0 660.6 M(expert programmers working all over the world and coordinating over the Internet. Linux is distributed under)S
0 647.4 M(the GNU Public License, which gives everyone the right to copy it, improve it, give it to their friends, sell it)S
0 634.2 M(commercially, or do just about anything else with it, without paying anyone for the privilege.)S
0 607.8 M(Organizations that want to secure their network will be able to put two Ethernet cards into an IBM PC, install)S
0 594.6 M(Linux on it from a $30 CDROM or by downloading it over the net, and plug it in between their Ethernet and)S
0 581.4 M(their Internet link or firewall. That's all they'll have to do to encrypt their Internet traffic everywhere outside)S
0 568.2 M(their own local area network.)S
0 541.8 M(Travelers will be able to run Linux on their laptops, to secure their connection back to their home network)S
0 528.6 M(\(and to everywhere else that they connect to, such as customer sites\). Anyone who runs Linux on a standalone)S
0 515.4 M(PC will also be able to secure their network connections, without changing their application software or how)S
0 502.2 M(they operate their computer from day to day.)S
0 475.8 M(There will also be numerous commercially available firewalls that use this technology. RSA Data Security is)S
0 462.6 M(coordinating the S/Wan \(Secure Wide Area Network\) project among more than a dozen vendors who use)S
0 449.4 M(these protocols. There's a compatability chart that shows which vendors have tested their boxes against which)S
0 436.2 M(other vendors to guarantee interoperatility.)S
0 409.8 M(Eventually it will also move into the operating systems and networking protocol stacks of major vendors. This)S
0 396.6 M(will probably take longer, because those vendors will have to figure out what they want to do about the export)S
0 383.4 M(controls.)S
/F9 SF 0 357 M(Current status)S
/F4 SF 0 330.6 M(My initial goal of securing 5% of the net by Christmas '96 was not met. It was an ambitious goal, and inspired)S
0 317.4 M(me and others to work hard, but was ultimately too ambitious. The protocols were in an early stage of)S
0 304.2 M(development, and needed a lot more protocol design before they could be implemented. As of April 1999, we)S
0 291 M(have released version 1.0 of the software \(freeswan-1.0.tar.gz\), which is suitable for setting up Virtual Private)S
0 277.8 M(Networks using shared secrets for authentication. It does not yet do opportunistic encryption, or use DNSSEC)S
0 264.6 M(for authentication; those features are coming in a future release.)S
/F6 SF 0 238.2 M(Protocols)S
/F4 SF 36 225 M(The low-level encrypted packet formats are defined. The system for publishing keys and providing)S
36 211.8 M(secure domain name service is defined. The IP Security working group has settled on an)S
36 198.6 M(NSA-sponsored protocol for key agreement \(called ISAKMP/Oakley\), but it is still being worked on,)S
36 185.4 M(as the protocol and its documentation is too complex and incomplete. There are prototype)S
36 172.2 M(implementations of ISAKMP. The protocol is not yet defined to enable opportunistic encryption or)S
36 159 M(the use of DNSSEC keys.)S
/F6 SF 0 145.8 M(Linux Implementation)S
/F4 SF 36 132.6 M(The Linux implementation has reached its first major release and is ready for production use in)S
36 119.4 M(manually-configured networks, using Linux kernel version 2.0.36.)S
/F6 SF 0 106.2 M(Domain Name System Security)S
/F4 SF 36 93 M(There is now a release of BIND 8.2 that includes most DNS Security features.)S
36 66.6 M(The first prototype implementation of Domain Name System Security was funded by DARPA as part)S
36 53.4 M(of their Information Survivability program. Trusted Information Systems wrote a modified version of)S
36 40.2 M(BIND, the widely-used Berkeley implementation of the Domain Name System.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Swan: Securing the Internet against Wiretapping)S
468.652 0 M(214)S
GR
SP
%%Page: 215 244
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(TIS, ISC, and I merged the prototype into the standard version of BIND. The first production version)S
36 673.8 M(that supports KEY and SIG records is)S
/F5 SF ( bind-4.9.5)S
/F4 SF (. This or any later version of BIND will do for)S
36 660.6 M(publishing keys. It is available from the Internet Software Consortium. This version of BIND is not)S
36 647.4 M(export-controlled since it does not contain any cryptography. Later releases starting with BIND 8.2)S
36 634.2 M(include cryptography for authenticating DNS records, which is also exportable. Better documentation)S
36 621 M(is needed.)S
/F9 SF 0 594.6 M(Why?)S
/F4 SF 0 568.2 M(Because I can. I have made enough money from several successful startup companies, that for a while I don't)S
0 555 M(have to work to support myself. I spend my energies and money creating the kind of world that I'd like to live)S
0 541.8 M(in and that I'd like my \(future\) kids to live in. Keeping and improving on the civil rights we have in the United)S
0 528.6 M(States, as we move more of our lives into cyberspace, is a particular goal of mine.)S
/F9 SF 0 502.2 M(What You Can Do)S
/F6 SF 0 475.8 M(Install the latest BIND at your site.)S
/F4 SF 36 462.6 M(You won't be able to publish any keys for your domain, until you have upgraded your copy of BIND.)S
36 449.4 M(The thing you really need from it is the new version of)S
/F6 SF ( named)S
/F4 SF (, the Name Daemon, which knows)S
36 436.2 M(about the new KEY and SIG record types. So, download it from the Internet Software Consortium and)S
36 423 M(install it on your name server machine \(or get your system administrator, or Internet Service Provider,)S
36 409.8 M(to install it\). Both your primary DNS site and all of your secondary DNS sites will need the new)S
36 396.6 M(release before you will be able to publish your keys. You can tell which sites this is by running the)S
36 383.4 M(Unix command "dig MYDOMAIN ns" and seeing which sites are mentioned in your NS \(name)S
36 370.2 M(server\) records.)S
/F6 SF 0 357 M(Set up a Linux system and run a 2.0.x kernel on it)S
/F4 SF 36 343.8 M(Get a machine running Linux \(say the 5.2 release from Red Hat\). Give the machine two Ethernet)S
36 330.6 M(cards.)S
/F6 SF 0 317.4 M(Install the Linux IPSEC \(Freeswan\) software)S
/F4 SF 36 304.2 M(If you're an experienced sysadmin or Linux hacker, install the freeswan-1.0 release, or any later)S
36 291 M(release or snapshot. These releases do NOT provide automated "opportunistic" operation; they must)S
36 277.8 M(be manually configured for each site you wish to encrypt with.)S
/F6 SF 0 264.6 M(Get on the linux-ipsec mailing list)S
/F4 SF 36 251.4 M(The discussion forum for people working on the project, and testing the code and documentation, is:)S
36 238.2 M(linux-ipsec@clinet.fi. To join this mailing list, send email to linux-ipsec-REQUEST@clinet.fi)S
36 225 M(containing a line of text that says "subscribe linux-ipsec". \(You can later get off the mailing list the)S
36 211.8 M(same way -- just send "unsubscribe linux-ipsec"\).)S
/F6 SF 0 185.4 M(Check back at this web page every once in a while)S
/F4 SF 36 172.2 M(I update this page periodically, and there may be new information in it that you haven't seen. My)S
36 159 M(intent is to send email to the mailing list when I update the page in any significant way, so subscribing)S
36 145.8 M(to the list is an alternative.)S
0 119.4 M(Would you like to help? I can use people who are willing to write documentation, install early releases for)S
0 106.2 M(testing, write cryptographic code outside the United States, sell pre-packaged software or systems including)S
0 93 M(this technology, and teach classes for network administrators who want to install this technology. To offer to)S
0 79.8 M(help, send me email at gnu@toad.com. Tell me what country you live in and what your citizenship is \(it)S
0 66.6 M(matters due to the export control laws; personally I don't care\). Include a copy of your resume and the URL of)S
0 53.4 M(your home page. Describe what you'd like to do for the project, and what you're uniquely qualified for.)S
0 40.2 M(Mention what other volunteer projects you've been involved in \(and how they worked out\). Helping out will)S
0 27 M(require that you be able to commit to doing particular things, meet your commitments, and be responsive by)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Swan: Securing the Internet against Wiretapping)S
468.652 0 M(215)S
GR
SP
%%Page: 216 245
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(email. Volunteer projects just don't work without those things.)S
/F9 SF 0 660.6 M(Related projects)S
/F6 SF 0 634.2 M(IPSEC for NetBSD)S
/F4 SF 36 621 M(This prototype implementation of the IP Security protocols is for another free operating system.)S
36 607.8 M(Download BSDipsec.tar.gz.)S
/F6 SF 0 594.6 M(IPSEC for OpenBSD)S
/F4 SF 36 581.4 M(This prototype implementation of the IP Security protocols is for yet another free operating system. It)S
36 568.2 M(is directly integrated into the OS release, since the OS is maintained in Canada, which has freedom of)S
36 555 M(speech in software.)S
14 FS/F9 SF 0 525.6 M(Stopping wholesale monitoring)S
11 FS/F4 SF 0 498.6 M(From a message project leader John Gilmore posted to the mailing list:)S
9 FS/F0 SF 0 474.2 M(John Denker wrote:)S
0 452.6 M(> Indeed there are several ways in which the documentation overstates the )S
0 441.8 M(> scope of what this project does -- starting with the name )S
0 431 M(> FreeS/WAN.  There's a big difference between having an encrypted IP tunnel )S
0 420.2 M(> versus having a Secure Wide-Area Network.  This software does a fine job of )S
0 409.4 M(> the former, which is necessary but not sufficient for the latter.)S
0 387.8 M(The goal of the project is to make it very hard to tap your wide area)S
0 377 M(communications.  The current system provides very good protection)S
0 366.2 M(against passive attacks \(wiretapping and those big antenna farms\).)S
0 355.4 M(Active attacks, which involve the intruder sending packets to your)S
0 344.6 M(system \(like packets that break into sendmail and give them a root)S
0 333.8 M(shell :-\) are much harder to guard against.  Active attacks that)S
0 323 M(involve sending people \(breaking into your house and replacing parts)S
0 312.2 M(of your computer with ones that transmit what you're doing\) are also)S
0 301.4 M(much harder to guard against.  Though we are putting effort into)S
0 290.6 M(protecting against active attacks, it's a much bigger job than merely)S
0 279.8 M(providing strong encryption.  It involves general computer security,)S
0 269 M(and general physical security, which are two very expensive problems)S
0 258.2 M(for even a site to solve, let alone to build into a whole society.)S
0 236.6 M(The societal benefit of building an infrastructure that protects)S
0 225.8 M(well against passive attacks is that it makes it much harder to do)S
0 215 M(undetected bulk monitoring of the population.  It's a defense against)S
0 204.2 M(police-states, not against policemen.)S
0 182.6 M(Policemen can put in the effort required to actively attack sites that)S
0 171.8 M(they have strong suspicions about.  But police states won't be able to)S
0 161 M(build systems that automatically monitor everyone's communications.)S
0 150.2 M(Either they will be able to monitor only a small subset of the)S
0 139.4 M(populace \(by targeting those who screwed up their passive security\),)S
0 128.6 M(or their monitoring activities will be detectable by those monitored)S
0 117.8 M(\(active attacks leave packet traces or footprints\), which can then be)S
0 107 M(addressed through the press and through political means if they become)S
0 96.2 M(too widespread.)S
0 74.6 M(FreeS/WAN does not protect very well against traffic analysis, which)S
0 63.8 M(is a kind of widespread police-state style monitoring that still)S
0 53 M(reveals significant information \(who's talking to who\) without)S
0 42.2 M(revealing the contents of what was said.  Defenses against traffic)S
0 31.4 M(analysis are an open research problem.  Zero Knowledge Systems is)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Swan: Securing the Internet against Wiretapping)S
468.652 0 M(216)S
GR
SP
%%Page: 217 246
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(actively deploying a system designed to thwart it, designed by Ian)S
0 678.2 M(Goldberg.  The jury is out on whether it actually works; a lot more)S
0 667.4 M(experience with it will be needed.)S
11 FS/F4 SF 0 641.4 M(Notes on things mentioned in that message:)S
36 615 M(Denker is a co-author of a paper on a large FreeS/WAN application.)S
/Fc SF 28.19 615 M(\267 )S
/F4 SF 36 601.8 M(Information on Zero Knowledge is on their web site. Their Freedom product, designed to provide)S
36 588.6 M(untracable pseudonyms for use on the net, is no longer marketed.)S
/Fc SF 28.19 601.8 M(\267 )S
/F4 SF 36 575.4 M(Another section of our documentation discusses ways to resist traffic analysis.)S
/Fc SF 28.19 575.4 M(\267 )S
17 FS/F9 SF 0 543 M(Government promotion of weak crypto)S
11 FS/F4 SF 0 515.4 M(Various groups, especially governments and especially the US government, have a long history of advocating)S
0 502.2 M(various forms of bogus security.)S
0 475.8 M(We regard bogus security as extremely dangerous. If users are deceived into relying on bogus security, then)S
0 462.6 M(they may be exposed to large risks. They would be better off having no security and knowing it. At least then)S
0 449.4 M(they would be careful about what they said.)S
/F7 SF 0 423 M(Avoiding bogus security is a key design criterion for everything we do in FreeS/WAN)S
/F4 SF (. The most)S
0 409.8 M(conspicuous example is our refusal to support single DES. Other IPsec "features" which we do not implement)S
0 396.6 M(are discussed in our compatibility document.)S
14 FS/F9 SF 0 367.2 M(Escrowed encryption)S
11 FS/F4 SF 0 340.2 M(Various governments have made persistent attempts to encourage or mandate "escrowed encrytion", also)S
0 327 M(called "key recovery", or GAK for "government access to keys". The idea is that cryptographic keys be held)S
0 313.8 M(by some third party and turned over to law enforcement or security agencies under some conditions.)S
9 FS/F0 SF 0 289.4 M(  Mary had a little key - she kept it in escrow,)S
0 278.6 M(  and every thing that Mary said,)S
0 267.8 M(  the feds were sure to know.)S
11 FS/F4 SF 0 241.8 M(A crypto quotes page attributes this to Sam Simpson.)S
0 215.4 M(There is an excellent paper available on Risks of Escrowed Encryption, from a group of cryptographic)S
0 202.2 M(luminaries which included our project leader.)S
0 175.8 M(Like any unnecessary complication, GAK tends to weaken security of any design it infects. For example:)S
36 149.4 M(Matt Blaze found a fatal flaw in the US government's Clipper chip shortly after design information)S
36 136.2 M(became public. See his paper "Protocol Failure in the Escrowed Encryption Standard" on his papers)S
36 123 M(page.)S
/Fc SF 28.19 149.4 M(\267 )S
/F4 SF 36 109.8 M(a rather nasty bug was found in the "additional decryption keys" "feature" of some releases of PGP)S
/Fc SF 28.19 109.8 M(\267 )S
/F4 SF 0 83.4 M(FreeS/WAN does not support escrowed encryption, and never will.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Government promotion of weak crypto)S
468.652 0 M(217)S
GR
SP
%%Page: 218 247
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(Limited key lengths)S
11 FS/F4 SF 0 657 M(Various governments, and some vendors, have also made persistent attempts to convince people that:)S
36 630.6 M(weak systems are sufficient for some data)S
/Fc SF 28.19 630.6 M(\267 )S
/F4 SF 36 617.4 M(strong cryptography should be reserved for cases where the extra overheads are justified)S
/Fc SF 28.19 617.4 M(\267 )S
/F7 SF 0 591 M(This is utter nonsense)S
/F4 SF (.)S
0 564.6 M(Weak systems touted include:)S
36 538.2 M(the ludicrously weak \(deliberately crippled\) 40-bit ciphers that until recently were all various export)S
36 525 M(laws allowed)S
/Fc SF 28.19 538.2 M(\267 )S
/F4 SF 36 511.8 M(56-bit single DES, discussed below)S
/Fc SF 28.19 511.8 M(\267 )S
/F4 SF 36 498.6 M(64-bit symmetric ciphers and 512-bit RSA, the maximums for unrestricted export under various)S
36 485.4 M(current laws)S
/Fc SF 28.19 498.6 M(\267 )S
/F4 SF 0 459 M(The notion that choice of ciphers or keysize should be determined by a trade-off between security)S
0 445.8 M(requirements and overheads is pure bafflegab.)S
36 419.4 M(For most symmetric ciphers, it is simply a lie. Any block cipher has some natural maximum keysize)S
36 406.2 M(inherent in the design -- 128 bits for IDEA or CAST-128, 256 for Serpent or Twofish, 448 for)S
36 393 M(Blowfish and 2048 for RC4. Using a key size smaller than that limit gives)S
/F6 SF ( exactly zero)S
/F4 SF ( savings in)S
36 379.8 M(overhead. The crippled 40-bit or 64-bit version of the cipher provides)S
/F6 SF ( no advantage whatsoever)S
/F4 SF (.)S
/Fc SF 28.19 419.4 M(\267 )S
/F4 SF 36 366.6 M(AES uses 10 rounds with 128-bit keys, 12 rounds for 192-bit and 14 rounds for 256-bit, so there)S
36 353.4 M(actually is a small difference in overhead, but not enough to matter in most applications.)S
/Fc SF 28.19 366.6 M(\267 )S
/F4 SF 36 340.2 M(For triple DES there is a grain of truth in the argument. 3DES is indeed three times slower than single)S
36 327 M(DES. However, the solution is not to use the insecure single DES, but to pick a faster secure cipher.)S
36 313.8 M(CAST-128, Blowfish and the AES candidate ciphers are are all considerably faster in software than)S
36 300.6 M(DES \(let alone 3DES!\), and apparently secure.)S
/Fc SF 28.19 340.2 M(\267 )S
/F4 SF 36 287.4 M(For public key techniques, there are extra overheads for larger keys, but they generally do not affect)S
36 274.2 M(overall performance significantly. Practical public key applications are usually hybrid systems in)S
36 261 M(which the bulk of the work is done by a symmetric cipher. The effect of increasing the cost of the)S
36 247.8 M(public key operations is typically negligible because the public key operations use only a tiny fraction)S
36 234.6 M(of total resources.)S
36 208.2 M(For example, suppose public key operations use use 1% of the time in a hybrid system and you triple)S
36 195 M(the cost of public key operations. The cost of symmetric cipher operations is unchanged at 99% of the)S
36 181.8 M(original total cost, so the overall effect is a jump from 99 + 1 = 100 to 99 + 3 = 102, a 2% rise in)S
36 168.6 M(system cost.)S
/Fc SF 28.19 287.4 M(\267 )S
/F4 SF 0 142.2 M(In short,)S
/F7 SF ( there has never been any technical reason to use inadequate ciphers)S
/F4 SF (. The only reason there has)S
0 129 M(ever been for anyone to use such ciphers is that government agencies want weak ciphers used so that they can)S
0 115.8 M(crack them. The alleged savings are simply propaganda.)S
9 FS/F0 SF 0 91.4 M(   Mary had a little key \(It's all she could export\),)S
0 80.6 M(   and all the email that she sent was opened at the Fort.)S
11 FS/F4 SF 0 54.6 M(A crypto quotes page attributes this to Ron Rivest. NSA headquarters is at Fort Meade, Maryland.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Limited key lengths)S
468.652 0 M(218)S
GR
SP
%%Page: 219 248
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(Our policy in FreeS/WAN is to use only cryptographic components with adequate keylength and no known)S
0 673.8 M(weaknesses.)S
36 647.4 M(We do not implement single DES because it is clearly insecure, so implemeting it would violate our)S
36 634.2 M(policy of avoiding bogus security. Our default cipher is 3DES)S
/Fc SF 28.19 647.4 M(\267 )S
/F4 SF 36 621 M(Similarly, we do not implement the 768-bit Group 1 for Diffie-Hellman key negotiation. We provide)S
36 607.8 M(only the 1024-bit Group 2 and 1536-bit Group 5.)S
/Fc SF 28.19 621 M(\267 )S
/F4 SF 0 581.4 M(Detailed discussion of which IPsec features we implement or omit is in out compatibility document.)S
0 555 M(These decisions imply that we cannot fully conform to the IPsec RFCs, since those have DES as the only)S
0 541.8 M(required cipher and Group 1 as the only required DH group. \(In our view, the standards were subverted into)S
0 528.6 M(offerring bogus security.\) Fortunately, we can still interoperate with most other IPsec implementations since)S
0 515.4 M(nearly all implementers provide at least 3DES and Group 2 as well.)S
0 489 M(We hope that eventually the RFCs will catch up with our \(and others'\) current practice and reject dubious)S
0 475.8 M(components. Some of our team and a number of others are working on this in IETF working groups.)S
/F9 SF 0 449.4 M(Some real trade-offs)S
/F4 SF 0 423 M(Of course, making systems secure does involve costs, and trade-offs can be made between cost and security.)S
0 409.8 M(However, the real trade-offs have nothing to do with using weaker ciphers.)S
0 383.4 M(There can be substantial hardware and software costs. There are often substantial training costs, both to train)S
0 370.2 M(administrators and to increase user awareness of security issues and procedures. There are almost always)S
0 357 M(substantial staff or contracting costs.)S
0 330.6 M(Security takes staff time for planning, implementation, testing and auditing. Some of the issues are subtle; you)S
0 317.4 M(need good \(hence often expensive\) people for this. You also need people to monitor your systems and respond)S
0 304.2 M(to problems. The best safe ever built is insecure if an attacker can work on it for days without anyone noticing.)S
0 291 M(Any computer is insecure if the administrator is "too busy" to check the logs.)S
0 264.6 M(Moreover, someone in your organisation \(or on contract to it\) needs to spend considerable time keeping up)S
0 251.4 M(with new developments. EvilDoers)S
/F6 SF ( will)S
/F4 SF ( know about new attacks shortly after they are found. You need to)S
0 238.2 M(know about them before your systems are attacked. If your vendor provides a patch, you need to apply it. If)S
0 225 M(the vendor does nothing, you need to complain or start looking for another vendor.)S
0 198.6 M(For a fairly awful example, see this report. In that case over a million credit card numbers were taken from)S
0 185.4 M(e-commerce sites, using security flaws in Windows NT servers. Microsoft had long since released patches for)S
0 172.2 M(most or all of the flaws, but the site administrators had not applied them.)S
0 145.8 M(At an absolute minimum, you must do something about such issues)S
/F6 SF ( before)S
/F4 SF ( an exploitation tool is posted to the)S
0 132.6 M(net for downloading by dozens of "script kiddies". Such a tool might appear at any time from the)S
0 119.4 M(announcement of the security hole to several months later. Once it appears, anyone with a browser and an)S
0 106.2 M(attitude can break any system whose administrators have done nothing about the flaw.)S
0 79.8 M(Compared to those costs, cipher overheads are an insignificant factor in the cost of security.)S
0 53.4 M(The only thing using a weak cipher can do for you is to cause all your other investment to be wasted.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Limited key lengths)S
468.652 0 M(219)S
GR
SP
%%Page: 220 249
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
17 FS/F9 SF 0 681 M(Cryptography Export Laws)S
11 FS/F4 SF 0 653.4 M(Many nations restrict the export of cryptography and some restrict its use by their citizens or others within)S
0 640.2 M(their borders.)S
14 FS/F9 SF 0 610.8 M(US Law)S
11 FS/F4 SF 0 583.8 M(US laws, as currently interpreted by the US government, forbid export of most cryptographic software from)S
0 570.6 M(the US in machine-readable form without government permission. In general, the restrictions apply even if)S
0 557.4 M(the software is widely-disseminated or public-domain and even if it came from outside the US originally.)S
0 544.2 M(Cryptography is legally a munition and export is tightly controlled under the EAR Export Administration)S
0 531 M(Regulations.)S
0 504.6 M(If you are a US citizen, your brain is considered US territory no matter where it is physically located at the)S
0 491.4 M(moment. The US believes that its laws apply to its citizens everywhere, not just within the US. Providing)S
0 478.2 M(technical assistance or advice to foreign "munitions" projects is illegal. The US government has very little)S
0 465 M(sense of humor about this issue and does not consider good intentions to be sufficient excuse. Beware.)S
0 438.6 M(The official website for these regulations is run by the Commerce Department's Bureau of Export)S
0 425.4 M(Administration \(BXA\).)S
0 399 M(The Bernstein case challenges the export restrictions on Constitutional grounds. Code is speech so restrictions)S
0 385.8 M(on export of code violate the First Amendment's free speech provisions. This argument has succeeded in two)S
0 372.6 M(levels of court so far. It is quite likely to go on to the Supreme Court.)S
0 346.2 M(The regulations were changed substantially in January 2000, apparently as a government attempt to get off the)S
0 333 M(hook in the Bernstein case. It is now legal to export public domain source code for encryption, provided you)S
0 319.8 M(notify the BXA.)S
0 293.4 M(There are, however, still restrictions in force. Moreover, the regulations can still be changed again whenever)S
0 280.2 M(the government chooses to do so. Short of a Supreme Court ruling \(in the Berstein case or another\) that)S
0 267 M(overturns the regulations completely, the problem of export regulation is not likely to go away in the)S
0 253.8 M(forseeable future.)S
/F9 SF 0 227.4 M(US contributions to FreeS/WAN)S
/F4 SF 0 201 M(The FreeS/WAN project)S
/F7 SF ( cannot accept software contributions, not even small bug fixes, from US citizens or)S
0 187.8 M(residents)S
/F4 SF (. We want it to be absolutely clear that our distribution is not subject to US export law. Any)S
0 174.6 M(contribution from an American might open that question to a debate we'd prefer to avoid. It might also put the)S
0 161.4 M(contributor at serious legal risk.)S
0 135 M(Of course Americans can still make valuable contributions \(many already have\) by reporting bugs, or)S
0 121.8 M(otherwise contributing to discussions, on the project mailing list. Since the list is public, this is clearly)S
0 108.6 M(constitutionally protected free speech.)S
0 82.2 M(Note, however, that the export laws restrict Americans from providing technical assistance to foreign)S
0 69 M("munitions" projects. The government might claim that private discussions or correspondence with)S
0 55.8 M(FreeS/WAN developers were covered by this. It is not clear what the courts would do with such a claim, so)S
0 42.6 M(we strongly encourage Americans to use the list rather than risk the complications.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Cryptography Export Laws)S
468.652 0 M(220)S
GR
SP
%%Page: 221 250
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(What's wrong with restrictions on cryptography)S
11 FS/F4 SF 0 657 M(Some quotes from prominent cryptography experts:)S
36 630.6 M(The real aim of current policy is to ensure the continued effectiveness of US information)S
36 617.4 M(warfare assets against individuals, businesses and governments in Europe and elsewhere.)S
36 604.2 M(Ross Anderson, Cambridge University)S
36 577.8 M(If the government were honest about its motives, then the debate about crypto export policy)S
36 564.6 M(would have ended years ago.)S
36 551.4 M(Bruce Schneier, Counterpane Systems)S
36 525 M(The NSA regularly lies to people who ask it for advice on export control. They have no)S
36 511.8 M(reason not to; accomplishing their goal by any legal means is fine by them. Lying by)S
36 498.6 M(government employees is legal.)S
36 485.4 M(John Gilmore.)S
0 459 M(The Internet Architecture Board \(IAB\) and the Internet Engineering Steering Group \(IESG\) made a strong)S
0 445.8 M(statement in favour of worldwide access to strong cryptography. Essentially the same statement is in the)S
0 432.6 M(appropriately numbered RFC 1984. Two critical paragraphs are:)S
36 406.2 M(... various governments have actual or proposed policies on access to cryptographic)S
36 393 M(technology ...)S
36 366.6 M(\(a\) ... export controls ...)S
36 353.4 M(\(b\) ... short cryptographic keys ...)S
36 340.2 M(\(c\) ... keys should be in the hands of the government or ...)S
36 327 M(\(d\) prohibit the use of cryptology ...)S
36 300.6 M(We believe that such policies are against the interests of consumers and the business)S
36 287.4 M(community, are largely irrelevant to issues of military security, and provide only a marginal)S
36 274.2 M(or illusory benefit to law enforcement agencies, ...)S
36 247.8 M(The IAB and IESG would like to encourage policies that allow ready access to uniform strong)S
36 234.6 M(cryptographic technology for all Internet users in all countries.)S
0 208.2 M(Our goal in the FreeS/WAN project is to build just such "strong cryptographic technology" and to distribute it)S
0 195 M("for all Internet users in all countries".)S
0 168.6 M(More recently, the same two bodies \(IESG and IAB\) have issued RFC 2804 on why the IETF should not build)S
0 155.4 M(wiretapping capabilities into protocols for the convenience of security or law enforcement agenicies. The)S
0 142.2 M(abstract from that document is:)S
36 115.8 M(The Internet Engineering Task Force \(IETF\) has been asked to take a position on the)S
36 102.6 M(inclusion into IETF standards-track documents of functionality designed to facilitate)S
36 89.4 M(wiretapping.)S
36 63 M(This memo explains what the IETF thinks the question means, why its answer is "no", and)S
36 49.8 M(what that answer means.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(What's wrong with restrictions on cryptography)S
468.652 0 M(221)S
GR
SP
%%Page: 222 251
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(A quote from the debate leading up to that RFC:)S
36 660.6 M(We should not be building surveillance technology into standards. Law enforcement was not)S
36 647.4 M(supposed to be easy. Where it is easy, it's called a police state.)S
36 634.2 M(Jeff Schiller of MIT, in a discussion of FBI demands for wiretap capability on the net, as)S
36 621 M(quoted by Wired.)S
0 594.6 M(The Raven mailing list was set up for this IETF discussion.)S
0 568.2 M(Our goal is to go beyond that RFC and prevent Internet wiretapping entirely.)S
14 FS/F9 SF 0 538.8 M(The Wassenaar Arrangement)S
11 FS/F4 SF 0 511.8 M(Restrictions on the export of cryptography are not just US policy, though some consider the US at least partly)S
0 498.6 M(to blame for the policies of other nations in this area.)S
0 472.2 M(A number of countries:)S
0 445.8 M(Argentina, Australia, Austria, Belgium, Bulgaria, Canada, Czech Republic, Denmark, Finland, France,)S
0 432.6 M(Germany, Greece, Hungary, Ireland, Italy, Japan, Luxembourg, Netherlands, New Zealand, Norway, Poland,)S
0 419.4 M(Portugal, Republic of Korea, Romania, Russian Federation, Slovak Republic, Spain, Sweden, Switzerland,)S
0 406.2 M(Turkey, Ukraine, United Kingdom and United States)S
0 379.8 M(have signed the Wassenaar Arrangement which restricts export of munitions and other tools of war.)S
0 366.6 M(Cryptographic sofware is covered there.)S
0 340.2 M(Wassenaar details are available from the Wassenaar Secretariat, and elsewhere in a more readable HTML)S
0 327 M(version.)S
0 300.6 M(For a critique see the GILC site:)S
36 274.2 M(The Global Internet Liberty Campaign \(GILC\) has begun a campaign calling for the removal)S
36 261 M(of cryptography controls from the Wassenaar Arrangement.)S
36 234.6 M(The aim of the Wassenaar Arrangement is to prevent the build up of military capabilities that)S
36 221.4 M(threaten regional and international security and stability . . .)S
36 195 M(There is no sound basis within the Wassenaar Arrangement for the continuation of any export)S
36 181.8 M(controls on cryptographic products.)S
0 155.4 M(We agree entirely.)S
0 129 M(An interesting analysis of Wassenaar can be found on the cyber-rights.org site.)S
14 FS/F9 SF 0 99.6 M(Export status of Linux FreeS/WAN)S
11 FS/F4 SF 0 72.6 M(We believe our software is entirely exempt from these controls since the Wassenaar General Software Note)S
0 59.4 M(says:)S
36 33 M(The Lists do not control "software" which is either:)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(The Wassenaar Arrangement)S
468.652 0 M(222)S
GR
SP
%%Page: 223 252
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 72 687 M(Generally available to the public by . . . retail . . . or)S
61 687 M(1. )S
72 673.8 M("In the public domain".)S
61 673.8 M(2. )S
0 647.4 M(There is a note restricting some of this, but it is a sub-heading under point 1, so it appears not to apply to)S
0 634.2 M(public domain software.)S
0 607.8 M(Their glossary defines "In the public domain" as:)S
36 581.4 M(. . . "technology" or "software" which has been made available without restrictions upon its)S
36 568.2 M(further dissemination.)S
36 541.8 M(N.B. Copyright restrictions do not remove "technology" or "software" from being "in the)S
36 528.6 M(public domain".)S
0 502.2 M(We therefore believe that software freely distributed under the GNU Public License, such as Linux)S
0 489 M(FreeS/WAN, is exempt from Wassenaar restrictions.)S
0 462.6 M(Most of the development work is being done in Canada. Our understanding is that the Canadian government)S
0 449.4 M(accepts this interpretation.)S
36 423 M(A web statement of Canadian policy is available from the Department of Foreign Affairs and)S
36 409.8 M(International Trade.)S
/Fc SF 28.19 423 M(\267 )S
/F4 SF 36 396.6 M(Another document from that department states that public domain software is exempt from the export)S
36 383.4 M(controls.)S
/Fc SF 28.19 396.6 M(\267 )S
/F4 SF 36 370.2 M(A researcher's analysis of Canadian policy is also available.)S
/Fc SF 28.19 370.2 M(\267 )S
/F4 SF 0 343.8 M(Recent copies of the freely modifiable and distributable source code exist in many countries. Citizens all over)S
0 330.6 M(the world participate in its use and evolution, and guard its ongoing distribution. Even if Canadian policy were)S
0 317.4 M(to change, the software would continue to evolve in countries which do not restrict exports, and would)S
0 304.2 M(continue to be imported from there into unfree countries. "The Net culture treats censorship as damage, and)S
0 291 M(routes around it.")S
14 FS/F9 SF 0 261.6 M(Help spread IPsec around)S
11 FS/F4 SF 0 234.6 M(You can help. If you don't know of a Linux FreeS/WAN archive in your own country, please download it now)S
0 221.4 M(to your personal machine, and consider making it publicly accessible if that doesn't violate your own laws. If)S
0 208.2 M(you have the resources, consider going one step further and setting up a mirror site for the whole munitions)S
0 195 M(Linux crypto software archive.)S
0 168.6 M(If you make Linux CD-ROMs, please consider including this code, in a way that violates no laws \(in a free)S
0 155.4 M(country, or in a domestic-only CD product\).)S
0 129 M(Please send a note about any new archive mirror sites or CD distributions to linux-ipsec@clinet.fi so we can)S
0 115.8 M(update the documentation.)S
0 89.4 M(Lists of current mirror sites and of distributions which include FreeS/WAN are in our introduction section.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Help spread IPsec around)S
468.652 0 M(223)S
GR
SP
%%Page: 224 253
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
17 FS/F9 SF 0 681 M(DES is Not Secure)S
11 FS/F4 SF 0 653.4 M(DES, the)S
/F7 SF ( D)S
/F4 SF (ata)S
/F7 SF ( E)S
/F4 SF (ncryption)S
/F7 SF ( S)S
/F4 SF (tandard, can no longer be considered secure. While no major flaws in its innards)S
0 640.2 M(are known, it is fundamentally inadequate because its)S
/F7 SF ( 56-bit key is too short)S
/F4 SF (. It is vulnerable to brute-force)S
0 627 M(search of the whole key space, either by large collections of general-purpose machines or even more quickly)S
0 613.8 M(by specialized hardware. Of course this also applies to)S
/F7 SF ( any other cipher with only a 56-bit key)S
/F4 SF (. The only)S
0 600.6 M(reason anyone could have for using a 56 or 64-bit key is to comply with various export laws intended to)S
0 587.4 M(ensure the use of breakable ciphers.)S
0 561 M(Non-government cryptologists have been saying DES's 56-bit key was too short for some time -- some of)S
0 547.8 M(them were saying it in the 70's when DES became a standard -- but the US government has consistently)S
0 534.6 M(ridiculed such suggestions.)S
0 508.2 M(A group of well-known cryptographers looked at key lengths in a 1996 paper. They suggested a)S
/F6 SF ( minimum)S
/F4 SF ( of)S
0 495 M(75 bits to consider an existing cipher secure and a)S
/F6 SF ( minimum of 90 bits for new ciphers)S
/F4 SF (. More recent papers,)S
0 481.8 M(covering both symmetric and public key systems are at cryptosavvy.com and rsa.com. For all algorithms, the)S
0 468.6 M(minimum keylengths recommended in such papers are significantly longer than the maximums allowed by)S
0 455.4 M(various export laws.)S
0 429 M(In a 1998 ruling, a German court described DES as "out-of-date and not safe enough" and held a bank liable)S
0 415.8 M(for using it.)S
14 FS/F9 SF 0 386.4 M(Dedicated hardware breaks DES in a few days)S
11 FS/F4 SF 0 359.4 M(The question of DES security has now been settled once and for all. In early 1998, the Electronic Frontier)S
0 346.2 M(Foundation built a DES-cracking machine. It can find a DES key in an average of a few days' search. The)S
0 333 M(details of all this, including complete code listings and complete plans for the machine, have been published)S
0 319.8 M(in)S
/F6 SF ( Cracking DES)S
/F4 SF (, by the Electronic Frontier Foundation.)S
0 293.4 M(That machine cost just over $200,000 to design and build. "Moore's Law" is that machines get faster \(or)S
0 280.2 M(cheaper, for the same speed\) by roughly a factor of two every 18 months. At that rate, their $200,000 in 1998)S
0 267 M(becomes $50,000 in 2001.)S
0 240.6 M(However, Moore's Law is not exact and the $50,000 estimate does not allow for the fact that a copy based on)S
0 227.4 M(the published EFF design would cost far less than the original. We cannot say exactly what such a cracker)S
0 214.2 M(would cost today, but it would likely be somewhere between $10,000 and $100,000.)S
0 187.8 M(A large corporation could build one of these out of petty cash. The cost is low enough for a senior manager to)S
0 174.6 M(hide it in a departmental budget and avoid having to announce or justify the project. Any government agency,)S
0 161.4 M(from a major municipal police force up, could afford one. Or any other group with a respectable budget --)S
0 148.2 M(criminal organisations, political groups, labour unions, religious groups, ... Or any millionaire with an)S
0 135 M(obsession or a grudge, or just strange taste in toys.)S
0 108.6 M(One might wonder if a private security or detective agency would have one for rent. They wouldn't need many)S
0 95.4 M(clients to pay off that investment.)S
14 FS/F9 SF 0 66 M(Spooks may break DES faster yet)S
11 FS/F4 SF 0 39 M(As for the security and intelligence agencies of various nations, they may have had DES crackers for years,)S
0 25.8 M(and theirs may be much faster. It is difficult to make most computer applications work well on parallel)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(DES is Not Secure)S
468.652 0 M(224)S
GR
SP
%%Page: 225 254
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(machines, or to design specialised hardware to accelerate them. Cipher-cracking is one of the very few)S
0 673.8 M(exceptions. It is entirely straightforward to speed up cracking by just adding hardware. Within very broad)S
0 660.6 M(limits, you can make it as fast as you like if you have the budget. The EFF's $200,000 machine breaks DES in)S
0 647.4 M(a few days. An aviation website gives the cost of a B1 bomber as $200,000,000. Spending that much, an)S
0 634.2 M(intelligence agency could break DES in an average time of)S
/F6 SF ( six and a half minutes)S
/F4 SF (.)S
0 607.8 M(That estimate assumes they use the EFF's 1998 technology and just spend more money. They may have an)S
0 594.6 M(attack that is superior to brute force, they quite likely have better chip technology \(Moore's law, a bigger)S
0 581.4 M(budget, and whatever secret advances they may have made\) and of course they may have spent the price of an)S
0 568.2 M(aircraft carrier, not just one aircraft.)S
0 541.8 M(In short, we have)S
/F6 SF ( no idea)S
/F4 SF ( how quickly these organisations can break DES. Unless they're spectacularly)S
0 528.6 M(incompetent or horribly underfunded, they can certainly break it, but we cannot guess how quickly. Pick any)S
0 515.4 M(time unit between days and milliseconds; none is entirely unbelievable. More to the point, none of them is of)S
0 502.2 M(any comfort if you don't want such organisations reading your communications.)S
0 475.8 M(Note that this may be a concern even if nothing you do is a threat to anyone's national security. An)S
0 462.6 M(intelligence agency might well consider it to be in their national interest for certain companies to do well. If)S
0 449.4 M(you're competing against such companies in a world market and that agency can read your secrets, you have a)S
0 436.2 M(serious problem.)S
0 409.8 M(One might wonder about technology the former Soviet Union and its allies developed for cracking DES)S
0 396.6 M(during the Cold War. They must have tried; the cipher was an American standard and widely used. Certainly)S
0 383.4 M(those countries have some fine mathematicians, and those agencies had budget. How well did they succeed? Is)S
0 370.2 M(their technology now for sale or rent?)S
14 FS/F9 SF 0 340.8 M(Networks break DES in a few weeks)S
11 FS/F4 SF 0 313.8 M(Before the definitive EFF effort, DES had been cracked several times by people using many machines. See)S
0 300.6 M(this press release for example.)S
0 274.2 M(A major corporation, university, or government department could break DES by using spare cycles on their)S
0 261 M(existing collection of computers, by dedicating a group of otherwise surplus machines to the problem, or by)S
0 247.8 M(combining the two approaches. It might take them weeks or months, rather than the days required for the EFF)S
0 234.6 M(machine, but they could do it.)S
0 208.2 M(What about someone working alone, without the resources of a large organisation? For them, cracking DES)S
0 195 M(will not be easy, but it may be possible. A few thousand dollars buys a lot of surplus workstations. A pile of)S
0 181.8 M(such machines will certainly heat your garage nicely and might break DES in a few months or years. Or enroll)S
0 168.6 M(at a university and use their machines. Or use an employer's machines. Or crack security somewhere and steal)S
0 155.4 M(the resources to crack a DES key. Or write a virus that steals small amounts of resources on many machines.)S
0 142.2 M(Or . . .)S
0 115.8 M(None of these approaches are easy or break DES really quickly, but an attacker only needs to find one that is)S
0 102.6 M(feasible and breaks DES quickly enough to be dangerous. How much would you care to bet that this will be)S
0 89.4 M(impossible if the attacker is clever and determined? How valuable is your data? Are you authorised to risk it)S
0 76.2 M(on a dubious bet?)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Networks break DES in a few weeks)S
468.652 0 M(225)S
GR
SP
%%Page: 226 255
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(We disable DES)S
11 FS/F4 SF 0 657 M(In short, it is now absolutely clear that)S
/F7 SF ( DES is not secure)S
/F4 SF ( against)S
36 630.6 M(any)S
/F7 SF ( well-funded opponent)S
/Fc SF 28.19 630.6 M(\267 )S
/F4 SF 36 617.4 M(any opponent \(even a penniless one\) with access \(even stolen access\) to)S
/F7 SF ( enough general purpose)S
36 604.2 M(computers)S
/Fc SF 28.19 617.4 M(\267 )S
/F4 SF 0 577.8 M(That is why)S
/F7 SF ( Linux FreeS/WAN disables all transforms which use plain DES)S
/F4 SF ( for encryption.)S
0 551.4 M(DES is in the source code, because we need DES to implement our default encryption transform, Triple DES.)S
/F7 SF 0 538.2 M(We urge you not to use single DES)S
/F4 SF (. We do not provide any easy way to enable it in FreeS/WAN, and our)S
0 525 M(policy is to provide no assistance to anyone wanting to do so.)S
14 FS/F9 SF 0 495.6 M(40-bits is laughably weak)S
11 FS/F4 SF 0 468.6 M(The same is true, in spades, of ciphers -- DES or others -- crippled by 40-bit keys, as many ciphers were)S
0 455.4 M(required to be until recently under various export laws. A brute force search of such a cipher's keyspace is 2)S
8 FS/F4 SF 474.243 459.9 M(16)S
11 FS/F4 SF 0 442.2 M(times faster than a similar search against DES. The EFF's machine can do a brute-force search of a 40-bit key)S
0 429 M(space in)S
/F6 SF ( seconds)S
/F4 SF (. One contest to crack a 40-bit cipher was won by a student using a few hundred idle)S
0 415.8 M(machines at his university. It took only three and half hours.)S
0 389.4 M(We do not, and will not, implement any 40-bit cipher.)S
14 FS/F9 SF 0 360 M(Triple DES is almost certainly secure)S
11 FS/F4 SF 0 333 M(Triple DES, usually abbreviated 3DES, applies DES three times, with three different keys. DES seems to be)S
0 319.8 M(basically an excellent cipher design; it has withstood several decades of intensive analysis without any)S
0 306.6 M(disastrous flaws being found. It's only major flaw is that the small keyspace allows brute force attacks to)S
0 293.4 M(succeeed. Triple DES enlarges the key space to 168 bits, making brute-force search a ridiculous)S
0 280.2 M(impossibility.)S
0 253.8 M(3DES is currently the only block cipher implemented in FreeS/WAN. 3DES is, unfortunately, about 1/3 the)S
0 240.6 M(speed of DES, but modern CPUs still do it at quite respectable speeds. Some speed measurements for our code)S
0 227.4 M(are available.)S
14 FS/F9 SF 0 198 M(AES in IPsec)S
11 FS/F4 SF 0 171 M(The AES project has chosen a replacement for DES, a new standard cipher for use in non-classified US)S
0 157.8 M(government work and in regulated industries such as banking. This cipher will almost certainly become)S
0 144.6 M(widely used for many applications, including IPsec.)S
0 118.2 M(The winner, announced in October 2000 after several years of analysis and discussion, was the Rijndael cipher)S
0 105 M(from two Belgian designers.)S
0 78.6 M(It is almost certain that FreeS/WAN will add AES support. AES patches are already available.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(We disable DES)S
468.652 0 M(226)S
GR
SP
%%Page: 227 256
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
17 FS/F9 SF 0 681 M(Press coverage of Linux FreeS/WAN:)S
14 FS/F9 SF 0 650.4 M(FreeS/WAN 1.0 press)S
11 FS/F4 SF 36 623.4 M(Wired "Linux-Based Crypto Stops Snoops", James Glave April 15 1999)S
/Fc SF 28.19 623.4 M(\267 )S
/F4 SF 36 610.2 M(Slashdot)S
/Fc SF 28.19 610.2 M(\267 )S
/F4 SF 36 597 M(DGL, Damar Group Limited; looking at FreeS/WAN from a perspective of business computing)S
/Fc SF 28.19 597 M(\267 )S
/F4 SF 36 583.8 M(Linux Today)S
/Fc SF 28.19 583.8 M(\267 )S
/F4 SF 36 570.6 M(TBTF, Tasty Bits from the Technology Front)S
/Fc SF 28.19 570.6 M(\267 )S
/F4 SF 36 557.4 M(Salon Magazine "Free Encryption Takes a Big Step")S
/Fc SF 28.19 557.4 M(\267 )S
14 FS/F9 SF 0 528 M(Press release for version 1.0)S
9 FS/F0 SF 0 503 M(        Strong Internet Privacy Software Free for Linux Users Worldwide)S
0 481.4 M(Toronto, ON, April 14, 1999 - )S
0 459.8 M(The Linux FreeS/WAN project today released free software to protect)S
0 449 M(the privacy of Internet communications using strong encryption codes.)S
0 438.2 M(FreeS/WAN automatically encrypts data as it crosses the Internet, to)S
0 427.4 M(prevent unauthorized people from receiving or modifying it.  One)S
0 416.6 M(ordinary PC per site runs this free software under Linux to become a)S
0 405.8 M(secure gateway in a Virtual Private Network, without having to modify)S
0 395 M(users' operating systems or application software.  The project built)S
0 384.2 M(and released the software outside the United States, avoiding US)S
0 373.4 M(government regulations which prohibit good privacy protection.)S
0 362.6 M(FreeS/WAN version 1.0 is available immediately for downloading at)S
0 351.8 M(http://www.xs4all.nl/~freeswan/.)S
0 330.2 M("Today's FreeS/WAN release allows network administrators to build)S
0 319.4 M(excellent secure gateways out of old PCs at no cost, or using a cheap)S
0 308.6 M(new PC," said John Gilmore, the entrepreneur who instigated the)S
0 297.8 M(project in 1996.  "They can build operational experience with strong)S
0 287 M(network encryption and protect their users' most important)S
0 276.2 M(communications worldwide.")S
0 254.6 M("The software was written outside the United States, and we do not)S
0 243.8 M(accept contributions from US citizens or residents, so that it can be)S
0 233 M(freely published for use in every country," said Henry Spencer, who)S
0 222.2 M(built the release in Toronto, Canada.  "Similar products based in the)S
0 211.4 M(US require hard-to-get government export licenses before they can be)S
0 200.6 M(provided to non-US users, and can never be simply published on a Web)S
0 189.8 M(site.  Our product is freely available worldwide for immediate)S
0 179 M(downloading, at no cost.")S
0 157.4 M(FreeS/WAN provides privacy against both quiet eavesdropping \(such as)S
0 146.6 M("packet sniffing"\) and active attempts to compromise communications)S
0 135.8 M(\(such as impersonating participating computers\).  Secure "tunnels" carry)S
0 125 M(information safely across the Internet between locations such as a)S
0 114.2 M(company's main office, distant sales offices, and roaming laptops.  This)S
0 103.4 M(protects the privacy and integrity of all information sent among those)S
0 92.6 M(locations, including sensitive intra-company email, financial transactions)S
0 81.8 M(such as mergers and acquisitions, business negotiations, personal medical)S
0 71 M(records, privileged correspondence with lawyers, and information about)S
0 60.2 M(crimes or civil rights violations.  The software will be particularly)S
0 49.4 M(useful to frequent wiretapping targets such as private companies competing)S
0 38.6 M(with government-owned companies, civil rights groups and lawyers,)S
0 27.8 M(opposition political parties, and dissidents. )S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Press coverage of Linux FreeS/WAN:)S
468.652 0 M(227)S
GR
SP
%%Page: 228 257
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 678.2 M(FreeS/WAN provides privacy for Internet packets using the proposed)S
0 667.4 M(standard Internet Protocol Security \(IPSEC\) protocols.  FreeS/WAN)S
0 656.6 M(negotiates strong keys using Diffie-Hellman key agreement with 1024-bit)S
0 645.8 M(keys, and encrypts each packet with 168-bit Triple-DES \(3DES\).  A modern)S
0 635 M($500 PC can set up a tunnel in less than a second, and can encrypt)S
0 624.2 M(6 megabits of packets per second, easily handling the whole available)S
0 613.4 M(bandwidth at the vast majority of Internet sites.  In preliminary testing,)S
0 602.6 M(FreeS/WAN interoperated with 3DES IPSEC products from OpenBSD, PGP, SSH,)S
0 591.8 M(Cisco, Raptor, and Xedia.  Since FreeS/WAN is distributed as source code,)S
0 581 M(its innards are open to review by outside experts and sophisticated users,)S
0 570.2 M(reducing the chance of undetected bugs or hidden security compromises.)S
0 548.6 M(The software has been in development for several years.  It has been)S
0 537.8 M(funded by several philanthropists interested in increased privacy on)S
0 527 M(the Internet, including John Gilmore, co-founder of the Electronic)S
0 516.2 M(Frontier Foundation, a leading online civil rights group.)S
0 494.6 M(Press contacts:)S
0 483.8 M(Hugh Daniel,   +1 408 353 8124, hugh@toad.com)S
0 473 M(Henry Spencer, +1 416 690 6561, henry@spsystems.net)S
0 451.4 M(* FreeS/WAN derives its name from S/WAN, which is a trademark of RSA Data)S
0 440.6 M(  Security, Inc; used by permission.)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Press coverage of Linux FreeS/WAN:)S
468.652 0 M(228)S
GR
SP
%%Page: 229 258
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(The IPsec protocols)S
11 FS/F4 SF 0 649.8 M(This section provides information on the IPsec protocols which FreeS/WAN implements. For more detail, see)S
0 636.6 M(the RFCs.)S
0 610.2 M(The basic idea of IPsec is to provide security functions, authentication and encryption, at the IP \(Internet)S
0 597 M(Protocol\) level. This requires a higher-level protocol \(IKE\) to set things up for the IP-level services \(ESP and)S
0 583.8 M(AH\).)S
17 FS/F9 SF 0 551.4 M(Protocols and phases)S
11 FS/F4 SF 0 523.8 M(Three protocols are used in an IPsec implementation:)S
/F6 SF 0 497.4 M(ESP, Encapsulating Security Payload)S
/F4 SF 36 484.2 M(Encrypts and/or authenticates data)S
/F6 SF 0 471 M(AH, Authentication Header)S
/F4 SF 36 457.8 M(Provides a packet authentication service)S
/F6 SF 0 444.6 M(IKE, Internet Key Exchange)S
/F4 SF 36 431.4 M(Negotiates connection parameters, including keys, for the other two)S
0 405 M(The term "IPsec" \(also written as IPSEC\) is slightly ambiguous. In some contexts, it includes all three of the)S
0 391.8 M(above but in other contexts it refers only to AH and ESP.)S
0 365.4 M(There is more detail below, but a quick summary of how the whole thing works is:)S
/F6 SF 0 339 M(Phase one IKE \(main mode exchange\))S
/F4 SF 36 325.8 M(sets up a keying channel \(ISAKMP SA\) between the two gateways)S
/F6 SF 0 312.6 M(Phase two IKE \(quick mode exchange\))S
/F4 SF 36 299.4 M(sets up data channels \(IPsec SAs\))S
/F6 SF 0 286.2 M(IPsec proper)S
/F4 SF 36 273 M(exchanges data using AH or ESP)S
0 246.6 M(Both phases of IKE are repeated periodically to automate re-keying.)S
17 FS/F9 SF 0 214.2 M(Applying IPsec)S
11 FS/F4 SF 0 186.6 M(Authentication and encryption functions for network data can, of course, be provided at other levels. Many)S
0 173.4 M(security protocols work at levels above IP.)S
36 147 M(PGP encrypts and authenticates mail messages)S
/Fc SF 28.19 147 M(\267 )S
/F4 SF 36 133.8 M(SSH authenticates remote logins and then encrypts the session)S
/Fc SF 28.19 133.8 M(\267 )S
/F4 SF 36 120.6 M(SSL or TLS provides security at the sockets layer, e.g. for secure web browsing)S
/Fc SF 28.19 120.6 M(\267 )S
/F4 SF 0 94.2 M(and so on. Other techniques work at levels below IP. For example, data on a communications circuit or an)S
0 81 M(entire network can be encrypted by specialised hardware. This is common practice in high-security)S
0 67.8 M(applications.)S
/F8 SF 0 0 M(The IPsec protocols)S
468.652 0 M(229)S
GR
SP
%%Page: 230 259
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(Advantages of IPsec)S
11 FS/F4 SF 0 657 M(There are, however, advantages to doing it at the IP level instead of, or as well as, at other levels.)S
0 630.6 M(IPsec is the)S
/F7 SF ( most general way to provide these services for the Internet)S
/F4 SF (.)S
36 604.2 M(Higher-level services protect a)S
/F6 SF ( single protocol)S
/F4 SF (; for example PGP protects mail.)S
/Fc SF 28.19 604.2 M(\267 )S
/F4 SF 36 591 M(Lower level services protect a)S
/F6 SF ( single medium)S
/F4 SF (; for example a pair of encryption boxes on the ends of a)S
36 577.8 M(line make wiretaps on that line useless unless the attacker is capable of breaking the encryption.)S
/Fc SF 28.19 591 M(\267 )S
/F4 SF 0 551.4 M(IPsec, however, can protect)S
/F6 SF ( any protocol)S
/F4 SF ( running above IP and)S
/F6 SF ( any medium)S
/F4 SF ( which IP runs over. More to the)S
0 538.2 M(point, it can protect a mixture of application protocols running over a complex combination of media. This is)S
0 525 M(the normal situation for Internet communication; IPsec is the only general solution.)S
0 498.6 M(IPsec can also provide some security services "in the background", with)S
/F7 SF ( no visible impact on users)S
/F4 SF (. To use)S
0 485.4 M(PGP encryption and signatures on mail, for example, the user must at least:)S
36 459 M(remember his or her passphrase,)S
/Fc SF 28.19 459 M(\267 )S
/F4 SF 36 445.8 M(keep it secure)S
/Fc SF 28.19 445.8 M(\267 )S
/F4 SF 36 432.6 M(follow procedures to validate correspondents' keys)S
/Fc SF 28.19 432.6 M(\267 )S
/F4 SF 0 406.2 M(These systems can be designed so that the burden on users is not onerous, but any system will place some)S
0 393 M(requirements on users. No such system can hope to be secure if users are sloppy about meeting those)S
0 379.8 M(requirements. The author has seen username and password stuck on terminals with post-it notes in an)S
0 366.6 M(allegedly secure environment, for example.)S
14 FS/F9 SF 0 337.2 M(Limitations of IPsec)S
11 FS/F4 SF 0 310.2 M(IPsec is designed to secure IP links between machines. It does that well, but it is important to remember that)S
0 297 M(there are many things it does not do. Some of the important limitations are:)S
/F6 SF 0 270.6 M(IPsec cannot be secure if your system isn't)S
/F4 SF 36 257.4 M(System security on IPsec gateway machines is an essential requirement if IPsec is to function as)S
36 244.2 M(designed. No system can be trusted if the underlying machine has been subverted. See books on Unix)S
36 231 M(security such as Garfinkel and Spafford or our web references for Linux security or more general)S
36 217.8 M(computer security.)S
36 191.4 M(Of course, there is another side to this. IPsec can be a powerful tool for improving system and)S
36 178.2 M(network security. For example, requiring packet authentication makes various spoofing attacks harder)S
36 165 M(and IPsec tunnels can be extremely useful for secure remote administration of various things.)S
/F6 SF 0 151.8 M(IPsec is not end-to-end)S
/F4 SF 36 138.6 M(IPsec cannot provide the same end-to-end security as systems working at higher levels. IPsec)S
36 125.4 M(encrypts an IP connection between two machines, which is quite a different thing than encrypting)S
36 112.2 M(messages between users or between applications.)S
36 85.8 M(For example, if you need mail encrypted from the sender's desktop to the recipient's desktop and)S
36 72.6 M(decryptable only by the recipient, use PGP or another such system. IPsec can encrypt any or all of the)S
36 59.4 M(links involved -- between the two mail servers, or between either server and its clients. It could even)S
36 46.2 M(be used to secure a direct IP link from the sender's desktop machine to the recipient's, cutting out any)S
36 33 M(sort of network snoop. What it cannot ensure is end-to-end user-to-user security. If only IPsec is)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Advantages of IPsec)S
468.652 0 M(230)S
GR
SP
%%Page: 231 260
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(used to secure mail, then anyone with appropriate privileges on any machine where that mail is stored)S
36 673.8 M(\(at either end or on any store-and-forward servers in the path\) can read it.)S
36 647.4 M(In another common setup, IPsec encrypts packets at a security gateway machine as they leave the)S
36 634.2 M(sender's site and decrypts them on arrival at the gateway to the recipient's site. This does provide a)S
36 621 M(useful security service -- only encrypted data is passed over the Internet -- but it does not even)S
36 607.8 M(come close to providing an end-to-end service. In particular, anyone with appropriate privileges on)S
36 594.6 M(either site's LAN can intercept the message in unencrypted form.)S
/F6 SF 0 581.4 M(IPsec cannot do everything)S
/F4 SF 36 568.2 M(IPsec also cannot provide all the functions of systems working at higher levels of the protocol stack. If)S
36 555 M(you need a document electronically signed by a particular person, then you need his or her digital)S
36 541.8 M(signature and a public key cryptosystem to verify it with.)S
36 515.4 M(Note, however, that IPsec authentication of the underlying communication can make various attacks)S
36 502.2 M(on higher-level protocols more difficult. In particular, authentication prevents man-in-the-middle)S
36 489 M(attacks.)S
/F6 SF 0 475.8 M(IPsec authenticates machines, not users)S
/F4 SF 36 462.6 M(IPsec uses strong authentication mechanisms to control which messages go to which machines, but it)S
36 449.4 M(does not have the concept of user ID, which is vital to many other security mechansims and policies.)S
36 436.2 M(This means some care must be taken in fitting the various security mechansims on a network together.)S
36 423 M(For example, if you need to control which users access your database server, you need some)S
36 409.8 M(non-IPsec mechansim for that. IPsec can control which machines connect to the server, and can)S
36 396.6 M(ensure that data transfer to those machines is done securely, but that is all. Either the machines)S
36 383.4 M(themselves must control user access or there must be some form of user authentication to the)S
36 370.2 M(database, independent of IPsec.)S
/F6 SF 0 357 M(IPsec does not stop denial of service attacks)S
/F4 SF 36 343.8 M(Denial of service attacks aim at causing a system to crash, overload, or become confused so that)S
36 330.6 M(legitimate users cannot get whatever services the system is supposed to provide. These are quite)S
36 317.4 M(different from attacks in which the attacker seeks either to use the service himself or to subvert the)S
36 304.2 M(service into delivering incorrect results.)S
36 277.8 M(IPsec shifts the ground for DoS attacks; the attacks possible against systems using IPsec are different)S
36 264.6 M(than those that might be used against other systems. It does not, however, eliminate the possibility of)S
36 251.4 M(such attacks.)S
/F6 SF 0 238.2 M(IPsec does not stop traffic analysis)S
/F4 SF 36 225 M(Traffic analysis is the attempt to derive intelligence from messages without regard for their contents.)S
36 211.8 M(In the case of IPsec, it would mean analysis based on things visible in the unencrypted headers of)S
36 198.6 M(encrypted packets -- source and destination gateway addresses, packet size, et cetera. Given the)S
36 185.4 M(resources to acquire such data and some skill in analysing it \(both of which any national intelligence)S
36 172.2 M(agency should have\), this can be a very powerful technique.)S
36 145.8 M(IPsec is not designed to defend against this. Partial defenses are certainly possible, and some are)S
36 132.6 M(described below, but it is not clear that any complete defense can be provided.)S
14 FS/F9 SF 0 103.2 M(IPsec is a general mechanism for securing IP)S
11 FS/F4 SF 0 76.2 M(While IPsec does not provide all functions of a mail encryption package, it can encrypt your mail. In)S
0 63 M(particular, it can ensure that all mail passing between a pair or a group of sites is encrypted. An attacker)S
0 49.8 M(looking only at external traffic, without access to anything on or behind the IPsec gateway, cannot read your)S
0 36.6 M(mail. He or she is stymied by IPsec just as he or she would be by PGP.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(IPsec is a general mechanism for securing IP)S
468.652 0 M(231)S
GR
SP
%%Page: 232 261
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(The advantage is that IPsec can provide the same protection for)S
/F7 SF ( anything transmitted over IP)S
/F4 SF (. In a corporate)S
0 673.8 M(network example, PGP lets the branch offices exchange secure mail with head office. SSL and SSH allow)S
0 660.6 M(them to securely view web pages, connect as terminals to machines, and so on. IPsec can support all those)S
0 647.4 M(applications, plus database queries, file sharing \(NFS or Windows\), other protocols encapsulated in IP)S
0 634.2 M(\(Netware, Appletalk, ...\), phone-over-IP, video-over-IP, ... anything-over-IP. The only limitation is that IP)S
0 621 M(Multicast is not yet supported, though there are Internet Draft documents for that.)S
0 594.6 M(IPsec creates)S
/F7 SF ( secure tunnels through untrusted networks)S
/F4 SF (. Sites connected by these tunnels form VPNs,)S
0 581.4 M(Virtual Private Networks.)S
0 555 M(IPsec gateways can be installed wherever they are required.)S
36 528.6 M(One organisation might choose to install IPsec only on firewalls between their LANs and the Internet.)S
36 515.4 M(This would allow them to create a VPN linking several offices. It would provide protection against)S
36 502.2 M(anyone outside their sites.)S
/Fc SF 28.19 528.6 M(\267 )S
/F4 SF 36 489 M(Another might install IPsec on departmental servers so everything on the corporate backbone net was)S
36 475.8 M(encrypted. This would protect messages on that net from everyone except the sending and receiving)S
36 462.6 M(department.)S
/Fc SF 28.19 489 M(\267 )S
/F4 SF 36 449.4 M(Another might be less concerned with information secrecy and more with controlling access to certain)S
36 436.2 M(resources. They might use IPsec packet authentication as part of an access control mechanism, with or)S
36 423 M(without also using the IPsec encryption service.)S
/Fc SF 28.19 449.4 M(\267 )S
/F4 SF 36 409.8 M(It is even possible \(assuming adequate processing power and an IPsec implementation in each node\))S
36 396.6 M(to make every machine its own IPsec gateway so that everything on a LAN is encrypted. This protects)S
36 383.4 M(information from everyone outside the sending and receiving machine.)S
/Fc SF 28.19 409.8 M(\267 )S
/F4 SF 36 370.2 M(These techniques can be combined in various ways. One might, for example, require authentication)S
36 357 M(everywhere on a network while using encryption only for a few links.)S
/Fc SF 28.19 370.2 M(\267 )S
/F4 SF 0 330.6 M(Which of these, or of the many other possible variants, to use is up to you.)S
/F7 SF ( IPsec provides mechanisms; you)S
0 317.4 M(provide the policy)S
/F4 SF (.)S
/F7 SF 0 291 M(No end user action is required)S
/F4 SF ( for IPsec security to be used; they don't even have to know about it. The site)S
0 277.8 M(administrators, of course, do have to know about it and to put some effort into making it work. Poor)S
0 264.6 M(administration can compromise IPsec as badly as the post-it notes mentioned above. It seems reasonable,)S
0 251.4 M(though, for organisations to hope their system administrators are generally both more security-conscious than)S
0 238.2 M(end users and more able to follow computer security procedures. If not, at least there are fewer of them to)S
0 225 M(educate or replace.)S
0 198.6 M(IPsec can be, and often should be, used with along with security protocols at other levels. If two sites)S
0 185.4 M(communicate with each other via the Internet, then IPsec is the obvious way to protect that communication. If)S
0 172.2 M(two others have a direct link between them, either link encryption or IPsec would make sense. Choose one or)S
0 159 M(use both. Whatever you use at and below the IP level, use other things as required above that level. Whatever)S
0 145.8 M(you use above the IP level, consider what can be done with IPsec to make attacks on the higher levels harder.)S
0 132.6 M(For example, man-in-the-middle attacks on various protocols become difficult if authentication at packet)S
0 119.4 M(level is in use on the potential victims' communication channel.)S
14 FS/F9 SF 0 90 M(Using authentication without encryption)S
11 FS/F4 SF 0 63 M(Where appropriate, IPsec can provide authentication without encryption. One might do this, for example:)S
36 36.6 M(where the data is public but one wants to be sure of getting the right data, for example on some web)S
/Fc SF 28.19 36.6 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Using authentication without encryption)S
468.652 0 M(232)S
GR
SP
%%Page: 233 262
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(sites)S
36 673.8 M(where encryption is judged unnecessary, for example on some company or department LANs)S
/Fc SF 28.19 673.8 M(\267 )S
/F4 SF 36 660.6 M(where strong encryption is provided at link level, below IP)S
/Fc SF 28.19 660.6 M(\267 )S
/F4 SF 36 647.4 M(where strong encryption is provided in other protocols, above IP)S
36 634.2 M(Note that IPsec authentication may make some attacks on those protocols harder.)S
/Fc SF 28.19 647.4 M(\267 )S
/F4 SF 0 607.8 M(Authentication has lower overheads than encryption.)S
0 581.4 M(The protocols provide four ways to build such connections, using either an AH-only connection or ESP using)S
0 568.2 M(null encryption, and in either manually or automatically keyed mode. FreeS/WAN supports only one of these,)S
0 555 M(manually keyed AH-only connections, and)S
/F7 SF ( we do not recommend using that)S
/F4 SF (. Our reasons are discussed)S
0 541.8 M(under Resisting traffic analysis a few sections further along.)S
14 FS/F9 SF 0 512.4 M(Encryption without authentication is dangerous)S
11 FS/F4 SF 0 485.4 M(Originally, the IPsec encryption protocol ESP didn't do integrity checking. It only did encryption. Steve)S
0 472.2 M(Bellovin found many ways to attack ESP used without authentication. See his paper Problem areas for the IP)S
0 459 M(Security Protocols. To make a secure connection, you had to add an AH Authentication Header as well as)S
0 445.8 M(ESP. Rather than incur the overhead of several layers \(and rather than provide an ESP layer that didn't)S
0 432.6 M(actually protect the traffic\), the IPsec working group built integrity and replay checking directly into ESP.)S
0 406.2 M(Today, typical usage is one of:)S
36 379.8 M(ESP for encryption and authentication)S
/Fc SF 28.19 379.8 M(\267 )S
/F4 SF 36 366.6 M(AH for authentication alone)S
/Fc SF 28.19 366.6 M(\267 )S
/F4 SF 0 340.2 M(Other variants are allowed by the standard, but not much used:)S
/F6 SF 0 313.8 M(ESP encryption without authentication)S
/F7 SF 36 300.6 M(Bellovin has demonstrated fatal flaws in this. Do not use.)S
/F6 SF 0 287.4 M(ESP encryption with AH authentication)S
/F4 SF 36 274.2 M(This has higher overheads than using the authentication in ESP, and no obvious benefit in most cases.)S
36 261 M(The exception might be a network where AH authentication was widely or universally used. If you're)S
36 247.8 M(going to do AH to conform with network policy, why authenticate again in the ESP layer?)S
/F6 SF 0 234.6 M(Authenticate twice, with AH and with ESP)S
/F4 SF 36 221.4 M(Why? Of course, some folk consider "belt and suspenders" the sensible approach to security. If you're)S
36 208.2 M(among them, you might use both protocols here. You might also use both to satisfy different parts of a)S
36 195 M(security policy. For example, an organisation might require AH authentication everywhere but two)S
36 181.8 M(users within the organisation might use ESP as well.)S
/F6 SF 0 168.6 M(ESP authentication without encryption)S
/F4 SF 36 155.4 M(The standard allows this, calling it "null encryption". FreeS/WAN does not support it. We recommend)S
36 142.2 M(that you use AH instead if authentication is all you require. AH authenticates parts of the IP header,)S
36 129 M(which ESP-null does not do.)S
0 102.6 M(Some of these variants cannot be used with FreeS/WAN because we do not support ESP-null and do not)S
0 89.4 M(support automatic keying of AH-only connections.)S
0 63 M(There are fairly frequent suggestions that AH be dropped entirely from the IPsec specifications since ESP and)S
0 49.8 M(null encryption can handle that situation. It is not clear whether this will occur. My guess is that it is unlikely.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Encryption without authentication is dangerous)S
468.652 0 M(233)S
GR
SP
%%Page: 234 263
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(Multiple layers of IPsec processing are possible)S
11 FS/F4 SF 0 657 M(The above describes combinations possible on a single IPsec connection. In a complex network you may have)S
0 643.8 M(several layers of IPsec in play, with any of the above combinations at each layer.)S
0 617.4 M(For example, a connection from a desktop machine to a database server might require AH authentication.)S
0 604.2 M(Working with other host, network and database security measures, AH might be just the thing for access)S
0 591 M(control. You might decide not to use ESP encryption on such packets, since it uses resources and might)S
0 577.8 M(complicate network debugging. Within the site where the server is, then, only AH would be used on those)S
0 564.6 M(packets.)S
0 538.2 M(Users at another office, however, might have their whole connection \(AH headers and all\) passing over an)S
0 525 M(IPsec tunnel connecting their office to the one with the database server. Such a tunnel should use ESP)S
0 511.8 M(encryption and authentication. You need authentication in this layer because without authentication the)S
0 498.6 M(encryption is vulnerable and the gateway cannot verify the AH authentication. The AH is between client and)S
0 485.4 M(database server; the gateways aren't party to it.)S
0 459 M(In this situation, some packets would get multiple layers of IPsec applied to them, AH on an end-to-end)S
0 445.8 M(client-to-server basis and ESP from one office's security gateway to the other.)S
14 FS/F9 SF 0 416.4 M(Resisting traffic analysis)S
11 FS/F4 SF 0 389.4 M(Traffic analysis is the attempt to derive useful intelligence from encrypted traffic without breaking the)S
0 376.2 M(encryption.)S
0 349.8 M(Is your CEO exchanging email with a venture capital firm? With bankruptcy trustees? With an executive)S
0 336.6 M(recruiting agency? With the holder of some important patents? If an eavesdropper learns about any of those,)S
0 323.4 M(then he has interesting intelligence on your company, whether or not he can read the messages themselves.)S
0 297 M(Even just knowing that there is network traffic between two sites may tell an analyst something useful,)S
0 283.8 M(especially when combined with whatever other information he or she may have. For example, if you know)S
0 270.6 M(Company A is having cashflow problems and Company B is looking for aquisitions, then knowing that)S
0 257.4 M(packets are passing between the two is interesting. It is more interesting if you can tell it is email, and perhaps)S
0 244.2 M(yet more if you know the sender and recipient.)S
0 217.8 M(Except in the simplest cases, traffic analysis is hard to do well. It requires both considerable resources and)S
0 204.6 M(considerable analytic skill. However, intelligence agencies of various nations have been doing it for centuries)S
0 191.4 M(and many of them are likely quite good at it by now. Various commercial organisations, especially those)S
0 178.2 M(working on "targeted marketing" may also be quite good at analysing certain types of traffic.)S
0 151.8 M(In general, defending against traffic analysis is also difficult. Inventing a really good defense could get you a)S
0 138.6 M(PhD and some interesting job offers.)S
0 112.2 M(IPsec is not designed to stop traffic analysis and we know of no plausible method of extending it to do so.)S
0 99 M(That said, there are ways to make traffic analysis harder. This section describes them.)S
/F9 SF 0 72.6 M(Using "unnecessary" encryption)S
/F4 SF 0 46.2 M(One might choose to use encryption even where it appears unnecessary in order to make analysis more)S
0 33 M(difficult. Consider two offices which pass a small volume of business data between them using IPsec and also)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Multiple layers of IPsec processing are possible)S
468.652 0 M(234)S
GR
SP
%%Page: 235 264
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(transfer large volumes of Usenet news. At first glance, it would seem silly to encrypt the newsfeed, except)S
0 673.8 M(possibly for any newsgroups that are internal to the company. Why encrypt data that is all publicly available)S
0 660.6 M(from many sites?)S
0 634.2 M(However, if we encrypt a lot of news and send it down the same connection as our business data, we make)S
0 621 M(traffic analysis much harder. A snoop cannot now make inferences based on patterns in the volume, direction,)S
0 607.8 M(sizes, sender, destination, or timing of our business messages. Those messages are hidden in a mass of news)S
0 594.6 M(messages encapsulated in the same way.)S
0 568.2 M(If we're going to do this we need to ensure that keys change often enough to remain secure even with high)S
0 555 M(volumes and with the adversary able to get plaintext of much of the data. We also need to look at other attacks)S
0 541.8 M(this might open up. For example, can the adversary use a chosen plaintext attack, deliberately posting news)S
0 528.6 M(articles which, when we receive and encrypt them, will help break our encryption? Or can he block our)S
0 515.4 M(business data transmission by flooding us with silly news articles? Or ...)S
0 489 M(Also, note that this does not provide complete protection against traffic analysis. A clever adversary might)S
0 475.8 M(still deduce useful intelligence from statistical analysis \(perhaps comparing the input newsfeed to encrypted)S
0 462.6 M(output, or comparing the streams we send to different branch offices\), or by looking for small packets which)S
0 449.4 M(might indicate establishment of TCP connections, or ...)S
0 423 M(As a general rule, though, to improve resistance to traffic analysis, you should)S
/F7 SF ( encrypt as much traffic as)S
0 409.8 M(possible, not just as much as seems necessary.)S
/F9 SF 0 383.4 M(Using multiple encryption)S
/F4 SF 0 357 M(This also applies to using multiple layers of encryption. If you have an IPsec tunnel between two branch)S
0 343.8 M(offices, it might appear silly to send PGP-encrypted email through that tunnel. However, if you suspect)S
0 330.6 M(someone is snooping your traffic, then it does make sense:)S
36 304.2 M(it protects the mail headers; they cannot even see who is mailing who)S
/Fc SF 28.19 304.2 M(\267 )S
/F4 SF 36 291 M(it protects against user bungles or software malfunctions that accidentally send messages in the clear)S
/Fc SF 28.19 291 M(\267 )S
/F4 SF 36 277.8 M(it makes any attack on the mail encryption much harder; they have to break IPsec or break into your)S
36 264.6 M(network before they can start on the mail encryption)S
/Fc SF 28.19 277.8 M(\267 )S
/F4 SF 0 238.2 M(Similar arguments apply for SSL-encrypted web traffic or SSH-encrypted remote login sessions, even for)S
0 225 M(end-to-end IPsec tunnels between systems in the two offices.)S
/F9 SF 0 198.6 M(Using fewer tunnels)S
/F4 SF 0 172.2 M(It may also help to use fewer tunnels. For example, if all you actually need encrypted is connections between:)S
36 145.8 M(mail servers at branch and head offices)S
/Fc SF 28.19 145.8 M(\267 )S
/F4 SF 36 132.6 M(a few branch office users and the head office database server)S
/Fc SF 28.19 132.6 M(\267 )S
/F4 SF 0 106.2 M(You might build one tunnel per mail server and one per remote database user, restricting traffic to those)S
0 93 M(applications. This gives the traffic analyst some information, however. He or she can distinguish the tunnels)S
0 79.8 M(by looking at information in the ESP header and, given that distinction and the patterns of tunnel usage, might)S
0 66.6 M(be able to figure out something useful. Perhaps not, but why take the risk?)S
0 40.2 M(We suggest instead that you build one tunnel per branch office, encrypting everything passing from head)S
0 27 M(office to branches. This has a number of advantages:)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Resisting traffic analysis)S
468.652 0 M(235)S
GR
SP
%%Page: 236 265
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(it is easier to build and administer)S
/Fc SF 28.19 687 M(\267 )S
/F4 SF 36 673.8 M(it resists traffic analysis somewhat better)S
/Fc SF 28.19 673.8 M(\267 )S
/F4 SF 36 660.6 M(it provides security for whatever you forgot. For example, if some user at a remote office browses)S
36 647.4 M(proprietary company data on some head office web page \(that the security people may not even know)S
36 634.2 M(about!\), then that data is encrypted before it reaches the Internet.)S
/Fc SF 28.19 660.6 M(\267 )S
/F4 SF 0 607.8 M(Of course you might also want to add additional tunnels. For example, if some of the database data is)S
0 594.6 M(confidential and should not be exposed even within the company, then you need protection from the user's)S
0 581.4 M(desktop to the database server. We suggest you do that in whatever way seems appropriate -- IPsec, SSH or)S
0 568.2 M(SSL might fit -- but, whatever you choose, pass it between locations via a gateway-to-gateway IPsec tunnel)S
0 555 M(to provide some resistance to traffic analysis.)S
17 FS/F9 SF 0 522.6 M(Cryptographic components)S
11 FS/F4 SF 0 495 M(IPsec combines a number of cryptographic techniques, all of them well-known and well-analyzed. The)S
0 481.8 M(overall design approach was conservative; no new or poorly-understood components were included.)S
0 455.4 M(This section gives a brief overview of each technique. It is intended only as an introduction. There is more)S
0 442.2 M(information, and links to related topics, in our glossary. See also our bibliography and cryptography web)S
0 429 M(links.)S
14 FS/F9 SF 0 399.6 M(Block ciphers)S
11 FS/F4 SF 0 372.6 M(The encryption in the ESP encapsulation protocol is done with a block cipher.)S
0 346.2 M(We do not implement single DES. It is insecure. Our default, and currently only, block cipher is triple DES.)S
0 319.8 M(The Rijndael block cipher has won the AES competition to choose a relacement for DES. It will almost)S
0 306.6 M(certainly be added to FreeS/WAN and to other IPsec implementations. Patches are already available.)S
14 FS/F9 SF 0 277.2 M(Hash functions)S
11 FS/F9 SF 0 250.2 M(The HMAC construct)S
/F4 SF 0 223.8 M(IPsec packet authentication is done with the HMAC construct. This is not just a hash of the packet data, but a)S
0 210.6 M(more complex operation which uses both a hashing algorithm and a key. It therefore does more than a simple)S
0 197.4 M(hash would. A simple hash would only tell you that the packet data was not changed in transit, or that)S
0 184.2 M(whoever changed it also regenerated the hash. An HMAC also tells you that the sender knew the HMAC key.)S
0 157.8 M(For IPsec HMAC, the output of the hash algorithm is truncated to 96 bits. This saves some space in the)S
0 144.6 M(packets. More important, it prevents an attacker from seeing all the hash output bits and perhaps creating)S
0 131.4 M(some sort of attack based on that knowledge.)S
/F9 SF 0 105 M(Choice of hash algorithm)S
/F4 SF 0 78.6 M(The IPsec RFCs require two hash algorithms -- MD5 and SHA-1 -- both of which FreeS/WAN)S
0 65.4 M(implements.)S
0 39 M(Various other algorithms -- such as RIPEMD and Tiger -- are listed in the RFCs as optional. None of these)S
0 25.8 M(are in the FreeS/WAN distribution, or are likely to be added, although user patches exist for several of them.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Cryptographic components)S
468.652 0 M(236)S
GR
SP
%%Page: 237 266
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(Additional hash algorithms -- SHA-256, SHA-384 and SHA-512 -- may be required to give hash strength)S
0 673.8 M(matching the strength of AES. These are likely to be added to FreeS/WAN along with AES.)S
14 FS/F9 SF 0 644.4 M(Diffie-Hellman key agreement)S
11 FS/F4 SF 0 617.4 M(The Diffie-Hellman key agreement protocol allows two parties \(A and B or Alice and Bob\) to agree on a key)S
0 604.2 M(in such a way that an eavesdropper who intercepts the entire conversation cannot learn the key.)S
0 577.8 M(The protocol is based on the discrete logarithm problem and is therefore thought to be secure. Mathematicians)S
0 564.6 M(have been working on that problem for years and seem no closer to a solution, though there is no proof that an)S
0 551.4 M(efficient solution is impossible.)S
14 FS/F9 SF 0 522 M(RSA authentication)S
11 FS/F4 SF 0 495 M(The RSA algorithm \(named for its inventors -- Rivest, Shamir and Adleman\) is a very widely used public)S
0 481.8 M(key cryptographic technique. It is used in IPsec as one method of authenticating gateways for Diffie-Hellman)S
0 468.6 M(key negotiation.)S
17 FS/F9 SF 0 436.2 M(Structure of IPsec)S
11 FS/F4 SF 0 408.6 M(There are three protocols used in an IPsec implementation:)S
/F6 SF 0 382.2 M(ESP, Encapsulating Security Payload)S
/F4 SF 36 369 M(Encrypts and/or authenticates data)S
/F6 SF 0 355.8 M(AH, Authentication Header)S
/F4 SF 36 342.6 M(Provides a packet authentication service)S
/F6 SF 0 329.4 M(IKE, Internet Key Exchange)S
/F4 SF 36 316.2 M(Negotiates connection parameters, including keys, for the other two)S
0 289.8 M(The term "IPsec" is slightly ambiguous. In some contexts, it includes all three of the above but in other)S
0 276.6 M(contexts it refers only to AH and ESP.)S
14 FS/F9 SF 0 247.2 M(IKE \(Internet Key Exchange\))S
11 FS/F4 SF 0 220.2 M(The IKE protocol sets up IPsec \(ESP or AH\) connections after negotiating appropriate parameters \(algorithms)S
0 207 M(to be used, keys, connection lifetimes\) for them. This is done by exchanging packets on UDP port 500)S
0 193.8 M(between the two gateways.)S
0 167.4 M(IKE \(RFC 2409\) was the outcome of a long, complex process in which quite a number of protocols were)S
0 154.2 M(proposed and debated. Oversimplifying mildly, IKE combines:)S
/F6 SF 0 127.8 M(ISAKMP \(RFC 2408\))S
/F4 SF 36 114.6 M(The)S
/F7 SF ( I)S
/F4 SF (nternet)S
/F7 SF ( S)S
/F4 SF (ecurity)S
/F7 SF ( A)S
/F4 SF (ssociation and)S
/F7 SF ( K)S
/F4 SF (ey)S
/F7 SF ( M)S
/F4 SF (anagement)S
/F7 SF ( P)S
/F4 SF (rotocol manages negotiation of connections)S
36 101.4 M(and defines SAs \(Security Associations\) as a means of describing connection properties.)S
/F6 SF 0 88.2 M(IPsec DOI for ISAKMP \(RFC 2407\))S
/F4 SF 36 75 M(A)S
/F7 SF ( D)S
/F4 SF (omain)S
/F7 SF ( O)S
/F4 SF (f)S
/F7 SF ( I)S
/F4 SF (nterpretation fills in the details necessary to turn the rather abstract ISAKMP protocol)S
36 61.8 M(into a more tightly specified protocol, so it becomes applicable in a particular domain.)S
/F6 SF 0 48.6 M(Oakley key determination protocol \(RFC 2412\))S
/F4 SF 36 35.4 M(Oakley creates keys using the Diffie-Hellman key agreement protocol.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Diffie-Hellman key agreement)S
468.652 0 M(237)S
GR
SP
%%Page: 238 267
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(For all the details, you would need to read the four RFCs just mentioned \(over 200 pages\) and a number of)S
0 673.8 M(others. We give a summary below, but it is far from complete.)S
/F9 SF 0 647.4 M(Phases of IKE)S
/F4 SF 0 621 M(IKE negotiations have two phases.)S
/F6 SF 0 594.6 M(Phase one)S
/F4 SF 36 581.4 M(The two gateways negotiate and set up a two-way ISAKMP SA which they can then use to handle)S
36 568.2 M(phase two negotiations. One such SA between a pair of gateways can handle negotiations for multiple)S
36 555 M(tunnels.)S
/F6 SF 0 541.8 M(Phase two)S
/F4 SF 36 528.6 M(Using the ISAKMP SA, the gateways negotiate IPsec \(ESP and/or AH\) SAs as required. IPsec SAs)S
36 515.4 M(are unidirectional \(a different key is used in each direction\) and are always negotiated in pairs to)S
36 502.2 M(handle two-way traffic. There may be more than one pair defined between two gateways.)S
0 475.8 M(Both of these phases use the UDP protocol and port 500 for their negotiations.)S
0 449.4 M(After both IKE phases are complete, you have IPsec SAs to carry your encrypted data. These use the ESP or)S
0 436.2 M(AH protocols. These protocols do not have ports. Ports apply only to UDP or TCP.)S
0 409.8 M(The IKE protocol is designed to be extremely flexible. Among the things that can be negotiated \(separately for)S
0 396.6 M(each SA\) are:)S
36 370.2 M(SA lifetime before rekeying)S
/Fc SF 28.19 370.2 M(\267 )S
/F4 SF 36 357 M(encryption algorithm used. We currently support only triple DES. Single DES is insecure. The RFCs)S
36 343.8 M(say you MUST do DES, SHOULD do 3DES and MAY do various others. We do not do any of the)S
36 330.6 M(others.)S
/Fc SF 28.19 357 M(\267 )S
/F4 SF 36 317.4 M(authentication algorithms. We support MD5 and SHA. These are the two the RFCs require.)S
/Fc SF 28.19 317.4 M(\267 )S
/F4 SF 36 304.2 M(choice of group for Diffie-Hellman key agreement. We currently support Groups 2 and 5 \(which are)S
36 291 M(defined modulo primes of various lengths\) and do not support Group 1 \(defined modulo a shorter)S
36 277.8 M(prime, and therefore cryptographically weak\) or groups 3 and 4 \(defined using elliptic curves\). The)S
36 264.6 M(RFCs require only Group 1.)S
/Fc SF 28.19 304.2 M(\267 )S
/F4 SF 0 238.2 M(The protocol also allows implementations to add their own encryption algorithms, authentication algorithms)S
0 225 M(or Diffie-Hellman groups. We do not support any such extensions, but there are some patches that do.)S
0 198.6 M(There are a number of complications:)S
36 172.2 M(The gateways must be able to authenticate each other's identities before they can create a secure)S
36 159 M(connection. This host authentication is part of phase one negotiations, and is a required prerequisite)S
36 145.8 M(for packet authentication used later. Host authentication can be done in a variety of ways. Those)S
36 132.6 M(supported by FreeS/WAN are discussed in our advanced configuration document.)S
/Fc SF 28.19 172.2 M(\267 )S
/F4 SF 36 119.4 M(Phase one can be done in two ways.)S
72 106.2 M(Main Mode is required by the RFCs and supported in FreeS/WAN. It uses a 6-packet)S
72 93 M(exzchange.)S
/Fc SF 60.967 106.2 M(\250 )S
/F4 SF 72 79.8 M(Aggressive Mode is somewhat faster \(only 3 packets\) but reveals more to an eavesdropper.)S
72 66.6 M(This is optional in the RFCs, not currently supported by FreeS/WAN, and not likely to be.)S
/Fc SF 60.967 79.8 M(\250 )S
28.19 119.4 M(\267 )S
/F4 SF 36 53.4 M(A new group exchange may take place after phase one but before phase two, defining an additional)S
36 40.2 M(group for use in the Diffie-Hellman key agreement part of phase two. FreeS/WAN does not currently)S
36 27 M(support this.)S
/Fc SF 28.19 53.4 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(IKE \(Internet Key Exchange\))S
468.652 0 M(238)S
GR
SP
%%Page: 239 268
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(Phase two always uses Quick Mode, but there are two variants of that:)S
72 673.8 M(One variant provides Perfect Forward Secrecy \(PFS\). An attacker that obtains your long-term)S
72 660.6 M(host authentication key does not immediately get any of your short-term packet encryption of)S
72 647.4 M(packet authentication keys. He must conduct another successful attack each time you rekey to)S
72 634.2 M(get the short-term keys. Having some short-term keys does not help him learn others. In)S
72 621 M(particular, breaking your system today does not let him read messages he archived yestarday,)S
72 607.8 M(assuming you've changed short-term keys in the meanwhile. We enable PFS as the default.)S
/Fc SF 60.967 673.8 M(\250 )S
/F4 SF 72 594.6 M(The other variant disables PFS and is therefore slightly faster. We do not recommend this)S
72 581.4 M(since it is less secure, but FreeS/WAN does support it. You can enable it with a)S
/Fa SF ( pfs=no)S
/F4 SF 72 568.2 M(statement in ipsec.conf\(5\).)S
/Fc SF 60.967 594.6 M(\250 )S
/F4 SF 72 555 M(The protocol provides no way to negotiate which variant will be used. If one gateway is set)S
72 541.8 M(for PFS and the other is not, the negotiation fails. This has proved a fairly common source of)S
72 528.6 M(interoperation problems.)S
/Fc SF 60.967 555 M(\250 )S
28.19 687 M(\267 )S
/F4 SF 36 515.4 M(Several types of notification message may be sent by either side during either phase, or later.)S
36 502.2 M(FreeS/WAN does not currently support these, but they are a likely addition in future releases.)S
/Fc SF 28.19 515.4 M(\267 )S
/F4 SF 36 489 M(There is a commit flag which may optionally be set on some messages. The errata page for the RFCs)S
36 475.8 M(includes two changes related to this, one to clarify the description of its use and one to block a denial)S
36 462.6 M(of service attack which uses it. We currently do not implement this feature.)S
/Fc SF 28.19 489 M(\267 )S
/F4 SF 0 436.2 M(These complications can of course lead to problems, particularly when two different implementations attempt)S
0 423 M(to interoperate. For example, we have seen problems such as:)S
36 396.6 M(Some implementations \(often products crippled by export laws\) have the insecure DES algorithm as)S
36 383.4 M(their only supported encryption method. Other parts of our documentation discuss the reasons we do)S
36 370.2 M(not implement single DES, and how to cope with crippled products.)S
/Fc SF 28.19 396.6 M(\267 )S
/F4 SF 36 357 M(Windows 2000 IPsec tries to negotiate using Aggressive Mode, which we don't support. Later on, it)S
36 343.8 M(uses the commit bit, which we also don't support.)S
/Fc SF 28.19 357 M(\267 )S
/F4 SF 36 330.6 M(Various implementations disable PFS by default, and therefore will not talk to FreeS/WAN until you)S
36 317.4 M(either turn on PFS on their end or turn it off in FreeS/WAN with a)S
/Fa SF ( pfs=no)S
/F4 SF ( entry in the connection)S
36 304.2 M(description.)S
/Fc SF 28.19 330.6 M(\267 )S
/F4 SF 36 291 M(FreeS/WAN's interaction with PGPnet is complicated by their use of notification messages we do not)S
36 277.8 M(yet support.)S
/Fc SF 28.19 291 M(\267 )S
/F4 SF 0 251.4 M(Despite this, we do interoperate successfully with many implementations, including both Windows 2000 and)S
0 238.2 M(PGPnet. Details are in our interoperability document.)S
/F9 SF 0 211.8 M(Sequence of messages in IKE)S
/F4 SF 0 185.4 M(Each phase \(see previous section\)of IKE involves a series of messages. In Pluto error messages, these are)S
0 172.2 M(abbreviated using:)S
/F6 SF 0 145.8 M(M)S
/F7 SF 36 132.6 M(M)S
/F4 SF (ain mode, settting up the keying channel \(ISAKMP SA\))S
/F6 SF 0 119.4 M(Q)S
/F7 SF 36 106.2 M(Q)S
/F4 SF (uick mode, setting up the data channel \(IPsec SA\))S
/F6 SF 0 93 M(I)S
/F7 SF 36 79.8 M(I)S
/F4 SF (nitiator, the machine that starts the negotiation)S
/F6 SF 0 66.6 M(R)S
/F7 SF 36 53.4 M(R)S
/F4 SF (esponder)S
0 27 M(For example, the six messages of a main mode negotiation, in sequence, are labelled:)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(IKE \(Internet Key Exchange\))S
468.652 0 M(239)S
GR
SP
%%Page: 240 269
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(       MI1 ---------->)S
0 678.2 M(           <---------- MR1)S
0 667.4 M(       MI2 ----------> )S
0 656.6 M(           <---------- MR2)S
0 645.8 M(       MI3 ---------->)S
0 635 M(           <---------- MR3)S
11 FS/F9 SF 0 609 M(Structure of IKE messages)S
/F4 SF 0 582.6 M(Here is our Pluto developer explaining some of this on the mailing list:)S
9 FS/F0 SF 0 558.2 M(When one IKE system \(for example, Pluto\) is negotiating with another)S
0 547.4 M(to create an SA, the Initiator proposes a bunch of choices and the)S
0 536.6 M(Responder replies with one that it has selected.)S
0 515 M(The structure of the choices is fairly complicated.  An SA payload)S
0 504.2 M(contains a list of lists of "Proposals".  The outer list is a set of)S
0 493.4 M(choices: the selection must be from one element of this list.)S
0 471.8 M(Each of these elements is a list of Proposals.  A selection must be)S
0 461 M(made from each of the elements of the inner list.  In other words,)S
0 450.2 M(*all* of them apply \(that is how, for example, both AH and ESP can)S
0 439.4 M(apply at once\).)S
0 417.8 M(Within each of these Proposals is a list of Transforms.  For each)S
0 407 M(Proposal selected, one Transform must be selected \(in other words,)S
0 396.2 M(each Proposal provides a choice of Transforms\).)S
0 374.6 M(Each Transform is made up of a list of Attributes describing, well,)S
0 363.8 M(attributes.  Such as lifetime of the SA.  Such as algorithm to be)S
0 353 M(used.  All the Attributes apply to a Transform.)S
0 331.4 M(You will have noticed a pattern here: layers alternate between being)S
0 320.6 M(disjunctions \("or"\) and conjunctions \("and"\).)S
0 299 M(For Phase 1 / Main Mode \(negotiating an ISAKMP SA\), this structure is)S
0 288.2 M(cut back.  There must be exactly one Proposal.  So this degenerates to)S
0 277.4 M(a list of Transforms, one of which must be chosen.)S
14 FS/F9 SF 0 248.4 M(IPsec Services, AH and ESP)S
11 FS/F4 SF 0 221.4 M(IPsec offers two services, authentication and encryption. These can be used separately but are often used)S
0 208.2 M(together.)S
/F6 SF 0 181.8 M(Authentication)S
/F4 SF 36 168.6 M(Packet-level authentication allows you to be confident that a packet came from a particular machine)S
36 155.4 M(and that its contents were not altered en route to you. No attempt is made to conceal or protect the)S
36 142.2 M(contents, only to assure their integrity. Packet authentication can be provided separately using an)S
36 129 M(Authentication Header, described just below, or it can be included as part of the ESP \(Encapsulated)S
36 115.8 M(Security Payload\) service, described in the following section. That service offers encryption as well as)S
36 102.6 M(authentication. In either case, the HMAC construct is used as the authentication mechanism.)S
36 76.2 M(There is a separate authentication operation at the IKE level, in which each gateway authenticates the)S
36 63 M(other. This can be done in a variety of ways.)S
/F6 SF 0 49.8 M(Encryption)S
/F4 SF 36 36.6 M(Encryption allows you to conceal the contents of a message from eavesdroppers.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(IKE \(Internet Key Exchange\))S
468.652 0 M(240)S
GR
SP
%%Page: 241 270
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(In IPsec this is done using a block cipher \(normally Triple DES for Linux\). In the most used setup,)S
36 673.8 M(keys are automatically negotiated, and periodically re-negotiated, using the IKE \(Internet Key)S
36 660.6 M(Exchange\) protocol. In Linux FreeS/WAN this is handled by the Pluto Daemon.)S
36 634.2 M(The IPsec protocol offering encryption is ESP, Encapsulated Security Payload. It can also include a)S
36 621 M(packet authentication service.)S
0 594.6 M(Note that)S
/F7 SF ( encryption should always be used with some packet authentication service)S
/F4 SF (. Unauthenticated)S
0 581.4 M(encryption is vulnerable to man-in-the-middle attacks. Also note that encryption does not prevent traffic)S
0 568.2 M(analysis.)S
14 FS/F9 SF 0 538.8 M(The Authentication Header \(AH\))S
11 FS/F4 SF 0 511.8 M(Packet authentication can be provided separately from encryption by adding an authentication header \(AH\))S
0 498.6 M(after the IP header but before the other headers on the packet. This is the subject of this section. Details are in)S
0 485.4 M(RFC 2402.)S
0 459 M(Each of the several headers on a packet header contains a "next protocol" field telling the system what header)S
0 445.8 M(to look for next. IP headers generally have either TCP or UDP in this field. When IPsec authentication is used,)S
0 432.6 M(the packet IP header has AH in this field, saying that an Authentication Header comes next. The AH header)S
0 419.4 M(then has the next header type -- usually TCP, UDP or encapsulated IP.)S
0 393 M(IPsec packet authentication can be added in transport mode, as a modification of standard IP transport. This is)S
0 379.8 M(shown in this diagram from the RFC:)S
9 FS/F0 SF 0 355.4 M(                  BEFORE APPLYING AH)S
0 344.6 M(            ----------------------------)S
0 333.8 M(      IPv4  |orig IP hdr  |     |      |)S
0 323 M(            |\(any options\)| TCP | Data |)S
0 312.2 M(            ----------------------------)S
0 290.6 M(                  AFTER APPLYING AH)S
0 279.8 M(            ---------------------------------)S
0 269 M(      IPv4  |orig IP hdr  |    |     |      |)S
0 258.2 M(            |\(any options\)| AH | TCP | Data |)S
0 247.4 M(            ---------------------------------)S
0 236.6 M(            ||)S
0 225.8 M(                 except for mutable fields)S
11 FS/F4 SF 0 199.8 M(Athentication can also be used in tunnel mode, encapsulating the underlying IP packet beneath AH and an)S
0 186.6 M(additional IP header.)S
9 FS/F0 SF 0 162.2 M(                         ||)S
0 151.4 M(IPv4  | new IP hdr* |    | orig IP hdr*  |    |      |)S
0 140.6 M(      |\(any options\)| AH | \(any options\) |TCP | Data |)S
0 129.8 M(      ------------------------------------------------)S
0 119 M(      ||)S
0 108.2 M(      |           in the new IP hdr                  |)S
11 FS/F4 SF 0 82.2 M(This would normally be used in a gateway-to-gateway tunnel. The receiving gateway then strips the outer IP)S
0 69 M(header and the AH header and forwards the inner IP packet.)S
0 42.6 M(The mutable fields referred to are things like the time-to-live field in the IP header. These cannot be included)S
0 29.4 M(in authentication calculations because they change as the packet travels.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(The Authentication Header \(AH\))S
468.652 0 M(241)S
GR
SP
%%Page: 242 271
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F9 SF 0 687 M(Keyed MD5 and Keyed SHA)S
/F4 SF 0 660.6 M(The actual authentication data in the header is typically 96 bits and depends both on a secret shared between)S
0 647.4 M(sender and receiver and on every byte of the data being authenticated. The technique used is HMAC, defined)S
0 634.2 M(in RFC 2104.)S
0 607.8 M(The algorithms involved are the MD5 Message Digest Algorithm or SHA, the Secure Hash Algorithm. For)S
0 594.6 M(details on their use in this application, see RFCs 2403 and 2404 respectively.)S
0 568.2 M(For descriptions of the algorithms themselves, see RFC 1321 for MD5 and FIPS \(Federal Information)S
0 555 M(Processing Standard\) number 186 from NIST, the US National Institute of Standards and Technology for)S
0 541.8 M(SHA.)S
/F6 SF ( Applied Cryptography)S
/F4 SF ( covers both in some detail, MD5 starting on page 436 and SHA on 442.)S
0 515.4 M(These algorithms are intended to make it nearly impossible for anyone to alter the authenticated data in transit.)S
0 502.2 M(The sender calculates a digest or hash value from that data and includes the result in the authentication header.)S
0 489 M(The recipient does the same calculation and compares results. For unchanged data, the results will be)S
0 475.8 M(identical. The hash algorithms are designed to make it extremely difficult to change the data in any way and)S
0 462.6 M(still get the correct hash.)S
0 436.2 M(Since the shared secret key is also used in both calculations, an interceptor cannot simply alter the)S
0 423 M(authenticated data and change the hash value to match. Without the key, he or she \(or even the dreaded They\))S
0 409.8 M(cannot produce a usable hash.)S
/F9 SF 0 383.4 M(Sequence numbers)S
/F4 SF 0 357 M(The authentication header includes a sequence number field which the sender is required to increment for each)S
0 343.8 M(packet. The receiver can ignore it or use it to check that packets are indeed arriving in the expected sequence.)S
0 317.4 M(This provides partial protection against replay attacks in which an attacker resends intercepted packets in an)S
0 304.2 M(effort to confuse or subvert the receiver. Complete protection is not possible since it is necessary to handle)S
0 291 M(legitmate packets which are lost, duplicated, or delivered out of order, but use of sequence numbers makes the)S
0 277.8 M(attack much more difficult.)S
0 251.4 M(The RFCs require that sequence numbers never cycle, that a new key always be negotiated before the)S
0 238.2 M(sequence number reaches 2^32-1. This protects both against replays attacks using packets from a previous)S
0 225 M(cyclce and against birthday attacks on the the packet authentication algorithm.)S
0 198.6 M(In Linux FreeS/WAN, the sequence number is ignored for manually keyed connections and checked for)S
0 185.4 M(automatically keyed ones. In manual mode, there is no way to negotiate a new key, or to recover from a)S
0 172.2 M(sequence number problem, so we don't use sequence numbers.)S
14 FS/F9 SF 0 142.8 M(Encapsulated Security Payload \(ESP\))S
11 FS/F4 SF 0 115.8 M(The ESP protocol is defined in RFC 2406. It provides one or both of encryption and packet authentication. It)S
0 102.6 M(may be used with or without AH packet authentication.)S
0 76.2 M(Note that)S
/F7 SF ( some form of packet authentication should always be used whenever data is encrypted)S
/F4 SF (. Without)S
0 63 M(authentication, the encryption is vulnerable to active attacks which may allow an enemy to break the)S
0 49.8 M(encryption. ESP should)S
/F7 SF ( always)S
/F4 SF ( either include its own authentication or be used with AH authentication.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(The Authentication Header \(AH\))S
468.652 0 M(242)S
GR
SP
%%Page: 243 272
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(The RFCs require support for only two mandatory encryption algorithms -- DES, and null encryption -- and)S
0 673.8 M(for two authentication methods -- keyed MD5 and keyed SHA. Implementers may choose to support)S
0 660.6 M(additional algorithms in either category.)S
0 634.2 M(The authentication algorithms are the same ones used in the IPsec authentication header.)S
0 607.8 M(We do not implement single DES since DES is insecure. Instead we provide triple DES or 3DES. This is)S
0 594.6 M(currently the only encryption algorithm supported.)S
0 568.2 M(We do not implement null encryption since it is obviously insecure.)S
17 FS/F9 SF 0 535.8 M(IPsec modes)S
11 FS/F4 SF 0 508.2 M(IPsec can connect in two modes. Transport mode is a host-to-host connection involving only two machines.)S
0 495 M(In tunnel mode, the IPsec machines act as gateways and trafiic for any number of client machines may be)S
0 481.8 M(carried.)S
14 FS/F9 SF 0 452.4 M(Tunnel mode)S
11 FS/F4 SF 0 425.4 M(Security gateways are required to support tunnel mode connections. In this mode the gateways provide tunnels)S
0 412.2 M(for use by client machines behind the gateways. The client machines need not do any IPsec processing; all)S
0 399 M(they have to do is route things to gateways.)S
14 FS/F9 SF 0 369.6 M(Transport mode)S
11 FS/F4 SF 0 342.6 M(Host machines \(as opposed to security gateways\) with IPsec implementations must also support transport)S
0 329.4 M(mode. In this mode, the host does its own IPsec processing and routes some packets via IPsec.)S
17 FS/F9 SF 0 297 M(FreeS/WAN parts)S
14 FS/F9 SF 0 266.4 M(KLIPS: Kernel IPsec Support)S
11 FS/F4 SF 0 239.4 M(KLIPS is)S
/F7 SF ( K)S
/F4 SF (erne)S
/F7 SF (L IP)S
/F4 SF (SEC)S
/F7 SF ( S)S
/F4 SF (upport, the modifications necessary to support IPsec within the Linux kernel.)S
0 226.2 M(KILPS does all the actual IPsec packet-handling, including)S
36 199.8 M(encryption)S
/Fc SF 28.19 199.8 M(\267 )S
/F4 SF 36 186.6 M(packet authentication calculations)S
/Fc SF 28.19 186.6 M(\267 )S
/F4 SF 36 173.4 M(creation of ESP and AH headers for outgoing packets)S
/Fc SF 28.19 173.4 M(\267 )S
/F4 SF 36 160.2 M(interpretation of those headers on incoming packets)S
/Fc SF 28.19 160.2 M(\267 )S
/F4 SF 0 133.8 M(KLIPS also checks all non-IPsec packets to ensure they are not bypassing IPsec security policies.)S
14 FS/F9 SF 0 104.4 M(The Pluto daemon)S
11 FS/F4 SF 0 77.4 M(Pluto\(8\) is a daemon which implements the IKE protocol. It)S
36 51 M(handles all the Phase one ISAKMP SAs)S
/Fc SF 28.19 51 M(\267 )S
/F4 SF 36 37.8 M(performs host authentication and negotiates with other gateways)S
/Fc SF 28.19 37.8 M(\267 )S
/F4 SF 36 24.6 M(creates IPsec SAs and passes the data required to run them to KLIPS)S
/Fc SF 28.19 24.6 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(IPsec modes)S
468.652 0 M(243)S
GR
SP
%%Page: 244 273
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(adjust routing and firewall setup to meet IPsec requirements. See our IPsec and firewalling document)S
36 673.8 M(for details.)S
/Fc SF 28.19 687 M(\267 )S
/F4 SF 0 647.4 M(Pluto is controlled mainly by the ipsec.conf\(5\) configuration file.)S
14 FS/F9 SF 0 618 M(The ipsec\(8\) command)S
11 FS/F4 SF 0 591 M(The ipsec\(8\) command is a front end shellscript that allows control over IPsec activity.)S
14 FS/F9 SF 0 561.6 M(Linux FreeS/WAN configuration file)S
11 FS/F4 SF 0 534.6 M(The configuration file for Linux FreeS/WAN is)S
9 FS/F0 SF 0 510.2 M(        /etc/ipsec.conf)S
11 FS/F4 SF 0 484.2 M(For details see the ipsec.conf\(5\) manual page .)S
17 FS/F9 SF 0 451.8 M(Key management)S
11 FS/F4 SF 0 424.2 M(There are several ways IPsec can manage keys. Not all are implemented in Linux FreeS/WAN.)S
14 FS/F9 SF 0 394.8 M(Currently Implemented Methods)S
11 FS/F9 SF 0 367.8 M(Manual keying)S
/F4 SF 0 341.4 M(IPsec allows keys to be manually set. In Linux FreeS/WAN, such keys are stored with the connection)S
0 328.2 M(definitions in /etc/ipsec.conf.)S
0 301.8 M(Manual keying is useful for debugging since it allows you to test the KLIPS kernel IPsec code without the)S
0 288.6 M(Pluto daemon doing key negotiation.)S
0 262.2 M(In general, however, automatic keying is preferred because it is more secure.)S
/F9 SF 0 235.8 M(Automatic keying)S
/F4 SF 0 209.4 M(In automatic keying, the Pluto daemon negotiates keys using the IKE Internet Key Exchange protocol.)S
0 196.2 M(Connections are automatically re-keyed periodically.)S
0 169.8 M(This is considerably more secure than manual keying. In either case an attacker who acquires a key can read)S
0 156.6 M(every message encrypted with that key, but automatic keys can be changed every few hours or even every few)S
0 143.4 M(minutes without breaking the connection or requiring intervention by the system administrators. Manual keys)S
0 130.2 M(can only be changed manually; you need to shut down the connection and have the two admins make changes.)S
0 117 M(Moreover, they have to communicate the new keys securely, perhaps with PGP or SSH. This may be possible)S
0 103.8 M(in some cases, but as a general solution it is expensive, bothersome and unreliable. Far better to let Pluto)S
0 90.6 M(handle these chores; no doubt the administrators have enough to do.)S
0 64.2 M(Also, automatic keying is inherently more secure against an attacker who manages to subvert your gateway)S
0 51 M(system. If manual keying is in use and an adversary acquires root privilege on your gateway, he reads your)S
0 37.8 M(keys from /etc/ipsec.conf and then reads all messages encrypted with those keys.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(The ipsec\(8\) command)S
468.652 0 M(244)S
GR
SP
%%Page: 245 274
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(If automatic keying is used, an adversary with the same privileges can read /etc/ipsec.secrets, but this does not)S
0 673.8 M(contain any keys, only the secrets used to authenticate key exchanges. Having an adversary able to)S
0 660.6 M(authenticate your key exchanges need not worry you overmuch. Just having the secrets does not give him any)S
0 647.4 M(keys. You are still secure against passive attacks. This property of automatic keying is called perfect forward)S
0 634.2 M(secrecy, abbreviated PFS.)S
0 607.8 M(Unfortunately, having the secrets does allow an active attack, specifically a man-in-the-middle attack.)S
0 594.6 M(Losing these secrets to an attacker may not be quite as disastrous as losing the actual keys, but it is)S
/F6 SF ( still a)S
0 581.4 M(serious security breach)S
/F4 SF (. These secrets should be guarded as carefully as keys.)S
14 FS/F9 SF 0 552 M(Methods not yet implemented)S
11 FS/F9 SF 0 525 M(Unauthenticated key exchange)S
/F4 SF 0 498.6 M(It would be possible to exchange keys without authenticating the players. This would support opportunistic)S
0 485.4 M(encryption -- allowing any two systems to encrypt their communications without requiring a shared PKI or a)S
0 472.2 M(previously negotiated secret -- and would be secure against passive attacks. It would, however, be highly)S
0 459 M(vulnerable to active man-in-the-middle attacks. RFC 2408 therefore specifies that all ISAKMP key)S
0 445.8 M(management interactions)S
/F6 SF ( must)S
/F4 SF ( be authenticated.)S
0 419.4 M(There is room for debate here. Should we provide immediate security against passive attacks and encourage)S
0 406.2 M(widespread use of encryption, at the expense of risking the more difficult active attacks? Or should we wait)S
0 393 M(until we can implement a solution that can both be widespread and offer security against active attacks?)S
0 366.6 M(So far, we have chosen the second course, complying with the RFCs and waiting for secure DNS \(see below\))S
0 353.4 M(so that we can do opportunistic encryption right.)S
/F9 SF 0 327 M(Key exchange using DNS)S
/F4 SF 0 300.6 M(The IPsec RFCs allow key exchange based on authentication services provided by Secure DNS. Once Secure)S
0 287.4 M(DNS service becomes widely available, we expect to make this the)S
/F6 SF ( primary key management method for)S
0 274.2 M(Linux FreeS/WAN)S
/F4 SF (. It is the best way we know of to support opportunistic encryption, allowing two systems)S
0 261 M(without a common PKI or previous negotiation to secure their communication.)S
0 234.6 M(We currently have code to acquire RSA keys from DNS but do not yet have code to validate Secure DNS)S
0 221.4 M(signatures.)S
/F9 SF 0 195 M(Key exchange using a PKI)S
/F4 SF 0 168.6 M(The IPsec RFCs allow key exchange based on authentication services provided by a PKI or Public Key)S
0 155.4 M(Infrastructure. With many vendors selling such products and many large organisations building these)S
0 142.2 M(infrastructures, this will clearly be an important application of IPsec and one Linux FreeS/WAN will)S
0 129 M(eventually support.)S
0 102.6 M(On the other hand, this is not as high a priority for Linux FreeS/WAN as solutions based on secure DNS. We)S
0 89.4 M(do not expect any PKI to become as universal as DNS.)S
0 63 M(Some patches to handle authentication with X.509 certificates, which most PKIs use, are available.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Methods not yet implemented)S
468.652 0 M(245)S
GR
SP
%%Page: 246 275
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F9 SF 0 687 M(Photuris)S
/F4 SF 0 660.6 M(Photuris is another key management protocol, an alternative to IKE and ISAKMP, described in RFCs 2522)S
0 647.4 M(and 2523 which are labelled "experimental". Adding Photuris support to Linux FreeS/WAN might be a good)S
0 634.2 M(project for a volunteer. The likely starting point would be the OpenBSD photurisd code.)S
/F9 SF 0 607.8 M(SKIP)S
/F4 SF 0 581.4 M(SKIP is yet another key management protocol, developed by Sun. At one point it was fairly widely used, but)S
0 568.2 M(it now seems moribund, displaced by IKE. Sun now \(as of Solaris 8.0\) ship an IPsec implementation using)S
0 555 M(IKE. We have no plans to implement SKIP. If a user were to implement it, we would almost certainly not)S
0 541.8 M(want to add the code to our distribution.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Methods not yet implemented)S
468.652 0 M(246)S
GR
SP
%%Page: 247 276
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(Mailing lists and newsgroups)S
17 FS/F9 SF 0 643.8 M(Mailing lists about FreeS/WAN)S
14 FS/F9 SF 0 613.2 M(The project mailing lists)S
11 FS/F4 SF 0 586.2 M(The Linux FreeS/WAN project has several email lists for user support, bug reports and software development)S
0 573 M(discussions.)S
0 546.6 M(We had a single list on clinet.fi for several years \(Thanks, folks!\), then one list on freeswan.org, but now)S
0 533.4 M(we've split into several lists:)S
/F6 SF 0 507 M(users)S
/F4 SF 72 493.8 M(The general list for discussing use of the software)S
/Fc SF 63.816 493.8 M(\340 )S
/F4 SF 72 480.6 M(The place for seeking)S
/F7 SF ( help with problems)S
/F4 SF ( \(but please check the FAQ first\).)S
/Fc SF 63.816 480.6 M(\340 )S
/F4 SF 72 467.4 M(Anyone can post.)S
/Fc SF 63.816 467.4 M(\340 )S
/F6 SF 0 454.2 M(bugs)S
/F4 SF 72 441 M(For)S
/F7 SF ( bug reports)S
/F4 SF (.)S
/Fc SF 63.816 441 M(\340 )S
/F4 SF 72 427.8 M(If you are not certain what is going on -- could be a bug, a configuration error, a network)S
72 414.6 M(problem, ... -- please post to the users list instead.)S
/Fc SF 63.816 427.8 M(\340 )S
/F4 SF 72 401.4 M(Anyone can post.)S
/Fc SF 63.816 401.4 M(\340 )S
/F6 SF 0 388.2 M(design)S
/F7 SF 72 375 M(Design discussions)S
/F4 SF (, for people working on FreeS/WAN development or others with an)S
72 361.8 M(interest in design and security issues.)S
/Fc SF 63.816 375 M(\340 )S
/F4 SF 72 348.6 M(It would be a good idea to read the existing design papers \(see this list\) before posting.)S
/Fc SF 63.816 348.6 M(\340 )S
/F4 SF 72 335.4 M(Anyone can post.)S
/Fc SF 63.816 335.4 M(\340 )S
/F6 SF 0 322.2 M(announce)S
/F4 SF 72 309 M(A)S
/F7 SF ( low-traffic)S
/F4 SF ( list.)S
/Fc SF 63.816 309 M(\340 )S
/F7 SF 72 295.8 M(Announcements)S
/F4 SF ( about FreeS/WAN and related software.)S
/Fc SF 63.816 295.8 M(\340 )S
/F4 SF 72 282.6 M(All posts here are also sent to the users list. You need not subscribe to both.)S
/Fc SF 63.816 282.6 M(\340 )S
/F4 SF 72 269.4 M(Only the FreeS/WAN team can post.)S
/Fc SF 63.816 269.4 M(\340 )S
/F4 SF 72 256.2 M(If you have something you feel should go on this list, send it to)S
/Fa SF 72 243 M(announce-admin@lists.freeswan.org)S
/F4 SF (. Unless it is obvious, please include a short note)S
72 229.8 M(explaining why we should post it.)S
/Fc SF 63.816 256.2 M(\340 )S
/F6 SF 0 216.6 M(briefs)S
/F4 SF 72 203.4 M(A)S
/F7 SF ( low-traffic)S
/F4 SF ( list.)S
/Fc SF 63.816 203.4 M(\340 )S
/F7 SF 72 190.2 M(Weekly summaries)S
/F4 SF ( of activity on the users list.)S
/Fc SF 63.816 190.2 M(\340 )S
/F4 SF 72 177 M(All posts here are also sent to the users list. You need not subscribe to both.)S
/Fc SF 63.816 177 M(\340 )S
/F4 SF 72 163.8 M(Only the FreeS/WAN team can post.)S
/Fc SF 63.816 163.8 M(\340 )S
/F4 SF 0 137.4 M(To subscribe to any of these, you can:)S
36 111 M(just follow the links above)S
/Fc SF 28.19 111 M(\267 )S
/F4 SF 36 97.8 M(use our web interface)S
/Fc SF 28.19 97.8 M(\267 )S
/F4 SF 36 84.6 M(send mail to)S
/Fa SF ( listname)S
/F4 SF (-request@lists.freeswan.org with a one-line message body "subscribe")S
/Fc SF 28.19 84.6 M(\267 )S
/F4 SF 0 58.2 M(Archives of these lists are available via the web interface.)S
/F8 SF 0 0 M(Mailing lists and newsgroups)S
468.652 0 M(247)S
GR
SP
%%Page: 248 277
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F9 SF 0 687 M(Which list should I use?)S
/F4 SF 0 660.6 M(For most questions, please check the FAQ first, and if that does not have an answer, ask on the users list. "My)S
0 647.4 M(configuration doesn't work." does not belong on the bugs list, and "Can FreeS/WAN do such-and-such" or)S
0 634.2 M("How do I configure it to..." do not belong in design discussions.)S
0 607.8 M(Cross-posting the same message to two or more of these lists is discouraged. Quite a few people read more)S
0 594.6 M(than one list and getting multiple copies is annoying.)S
/F9 SF 0 568.2 M(List policies)S
/F7 SF 0 541.8 M(US citizens or residents are asked not to post code to the lists, not even one-line bug fixes)S
/F4 SF (. The project)S
0 528.6 M(cannot accept code which might entangle it in US export restrictions.)S
0 502.2 M(Non-subscribers can post to some of these lists. This is necessary; someone working on a gateway install who)S
0 489 M(encounters a problem may not have access to a subscribed account.)S
0 462.6 M(Some spam turns up on these lists from time to time. For discussion of why we do not attempt to filter it, see)S
0 449.4 M(the FAQ. Please do not clutter the lists with complaints about this.)S
14 FS/F9 SF 0 420 M(Archives of the lists)S
11 FS/F4 SF 0 393 M(Searchable archives of the old single list have existed for some time. At time of writing, it is not yet clear how)S
0 379.8 M(they will change for the new multi-list structure.)S
36 353.4 M(Canada)S
/Fc SF 28.19 353.4 M(\267 )S
/F4 SF 36 340.2 M(Holland)S
/Fc SF 28.19 340.2 M(\267 )S
/F4 SF 0 313.8 M(Note that these use different search engines. Try both.)S
0 287.4 M(Archives of the new lists are available via the web interface.)S
17 FS/F9 SF 0 255 M(Indexes of mailing lists)S
11 FS/F4 SF 0 227.4 M(PAML is the standard reference for)S
/F7 SF ( P)S
/F4 SF (ublicly)S
/F7 SF ( A)S
/F4 SF (ccessible)S
/F7 SF ( M)S
/F4 SF (ailing)S
/F7 SF ( L)S
/F4 SF (ists. When we last checked, it had over)S
0 214.2 M(7500 lists on an amazing variety of topics. It also has FAQ information and a search engine.)S
0 187.8 M(There is an index of Linux mailing lists available.)S
0 161.4 M(A list of computer security mailing lists, with descriptions.)S
17 FS/F9 SF 0 129 M(Lists for related software and topics)S
11 FS/F4 SF 0 101.4 M(Most links in this section point to subscription addresses for the various lists. Send the one-line message)S
0 88.2 M("subscribe)S
/Fa SF ( list_name)S
/F4 SF (" to subscribe to any of them.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(The project mailing lists)S
468.652 0 M(248)S
GR
SP
%%Page: 249 278
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(Products that include FreeS/WAN)S
11 FS/F4 SF 0 657 M(Our introduction document gives a list of products that include FreeS/WAN. If you have, or are considering,)S
0 643.8 M(one of those, check the supplier's web site for information on mailing lists for their users.)S
14 FS/F9 SF 0 614.4 M(Linux mailing lists)S
11 FS/F4 SF 36 587.4 M(linux-admin@vger.kernel.org, for Linux system administrators)S
/Fc SF 28.19 587.4 M(\267 )S
/F4 SF 36 574.2 M(netfilter@lists.samba.org, about Netfilter, which replaces IPchains in kernels 2.3.15 and later)S
/Fc SF 28.19 574.2 M(\267 )S
/F4 SF 36 561 M(security-audit@ferret.lmh.ox.ac.uk, for people working on security audits of various Linux programs)S
/Fc SF 28.19 561 M(\267 )S
/F4 SF 36 547.8 M(securedistros@humbolt.geo.uu.nl, for discussion of issues common to all the half dozen projects)S
36 534.6 M(working on secure Linux distributions.)S
/Fc SF 28.19 547.8 M(\267 )S
/F4 SF 0 508.2 M(Each of the scure distribution projects also has its own web site and mailing list. Some of the sites are:)S
36 481.8 M(Bastille Linux scripts to harden Redhat, e.g. by changing permissions and modifying inialisation)S
36 468.6 M(scripts)S
/Fc SF 28.19 481.8 M(\267 )S
/F4 SF 36 455.4 M(Immunix take a different approach, using a modified compiler to build kernel and utilities with better)S
36 442.2 M(resistance to various types of overflow and exploit)S
/Fc SF 28.19 455.4 M(\267 )S
/F4 SF 36 429 M(the NSA have contractors working on a Security Enhanced Linux, primarily adding stronger access)S
36 415.8 M(control mechanisms. You can download the current version \(which interestingly is under GPL and not)S
36 402.6 M(export resrtricted\) or subscribe to the mailing list from the project web page.)S
/Fc SF 28.19 429 M(\267 )S
14 FS/F9 SF 0 373.2 M(Lists for IETF working groups)S
11 FS/F4 SF 0 346.2 M(Each IETF working group has an associated mailing list where much of the work takes place.)S
36 319.8 M(ipsec@lists.tislabs.com, the IPsec working group. This is where the protocols are discussed, new)S
36 306.6 M(drafts announced, and so on. By now, the IPsec working group is winding down since the work is)S
36 293.4 M(essentially complete. A list archive is available.)S
/Fc SF 28.19 319.8 M(\267 )S
/F4 SF 36 280.2 M(IPsec policy list, and its archive)S
/Fc SF 28.19 280.2 M(\267 )S
/F4 SF 36 267 M(IP secure remote access list, and its archive)S
/Fc SF 28.19 267 M(\267 )S
14 FS/F9 SF 0 237.6 M(Other mailing lists)S
11 FS/F4 SF 36 210.6 M(ipc-announce@privacy.org a low-traffic list with announcements of developments in privacy,)S
36 197.4 M(encryption and online civil rights)S
/Fc SF 28.19 210.6 M(\267 )S
/F4 SF 36 184.2 M(a VPN mailing list's home page)S
/Fc SF 28.19 184.2 M(\267 )S
17 FS/F9 SF 0 151.8 M(Usenet newsgroups)S
11 FS/F4 SF 36 124.2 M(sci.crypt)S
/Fc SF 28.19 124.2 M(\267 )S
/F4 SF 36 111 M(sci.crypt.research)S
/Fc SF 28.19 111 M(\267 )S
/F4 SF 36 97.8 M(comp.dcom.vpn)S
/Fc SF 28.19 97.8 M(\267 )S
/F4 SF 36 84.6 M(talk.politics.crypto)S
/Fc SF 28.19 84.6 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Products that include FreeS/WAN)S
468.652 0 M(249)S
GR
SP
%%Page: 250 279
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(Web links)S
17 FS/F9 SF 0 643.8 M(The Linux FreeS/WAN Project)S
11 FS/F4 SF 0 616.2 M(The main project web site is www.freeswan.org.)S
0 589.8 M(Links to other project-related sites are provided in our introduction section.)S
14 FS/F9 SF 0 560.4 M(Add-ons and patches for FreeS/WAN)S
11 FS/F4 SF 0 533.4 M(Some user-contributed patches have been integrated into the FreeS/WAN distribution. For a variety of)S
0 520.2 M(reasons, those listed below have not.)S
0 493.8 M(Note that not all patches are a good idea.)S
36 467.4 M(There are a number of "features" of IPsec which we do not implement because they reduce security.)S
36 454.2 M(See this discussion. We do not recommend using patches that implement these. One example is)S
36 441 M(aggressive mode.)S
/Fc SF 28.19 467.4 M(\267 )S
/F4 SF 36 427.8 M(We do not recommend adding "features" of any sort unless they are clearly necessary, or at least have)S
36 414.6 M(clear benefits. For example, FreeS/WAN would not become more secure if it offerred a choice of 14)S
36 401.4 M(ciphers. If even one was flawed, it would certainly become less secure for anyone using that cipher.)S
36 388.2 M(Even with 14 wonderful ciphers, it would be harder to maintain and administer, hence more)S
36 375 M(vulnerable to various human errors.)S
/Fc SF 28.19 427.8 M(\267 )S
/F4 SF 0 348.6 M(This is not to say that patches are necessarily bad, only that using them requires some deliberation. For)S
0 335.4 M(example, there might be perfectly good reasons to add a specific cipher in your application: perhaps GOST to)S
0 322.2 M(comply with government standards in Eastern Europe, or AES for performance benefits.)S
/F9 SF 0 295.8 M(Current patches)S
/F4 SF 0 269.4 M(Patches believed current::)S
36 243 M(patches for X.509 certificate support, also available from a mirror site)S
/Fc SF 28.19 243 M(\267 )S
/F4 SF 36 229.8 M(patches to add AES and other ciphers. There is preliminary data indicating AES gives a substantial)S
36 216.6 M(performance gain.)S
/Fc SF 28.19 229.8 M(\267 )S
/F4 SF 0 190.2 M(There is also one add-on that takes the form of a modified FreeS/WAN distribution, rather than just patches)S
0 177 M(to the standard distribution:)S
36 150.6 M(IPv6 support)S
/Fc SF 28.19 150.6 M(\267 )S
/F4 SF 0 124.2 M(Before using any of the above,, check the mailing lists for news of newer versions and to see whether they)S
0 111 M(have been incorporated into more recent versions of FreeS/WAN.)S
/F9 SF 0 84.6 M(Older patches)S
/F4 SF 36 58.2 M(hardware acceleration)S
/Fc SF 28.19 58.2 M(\267 )S
/F4 SF 36 45 M(a series of patches that)S
72 31.8 M(provide GOST, a Russian gov't. standard cipher, in MMX assembler)S
/Fc SF 60.967 31.8 M(\250 )S
28.19 45 M(\267 )S
/F8 SF 0 0 M(Web links)S
468.652 0 M(250)S
GR
SP
%%Page: 251 280
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 72 687 M(add GOST to OpenSSL)S
/Fc SF 60.967 687 M(\250 )S
/F4 SF 72 673.8 M(add GOST to the International kernel patch)S
/Fc SF 60.967 673.8 M(\250 )S
/F4 SF 72 660.6 M(let FreeS/WAN use International kernel patch ciphers)S
/Fc SF 60.967 660.6 M(\250 )S
/F4 SF 36 647.4 M(Neil Dunbar's patches for certificate support, using code from Open SSL.)S
/Fc SF 28.19 647.4 M(\267 )S
/F4 SF 36 634.2 M(Luc Lanthier's patches for PKIX support.)S
/Fc SF 28.19 634.2 M(\267 )S
/F4 SF 36 621 M(patches to add Blowfish, IDEA and CAST-128 to FreeS/WAN)S
/Fc SF 28.19 621 M(\267 )S
/F4 SF 36 607.8 M(patches for FreeS/WAN 1.3, Pluto support for external authentication, for example with a smartcard)S
36 594.6 M(or SKEYID.)S
/Fc SF 28.19 607.8 M(\267 )S
/F4 SF 36 581.4 M(patches and utilities for using FreeS/WAN with PGPnet)S
/Fc SF 28.19 581.4 M(\267 )S
/F4 SF 36 568.2 M(Blowfish encryption and Tiger hash)S
/Fc SF 28.19 568.2 M(\267 )S
/F4 SF 36 555 M(patches for aggressive mode support)S
/Fc SF 28.19 555 M(\267 )S
/F4 SF 0 528.6 M(These patches are for older versions of FreeS/WAN and will likely not work with the current version. Older)S
0 515.4 M(versions of FreeS/WAN may be available on some of the distribution sites, but we recommend using the)S
0 502.2 M(current release.)S
/F9 SF 0 475.8 M(VPN masquerade patches)S
/F4 SF 0 449.4 M(Finally, there are some patches to other code that may be useful with FreeS/WAN:)S
36 423 M(a patch to make IPsec, PPTP and SSH VPNs work through a Linux firewall with IP masquerade.)S
/Fc SF 28.19 423 M(\267 )S
/F4 SF 36 409.8 M(Linux VPN Masquerade HOWTO)S
/Fc SF 28.19 409.8 M(\267 )S
/F4 SF 0 383.4 M(Note that this is not required if the same machine does IPsec and masquerading, only if you want a to locate)S
0 370.2 M(your IPsec gateway on a masqueraded network. See our firewalls document for discussion of why this is)S
0 357 M(problematic.)S
0 330.6 M(At last report, this patch could not co-exist with FreeS/WAN on the same machine.)S
14 FS/F9 SF 0 301.2 M(Distributions including FreeS/WAN)S
11 FS/F4 SF 0 274.2 M(The introductory section of our document set lists several Linux distributions which include FreeS/WAN.)S
14 FS/F9 SF 0 244.8 M(Things FreeS/WAN uses or could use)S
11 FS/F4 SF 36 217.8 M(/dev/random support page, discussion of and code for the Linux random number driver. Out-of-date)S
36 204.6 M(when we last checked \(January 2000\), but still useful.)S
/Fc SF 28.19 217.8 M(\267 )S
/F4 SF 36 191.4 M(other programs related to random numbers:)S
72 178.2 M(audio entropy daemon to gather noise from a sound card and feed it into /dev/random)S
/Fc SF 60.967 178.2 M(\250 )S
/F4 SF 72 165 M(an entropy-gathering daemon)S
/Fc SF 60.967 165 M(\250 )S
/F4 SF 72 151.8 M(a driver for the random number generator in recent Intel chipsets. This driver is included as)S
72 138.6 M(standard in 2.4 kernels.)S
/Fc SF 60.967 151.8 M(\250 )S
28.19 191.4 M(\267 )S
/F4 SF 36 125.4 M(a Linux L2TP Daemon which might be useful for communicating with Windows 2000 which builds)S
36 112.2 M(L2TP tunnels over its IPsec connections)S
/Fc SF 28.19 125.4 M(\267 )S
/F4 SF 36 99 M(to use opportunistic encryption, you need a recent version of BIND. You can get one from the Internet)S
36 85.8 M(Software Consortium who maintain BIND.)S
/Fc SF 28.19 99 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Add-ons and patches for FreeS/WAN)S
468.652 0 M(251)S
GR
SP
%%Page: 252 281
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(Other approaches to VPNs for Linux)S
11 FS/F4 SF 36 657 M(other Linux IPsec implementations)S
/Fc SF 28.19 657 M(\267 )S
/F4 SF 36 643.8 M(ENskip, a free implementation of Sun's SKIP protocol)S
/Fc SF 28.19 643.8 M(\267 )S
/F4 SF 36 630.6 M(vpnd, a non-IPsec VPN daemon for Linux which creates tunnels using Blowfish encryption)S
/Fc SF 28.19 630.6 M(\267 )S
/F4 SF 36 617.4 M(Zebedee, a simple GPLd tunnel-building program with Linux and Win32 versions. The name is from)S
/F7 SF 36 604.2 M(Z)S
/F4 SF (lib compression,)S
/F7 SF ( B)S
/F4 SF (lowfish encryption and)S
/F7 SF ( D)S
/F4 SF (iffie-Hellman key exchange.)S
/Fc SF 28.19 617.4 M(\267 )S
/F4 SF 36 591 M(There are at least two PPTP implementations for Linux)S
72 577.8 M(Moreton Bay's PoPToP)S
/Fc SF 60.967 577.8 M(\250 )S
/F4 SF 72 564.6 M(PPTP-Linux)S
/Fc SF 60.967 564.6 M(\250 )S
28.19 591 M(\267 )S
/F4 SF 36 551.4 M(CIPE \(crypto IP encapsulation\) project, using their own lightweight protocol to encrypt between)S
36 538.2 M(routers)S
/Fc SF 28.19 551.4 M(\267 )S
/F4 SF 36 525 M(tinc, a VPN Daemon)S
/Fc SF 28.19 525 M(\267 )S
/F4 SF 0 498.6 M(There is a list of Linux VPN software in the Linux Security Knowledge Base.)S
17 FS/F9 SF 0 466.2 M(The IPsec Protocols)S
14 FS/F9 SF 0 435.6 M(General IPsec or VPN information)S
11 FS/F4 SF 36 408.6 M(The VPN Consortium is a group for vendors of IPsec products. Among other things, they have a good)S
36 395.4 M(collection of IPsec white papers.)S
/Fc SF 28.19 408.6 M(\267 )S
/F4 SF 36 382.2 M(A VPN mailing list with a home page, a FAQ, some product comparisons, and many links.)S
/Fc SF 28.19 382.2 M(\267 )S
/F4 SF 36 369 M(VPN pointer page)S
/Fc SF 28.19 369 M(\267 )S
/F4 SF 36 355.8 M(a collection of VPN links, and some explanation)S
/Fc SF 28.19 355.8 M(\267 )S
14 FS/F9 SF 0 326.4 M(IPsec overview documents or slide sets)S
11 FS/F4 SF 36 299.4 M(the FreeS/WAN document section on these protocols)S
/Fc SF 28.19 299.4 M(\267 )S
14 FS/F9 SF 0 270 M(IPsec information in languages other than English)S
11 FS/F4 SF 36 243 M(German)S
/Fc SF 28.19 243 M(\267 )S
/F4 SF 36 229.8 M(Japanese)S
/Fc SF 28.19 229.8 M(\267 )S
/F4 SF 36 216.6 M(Feczak Szabolcs' thesis in Hungarian)S
/Fc SF 28.19 216.6 M(\267 )S
/F4 SF 36 203.4 M(Davide Cerri's thesis and some presentation slides Italian)S
/Fc SF 28.19 203.4 M(\267 )S
14 FS/F9 SF 0 174 M(RFCs and other reference documents)S
11 FS/F4 SF 36 147 M(Our document listing the RFCs relevant to Linux FreeS/WAN and giving various ways of obtaining)S
36 133.8 M(both RFCs and Internet Drafts.)S
/Fc SF 28.19 147 M(\267 )S
/F4 SF 36 120.6 M(VPN Standards page maintained by VPNC. This covers both RFCs and Drafts, and classifies them in)S
36 107.4 M(a fairly helpful way.)S
/Fc SF 28.19 120.6 M(\267 )S
/F4 SF 36 94.2 M(RFC archive)S
/Fc SF 28.19 94.2 M(\267 )S
/F4 SF 36 81 M(Internet Drafts related to IPsec)S
/Fc SF 28.19 81 M(\267 )S
/F4 SF 36 67.8 M(US government site with their FIPS standards)S
/Fc SF 28.19 67.8 M(\267 )S
/F4 SF 36 54.6 M(Archives of the ipsec@tis.com mailing list where discussion of drafts takes place.)S
72 41.4 M(Eastern Canada)S
/Fc SF 60.967 41.4 M(\250 )S
/F4 SF 72 28.2 M(California.)S
/Fc SF 60.967 28.2 M(\250 )S
28.19 54.6 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Other approaches to VPNs for Linux)S
468.652 0 M(252)S
GR
SP
%%Page: 253 282
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(Analysis and critiques of IPsec protocols)S
11 FS/F4 SF 36 657 M(Counterpane's evaluation of the protocols)S
/Fc SF 28.19 657 M(\267 )S
/F4 SF 36 643.8 M(Simpson's IKE Considered Dangerous paper. Note that this is a link to an archive of our mailing list.)S
36 630.6 M(There are several replies in addition to the paper itself.)S
/Fc SF 28.19 643.8 M(\267 )S
/F4 SF 36 617.4 M(Fate Labs Virual Private Problems: the Broken Dream)S
/Fc SF 28.19 617.4 M(\267 )S
/F4 SF 36 604.2 M(Catherine Meadows' paper)S
/F6 SF ( Analysis of the Internet Key Exchange Protocol Using the NRL Protocol)S
36 591 M(Analyzer)S
/F4 SF (, in PDF or Postscript.)S
/Fc SF 28.19 604.2 M(\267 )S
/F4 SF 36 577.8 M(Perlman and Kaufmnan)S
72 564.6 M(Key Exchange in IPsec)S
/Fc SF 60.967 564.6 M(\250 )S
/F4 SF 72 551.4 M(a newer PDF paper,)S
/F6 SF ( Analysis of the IPsec Key Exchange Standard)S
/F4 SF (.)S
/Fc SF 60.967 551.4 M(\250 )S
28.19 577.8 M(\267 )S
/F4 SF 36 538.2 M(Bellovin's papers page including his:)S
/F6 SF 72 525 M(Security Problems in the TCP/IP Protocol Suite)S
/F4 SF ( \(1989\))S
/Fc SF 60.967 525 M(\250 )S
/F6 SF 72 511.8 M(Problem Areas for the IP Security Protocols)S
/F4 SF ( \(1996\))S
/Fc SF 60.967 511.8 M(\250 )S
/F6 SF 72 498.6 M(Probable Plaintext Cryptanalysis of the IP Security Protocols)S
/F4 SF ( \(1997\))S
/Fc SF 60.967 498.6 M(\250 )S
28.19 538.2 M(\267 )S
/F4 SF 36 485.4 M(An errata list for the IPsec RFCs.)S
/Fc SF 28.19 485.4 M(\267 )S
14 FS/F9 SF 0 456 M(Background information on IP)S
11 FS/F4 SF 36 429 M(An IP tutorial that seems to be written mainly for Netware or Microsoft LAN admins entering a new)S
36 415.8 M(world)S
/Fc SF 28.19 429 M(\267 )S
/F4 SF 36 402.6 M(IANA, Internet Assigned Numbers Authority)S
/Fc SF 28.19 402.6 M(\267 )S
/F4 SF 36 389.4 M(CIDR, Classless Inter-Domain Routing)S
/Fc SF 28.19 389.4 M(\267 )S
/F4 SF 36 376.2 M(Also see our bibliography)S
/Fc SF 28.19 376.2 M(\267 )S
17 FS/F9 SF 0 343.8 M(IPsec Implementations)S
14 FS/F9 SF 0 313.2 M(Linux products)S
11 FS/F4 SF 0 286.2 M(Vendors using FreeS/WAN in turnkey firewall or VPN products are listed in our introduction.)S
0 259.8 M(Other vendors have Linux IPsec products which, as far as we know, do not use FreeS/WAN)S
36 233.4 M(Redcreek provide an open source Linux driver for their PCI hardware VPN card. This card has a 100)S
36 220.2 M(Mbit Ethernet port, an Intel 960 CPU plus more specialised crypto chips, and claimed encryption)S
36 207 M(performance of 45 Mbit/sec. The PC sees it as an Ethernet board.)S
/Fc SF 28.19 233.4 M(\267 )S
/F4 SF 36 193.8 M(Paktronix offer a Linux-based VPN with hardware encryption)S
/Fc SF 28.19 193.8 M(\267 )S
/F4 SF 36 180.6 M(Watchguard use Linux in their Firebox product.)S
/Fc SF 28.19 180.6 M(\267 )S
/F4 SF 36 167.4 M(Entrust offer a developers' toolkit for using their PKI for IPsec authentication)S
/Fc SF 28.19 167.4 M(\267 )S
/F4 SF 36 154.2 M(According to a report on our mailing list, Axent have a Linux version of their product.)S
/Fc SF 28.19 154.2 M(\267 )S
14 FS/F9 SF 0 124.8 M(IPsec in router products)S
11 FS/F4 SF 0 97.8 M(All the major router vendors support IPsec, at least in some models.)S
36 71.4 M(Cisco IPsec information)S
/Fc SF 28.19 71.4 M(\267 )S
/F4 SF 36 58.2 M(Ascend, now part of Lucent, have some IPsec-based products)S
/Fc SF 28.19 58.2 M(\267 )S
/F4 SF 36 45 M(Bay Networks, now part of Nortel, use IPsec in their Contivity switch product line)S
/Fc SF 28.19 45 M(\267 )S
/F4 SF 36 31.8 M(3Com have a number of VPN products, some using IPsec)S
/Fc SF 28.19 31.8 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Analysis and critiques of IPsec protocols)S
468.652 0 M(253)S
GR
SP
%%Page: 254 283
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(IPsec in firewall products)S
11 FS/F4 SF 0 657 M(Many firewall vendors offer IPsec, either as a standard part of their product, or an optional extra. A few we)S
0 643.8 M(know about are:)S
36 617.4 M(Borderware)S
/Fc SF 28.19 617.4 M(\267 )S
/F4 SF 36 604.2 M(Ashley Laurent)S
/Fc SF 28.19 604.2 M(\267 )S
/F4 SF 36 591 M(Watchguard)S
/Fc SF 28.19 591 M(\267 )S
/F4 SF 36 577.8 M(Injoy for OS/2)S
/Fc SF 28.19 577.8 M(\267 )S
/F4 SF 0 551.4 M(Vendors using FreeS/WAN in turnkey firewall products are listed in our introduction.)S
14 FS/F9 SF 0 522 M(Operating systems with IPsec support)S
11 FS/F4 SF 0 495 M(All the major open source operating systems support IPsec. See below for details on BSD-derived Unix)S
0 481.8 M(variants.)S
0 455.4 M(Among commercial OS vendors, IPsec players include:)S
36 429 M(Microsoft have put IPsec in their Windows 2000 and XP products)S
/Fc SF 28.19 429 M(\267 )S
/F4 SF 36 415.8 M(IBM announce a release of OS390 with IPsec support via a crypto co-processor)S
/Fc SF 28.19 415.8 M(\267 )S
/F4 SF 36 402.6 M(Sun include IPsec in Solaris 8)S
/Fc SF 28.19 402.6 M(\267 )S
/F4 SF 36 389.4 M(Hewlett Packard offer IPsec for their Unix machines)S
/Fc SF 28.19 389.4 M(\267 )S
/F4 SF 36 376.2 M(Certicom have IPsec available for the Palm.)S
/Fc SF 28.19 376.2 M(\267 )S
/F4 SF 36 363 M(There were reports before the release that Apple's Mac OS X would have IPsec support built in, but it)S
36 349.8 M(did not seem to be there when we last checked. If you find, it please let us know via the mailing list.)S
/Fc SF 28.19 363 M(\267 )S
14 FS/F9 SF 0 320.4 M(IPsec on network cards)S
11 FS/F4 SF 0 293.4 M(Network cards with built-in IPsec acceleration are available from at least Intel, 3Com and Redcreek.)S
14 FS/F9 SF 0 264 M(Open source IPsec implementations)S
11 FS/F9 SF 0 237 M(Other Linux IPsec implementations)S
/F4 SF 0 210.6 M(We like to think of FreeS/WAN as)S
/F6 SF ( the)S
/F4 SF ( Linux IPsec implementation, but it is not the only one. Others we know)S
0 197.4 M(of are:)S
36 171 M(pipsecd, a lightweight implementation of IPsec for Linux. Does not require kernel recompilation.)S
/Fc SF 28.19 171 M(\267 )S
/F4 SF 36 157.8 M(Petr Novak's ipnsec, based on the OpenBSD IPsec code and using Photuris for key management)S
/Fc SF 28.19 157.8 M(\267 )S
/F4 SF 36 144.6 M(A now defunct project at U of Arizona \(export controlled\))S
/Fc SF 28.19 144.6 M(\267 )S
/F4 SF 36 131.4 M(NIST Cerebus \(export controlled\))S
/Fc SF 28.19 131.4 M(\267 )S
/F9 SF 0 105 M(IPsec for BSD Unix)S
/F4 SF 36 78.6 M(KAME, several large Japanese companies co-operating on IPv6 and IPsec)S
/Fc SF 28.19 78.6 M(\267 )S
/F4 SF 36 65.4 M(US Naval Research Lab implementation of IPv6 and of IPsec for IPv4 \(export controlled\))S
/Fc SF 28.19 65.4 M(\267 )S
/F4 SF 36 52.2 M(OpenBSD includes IPsec as a standard part of the distribution)S
/Fc SF 28.19 52.2 M(\267 )S
/F4 SF 36 39 M(IPsec for FreeBSD)S
/Fc SF 28.19 39 M(\267 )S
/F4 SF 36 25.8 M(a FAQ on NetBSD's IPsec implementation)S
/Fc SF 28.19 25.8 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(IPsec in firewall products)S
468.652 0 M(254)S
GR
SP
%%Page: 255 284
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F9 SF 0 687 M(IPsec for other systems)S
/F4 SF 36 660.6 M(Helsinki U of Technolgy have implemented IPsec for Solaris, Java and Macintosh)S
/Fc SF 28.19 660.6 M(\267 )S
14 FS/F9 SF 0 631.2 M(Interoperability)S
11 FS/F4 SF 0 604.2 M(The IPsec protocols are designed so that different implementations should be able to work together. As they)S
0 591 M(say "the devil is in the details". IPsec has a lot of details, but considerable success has been achieved.)S
/F9 SF 0 564.6 M(Interoperability results)S
/F4 SF 0 538.2 M(Linux FreeS/WAN has been tested for interoperability with many other IPsec implementations. Results to)S
0 525 M(date are in our interoperability section.)S
0 498.6 M(Various other sites have information on interoperability between various IPsec implementations:)S
36 472.2 M(interop results from a bakeoff in Atlanta, September 1999.)S
/Fc SF 28.19 472.2 M(\267 )S
/F4 SF 36 459 M(a French company, HSC's, interoperability test data covers FreeS/WAN, Open BSD, KAME, Linux)S
36 445.8 M(pipsecd, Checkpoint, Red Creek Ravlin, and Cisco IOS)S
/Fc SF 28.19 459 M(\267 )S
/F4 SF 36 432.6 M(ICSA offer certification programs for various security-related products. See their list of certified)S
36 419.4 M(IPsec products. Linux FreeS/WAN is not currently on that list, but several products with which we)S
36 406.2 M(interoperate are.)S
/Fc SF 28.19 432.6 M(\267 )S
/F4 SF 36 393 M(VPNC have a page on why they are not yet doing interoperability testing and a page on the spec)S
36 379.8 M(conformance testing that they are doing)S
/Fc SF 28.19 393 M(\267 )S
/F4 SF 36 366.6 M(a review comparing a dozen commercial IPsec implemetations. Unfortunately, the reviewers did not)S
36 353.4 M(look at Open Source implementations such as FreeS/WAN or OpenBSD.)S
/Fc SF 28.19 366.6 M(\267 )S
/F4 SF 36 340.2 M(results from interoperability tests at a conference. FreeS/WAN was not tested there.)S
/Fc SF 28.19 340.2 M(\267 )S
/F4 SF 36 327 M(test results from the IPSEC 2000 conference)S
/Fc SF 28.19 327 M(\267 )S
/F9 SF 0 300.6 M(Interoperability test sites)S
/F4 SF 36 274.2 M(TAHI, a Japanese IPv6 testing project with free IPsec validation software)S
/Fc SF 28.19 274.2 M(\267 )S
/F4 SF 36 261 M(National Institute of Standards and Technology)S
/Fc SF 28.19 261 M(\267 )S
/F4 SF 36 247.8 M(SSH Communications Security)S
/Fc SF 28.19 247.8 M(\267 )S
17 FS/F9 SF 0 215.4 M(Linux links)S
14 FS/F9 SF 0 184.8 M(Basic and tutorial Linux information)S
11 FS/F4 SF 36 157.8 M(Linux Getting Started HOWTO document)S
/Fc SF 28.19 157.8 M(\267 )S
/F4 SF 36 144.6 M(A getting started guide from the U of Oregon)S
/Fc SF 28.19 144.6 M(\267 )S
/F4 SF 36 131.4 M(A large link collection which includes a lot of introductory and tutorial material on Unix, Linux, the)S
36 118.2 M(net, . . .)S
/Fc SF 28.19 131.4 M(\267 )S
14 FS/F9 SF 0 88.8 M(General Linux sites)S
11 FS/F4 SF 36 61.8 M(Freshmeat Linux news)S
/Fc SF 28.19 61.8 M(\267 )S
/F4 SF 36 48.6 M(Slashdot "News for Nerds")S
/Fc SF 28.19 48.6 M(\267 )S
/F4 SF 36 35.4 M(Linux Online)S
/Fc SF 28.19 35.4 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Open source IPsec implementations)S
468.652 0 M(255)S
GR
SP
%%Page: 256 285
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(Linux HQ)S
/Fc SF 28.19 687 M(\267 )S
/F4 SF 36 673.8 M(tux.org)S
/Fc SF 28.19 673.8 M(\267 )S
14 FS/F9 SF 0 644.4 M(Documentation)S
11 FS/F4 SF 0 617.4 M(Nearly any Linux documentation you are likely to want can be found at the Linux Documentation Project or)S
0 604.2 M(LDP.)S
36 577.8 M(Meta-FAQ guide to Linux information sources)S
/Fc SF 28.19 577.8 M(\267 )S
/F4 SF 36 564.6 M(The LDP's HowTo documents are a standard Linux reference. See this list. Documents there most)S
36 551.4 M(relevant to a FreeS/WAN gateway are:)S
72 538.2 M(Kernel HOWTO)S
/Fc SF 60.967 538.2 M(\250 )S
/F4 SF 72 525 M(Networking Overview HOWTO)S
/Fc SF 60.967 525 M(\250 )S
/F4 SF 72 511.8 M(Security HOWTO)S
/Fc SF 60.967 511.8 M(\250 )S
28.19 564.6 M(\267 )S
/F4 SF 36 498.6 M(The LDP do a series of Guides, book-sized publications with more detail \(and often more "why do it)S
36 485.4 M(this way?"\) than the HowTos. See this list. Documents there most relevant to a FreeS/WAN gateway)S
36 472.2 M(are:)S
72 459 M(System Administrator's Guide)S
/Fc SF 60.967 459 M(\250 )S
/F4 SF 72 445.8 M(Network Adminstrator's Guide)S
/Fc SF 60.967 445.8 M(\250 )S
/F4 SF 72 432.6 M(Linux Administrator's Security Guide)S
/Fc SF 60.967 432.6 M(\250 )S
28.19 498.6 M(\267 )S
/F4 SF 0 406.2 M(You may not need to go to the LDP to get this material. Most Linux distributions include the HowTos on their)S
0 393 M(CDs and several include the Guides as well. Also, most of the Guides and some collections of HowTos are)S
0 379.8 M(available in book form from various publishers.)S
0 353.4 M(Much of the LDP material is also available in languages other than English. See this LDP page.)S
14 FS/F9 SF 0 324 M(Advanced routing)S
11 FS/F4 SF 0 297 M(The Linux IP stack has some new features in 2.4 kernels. Some HowTos have been written:)S
36 270.6 M(several HowTos for the netfilter firewall code in newer kernels)S
/Fc SF 28.19 270.6 M(\267 )S
/F4 SF 36 257.4 M(2.4 networking HowTo)S
/Fc SF 28.19 257.4 M(\267 )S
/F4 SF 36 244.2 M(2.4 routing HowTo)S
/Fc SF 28.19 244.2 M(\267 )S
14 FS/F9 SF 0 214.8 M(Security for Linux)S
11 FS/F4 SF 0 187.8 M(See also the LDP material above.)S
36 161.4 M(Trinity OS guide to setting up Linux)S
/Fc SF 28.19 161.4 M(\267 )S
/F4 SF 36 148.2 M(Unix security page)S
/Fc SF 28.19 148.2 M(\267 )S
/F4 SF 36 135 M(PPDD encrypting filesystem)S
/Fc SF 28.19 135 M(\267 )S
/F4 SF 36 121.8 M(Linux Encryption HowTo \(outdated when last checked, had an Oct 2000 revision date in March 2002\))S
/Fc SF 28.19 121.8 M(\267 )S
14 FS/F9 SF 0 92.4 M(Linux firewalls)S
11 FS/F4 SF 0 65.4 M(Our FreeS/WAN and firewalls document includes links to several sets of scripts known to work with)S
0 52.2 M(FreeS/WAN.)S
0 25.8 M(Other information sources:)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Documentation)S
468.652 0 M(256)S
GR
SP
%%Page: 257 286
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(IP Masquerade resource page)S
/Fc SF 28.19 687 M(\267 )S
/F4 SF 36 673.8 M(netfilter firewall code in 2.4 kernels)S
/Fc SF 28.19 673.8 M(\267 )S
/F4 SF 36 660.6 M(Our list of general firewall references on the web)S
/Fc SF 28.19 660.6 M(\267 )S
/F4 SF 36 647.4 M(Mason, a tool for automatically configuring Linux firewalls)S
/Fc SF 28.19 647.4 M(\267 )S
/F4 SF 36 634.2 M(the web cache software squid and squidguard which turns Squid into a filtering web proxy)S
/Fc SF 28.19 634.2 M(\267 )S
14 FS/F9 SF 0 604.8 M(Miscellaneous Linux information)S
11 FS/F4 SF 36 577.8 M(Linux distribution vendors)S
/Fc SF 28.19 577.8 M(\267 )S
/F4 SF 36 564.6 M(Linux User Groups)S
/Fc SF 28.19 564.6 M(\267 )S
17 FS/F9 SF 0 532.2 M(Crypto and security links)S
14 FS/F9 SF 0 501.6 M(Crypto and security resources)S
11 FS/F9 SF 0 474.6 M(The standard link collections)S
/F4 SF 0 448.2 M(Two enormous collections of links, each the standard reference in its area:)S
/F6 SF 0 421.8 M(Gene Spafford's COAST hotlist)S
/F4 SF 36 408.6 M(Computer and network security.)S
/F6 SF 0 395.4 M(Peter Gutmann's Encryption and Security-related Resources)S
/F4 SF 36 382.2 M(Cryptography.)S
/F9 SF 0 355.8 M(Frequently Asked Question \(FAQ\) documents)S
/F4 SF 36 329.4 M(Cryptography FAQ)S
/Fc SF 28.19 329.4 M(\267 )S
/F4 SF 36 316.2 M(Firewall FAQ)S
/Fc SF 28.19 316.2 M(\267 )S
/F4 SF 36 303 M(Secure Unix Programming FAQ)S
/Fc SF 28.19 303 M(\267 )S
/F4 SF 36 289.8 M(FAQs for specific programs are listed in the tools section below.)S
/Fc SF 28.19 289.8 M(\267 )S
/F9 SF 0 263.4 M(Tutorials)S
/F4 SF 36 237 M(Gary Kessler's Overview of Cryptography)S
/Fc SF 28.19 237 M(\267 )S
/F4 SF 36 223.8 M(Terry Ritter's introduction)S
/Fc SF 28.19 223.8 M(\267 )S
/F4 SF 36 210.6 M(Peter Gutman's cryptography tutorial \(500 slides in PDF format\))S
/Fc SF 28.19 210.6 M(\267 )S
/F4 SF 36 197.4 M(Amir Herzberg of IBM's sildes for his course Introduction to Cryptography and Electronic Commerce)S
/Fc SF 28.19 197.4 M(\267 )S
/F4 SF 36 184.2 M(the concepts section of the GNU Privacy Guard documentation)S
/Fc SF 28.19 184.2 M(\267 )S
/F4 SF 36 171 M(Bruce Schneier's self-study cryptanalysis course)S
/Fc SF 28.19 171 M(\267 )S
/F4 SF 0 144.6 M(See also the interesting papers section below.)S
/F9 SF 0 118.2 M(Crypto and security standards)S
/F4 SF 36 91.8 M(Common Criteria, new international computer and network security standards to replace the)S
36 78.6 M("Rainbow" series)S
/Fc SF 28.19 91.8 M(\267 )S
/F4 SF 36 65.4 M(AES Advanced Encryption Standard which will replace DES)S
/Fc SF 28.19 65.4 M(\267 )S
/F4 SF 36 52.2 M(IEEE P-1363 public key standard)S
/Fc SF 28.19 52.2 M(\267 )S
/F4 SF 36 39 M(our collection of links for the IPsec standards)S
/Fc SF 28.19 39 M(\267 )S
/F4 SF 36 25.8 M(history of formal evaluation of security policies and implementation)S
/Fc SF 28.19 25.8 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Miscellaneous Linux information)S
468.652 0 M(257)S
GR
SP
%%Page: 258 287
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F9 SF 0 687 M(Crypto quotes)S
/F4 SF 0 660.6 M(There are several collections of cryptographic quotes on the net:)S
36 634.2 M(the EFF)S
/Fc SF 28.19 634.2 M(\267 )S
/F4 SF 36 621 M(Sam Simpson)S
/Fc SF 28.19 621 M(\267 )S
/F4 SF 36 607.8 M(AM Kutchling)S
/Fc SF 28.19 607.8 M(\267 )S
14 FS/F9 SF 0 578.4 M(Cryptography law and policy)S
11 FS/F9 SF 0 551.4 M(Surveys of crypto law)S
/F4 SF 36 525 M(International survey of crypto law.)S
/Fc SF 28.19 525 M(\267 )S
/F4 SF 36 511.8 M(International survey of digital signature law)S
/Fc SF 28.19 511.8 M(\267 )S
/F9 SF 0 485.4 M(Organisations opposing crypto restrictions)S
/F4 SF 36 459 M(The EFF's archives on privacy and export control.)S
/Fc SF 28.19 459 M(\267 )S
/F4 SF 36 445.8 M(Global Internet Liberty Campaign)S
/Fc SF 28.19 445.8 M(\267 )S
/F4 SF 36 432.6 M(Center for Democracy and Technology)S
/Fc SF 28.19 432.6 M(\267 )S
/F4 SF 36 419.4 M(Privacy International, who give out Big Brother Awards to snoopy organisations)S
/Fc SF 28.19 419.4 M(\267 )S
/F9 SF 0 393 M(Other information on crypto policy)S
/F4 SF 36 366.6 M(RFC 1984, the IAB and IESG Statement on Cryptographic Technology and the Internet.)S
/Fc SF 28.19 366.6 M(\267 )S
/F4 SF 36 353.4 M(John Young's collection of documents of interest to the cryptography, open government and privacy)S
36 340.2 M(movements, organized chronologically)S
/Fc SF 28.19 353.4 M(\267 )S
/F4 SF 36 327 M(AT&T researcher Matt Blaze's Encryption, Privacy and Security Resource Page)S
/Fc SF 28.19 327 M(\267 )S
/F4 SF 36 313.8 M(A good overview of the issues from Australia.)S
/Fc SF 28.19 313.8 M(\267 )S
/F4 SF 0 287.4 M(See also our documentation section on the history and politics of cryptography.)S
14 FS/F9 SF 0 258 M(Cryptography technical information)S
11 FS/F9 SF 0 231 M(Collections of crypto links)S
/F4 SF 36 204.6 M(Counterpane)S
/Fc SF 28.19 204.6 M(\267 )S
/F4 SF 36 191.4 M(Peter Gutman's links)S
/Fc SF 28.19 191.4 M(\267 )S
/F4 SF 36 178.2 M(PKI links)S
/Fc SF 28.19 178.2 M(\267 )S
/F4 SF 36 165 M(Robert Guerra's links)S
/Fc SF 28.19 165 M(\267 )S
/F9 SF 0 138.6 M(Lists of online cryptography papers)S
/F4 SF 36 112.2 M(Counterpane)S
/Fc SF 28.19 112.2 M(\267 )S
/F4 SF 36 99 M(cryptography.com)S
/Fc SF 28.19 99 M(\267 )S
/F4 SF 36 85.8 M(Cryptosoft)S
/Fc SF 28.19 85.8 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Crypto and security resources)S
468.652 0 M(258)S
GR
SP
%%Page: 259 288
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F9 SF 0 687 M(Particularly interesting papers)S
/F4 SF 0 660.6 M(These papers emphasize important issues around the use of cryptography, and the design and management of)S
0 647.4 M(secure systems.)S
36 621 M(Key length requirements for security)S
/Fc SF 28.19 621 M(\267 )S
/F4 SF 36 607.8 M(Why Cryptosystems Fail)S
/Fc SF 28.19 607.8 M(\267 )S
/F4 SF 36 594.6 M(Risks of escrowed encryption)S
/Fc SF 28.19 594.6 M(\267 )S
/F4 SF 36 581.4 M(Security pitfalls in cryptography)S
/Fc SF 28.19 581.4 M(\267 )S
/F4 SF 36 568.2 M(Reflections on Trusting Trust, Ken Thompson on Trojan horse design)S
/Fc SF 28.19 568.2 M(\267 )S
/F4 SF 36 555 M(Security against Compelled Disclosure, how to maintain privacy in the face of legal or other coersion)S
/Fc SF 28.19 555 M(\267 )S
14 FS/F9 SF 0 525.6 M(Computer and network security)S
11 FS/F9 SF 0 498.6 M(Security links)S
/F4 SF 36 472.2 M(COAST Hotlist)S
/Fc SF 28.19 472.2 M(\267 )S
/F4 SF 36 459 M(DMOZ open directory project computer security links)S
/Fc SF 28.19 459 M(\267 )S
/F4 SF 36 445.8 M(Bennet Yee)S
/Fc SF 28.19 445.8 M(\267 )S
/F4 SF 36 432.6 M(Mike Fuhr's link collection)S
/Fc SF 28.19 432.6 M(\267 )S
/F4 SF 36 419.4 M(links with an emphasis on intrusion detection)S
/Fc SF 28.19 419.4 M(\267 )S
/F9 SF 0 393 M(Firewall links)S
/F4 SF 36 366.6 M(COAST firewalls)S
/Fc SF 28.19 366.6 M(\267 )S
/F4 SF 36 353.4 M(Firewalls Resource page)S
/Fc SF 28.19 353.4 M(\267 )S
/F9 SF 0 327 M(VPN links)S
/F4 SF 36 300.6 M(VPN Consortium)S
/Fc SF 28.19 300.6 M(\267 )S
/F4 SF 36 287.4 M(First VPN's white paper collection)S
/Fc SF 28.19 287.4 M(\267 )S
/F9 SF 0 261 M(Security tools)S
/F4 SF 36 234.6 M(PGP -- mail encryption)S
72 221.4 M(PGP Inc. \(part of NAI\) for commercial versions)S
/Fc SF 60.967 221.4 M(\250 )S
/F4 SF 72 208.2 M(MIT distributes the NAI product for non-commercial use)S
/Fc SF 60.967 208.2 M(\250 )S
/F4 SF 72 195 M(international distribution site)S
/Fc SF 60.967 195 M(\250 )S
/F4 SF 72 181.8 M(GNU Privacy Guard \(GPG\))S
/Fc SF 60.967 181.8 M(\250 )S
/F4 SF 72 168.6 M(PGP FAQ)S
/Fc SF 60.967 168.6 M(\250 )S
/F4 SF 36 155.4 M(A message in our mailing list archive has considerable detail on available versions of PGP and on)S
36 142.2 M(IPsec support in them.)S
/F7 SF 36 115.8 M(Note:)S
/F4 SF ( A fairly nasty bug exists in all commercial PGP versions from 5.5 through 6.5.3. If you have)S
36 102.6 M(one of those,)S
/F7 SF ( upgrade now)S
/F4 SF (.)S
/Fc SF 28.19 234.6 M(\267 )S
/F4 SF 36 89.4 M(SSH -- secure remote login)S
72 76.2 M(SSH Communications Security, for the original software. It is free for trial, academic and)S
72 63 M(non-commercial use.)S
/Fc SF 60.967 76.2 M(\250 )S
/F4 SF 72 49.8 M(Open SSH, the Open BSD team's free replacement)S
/Fc SF 60.967 49.8 M(\250 )S
/F4 SF 72 36.6 M(freessh.org, links to free implementations for many systems)S
/Fc SF 60.967 36.6 M(\250 )S
28.19 89.4 M(\267 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Cryptography technical information)S
468.652 0 M(259)S
GR
SP
%%Page: 260 289
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 72 687 M(SSH FAQ)S
/Fc SF 60.967 687 M(\250 )S
/F4 SF 72 673.8 M(Putty, an SSH client for Windows)S
/Fc SF 60.967 673.8 M(\250 )S
/F4 SF 36 660.6 M(Tripwire saves message digests of your system files. Re-calculate the digests and compare to saved)S
36 647.4 M(values to detect any file changes. There are several versions available:)S
72 634.2 M(commercial version)S
/Fc SF 60.967 634.2 M(\250 )S
/F4 SF 72 621 M(Open Source)S
/Fc SF 60.967 621 M(\250 )S
28.19 660.6 M(\267 )S
/F4 SF 36 607.8 M(Snort and LIDS are intrusion detection system for Linux)S
/Fc SF 28.19 607.8 M(\267 )S
/F4 SF 36 594.6 M(SATAN System Administrators Tool for Analysing Networks)S
/Fc SF 28.19 594.6 M(\267 )S
/F4 SF 36 581.4 M(NMAP Network Mapper)S
/Fc SF 28.19 581.4 M(\267 )S
/F4 SF 36 568.2 M(Wietse Venema's page with various tools)S
/Fc SF 28.19 568.2 M(\267 )S
/F4 SF 36 555 M(Internet Traffic Archive, various tools to analyze network traffic, mostly scripts to organise and)S
36 541.8 M(format tcpdump\(8\) output for specific purposes)S
/Fc SF 28.19 555 M(\267 )S
/F4 SF 36 528.6 M(ssmail -- sendmail patched to do opportunistic encryption)S
72 515.4 M(web page with links to code and to a Usenix paper describing it, in PDF)S
/Fc SF 60.967 515.4 M(\250 )S
28.19 528.6 M(\267 )S
/F4 SF 36 502.2 M(Open CA project to develop a freely distributed Certification Authority for building a open Public)S
36 489 M(Key Infrastructure.)S
/Fc SF 28.19 502.2 M(\267 )S
14 FS/F9 SF 0 459.6 M(Links to home pages)S
11 FS/F4 SF 0 432.6 M(David Wagner at Berkeley provides a set of links to home pages of cryptographers, cypherpunks and)S
0 419.4 M(computer security people.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Links to home pages)S
468.652 0 M(260)S
GR
SP
%%Page: 261 290
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
0 612.6 M 487.0 2.0 F
0 543.4 M 487.0 2.0 F
0 59 M 487.0 2.0 F
20 FS/F9 SF 0 678 M(Glossary for the Linux FreeS/WAN project)S
11 FS/F4 SF 0 649.8 M(Entries are in alphabetical order. Some entries are only one line or one paragraph long. Others run to several)S
0 636.6 M(paragraphs. I have tried to put the essential information in the first paragraph so you can skip the other)S
0 623.4 M(paragraphs if that seems appropriate.)S
17 FS/F9 SF 0 589 M(Jump to a letter in the glossary)S
/F5 SF 2.194 555.4 M(numeric A B C D E F G H I J K L M N O P Q R S T U V W X Y Z)S
/F9 SF 0 519.8 M(Other glossaries)S
11 FS/F4 SF 0 492.2 M(Other glossaries which overlap this one include:)S
36 465.8 M(The VPN Consortium's glossary of VPN terms.)S
/Fc SF 28.19 465.8 M(\267 )S
/F4 SF 36 452.6 M(glossary portion of the Cryptography FAQ)S
/Fc SF 28.19 452.6 M(\267 )S
/F4 SF 36 439.4 M(an extensive crytographic glossary on Terry Ritter's page.)S
/Fc SF 28.19 439.4 M(\267 )S
/F4 SF 36 426.2 M(The NSA's glossary of computer security on the SANS Institute site.)S
/Fc SF 28.19 426.2 M(\267 )S
/F4 SF 36 413 M(a small glossary for Internet Security at PC magazine)S
/Fc SF 28.19 413 M(\267 )S
/F4 SF 36 399.8 M(The glossary from Richard Smith's book Internet Cryptography)S
/Fc SF 28.19 399.8 M(\267 )S
/F4 SF 0 373.4 M(Several Internet glossaries are available as RFCs:)S
36 347 M(Glossary of Networking Terms)S
/Fc SF 28.19 347 M(\267 )S
/F4 SF 36 333.8 M(Internet User's Glossary)S
/Fc SF 28.19 333.8 M(\267 )S
/F4 SF 36 320.6 M(Internet Security Glossary)S
/Fc SF 28.19 320.6 M(\267 )S
/F4 SF 0 294.2 M(More general glossary or dictionary information:)S
36 267.8 M(Free Online Dictionary of Computing \(FOLDOC\))S
72 254.6 M(North America)S
/Fc SF 60.967 254.6 M(\250 )S
/F4 SF 72 241.4 M(Europe)S
/Fc SF 60.967 241.4 M(\250 )S
/F4 SF 72 228.2 M(Japan)S
/Fc SF 60.967 228.2 M(\250 )S
/F4 SF 36 215 M(There are many more mirrors of this dictionary.)S
/Fc SF 28.19 267.8 M(\267 )S
/F4 SF 36 201.8 M(The Jargon File, the definitive resource for hacker slang and folklore)S
72 188.6 M(North America)S
/Fc SF 60.967 188.6 M(\250 )S
/F4 SF 72 175.4 M(Holland)S
/Fc SF 60.967 175.4 M(\250 )S
/F4 SF 72 162.2 M(home page)S
/Fc SF 60.967 162.2 M(\250 )S
/F4 SF 36 149 M(There are also many mirrors of this. See the home page for a list.)S
/Fc SF 28.19 201.8 M(\267 )S
/F4 SF 36 135.8 M(A general technology glossary)S
/Fc SF 28.19 135.8 M(\267 )S
/F4 SF 36 122.6 M(An online dictionary resource page with pointers to many dictionaries for many languages)S
/Fc SF 28.19 122.6 M(\267 )S
/F4 SF 36 109.4 M(A search engine that accesses several hundred online dictionaries)S
/Fc SF 28.19 109.4 M(\267 )S
/F4 SF 36 96.2 M(O'Reilly Dictionary of PC Hardware and Data Communications Terms)S
/Fc SF 28.19 96.2 M(\267 )S
/F4 SF 36 83 M(Connected Internet encyclopedia)S
/Fc SF 28.19 83 M(\267 )S
/F4 SF 36 69.8 M(whatis.com)S
/Fc SF 28.19 69.8 M(\267 )S
/F8 SF 0 0 M(Glossary for the Linux FreeS/WAN project)S
468.652 0 M(261)S
GR
SP
%%Page: 262 291
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
17 FS/F9 SF 0 681 M(Definitions)S
11 FS/F6 SF 0 653.4 M(0)S
0 640.2 M(3DES \(Triple DES\))S
/F4 SF 36 627 M(Using three DES encryptions on a single data block, with at least two different keys, to get higher)S
36 613.8 M(security than is available from a single DES pass. The three-key version of 3DES is the default)S
36 600.6 M(encryption algorithm for Linux FreeS/WAN.)S
36 574.2 M(IPsec always does 3DES with three different keys, as required by RFC 2451. For an explanation of)S
36 561 M(the two-key variant, see two key triple DES. Both use an EDE encrypt-decrypt-encrpyt sequence of)S
36 547.8 M(operations.)S
36 521.4 M(Single DES is insecure.)S
36 495 M(Double DES is ineffective. Using two 56-bit keys, one might expect an attacker to have to do 2)S
8 FS/F4 SF 457.399 499.5 M(112)S
11 FS/F4 SF 36 481.8 M(work to break it. In fact, only 2)S
8 FS/F4 SF 173.17 486.3 M(57)S
11 FS/F4 SF 181.17 481.8 M( work is required with a meet-in-the-middle attack, though a large)S
36 468.6 M(amount of memory is also required. Triple DES is vulnerable to a similar attack, but that just reduces)S
36 455.4 M(the work factor from the 2)S
8 FS/F4 SF 151.775 459.9 M(168)S
11 FS/F4 SF 163.775 455.4 M( one might expect to 2)S
8 FS/F4 SF 261.851 459.9 M(112)S
11 FS/F4 SF 273.851 455.4 M(. That provides adequate protection against)S
36 442.2 M(brute force attacks, and no better attack is known.)S
36 415.8 M(3DES can be somewhat slow compared to other ciphers. It requires three DES encryptions per block.)S
36 402.6 M(DES was designed for hardware implementation and includes some operations which are difficult in)S
36 389.4 M(software. However, the speed we get is quite acceptable for many uses. See our performance)S
36 376.2 M(document for details.)S
/F6 SF 0 363 M(A)S
0 349.8 M(Active attack)S
/F4 SF 36 336.6 M(An attack in which the attacker does not merely eavesdrop \(see passive attack\) but takes action to)S
36 323.4 M(change, delete, reroute, add, forge or divert data. Perhaps the best-known active attack is)S
36 310.2 M(man-in-the-middle. In general, authentication is a useful defense against active attacks.)S
/F6 SF 0 297 M(AES)S
/F4 SF 36 283.8 M(The)S
/F5 SF ( A)S
/F4 SF (dvanced)S
/F5 SF ( E)S
/F4 SF (ncryption)S
/F5 SF ( S)S
/F4 SF (tandard -- a new block cipher standard to replace DES -- developed by)S
36 270.6 M(NIST, the US National Institute of Standards and Technology. DES used 64-bit blocks and a 56-bit)S
36 257.4 M(key. AES ciphers use a 128-bit block and 128, 192 or 256-bit keys. The larger block size helps resist)S
36 244.2 M(birthday attacks while the large key size prevents brute force attacks.)S
36 217.8 M(Fifteen proposals meeting NIST's basic criteria were submitted in 1998 and subjected to intense)S
36 204.6 M(discussion and analysis, "round one" evaluation. In August 1999, NIST narrowed the field to five)S
36 191.4 M("round two" candidates:)S
72 165 M(Mars from IBM)S
/Fc SF 63.816 165 M(\340 )S
/F4 SF 72 151.8 M(RC6 from RSA)S
/Fc SF 63.816 151.8 M(\340 )S
/F4 SF 72 138.6 M(Rijndael from two Belgian researchers)S
/Fc SF 63.816 138.6 M(\340 )S
/F4 SF 72 125.4 M(Serpent, a British-Norwegian-Israeli collaboration)S
/Fc SF 63.816 125.4 M(\340 )S
/F4 SF 72 112.2 M(Twofish from the consulting firm Counterpane)S
/Fc SF 63.816 112.2 M(\340 )S
/F4 SF 36 99 M(Three of the five finalists -- Rijndael, Serpent and Twofish -- have completely open licenses.)S
36 72.6 M(In October 2000, NIST announced the winner -- Rijndael.)S
36 46.2 M(For more information, see:)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(262)S
GR
SP
%%Page: 263 292
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 72 687 M(NIST's AES home page)S
/Fc SF 63.816 687 M(\340 )S
/F4 SF 72 673.8 M(the Block Cipher Lounge AES page)S
/Fc SF 63.816 673.8 M(\340 )S
/F4 SF 72 660.6 M(Brian Gladman's code and benchmarks)S
/Fc SF 63.816 660.6 M(\340 )S
/F4 SF 72 647.4 M(Helger Lipmaa's survey of implementations)S
/Fc SF 63.816 647.4 M(\340 )S
/F4 SF 36 634.2 M(AES will be added to a future release of Linux FreeS/WAN. Likely we will add all three of the)S
36 621 M(finalists with good licenses. User-written AES patches are already available.)S
36 594.6 M(Adding AES may also require adding stronger hashes, SHA-256, SHA-384 and SHA-512.)S
/F6 SF 0 581.4 M(AH)S
/F4 SF 36 568.2 M(The IPsec)S
/F5 SF ( A)S
/F4 SF (uthentication)S
/F5 SF ( H)S
/F4 SF (eader, added after the IP header. For details, see our IPsec document)S
36 555 M(and/or RFC 2402.)S
/F6 SF 0 541.8 M(Alice and Bob)S
/F4 SF 36 528.6 M(A and B, the standard example users in writing on cryptography and coding theory. Carol and Dave)S
36 515.4 M(join them for protocols which require more players.)S
36 489 M(Bruce Schneier extends these with many others such as Eve the Eavesdropper and Victor the Verifier.)S
36 475.8 M(His extensions seem to be in the process of becoming standard as well. See page 23 of Applied)S
36 462.6 M(Cryptography)S
36 436.2 M(Alice and Bob have an amusing biography on the web.)S
/F6 SF 0 423 M(ARPA)S
/F4 SF 36 409.8 M(see DARPA)S
/F6 SF 0 396.6 M(ASIO)S
/F4 SF 36 383.4 M(Australian Security Intelligence Organisation.)S
/F6 SF 0 370.2 M(Asymmetric cryptography)S
/F4 SF 36 357 M(See public key cryptography.)S
/F6 SF 0 343.8 M(Authentication)S
/F4 SF 36 330.6 M(Ensuring that a message originated from the expected sender and has not been altered on route. IPsec)S
36 317.4 M(uses authentication in two places:)S
72 304.2 M(peer authentication, authenticating the players in IKE's Diffie-Hellman key exchanges to)S
72 291 M(prevent man-in-the-middle attacks. This can be done in a number of ways. The methods)S
72 277.8 M(supported by FreeS/WAN are discussed in our advanced configuration document.)S
/Fc SF 63.816 304.2 M(\340 )S
/F4 SF 72 264.6 M(packet authentication, authenticating packets on an established SA, either with a separate)S
72 251.4 M(authentication header or with the optional authentication in the ESP protocol. In either case,)S
72 238.2 M(packet authentication uses a hashed message athentication code technique.)S
/Fc SF 63.816 264.6 M(\340 )S
/F4 SF 36 225 M(Outside IPsec, passwords are perhaps the most common authentication mechanism. Their function is)S
36 211.8 M(essentially to authenticate the person's identity to the system. Passwords are generally only as secure)S
36 198.6 M(as the network they travel over. If you send a cleartext password over a tapped phone line or over a)S
36 185.4 M(network with a packet sniffer on it, the security provided by that password becomes zero. Sending an)S
36 172.2 M(encrypted password is no better; the attacker merely records it and reuses it at his convenience. This is)S
36 159 M(called a replay attack.)S
36 132.6 M(A common solution to this problem is a challenge-response system. This defeats simple)S
36 119.4 M(eavesdropping and replay attacks. Of course an attacker might still try to break the cryptographic)S
36 106.2 M(algorithm used, or the random number generator.)S
/F6 SF 0 93 M(Automatic keying)S
/F4 SF 36 79.8 M(A mode in which keys are automatically generated at connection establisment and new keys)S
36 66.6 M(automaically created periodically thereafter. Contrast with manual keying in which a single stored key)S
36 53.4 M(is used.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(263)S
GR
SP
%%Page: 264 293
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(IPsec uses the Diffie-Hellman key exchange protocol to create keys. An authentication mechansim is)S
36 673.8 M(required for this. FreeS/WAN normally uses RSA for this. Other methods supported are discussed in)S
36 660.6 M(our advanced configuration document.)S
36 634.2 M(Having an attacker break the authentication is emphatically not a good idea. An attacker that breaks)S
36 621 M(authentication, and manages to subvert some other network entities \(DNS, routers or gateways\), can)S
36 607.8 M(use a man-in-the middle attack to break the security of your IPsec connections.)S
36 581.4 M(However, having an attacker break the authentication in automatic keying is not quite as bad as losing)S
36 568.2 M(the key in manual keying.)S
72 541.8 M(An attacker who reads /etc/ipsec.conf and gets the keys for a manually keyed connection can,)S
72 528.6 M(without further effort, read all messages encrypted with those keys, including any old)S
72 515.4 M(messages he may have archived.)S
/Fc SF 63.816 541.8 M(\340 )S
/F4 SF 72 502.2 M(Automatic keying has a property called perfect forward secrecy. An attacker who breaks the)S
72 489 M(authentication gets none of the automatically generated keys and cannot immediately read any)S
72 475.8 M(messages. He has to mount a successful man-in-the-middle attack in real time before he can)S
72 462.6 M(read anything. He cannot read old archived messages at all and will not be able to read any)S
72 449.4 M(future messages not caught by man-in-the-middle tricks.)S
/Fc SF 63.816 502.2 M(\340 )S
/F4 SF 36 436.2 M(That said, the secrets used for authentication, stored in ipsec.secrets\(5\), should still be protected as)S
36 423 M(tightly as cryptographic keys.)S
/F6 SF 0 409.8 M(B)S
0 396.6 M(Bay Networks)S
/F4 SF 36 383.4 M(A vendor of routers, hubs and related products, now a subsidiary of Nortel. Interoperation between)S
36 370.2 M(their IPsec products and Linux FreeS/WAN was problematic at last report; see our interoperation)S
36 357 M(section.)S
/F6 SF 0 343.8 M(benchmarks)S
/F4 SF 36 330.6 M(Our default block cipher, triple DES, is slower than many alternate ciphers that might be used. Speeds)S
36 317.4 M(achieved, however, seem adequate for many purposes. For example, the assembler code from the)S
36 304.2 M(LIBDES library we use encrypts 1.6 megabytes per second on a Pentium 200, according to the test)S
36 291 M(program supplied with the library.)S
36 264.6 M(For more detail, see our document on FreeS/WAN performance.)S
/F6 SF 0 251.4 M(BIND)S
/F5 SF 36 238.2 M(B)S
/F4 SF (erkeley)S
/F5 SF ( I)S
/F4 SF (nternet)S
/F5 SF ( N)S
/F4 SF (ame)S
/F5 SF ( D)S
/F4 SF (aemon, a widely used implementation of DNS \(Domain Name Service\).)S
36 225 M(See our bibliography for a useful reference. See the BIND home page for more information and the)S
36 211.8 M(latest version.)S
/F6 SF 0 198.6 M(Birthday attack)S
/F4 SF 36 185.4 M(A cryptographic attack based on the mathematics exemplified by the birthday paradox. This math)S
36 172.2 M(turns up whenever the question of two cryptographic operations producing the same result becomes)S
36 159 M(an issue:)S
72 145.8 M(collisions in message digest functions.)S
/Fc SF 63.816 145.8 M(\340 )S
/F4 SF 72 132.6 M(identical output blocks from a block cipher)S
/Fc SF 63.816 132.6 M(\340 )S
/F4 SF 72 119.4 M(repetition of a challenge in a challenge-response system)S
/Fc SF 63.816 119.4 M(\340 )S
/F4 SF 36 106.2 M(Resisting such attacks is part of the motivation for:)S
72 79.8 M(hash algorithms such as SHA and RIPEMD-160 giving a 160-bit result rather than the 128)S
72 66.6 M(bits of MD4, MD5 and RIPEMD-128.)S
/Fc SF 63.816 79.8 M(\340 )S
/F4 SF 72 53.4 M(AES block ciphers using a 128-bit block instead of the 64-bit block of most current ciphers)S
/Fc SF 63.816 53.4 M(\340 )S
/F4 SF 72 40.2 M(IPsec using a 32-bit counter for packets sent on an automatically keyed SA and requiring that)S
72 27 M(the connection always be rekeyed before the counter overflows.)S
/Fc SF 63.816 40.2 M(\340 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(264)S
GR
SP
%%Page: 265 294
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F6 SF 0 687 M(Birthday paradox)S
/F4 SF 36 673.8 M(Not really a paradox, just a rather counter-intuitive mathematical fact. In a group of 23 people, the)S
36 660.6 M(chance of a least one pair having the same birthday is over 50%.)S
36 634.2 M(The second person has 1 chance in 365 \(ignoring leap years\) of matching the first. If they don't match,)S
36 621 M(the third person's chances of matching one of them are 2/365. The 4th, 3/365, and so on. The total of)S
36 607.8 M(these chances grows more quickly than one might guess.)S
/F6 SF 0 594.6 M(Block cipher)S
/F4 SF 36 581.4 M(A symmetric cipher which operates on fixed-size blocks of plaintext, giving a block of ciphertext for)S
36 568.2 M(each. Contrast with stream cipher. Block ciphers can be used in various modes when multiple block)S
36 555 M(are to be encrypted.)S
36 528.6 M(DES is among the the best known and widely used block ciphers, but is now obsolete. Its 56-bit key)S
36 515.4 M(size makes it highly insecure today. Triple DES is the default block cipher for Linux FreeS/WAN.)S
36 489 M(The current generation of block ciphers -- such as Blowfish, CAST-128 and IDEA -- all use 64-bit)S
36 475.8 M(blocks and 128-bit keys. The next generation, AES, uses 128-bit blocks and supports key sizes up to)S
36 462.6 M(256 bits.)S
36 436.2 M(The Block Cipher Lounge web site has more information.)S
/F6 SF 0 423 M(Blowfish)S
/F4 SF 36 409.8 M(A block cipher using 64-bit blocks and keys of up to 448 bits, designed by Bruce Schneier and used)S
36 396.6 M(in several products.)S
36 370.2 M(This is not required by the IPsec RFCs and not currently used in Linux FreeS/WAN.)S
/F6 SF 0 357 M(Brute force attack \(exhaustive search\))S
/F4 SF 36 343.8 M(Breaking a cipher by trying all possible keys. This is always possible in theory \(except against a)S
36 330.6 M(one-time pad\), but it becomes practical only if the key size is inadequate. For an important example,)S
36 317.4 M(see our document on the insecurity of DES with its 56-bit key. For an analysis of key sizes required)S
36 304.2 M(to resist plausible brute force attacks, see this paper.)S
36 277.8 M(Longer keys protect against brute force attacks. Each extra bit in the key doubles the number of)S
36 264.6 M(possible keys and therefore doubles the work a brute force attack must do. A large enough key defeats)S
/F7 SF 36 251.4 M(any)S
/F4 SF ( brute force attack.)S
36 225 M(For example, the EFF's DES Cracker searches a 56-bit key space in an average of a few days. Let us)S
36 211.8 M(assume an attacker that can find a 64-bit key \(256 times harder\) by brute force search in a second \(a)S
36 198.6 M(few hundred thousand times faster\). For a 96-bit key, that attacker needs 2)S
8 FS/F4 SF 365.417 203.1 M(32)S
11 FS/F4 SF 373.417 198.6 M( seconds, about 135)S
36 185.4 M(years. Against a 128-bit key, he needs 2)S
8 FS/F4 SF 214.2 189.9 M(32)S
11 FS/F4 SF 222.2 185.4 M( times that, over 500,000,000,000 years. Your data is then)S
36 172.2 M(obviously secure against brute force attacks. Even if our estimate of the attacker's speed is off by a)S
36 159 M(factor of a million, it still takes him over 500,000 years to crack a message.)S
36 132.6 M(This is why)S
72 106.2 M(single DES is now considered dangerously insecure)S
/Fc SF 63.816 106.2 M(\340 )S
/F4 SF 72 93 M(all of the current generation of block ciphers use a 128-bit or longer key)S
/Fc SF 63.816 93 M(\340 )S
/F4 SF 72 79.8 M(AES ciphers support keysizes 128, 192 and 256 bits)S
/Fc SF 63.816 79.8 M(\340 )S
/F4 SF 72 66.6 M(any cipher we add to Linux FreeS/WAN will have)S
/F6 SF ( at least)S
/F4 SF ( a 128-bit key)S
/Fc SF 63.816 66.6 M(\340 )S
/F7 SF 36 53.4 M(Cautions:)S
/F6 SF 36 40.2 M(Inadequate keylength always indicates a weak cipher)S
/F4 SF ( but it is important to note that)S
/F6 SF ( adequate)S
36 27 M(keylength does not necessarily indicate a strong cipher)S
/F4 SF (. There are many attacks other than brute force,)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(265)S
GR
SP
%%Page: 266 295
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(and adequate keylength)S
/F6 SF ( only)S
/F4 SF ( guarantees resistance to brute force. Any cipher, whatever its key size,)S
36 673.8 M(will be weak if design or implementation flaws allow other attacks.)S
36 647.4 M(Also,)S
/F6 SF ( once you have adequate keylength)S
/F4 SF ( \(somewhere around 90 or 100 bits\),)S
/F6 SF ( adding more key bits)S
36 634.2 M(make no practical difference)S
/F4 SF (, even against brute force. Consider our 128-bit example above that takes)S
36 621 M(500,000,000,000 years to break by brute force. We really don't care how many zeroes there are on the)S
36 607.8 M(end of that, as long as the number remains ridiculously large. That is, we don't care exactly how large)S
36 594.6 M(the key is as long as it is large enough.)S
36 568.2 M(There may be reasons of convenience in the design of the cipher to support larger keys. For example)S
36 555 M(Blowfish allows up to 448 bits and RC4 up to 2048, but beyond 100-odd bits it makes no difference)S
36 541.8 M(to practical security.)S
/F6 SF 0 528.6 M(Bureau of Export Administration)S
/F4 SF 36 515.4 M(see BXA)S
/F6 SF 0 502.2 M(BXA)S
/F4 SF 36 489 M(The US Commerce Department's)S
/F5 SF ( B)S
/F4 SF (ureau of E)S
/F5 SF (x)S
/F4 SF (port)S
/F5 SF ( A)S
/F4 SF (dministration which administers the EAR)S
36 475.8 M(Export Administration Regulations controling the export of, among other things, cryptography.)S
/F6 SF 0 462.6 M(C)S
0 449.4 M(CA)S
/F5 SF 36 436.2 M(C)S
/F4 SF (ertification)S
/F5 SF ( A)S
/F4 SF (uthority, an entity in a public key infrastructure that can certify keys by signing them.)S
36 423 M(Usually CAs form a hierarchy. The top of this hierarchy is called the root CA.)S
36 396.6 M(See Web of Trust for an alternate model.)S
/F6 SF 0 383.4 M(CAST-128)S
/F4 SF 36 370.2 M(A block cipher using 64-bit blocks and 128-bit keys, described in RFC 2144 and used in products)S
36 357 M(such as Entrust and recent versions of PGP.)S
36 330.6 M(This is not required by the IPsec RFCs and not currently used in Linux FreeS/WAN.)S
/F6 SF 0 317.4 M(CAST-256)S
/F4 SF 36 304.2 M(Entrust's candidate cipher for the AES standard, largely based on the CAST-128 design.)S
/F6 SF 0 291 M(CBC mode)S
/F5 SF 36 277.8 M(C)S
/F4 SF (ipher)S
/F5 SF ( B)S
/F4 SF (lock)S
/F5 SF ( C)S
/F4 SF (haining mode, a method of using a block cipher in which for each block except the)S
36 264.6 M(first, the result of the previous encryption is XORed into the new block before it is encrypted. CBC is)S
36 251.4 M(the mode used in IPsec.)S
36 225 M(An initialisation vector \(IV\) must be provided. It is XORed into the first block before encryption. The)S
36 211.8 M(IV need not be secret but should be different for each message and unpredictable.)S
/F6 SF 0 198.6 M(CIDR)S
/F5 SF 36 185.4 M(C)S
/F4 SF (lassless)S
/F5 SF ( I)S
/F4 SF (nter-)S
/F5 SF (D)S
/F4 SF (omain)S
/F5 SF ( R)S
/F4 SF (outing, an addressing scheme used to describe networks not restricted to)S
36 172.2 M(the old Class A, B, and C sizes. A CIDR block is written)S
/Fa SF ( address)S
/F4 SF (/)S
/Fa SF (mask)S
/F4 SF (, where)S
/Fa SF ( address)S
/F4 SF ( is a 32-bit)S
36 159 M(Internet address. The first)S
/Fa SF ( mask)S
/F4 SF ( bits of)S
/Fa SF ( address)S
/F4 SF ( are part of the gateway address, while the remaining)S
36 145.8 M(bits designate other host addresses. For example, the CIDR block 192.0.2.96/27 describes a network)S
36 132.6 M(with gateway 192.0.2.96, hosts 192.0.2.96 through 192.0.2.126 and broadcast 192.0.2.127.)S
36 106.2 M(FreeS/WAN policy group files accept CIDR blocks of the format)S
/Fa SF ( address)S
/F4 SF (/[)S
/Fa SF (mask)S
/F4 SF (], where)S
/Fa SF ( address)S
/F4 SF 36 93 M(may take the form)S
/Fa SF ( name.domain.tld)S
/F4 SF (. An absent)S
/Fa SF ( mask)S
/F4 SF ( is assumed to be /32.)S
/F6 SF 0 79.8 M(Certification Authority)S
/F4 SF 36 66.6 M(see CA)S
/F6 SF 0 53.4 M(Challenge-response authentication)S
/F4 SF 36 40.2 M(An authentication system in which one player generates a random number, encrypts it and sends the)S
36 27 M(result as a challenge. The other player decrypts and sends back the result. If the result is correct, that)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(266)S
GR
SP
%%Page: 267 296
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(proves to the first player that the second player knew the appropriate secret, required for the)S
36 673.8 M(decryption. Variations on this technique exist using public key or symmetric cryptography. Some)S
36 660.6 M(provide two-way authentication, assuring each player of the other's identity.)S
36 634.2 M(This is more secure than passwords against two simple attacks:)S
72 607.8 M(If cleartext passwords are sent across the wire \(e.g. for telnet\), an eavesdropper can grab)S
72 594.6 M(them. The attacker may even be able to break into other systems if the user has chosen the)S
72 581.4 M(same password for them.)S
/Fc SF 63.816 607.8 M(\340 )S
/F4 SF 72 568.2 M(If an encrypted password is sent, an attacker can record the encrypted form and use it later.)S
72 555 M(This is called a replay attack.)S
/Fc SF 63.816 568.2 M(\340 )S
/F4 SF 36 541.8 M(A challenge-response system never sends a password, either cleartext or encrypted. An attacker)S
36 528.6 M(cannot record the response to one challenge and use it as a response to a later challenge. The random)S
36 515.4 M(number is different each time.)S
36 489 M(Of course an attacker might still try to break the cryptographic algorithm used, or the random number)S
36 475.8 M(generator.)S
/F6 SF 0 462.6 M(Cipher Modes)S
/F4 SF 36 449.4 M(Different ways of using a block cipher when encrypting multiple blocks.)S
36 423 M(Four standard modes were defined for DES in FIPS 81. They can actually be applied with any block)S
36 409.8 M(cipher.)S
56.816 381.967 M(ECB)S
99.008 381.967 M(Electronic CodeBook)S
212.433 381.967 M(encrypt each block independently)S
56.816 359.303 M(CBC)S
99.008 359.303 M(Cipher Block Chaining)S
212.433 365.903 M(XOR previous block ciphertext into new block plaintext)S
212.433 352.703 M(before encrypting new block)S
56.816 336.638 M(CFB)S
99.008 336.638 M(Cipher FeedBack)S
56.816 320.573 M(OFB)S
99.008 320.573 M(Output FeedBack)S
36 292.741 M(IPsec uses CBC mode since this is only marginally slower than ECB and is more secure. In ECB)S
36 279.541 M(mode the same plaintext always encrypts to the same ciphertext, unless the key is changed. In CBC)S
36 266.341 M(mode, this does not occur.)S
36 239.941 M(Various other modes are also possible, but none of them are used in IPsec.)S
/F6 SF 0 226.741 M(Ciphertext)S
/F4 SF 36 213.541 M(The encrypted output of a cipher, as opposed to the unencrypted plaintext input.)S
/F6 SF 0 200.341 M(Cisco)S
/F4 SF 36 187.141 M(A vendor of routers, hubs and related products. Their IPsec products interoperate with Linux)S
36 173.941 M(FreeS/WAN; see our interop section.)S
/F6 SF 0 160.741 M(Client)S
/F4 SF 36 147.541 M(This term has at least two distinct uses in discussing IPsec:)S
72 134.341 M(The)S
/F7 SF ( clients of an IPsec gateway)S
/F4 SF ( are the machines it protects, typically on one or more)S
72 121.141 M(subnets behind the gateway. In this usage, all the machines on an office network are clients of)S
72 107.941 M(that office's IPsec gateway. Laptop or home machines connecting to the office, however, are)S
/F6 SF 72 94.741 M(not)S
/F4 SF ( clients of that gateway. They are remote gateways, running the other end of an IPsec)S
72 81.541 M(connection. Each of them is also its own client.)S
/Fc SF 63.816 134.341 M(\340 )S
/F7 SF 72 68.341 M(IPsec client software)S
/F4 SF ( is used to describe software which runs on various standalone machines)S
72 55.141 M(to let them connect to IPsec networks. In this usage, a laptop or home machine connecting to)S
72 41.941 M(the office is a client, and the office gateway is the server.)S
/Fc SF 63.816 68.341 M(\340 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(267)S
GR
SP
%%Page: 268 297
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(We generally use the term in the first sense. Vendors of Windows IPsec solutions often use it in the)S
36 673.8 M(second. See this discussion.)S
/F6 SF 0 660.6 M(Common Criteria)S
/F4 SF 36 647.4 M(A set of international security classifications which are replacing the old US Rainbow Book standards)S
36 634.2 M(and similar standards in other countries.)S
36 607.8 M(Web references include this US government site and this global home page.)S
/F6 SF 0 594.6 M(Conventional cryptography)S
/F4 SF 36 581.4 M(See symmetric cryptography)S
/F6 SF 0 568.2 M(Collision resistance)S
/F4 SF 36 555 M(The property of a message digest algorithm which makes it hard for an attacker to find or construct)S
36 541.8 M(two inputs which hash to the same output.)S
/F6 SF 0 528.6 M(Copyleft)S
/F4 SF 36 515.4 M(see GNU General Public License)S
/F6 SF 0 502.2 M(CSE)S
/F4 SF 36 489 M(Communications Security Establishment, the Canadian organisation for signals intelligence.)S
/F6 SF 0 475.8 M(D)S
0 462.6 M(DARPA \(sometimes just ARPA\))S
/F4 SF 36 449.4 M(The US government's)S
/F5 SF ( D)S
/F4 SF (efense)S
/F5 SF ( A)S
/F4 SF (dvanced)S
/F5 SF ( R)S
/F4 SF (esearch)S
/F5 SF ( P)S
/F4 SF (rojects)S
/F5 SF ( A)S
/F4 SF (gency. Projects they have funded over)S
36 436.2 M(the years have included the Arpanet which evolved into the Internet, the TCP/IP protocol suite \(as a)S
36 423 M(replacement for the original Arpanet suite\), the Berkeley 4.x BSD Unix projects, and Secure DNS.)S
36 396.6 M(For current information, see their web site.)S
/F6 SF 0 383.4 M(Denial of service \(DoS\) attack)S
/F4 SF 36 370.2 M(An attack that aims at denying some service to legitimate users of a system, rather than providing a)S
36 357 M(service to the attacker.)S
72 343.8 M(One variant is a flooding attack, overwhelming the system with too many packets, to much)S
72 330.6 M(email, or whatever.)S
/Fc SF 63.816 343.8 M(\340 )S
/F4 SF 72 317.4 M(A closely related variant is a resource exhaustion attack. For example, consider a "TCP SYN)S
72 304.2 M(flood" attack. Setting up a TCP connection involves a three-packet exchange:)S
108 291 M(Initiator: Connection please \(SYN\))S
/Fc SF 102.5 291 M(\327 )S
/F4 SF 108 277.8 M(Responder: OK \(ACK\))S
/Fc SF 102.5 277.8 M(\327 )S
/F4 SF 108 264.6 M(Initiator: OK here too)S
/Fc SF 102.5 264.6 M(\327 )S
/F4 SF 72 251.4 M(If the attacker puts bogus source information in the first packet, such that the second is never)S
72 238.2 M(delivered, the responder may wait a long time for the third to come back. If responder has)S
72 225 M(already allocated memory for the connection data structures, and if many of these bogus)S
72 211.8 M(packets arrive, the responder may run out of memory.)S
/Fc SF 63.816 317.4 M(\340 )S
/F4 SF 72 198.6 M(Another variant is to feed the system undigestible data, hoping to make it sick. For example,)S
72 185.4 M(IP packets are limited in size to 64K bytes and a fragment carries information on where it)S
72 172.2 M(starts within that 64K and how long it is. The "ping of death" delivers fragments that say, for)S
72 159 M(example, that they start at 60K and are 20K long. Attempting to re-assemble these without)S
72 145.8 M(checking for overflow can be fatal.)S
/Fc SF 63.816 198.6 M(\340 )S
/F4 SF 36 132.6 M(The two example attacks discussed were both quite effective when first discovered, capable of)S
36 119.4 M(crashing or disabling many operating systems. They were also well-publicised, and today far fewer)S
36 106.2 M(systems are vulnerable to them.)S
/F6 SF 0 93 M(DES)S
/F4 SF 36 79.8 M(The)S
/F5 SF ( D)S
/F4 SF (ata)S
/F5 SF ( E)S
/F4 SF (ncryption)S
/F5 SF ( S)S
/F4 SF (tandard, a block cipher with 64-bit blocks and a 56-bit key. Probably the most)S
36 66.6 M(widely used symmetric cipher ever devised. DES has been a US government standard for their own)S
36 53.4 M(use \(only for unclassified data\), and for some regulated industries such as banking, since the late 70's.)S
36 40.2 M(It is now being replaced by AES.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(268)S
GR
SP
%%Page: 269 298
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(DES is seriously insecure against current attacks.)S
36 660.6 M(Linux FreeS/WAN does not include DES, even though the RFCs specify it.)S
/F5 SF ( We strongly recommend)S
36 647.4 M(that single DES not be used.)S
/F4 SF 36 621 M(See also 3DES and DESX, stronger ciphers based on DES.)S
/F6 SF 0 607.8 M(DESX)S
/F4 SF 36 594.6 M(An improved DES suggested by Ron Rivest of RSA Data Security. It XORs extra key material into)S
36 581.4 M(the text before and after applying the DES cipher.)S
36 555 M(This is not required by the IPsec RFCs and not currently used in Linux FreeS/WAN. DESX would be)S
36 541.8 M(the easiest additional transform to add; there would be very little code to write. It would be much)S
36 528.6 M(faster than 3DES and almost certainly more secure than DES. However, since it is not in the RFCs)S
36 515.4 M(other IPsec implementations cannot be expected to have it.)S
/F6 SF 0 502.2 M(DH)S
/F4 SF 36 489 M(see Diffie-Hellman)S
/F6 SF 0 475.8 M(DHCP)S
/F7 SF 36 462.6 M(D)S
/F4 SF (ynamic)S
/F7 SF ( H)S
/F4 SF (ost)S
/F7 SF ( C)S
/F4 SF (onfiguration)S
/F7 SF ( P)S
/F4 SF (rotocol, a method of assigning dynamic IP addresses, and providing)S
36 449.4 M(additional information such as addresses of DNS servers and of gateways. See this DHCP resource)S
36 436.2 M(page.)S
/F6 SF 0 423 M(Diffie-Hellman \(DH\) key exchange protocol)S
/F4 SF 36 409.8 M(A protocol that allows two parties without any initial shared secret to create one in a manner immune)S
36 396.6 M(to eavesdropping. Once they have done this, they can communicate privately by using that shared)S
36 383.4 M(secret as a key for a block cipher or as the basis for key exchange.)S
36 357 M(The protocol is secure against all passive attacks, but it is not at all resistant to active)S
36 343.8 M(man-in-the-middle attacks. If a third party can impersonate Bob to Alice and vice versa, then no)S
36 330.6 M(useful secret can be created. Authentication of the participants is a prerequisite for safe)S
36 317.4 M(Diffie-Hellman key exchange. IPsec can use any of several authentication mechanisims. Those)S
36 304.2 M(supported by FreeS/WAN are discussed in our configuration section.)S
36 277.8 M(The Diffie-Hellman key exchange is based on the discrete logarithm problem and is secure unless)S
36 264.6 M(someone finds an efficient solution to that problem.)S
36 238.2 M(Given a prime)S
/Fa SF ( p)S
/F4 SF ( and generator)S
/Fa SF ( g)S
/F4 SF ( \(explained under discrete log below\), Alice:)S
72 211.8 M(generates a random number)S
/Fa SF ( a)S
/Fc SF 63.816 211.8 M(\340 )S
/F4 SF 72 198.6 M(calculates)S
/Fa SF ( A = g^a modulo p)S
/Fc SF 63.816 198.6 M(\340 )S
/F4 SF 72 185.4 M(sends)S
/Fa SF ( A)S
/F4 SF ( to Bob)S
/Fc SF 63.816 185.4 M(\340 )S
/F4 SF 36 172.2 M(Meanwhile Bob:)S
72 145.8 M(generates a random number)S
/Fa SF ( b)S
/Fc SF 63.816 145.8 M(\340 )S
/F4 SF 72 132.6 M(calculates)S
/Fa SF ( B = g^b modulo p)S
/Fc SF 63.816 132.6 M(\340 )S
/F4 SF 72 119.4 M(sends)S
/Fa SF ( B)S
/F4 SF ( to Alice)S
/Fc SF 63.816 119.4 M(\340 )S
/F4 SF 36 106.2 M(Now Alice and Bob can both calculate the shared secret)S
/Fa SF ( s = g^\(ab\))S
/F4 SF (. Alice knows)S
/Fa SF ( a)S
/F4 SF ( and)S
/Fa SF ( B)S
/F4 SF (, so she)S
36 93 M(calculates)S
/Fa SF ( s = B^a)S
/F4 SF (. Bob knows)S
/Fa SF ( A)S
/F4 SF ( and)S
/Fa SF ( b)S
/F4 SF ( so he calculates)S
/Fa SF ( s = A^b)S
/F4 SF (.)S
36 66.6 M(An eavesdropper will know)S
/Fa SF ( p)S
/F4 SF ( and)S
/Fa SF ( g)S
/F4 SF ( since these are made public, and can intercept)S
/Fa SF ( A)S
/F4 SF ( and)S
/Fa SF ( B)S
/F4 SF ( but, short)S
36 53.4 M(of solving the discrete log problem, these do not let him or her discover the secret)S
/Fa SF ( s)S
/F4 SF (.)S
/F6 SF 0 40.2 M(Digital signature)S
/F4 SF 36 27 M(Sender:)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(269)S
GR
SP
%%Page: 270 299
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 72 687 M(calculates a message digest of a document)S
/Fc SF 63.816 687 M(\340 )S
/F4 SF 72 673.8 M(encrypts the digest with his or her private key, using some public key cryptosystem.)S
/Fc SF 63.816 673.8 M(\340 )S
/F4 SF 72 660.6 M(attaches the encrypted digest to the document as a signature)S
/Fc SF 63.816 660.6 M(\340 )S
/F4 SF 36 647.4 M(Receiver:)S
72 621 M(calculates a digest of the document \(not including the signature\))S
/Fc SF 63.816 621 M(\340 )S
/F4 SF 72 607.8 M(decrypts the signature with the signer's public key)S
/Fc SF 63.816 607.8 M(\340 )S
/F4 SF 72 594.6 M(verifies that the two results are identical)S
/Fc SF 63.816 594.6 M(\340 )S
/F4 SF 36 581.4 M(If the public-key system is secure and the verification succeeds, then the receiver knows)S
72 555 M(that the document was not altered between signing and verification)S
/Fc SF 63.816 555 M(\340 )S
/F4 SF 72 541.8 M(that the signer had access to the private key)S
/Fc SF 63.816 541.8 M(\340 )S
/F4 SF 36 528.6 M(Such an encrypted message digest can be treated as a signature since it cannot be created without)S
/F6 SF ( both)S
/F4 SF 36 515.4 M(the document)S
/F6 SF ( and)S
/F4 SF ( the private key which only the sender should possess. The legal issues are complex,)S
36 502.2 M(but several countries are moving in the direction of legal recognition for digital signatures.)S
/F6 SF 0 489 M(discrete logarithm problem)S
/F4 SF 36 475.8 M(The problem of finding logarithms in a finite field. Given a field defintion \(such definitions always)S
36 462.6 M(include some operation analogous to multiplication\) and two numbers, a base and a target, find the)S
36 449.4 M(power which the base must be raised to in order to yield the target.)S
36 423 M(The discrete log problem is the basis of several cryptographic systems, including the Diffie-Hellman)S
36 409.8 M(key exchange used in the IKE protocol. The useful property is that exponentiation is relatively easy)S
36 396.6 M(but the inverse operation, finding the logarithm, is hard. The cryptosystems are designed so that the)S
36 383.4 M(user does only easy operations \(exponentiation in the field\) but an attacker must solve the hard)S
36 370.2 M(problem \(discrete log\) to crack the system.)S
36 343.8 M(There are several variants of the problem for different types of field. The IKE/Oakley key)S
36 330.6 M(determination protocol uses two variants, either over a field modulo a prime or over a field defined by)S
36 317.4 M(an elliptic curve. We give an example modulo a prime below. For the elliptic curve version, consult)S
36 304.2 M(an advanced text such as Handbook of Applied Cryptography.)S
36 277.8 M(Given a prime)S
/Fa SF ( p)S
/F4 SF (, a generator)S
/Fa SF ( g)S
/F4 SF ( for the field modulo that prime, and a number)S
/Fa SF ( x)S
/F4 SF ( in the field, the)S
36 264.6 M(problem is to find)S
/Fa SF ( y)S
/F4 SF ( such that)S
/Fa SF ( g^y = x)S
/F4 SF (.)S
36 238.2 M(For example, let p = 13. The field is then the integers from 0 to 12. Any integer equals one of these)S
36 225 M(modulo 13. That is, the remainder when any integer is divided by 13 must be one of these.)S
36 198.6 M(2 is a generator for this field. That is, the powers of two modulo 13 run through all the non-zero)S
36 185.4 M(numbers in the field. Modulo 13 we have:)S
9 FS/F0 SF 36 161 M(          y      x)S
36 150.2 M(        2^0  ==  1)S
36 139.4 M(        2^1  ==  2)S
36 128.6 M(        2^2  ==  4)S
36 117.8 M(        2^3  ==  8)S
36 107 M(        2^4  ==  3 that is, the remainder from 16/13 is 3)S
36 96.2 M(        2^5  ==  6          the remainder from 32/13 is 6)S
36 85.4 M(        2^6  == 12 and so on)S
36 74.6 M(        2^7  == 11)S
36 63.8 M(        2^8  ==  9)S
36 53 M(        2^9  ==  5)S
36 42.2 M(        2^10 == 10)S
36 31.4 M(        2^11 ==  7)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(270)S
GR
SP
%%Page: 271 300
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 36 689 M(        2^12 ==  1)S
11 FS/F4 SF 36 663 M(Exponentiation in such a field is not difficult. Given, say,)S
/Fa SF ( y = 11)S
/F4 SF (,calculating)S
/Fa SF ( x = 7)S
/F4 SF (is straightforward.)S
36 649.8 M(One method is just to calculate)S
/Fa SF ( 2^11 = 2048)S
/F4 SF (,then)S
/Fa SF ( 2048 mod 13 == 7)S
/F4 SF (.When the field is modulo a)S
36 636.6 M(large prime \(say a few 100 digits\) you need a silghtly cleverer method and even that is moderately)S
36 623.4 M(expensive in computer time, but the calculation is still not problematic in any basic way.)S
36 597 M(The discrete log problem is the reverse. In our example, given)S
/Fa SF ( x = 7)S
/F4 SF (,find the logarithm)S
/Fa SF ( y = 11)S
/F4 SF (.When)S
36 583.8 M(the field is modulo a large prime \(or is based on a suitable elliptic curve\), this is indeed problematic.)S
36 570.6 M(No solution method that is not catastrophically expensive is known. Quite a few mathematicians have)S
36 557.4 M(tackled this problem. No efficient method has been found and mathematicians do not expect that one)S
36 544.2 M(will be. It seems likely no efficient solution to either of the main variants the discrete log problem)S
36 531 M(exists.)S
36 504.6 M(Note, however, that no-one has proven such methods do not exist. If a solution to either variant were)S
36 491.4 M(found, the security of any crypto system using that variant would be destroyed. This is one reason)S
36 478.2 M(IKE supports two variants. If one is broken, we can switch to the other.)S
/F6 SF 0 465 M(discretionary access control)S
/F4 SF 36 451.8 M(access control mechanisms controlled by the user, for example Unix rwx file permissions. These)S
36 438.6 M(contrast with mandatory access controls.)S
/F6 SF 0 425.4 M(DNS)S
/F5 SF 36 412.2 M(D)S
/F4 SF (omain)S
/F5 SF ( N)S
/F4 SF (ame)S
/F5 SF ( S)S
/F4 SF (ervice, a distributed database through which names are associated with numeric)S
36 399 M(addresses and other information in the Internet Protocol Suite. See also the DNS background section)S
36 385.8 M(of our documentation.)S
/F6 SF 0 372.6 M(DOS attack)S
/F4 SF 36 359.4 M(see Denial Of Service attack)S
/F6 SF 0 346.2 M(dynamic IP address)S
/F4 SF 36 333 M(an IP address which is automatically assigned, either by DHCP or by some protocol such as PPP or)S
36 319.8 M(PPPoE which the machine uses to connect to the Internet. This is the opposite of a static IP address,)S
36 306.6 M(pre-set on the machine itself.)S
/F6 SF 0 293.4 M(E)S
0 280.2 M(EAR)S
/F4 SF 36 267 M(The US government's)S
/F5 SF ( E)S
/F4 SF (xport)S
/F5 SF ( A)S
/F4 SF (dministration)S
/F5 SF ( R)S
/F4 SF (egulations, administered by the Bureau of Export)S
36 253.8 M(Administration. These have replaced the earlier ITAR regulations as the controls on export of)S
36 240.6 M(cryptography.)S
/F6 SF 0 227.4 M(ECB mode)S
/F5 SF 36 214.2 M(E)S
/F4 SF (lectronic)S
/F5 SF ( C)S
/F4 SF (ode)S
/F5 SF (B)S
/F4 SF (ook mode, the simplest way to use a block cipher. See Cipher Modes.)S
/F6 SF 0 201 M(EDE)S
/F4 SF 36 187.8 M(The sequence of operations normally used in either the three-key variant of triple DES used in IPsec)S
36 174.6 M(or the two-key variant used in some other systems.)S
36 148.2 M(The sequence is:)S
/F5 SF 72 121.8 M(E)S
/F4 SF (ncrypt with key1)S
/Fc SF 63.816 121.8 M(\340 )S
/F5 SF 72 108.6 M(D)S
/F4 SF (ecrypt with key2)S
/Fc SF 63.816 108.6 M(\340 )S
/F5 SF 72 95.4 M(E)S
/F4 SF (ncrypt with key3)S
/Fc SF 63.816 95.4 M(\340 )S
/F4 SF 36 82.2 M(For the two-key version, key1=key3.)S
36 55.8 M(The "advantage" of this EDE order of operations is that it makes it simple to interoperate with older)S
36 42.6 M(devices offering only single DES. Set key1=key2=key3 and you have the worst of both worlds, the)S
36 29.4 M(overhead of triple DES with the "security" of single DES. Since both the security of single DES and)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(271)S
GR
SP
%%Page: 272 301
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(the overheads of triple DES are seriously inferior to many other ciphers, this is a spectacularly)S
36 673.8 M(dubious "advantage".)S
/F6 SF 0 660.6 M(Entrust)S
/F4 SF 36 647.4 M(A Canadian company offerring enterprise PKI products using CAST-128 symmetric crypto, RSA)S
36 634.2 M(public key and X.509 directories. Web site)S
/F6 SF 0 621 M(EFF)S
/F4 SF 36 607.8 M(Electronic Frontier Foundation, an advocacy group for civil rights in cyberspace.)S
/F6 SF 0 594.6 M(Encryption)S
/F4 SF 36 581.4 M(Techniques for converting a readable message \(plaintext\) into apparently random material \(ciphertext\))S
36 568.2 M(which cannot be read if intercepted. A key is required to read the message.)S
36 541.8 M(Major variants include symmetric encryption in which sender and receiver use the same secret key)S
36 528.6 M(and public key methods in which the sender uses one of a matched pair of keys and the receiver uses)S
36 515.4 M(the other. Many current systems, including IPsec, are hybrids combining the two techniques.)S
/F6 SF 0 502.2 M(ESP)S
/F5 SF 36 489 M(E)S
/F4 SF (ncapsulated)S
/F5 SF ( S)S
/F4 SF (ecurity)S
/F5 SF ( P)S
/F4 SF (ayload, the IPsec protocol which provides encryption. It can also provide)S
36 475.8 M(authentication service and may be used with null encryption \(which we do not recommend\). For)S
36 462.6 M(details see our IPsec document and/or RFC 2406.)S
/F6 SF 0 449.4 M(Extruded subnet)S
/F4 SF 36 436.2 M(A situation in which something IP sees as one network is actually in two or more places.)S
36 409.8 M(For example, the Internet may route all traffic for a particular company to that firm's corporate)S
36 396.6 M(gateway. It then becomes the company's problem to get packets to various machines on their subnets)S
36 383.4 M(in various departments. They may decide to treat a branch office like a subnet, giving it IP addresses)S
36 370.2 M("on" their corporate net. This becomes an extruded subnet.)S
36 343.8 M(Packets bound for it are delivered to the corporate gateway, since as far as the outside world is)S
36 330.6 M(concerned, that subnet is part of the corporate network. However, instead of going onto the corporate)S
36 317.4 M(LAN \(as they would for, say, the accounting department\) they are then encapsulated and sent back)S
36 304.2 M(onto the Internet for delivery to the branch office.)S
36 277.8 M(For information on doing this with Linux FreeS/WAN, look in our advanced configuration section.)S
/F6 SF 0 264.6 M(Exhaustive search)S
/F4 SF 36 251.4 M(See brute force attack.)S
/F6 SF 0 238.2 M(F)S
0 225 M(FIPS)S
/F5 SF 36 211.8 M(F)S
/F4 SF (ederal)S
/F5 SF ( I)S
/F4 SF (nformation)S
/F5 SF ( P)S
/F4 SF (rocessing)S
/F5 SF ( S)S
/F4 SF (tandard, the US government's standards for products it buys. These)S
36 198.6 M(are issued by NIST. Among other things, DES and SHA are defined in FIPS documents. NIST have a)S
36 185.4 M(FIPS home page.)S
/F6 SF 0 172.2 M(Free Software Foundation \(FSF\))S
/F4 SF 36 159 M(An organisation to promote free software, free in the sense of these quotes from their web pages)S
72 145.8 M("Free software" is a matter of liberty, not price. To understand the concept, you)S
72 132.6 M(should think of "free speech", not "free beer.")S
72 106.2 M("Free software" refers to the users' freedom to run, copy, distribute, study, change and)S
72 93 M(improve the software.)S
36 66.6 M(See also GNU, GNU General Public License, and the FSF site.)S
/F6 SF 0 53.4 M(FreeS/WAN)S
/F4 SF 36 40.2 M(see Linux FreeS/WAN)S
/F6 SF 0 27 M(Fullnet)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(272)S
GR
SP
%%Page: 273 302
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(The CIDR block containing all IPs of its IP version. The IPv4 fullnet is written 0.0.0.0/0. Also known)S
36 673.8 M(as "all" and "default", fullnet may be used in a routing table to specify a default route, and in a)S
36 660.6 M(FreeS/WAN policy group file to specify a default IPsec policy.)S
/F6 SF 0 647.4 M(FSF)S
/F4 SF 36 634.2 M(see Free software Foundation)S
/F6 SF 0 621 M(G)S
0 607.8 M(GCHQ)S
/F4 SF 36 594.6 M(Government Communications Headquarters, the British organisation for signals intelligence.)S
/F6 SF 0 581.4 M(generator of a prime field)S
/F4 SF 36 568.2 M(see discrete logarithm problem)S
/F6 SF 0 555 M(GILC)S
/F4 SF 36 541.8 M(Global Internet Liberty Campaign, an international organisation advocating, among other things, free)S
36 528.6 M(availability of cryptography. They have a campaign to remove cryptographic software from the)S
36 515.4 M(Wassenaar Arrangement.)S
/F6 SF 0 502.2 M(Global Internet Liberty Campaign)S
/F4 SF 36 489 M(see GILC.)S
/F6 SF 0 475.8 M(Global Trust Register)S
/F4 SF 36 462.6 M(An attempt to create something like a root CA for PGP by publishing both as a book and on the web)S
36 449.4 M(the fingerprints of a set of verified keys for well-known users and organisations.)S
/F6 SF 0 436.2 M(GMP)S
/F4 SF 36 423 M(The)S
/F5 SF ( G)S
/F4 SF (NU)S
/F5 SF ( M)S
/F4 SF (ulti-)S
/F5 SF (P)S
/F4 SF (recision library code, used in Linux FreeS/WAN by Pluto for public key)S
36 409.8 M(calculations. See the GMP home page.)S
/F6 SF 0 396.6 M(GNU)S
/F5 SF 36 383.4 M(G)S
/F4 SF (NU's)S
/F5 SF ( N)S
/F4 SF (ot)S
/F5 SF ( U)S
/F4 SF (nix, the Free Software Foundation's project aimed at creating a free system with at least)S
36 370.2 M(the capabilities of Unix. Linux uses GNU utilities extensively.)S
/F6 SF 0 357 M(GOST)S
/F4 SF 36 343.8 M(a Soviet government standard block cipher. Applied Cryptography has details.)S
/F6 SF 0 330.6 M(GPG)S
/F4 SF 36 317.4 M(see GNU Privacy Guard)S
/F6 SF 0 304.2 M(GNU General Public License\(GPL, copyleft\))S
/F4 SF 36 291 M(The license developed by the Free Software Foundation under which Linux, Linux FreeS/WAN and)S
36 277.8 M(many other pieces of software are distributed. The license allows anyone to redistribute and modify)S
36 264.6 M(the code, but forbids anyone from distributing executables without providing access to source code.)S
36 251.4 M(For more details see the file COPYING included with GPLed source distributions, including ours, or)S
36 238.2 M(the GNU site's GPL page.)S
/F6 SF 0 225 M(GNU Privacy Guard)S
/F4 SF 36 211.8 M(An open source implementation of Open PGP as defined in RFC 2440. See their web site)S
/F6 SF 0 198.6 M(GPL)S
/F4 SF 36 185.4 M(see GNU General Public License.)S
/F6 SF 0 172.2 M(H)S
0 159 M(Hash)S
/F4 SF 36 145.8 M(see message digest)S
/F6 SF 0 132.6 M(Hashed Message Authentication Code \(HMAC\))S
/F4 SF 36 119.4 M(using keyed message digest functions to authenticate a message. This differs from other uses of these)S
36 106.2 M(functions:)S
72 93 M(In normal usage, the hash function's internal variable are initialised in some standard way.)S
72 79.8 M(Anyone can reproduce the hash to check that the message has not been altered.)S
/Fc SF 63.816 93 M(\340 )S
/F4 SF 72 66.6 M(For HMAC usage, you initialise the internal variables from the key. Only someone with the)S
72 53.4 M(key can reproduce the hash. A successful check of the hash indicates not only that the)S
72 40.2 M(message is unchanged but also that the creator knew the key.)S
/Fc SF 63.816 66.6 M(\340 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(273)S
GR
SP
%%Page: 274 303
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(The exact techniques used in IPsec are defined in RFC 2104. They are referred to as)S
36 673.8 M(HMAC-MD5-96 and HMAC-SHA-96 because they output only 96 bits of the hash. This makes)S
36 660.6 M(some attacks on the hash functions harder.)S
/F6 SF 0 647.4 M(HMAC)S
/F4 SF 36 634.2 M(see Hashed Message Authentication Code)S
/F6 SF 0 621 M(HMAC-MD5-96)S
/F4 SF 36 607.8 M(see Hashed Message Authentication Code)S
/F6 SF 0 594.6 M(HMAC-SHA-96)S
/F4 SF 36 581.4 M(see Hashed Message Authentication Code)S
/F6 SF 0 568.2 M(Hybrid cryptosystem)S
/F4 SF 36 555 M(A system using both public key and symmetric cipher techniques. This works well. Public key)S
36 541.8 M(methods provide key management and digital signature facilities which are not readily available using)S
36 528.6 M(symmetric ciphers. The symmetric cipher, however, can do the bulk of the encryption work much)S
36 515.4 M(more efficiently than public key methods.)S
/F6 SF 0 502.2 M(I)S
0 489 M(IAB)S
/F4 SF 36 475.8 M(Internet Architecture Board.)S
/F6 SF 0 462.6 M(ICMP)S
/F7 SF 36 449.4 M(I)S
/F4 SF (nternet)S
/F7 SF ( C)S
/F4 SF (ontrol)S
/F7 SF ( M)S
/F4 SF (essage)S
/F7 SF ( P)S
/F4 SF (rotocol. This is used for various IP-connected devices to manage the)S
36 436.2 M(network.)S
/F6 SF 0 423 M(IDEA)S
/F5 SF 36 409.8 M(I)S
/F4 SF (nternational)S
/F5 SF ( D)S
/F4 SF (ata)S
/F5 SF ( E)S
/F4 SF (ncrypion)S
/F5 SF ( A)S
/F4 SF (lgorithm, developed in Europe as an alternative to exportable)S
36 396.6 M(American ciphers such as DES which were too weak for serious use. IDEA is a block cipher using)S
36 383.4 M(64-bit blocks and 128-bit keys, and is used in products such as PGP.)S
36 357 M(IDEA is not required by the IPsec RFCs and not currently used in Linux FreeS/WAN.)S
36 330.6 M(IDEA is patented and, with strictly limited exceptions for personal use, using it requires a license)S
36 317.4 M(from Ascom.)S
/F6 SF 0 304.2 M(IEEE)S
/F4 SF 36 291 M(Institute of Electrical and Electronic Engineers, a professional association which, among other things,)S
36 277.8 M(sets some technical standards)S
/F6 SF 0 264.6 M(IESG)S
/F4 SF 36 251.4 M(Internet Engineering Steering Group.)S
/F6 SF 0 238.2 M(IETF)S
/F4 SF 36 225 M(Internet Engineering Task Force, the umbrella organisation whose various working groups make most)S
36 211.8 M(of the technical decisions for the Internet. The IETF IPsec working group wrote the RFCs we are)S
36 198.6 M(implementing.)S
/F6 SF 0 185.4 M(IKE)S
/F5 SF 36 172.2 M(I)S
/F4 SF (nternet)S
/F5 SF ( K)S
/F4 SF (ey)S
/F5 SF ( E)S
/F4 SF (xchange, based on the Diffie-Hellman key exchange protocol. For details, see RFC)S
36 159 M(2409 and our IPsec document. IKE is implemented in Linux FreeS/WAN by the Pluto daemon.)S
/F6 SF 0 145.8 M(IKE v2)S
/F4 SF 36 132.6 M(A proposed replacement for IKE. There are other candidates, such as JFK, and at time of writing)S
36 119.4 M(\(March 2002\) the choice between them has not yet been made and does not appear imminent.)S
/F6 SF 0 106.2 M(iOE)S
/F4 SF 36 93 M(See Initiate-only opportunistic encryption.)S
/F6 SF 0 79.8 M(IP)S
/F5 SF 36 66.6 M(I)S
/F4 SF (nternet)S
/F5 SF ( P)S
/F4 SF (rotocol.)S
/F6 SF 0 53.4 M(IP masquerade)S
/F4 SF 36 40.2 M(A mostly obsolete term for a method of allowing multiple machines to communicate over the Internet)S
36 27 M(when only one IP address is available for their use. The more current term is Network Address)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(274)S
GR
SP
%%Page: 275 304
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(Translation or NAT.)S
/F6 SF 0 673.8 M(IPng)S
/F4 SF 36 660.6 M("IP the Next Generation", see IPv6.)S
/F6 SF 0 647.4 M(IPv4)S
/F4 SF 36 634.2 M(The current version of the Internet protocol suite.)S
/F6 SF 0 621 M(IPv6 \(IPng\))S
/F4 SF 36 607.8 M(Version six of the Internet protocol suite, currently being developed. It will replace the current version)S
36 594.6 M(four. IPv6 has IPsec as a mandatory component.)S
36 568.2 M(See this web site for more details, and our compatibility document for information on FreeS/WAN)S
36 555 M(and the Linux implementation of IPv6.)S
/F6 SF 0 541.8 M(IPsec or IPSEC)S
/F5 SF 36 528.6 M(I)S
/F4 SF (nternet)S
/F5 SF ( P)S
/F4 SF (rotocol)S
/F5 SF ( SEC)S
/F4 SF (urity, security functions \(authentication and encryption\) implemented at the IP)S
36 515.4 M(level of the protocol stack. It is optional for IPv4 and mandatory for IPv6.)S
36 489 M(This is the standard Linux FreeS/WAN is implementing. For more details, see our IPsec Overview.)S
36 475.8 M(For the standards, see RFCs listed in our RFCs document.)S
/F6 SF 0 462.6 M(IPX)S
/F4 SF 36 449.4 M(Novell's Netware protocol tunnelled over an IP link. Our firewalls document includes an example of)S
36 436.2 M(using this through an IPsec tunnel.)S
/F6 SF 0 423 M(ISAKMP)S
/F5 SF 36 409.8 M(I)S
/F4 SF (nternet)S
/F5 SF ( S)S
/F4 SF (ecurity)S
/F5 SF ( A)S
/F4 SF (ssociation and)S
/F5 SF ( K)S
/F4 SF (ey)S
/F5 SF ( M)S
/F4 SF (anagement)S
/F5 SF ( P)S
/F4 SF (rotocol, defined in RFC 2408.)S
/F6 SF 0 396.6 M(ITAR)S
/F5 SF 36 383.4 M(I)S
/F4 SF (nternational)S
/F5 SF ( T)S
/F4 SF (raffic in)S
/F5 SF ( A)S
/F4 SF (rms)S
/F5 SF ( R)S
/F4 SF (egulations, US regulations administered by the State Department)S
36 370.2 M(which until recently limited export of, among other things, cryptographic technology and software.)S
36 357 M(ITAR still exists, but the limits on cryptography have now been transferred to the Export)S
36 343.8 M(Administration Regulations under the Commerce Department's Bureau of Export Administration.)S
/F6 SF 0 330.6 M(IV)S
/F4 SF 36 317.4 M(see Initialisation vector)S
/F6 SF 0 304.2 M(Initialisation Vector \(IV\))S
/F4 SF 36 291 M(Some cipher modes, including the CBC mode which IPsec uses, require some extra data at the)S
36 277.8 M(beginning. This data is called the initialisation vector. It need not be secret, but should be different for)S
36 264.6 M(each message. Its function is to prevent messages which begin with the same text from encrypting to)S
36 251.4 M(the same ciphertext. That might give an analyst an opening, so it is best prevented.)S
/F6 SF 0 238.2 M(Initiate-only opportunistic encryption \(iOE\))S
/F4 SF 36 225 M(A form of opportunistic encryption \(OE\) in which a host proposes opportunistic connections, but)S
36 211.8 M(lacks the reverse DNS records necessary to support incoming opportunistic connection requests.)S
36 198.6 M(Common among hosts on cable or pppoe connections where the system administrator does not have)S
36 185.4 M(write access to the DNS reverse map for the host's external IP.)S
36 159 M(Configuring for initiate-only opportunistic encryption is described in our quickstart document.)S
/F6 SF 0 145.8 M(J)S
0 132.6 M(JFK)S
/F7 SF 36 119.4 M(J)S
/F4 SF (ust)S
/F7 SF ( F)S
/F4 SF (ast)S
/F7 SF ( K)S
/F4 SF (eying, a proposed simpler replacement for IKE.)S
/F6 SF 0 106.2 M(K)S
0 93 M(Kernel)S
/F4 SF 36 79.8 M(The basic part of an operating system \(e.g. Linux\) which controls the hardware and provides services)S
36 66.6 M(to all other programs.)S
36 40.2 M(In the Linux release numbering system, an even second digit as in 2.)S
/F7 SF (2)S
/F4 SF (.x indicates a stable or)S
36 27 M(production kernel while an odd number as in 2.)S
/F7 SF (3)S
/F4 SF (.x indicates an experimental or development kernel.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(275)S
GR
SP
%%Page: 276 305
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(Most users should run a recent kernel version from the production series. The development kernels)S
36 673.8 M(are primarily for people doing kernel development. Others should consider using development kernels)S
36 660.6 M(only if they have an urgent need for some feature not yet available in production kernels.)S
/F6 SF 0 647.4 M(Keyed message digest)S
/F4 SF 36 634.2 M(See HMAC.)S
/F6 SF 0 621 M(Key length)S
/F4 SF 36 607.8 M(see brute force attack)S
/F6 SF 0 594.6 M(KLIPS)S
/F5 SF 36 581.4 M(K)S
/F4 SF (erne)S
/F5 SF (l IP S)S
/F4 SF (ecurity, the Linux FreeS/WAN project's changes to the Linux kernel to support the IPsec)S
36 568.2 M(protocols.)S
/F6 SF 0 555 M(L)S
0 541.8 M(LDAP)S
/F5 SF 36 528.6 M(L)S
/F4 SF (ightweight)S
/F5 SF ( D)S
/F4 SF (irectory)S
/F5 SF ( A)S
/F4 SF (ccess)S
/F5 SF ( P)S
/F4 SF (rotocol, defined in RFCs 1777 and 1778, a method of accessing)S
36 515.4 M(information stored in directories. LDAP is used by several PKI implementations, often with X.501)S
36 502.2 M(directories and X.509 certificates. It may also be used by IPsec to obtain key certifications from those)S
36 489 M(PKIs. This is not yet implemented in Linux FreeS/WAN.)S
/F6 SF 0 475.8 M(LIBDES)S
/F4 SF 36 462.6 M(A publicly available library of DES code, written by Eric Young, which Linux FreeS/WAN uses in)S
36 449.4 M(both KLIPS and Pluto.)S
/F6 SF 0 436.2 M(Linux)S
/F4 SF 36 423 M(A freely available Unix-like operating system based on a kernel originally written for the Intel 386)S
36 409.8 M(architecture by \(then\) student Linus Torvalds. Once his 32-bit kernel was available, the GNU utilities)S
36 396.6 M(made it a usable system and contributions from many others led to explosive growth.)S
36 370.2 M(Today Linux is a complete Unix replacement available for several CPU architectures -- Intel,)S
36 357 M(DEC/Compaq Alpha, Power PC, both 32-bit SPARC and the 64-bit UltraSPARC, SrongARM, . . .)S
36 343.8 M(-- with support for multiple CPUs on some architectures.)S
36 317.4 M(Linux FreeS/WAN is intended to run on all CPUs supported by Linux and is known to work on)S
36 304.2 M(several. See our compatibility section for a list.)S
/F6 SF 0 291 M(Linux FreeS/WAN)S
/F4 SF 36 277.8 M(Our implementation of the IPsec protocols, intended to be freely redistributable source code with a)S
36 264.6 M(GNU GPL license and no constraints under US or other export laws. Linux FreeS/WAN is intended to)S
36 251.4 M(interoperate with other IPsec implementations. The name is partly taken, with permission, from the)S
36 238.2 M(S/WAN multi-vendor IPsec compatability effort. Linux FreeS/WAN has two major components,)S
36 225 M(KLIPS \(KerneL IPsec Support\) and the Pluto daemon which manages the whole thing.)S
36 198.6 M(See our IPsec section for more detail. For the code see our primary site or one of the mirror sites on)S
36 185.4 M(this list.)S
/F6 SF 0 172.2 M(Linux Security Modules \(LSM\))S
/F4 SF 36 159 M(a project to create an interface in the Linux kernel that supports plug-in modules for various security)S
36 145.8 M(policies.)S
36 119.4 M(This allows multiple security projects to take different approaches to security enhancement without)S
36 106.2 M(tying the kernel down to one particular approach. As I understand the history, several projects were)S
36 93 M(pressing Linus to incorporate their changes, the various sets of changes were incompatible, and his)S
36 79.8 M(answer was more-or-less "a plague on all your houses; I'll give you an interface, but I won't)S
36 66.6 M(incorporate anything".)S
36 40.2 M(It seems to be working. There is a fairly active LSM mailing list, and several projects are already)S
36 27 M(using the interface.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(276)S
GR
SP
%%Page: 277 306
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F6 SF 0 687 M(LSM)S
/F4 SF 36 673.8 M(see Linux Security Modules)S
/F6 SF 0 660.6 M(M)S
0 647.4 M(Mailing list)S
/F4 SF 36 634.2 M(The Linux FreeS/WAN project has several public email lists for bug reports and software)S
36 621 M(development discussions. See our document on mailing lists.)S
/F6 SF 0 607.8 M(Man-in-the-middle attack)S
/F4 SF 36 594.6 M(An active attack in which the attacker impersonates each of the legitimate players in a protocol to the)S
36 581.4 M(other.)S
36 555 M(For example, if Alice and Bob are negotiating a key via the Diffie-Hellman key agreement, and are)S
36 541.8 M(not using authentication to be certain they are talking to each other, then an attacker able to insert)S
36 528.6 M(himself in the communication path can deceive both players.)S
36 502.2 M(Call the attacker Mallory. For Bob, he pretends to be Alice. For Alice, he pretends to be Bob. Two)S
36 489 M(keys are then negotiated, Alice-to-Mallory and Bob-to-Mallory. Alice and Bob each think the key)S
36 475.8 M(they have is Alice-to-Bob.)S
36 449.4 M(A message from Alice to Bob then goes to Mallory who decrypts it, reads it and/or saves a copy,)S
36 436.2 M(re-encrypts using the Bob-to-Mallory key and sends it along to Bob. Bob decrypts successfully and)S
36 423 M(sends a reply which Mallory decrypts, reads, re-encrypts and forwards to Alice.)S
36 396.6 M(To make this attack effective, Mallory must)S
72 370.2 M(subvert some part of the network in some way that lets him carry out the deception)S
72 357 M(possible targets: DNS, router, Alice or Bob's machine, mail server, ...)S
/Fc SF 63.816 370.2 M(\340 )S
/F4 SF 72 343.8 M(beat any authentication mechanism Alice and Bob use)S
72 330.6 M(strong authentication defeats the attack entirely; this is why IKE requires authentication)S
/Fc SF 63.816 343.8 M(\340 )S
/F4 SF 72 317.4 M(work in real time, delivering messages without introducing a delay large enough to alert the)S
72 304.2 M(victims)S
72 291 M(not hard if Alice and Bob are using email; quite difficult in some situations.)S
/Fc SF 63.816 317.4 M(\340 )S
/F4 SF 36 277.8 M(If he manages it, however, it is devastating. He not only gets to read all the messages; he can alter)S
36 264.6 M(messages, inject his own, forge anything he likes, . . . In fact, he controls the communication)S
36 251.4 M(completely.)S
/F6 SF 0 238.2 M(mandatory access control)S
/F4 SF 36 225 M(access control mechanisims which are not settable by the user \(see discretionary access control\), but)S
36 211.8 M(are enforced by the system.)S
36 185.4 M(For example, a document labelled "secret, zebra" might be readable only by someone with secret)S
36 172.2 M(clearance working on Project Zebra. Ideally, the system will prevent any transfer outside those)S
36 159 M(boundaries. For example, even if you can read it, you should not be able to e-mail it \(unless the)S
36 145.8 M(recipient is appropriately cleared\) or print it \(unless certain printers are authorised for that)S
36 132.6 M(classification\).)S
36 106.2 M(Mandatory access control is a required feature for some levels of Rainbow Book or Common Criteria)S
36 93 M(classification, but has not been widely used outside the military and government. There is a good)S
36 79.8 M(discussion of the issues in Anderson's Security Engineering.)S
36 53.4 M(The Security Enhanced Linux project is adding mandatory access control to Linux.)S
/F6 SF 0 40.2 M(Manual keying)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(277)S
GR
SP
%%Page: 278 307
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(An IPsec mode in which the keys are provided by the administrator. In FreeS/WAN, they are stored in)S
36 673.8 M(/etc/ipsec.conf. The alternative, automatic keying, is preferred in most cases. See this discussion.)S
/F6 SF 0 660.6 M(MD4)S
/F4 SF 36 647.4 M(Message Digest Algorithm Four from Ron Rivest of RSA. MD4 was widely used a few years ago, but)S
36 634.2 M(is now considered obsolete. It has been replaced by its descendants MD5 and SHA.)S
/F6 SF 0 621 M(MD5)S
/F4 SF 36 607.8 M(Message Digest Algorithm Five from Ron Rivest of RSA, an improved variant of his MD4. Like)S
36 594.6 M(MD4, it produces a 128-bit hash. For details see RFC 1321.)S
36 568.2 M(MD5 is one of two message digest algorithms available in IPsec. The other is SHA. SHA produces a)S
36 555 M(longer hash and is therefore more resistant to birthday attacks, but this is not a concern for IPsec. The)S
36 541.8 M(HMAC method used in IPsec is secure even if the underlying hash is not particularly strong against)S
36 528.6 M(this attack.)S
36 502.2 M(Hans Dobbertin found a weakness in MD5, and people often ask whether this means MD5 is unsafe)S
36 489 M(for IPsec. It doesn't. The IPsec RFCs discuss Dobbertin's attack and conclude that it does not affect)S
36 475.8 M(MD5 as used for HMAC in IPsec.)S
/F6 SF 0 462.6 M(Meet-in-the-middle attack)S
/F4 SF 36 449.4 M(A divide-and-conquer attack which breaks a cipher into two parts, works against each separately,)S
36 436.2 M(and compares results. Probably the best known example is an attack on double DES. This applies in)S
36 423 M(principle to any pair of block ciphers, e.g. to an encryption system using, say, CAST-128 and)S
36 409.8 M(Blowfish, but we will describe it for double DES.)S
36 383.4 M(Double DES encryption and decryption can be written:)S
9 FS/F0 SF 36 359 M(        C = E\(k2,E\(k1,P\)\))S
36 348.2 M(        P = D\(k1,D\(k2,C\)\))S
11 FS/F4 SF 36 322.2 M(Where C is ciphertext, P is plaintext, E is encryption, D is decryption, k1 is one key, and k2 is the)S
36 309 M(other key. If we know a P, C pair, we can try and find the keys with a brute force attack, trying all)S
36 295.8 M(possible k1, k2 pairs. Since each key is 56 bits, there are 2)S
8 FS/F4 SF 292.322 300.3 M(112)S
11 FS/F4 SF 304.322 295.8 M( such pairs and this attack is painfully)S
36 282.6 M(inefficient.)S
36 256.2 M(The meet-in-the middle attack re-writes the equations to calculate a middle value M:)S
9 FS/F0 SF 36 231.8 M(        M = E\(k1,P\))S
36 221 M(        M = D\(k2,C\))S
11 FS/F4 SF 36 195 M(Now we can try some large number of D\(k2,C\) decryptions with various values of k2 and store the)S
36 181.8 M(results in a table. Then start doing E\(k1,P\) encryptions, checking each result to see if it is in the table.)S
36 155.4 M(With enough table space, this breaks double DES with 2)S
8 FS/F4 SF 284.083 159.9 M(56)S
11 FS/F4 SF 292.083 155.4 M( + 2)S
8 FS/F4 SF 309.287 159.9 M(56)S
11 FS/F4 SF 317.287 155.4 M( = 2)S
8 FS/F4 SF 334.491 159.9 M(57)S
11 FS/F4 SF 342.491 155.4 M(work. Against triple DES, you)S
36 142.2 M(need 2)S
8 FS/F4 SF 65.018 146.7 M(56)S
11 FS/F4 SF 73.018 142.2 M( + 2)S
8 FS/F4 SF 90.222 146.7 M(112)S
11 FS/F4 SF 102.222 142.2 M( ~= 2)S
8 FS/F4 SF 125.377 146.7 M(112)S
11 FS/F4 SF 137.377 142.2 M(.)S
36 115.8 M(The memory requirements for such attacks can be prohibitive, but there is a whole body of research)S
36 102.6 M(literature on methods of reducing them.)S
/F6 SF 0 89.4 M(Message Digest Algorithm)S
/F4 SF 36 76.2 M(An algorithm which takes a message as input and produces a hash or digest of it, a fixed-length set of)S
36 63 M(bits which depend on the message contents in some highly complex manner. Design criteria include)S
36 49.8 M(making it extremely difficult for anyone to counterfeit a digest or to change a message without)S
36 36.6 M(altering its digest. One essential property is collision resistance. The main applications are in message)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(278)S
GR
SP
%%Page: 279 308
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(authentication and digital signature schemes. Widely used algorithms include MD5 and SHA. In)S
36 673.8 M(IPsec, message digests are used for HMAC authentication of packets.)S
/F6 SF 0 660.6 M(MTU)S
/F7 SF 36 647.4 M(M)S
/F4 SF (aximum)S
/F7 SF ( T)S
/F4 SF (ransmission)S
/F7 SF ( U)S
/F4 SF (nit, the largest size of packet that can be sent over a link. This is)S
36 634.2 M(determined by the underlying network, but must be taken account of at the IP level.)S
36 607.8 M(IP packets, which can be up to 64K bytes each, must be packaged into lower-level packets of the)S
36 594.6 M(appropriate size for the underlying network\(s\) and re-assembled on the other end. When a packet)S
36 581.4 M(must pass over multiple networks, each with its own MTU, and many of the MTUs are unknown to)S
36 568.2 M(the sender, this becomes a fairly complex problem. See path MTU discovery for details.)S
36 541.8 M(Often the MTU is a few hundred bytes on serial links and 1500 on Ethernet. There are, however,)S
36 528.6 M(serial link protocols which use a larger MTU to avoid fragmentation at the ethernet/serial boundary,)S
36 515.4 M(and newer \(especially gigabit\) Ethernet networks sometimes support much larger packets because)S
36 502.2 M(these are more efficient in some applications.)S
/F6 SF 0 489 M(N)S
0 475.8 M(NAI)S
/F4 SF 36 462.6 M(Network Associates, a conglomerate formed from PGP Inc., TIS \(Trusted Information Systems, a)S
36 449.4 M(firewall vendor\) and McAfee anti-virus products. Among other things, they offer an IPsec-based)S
36 436.2 M(VPN product.)S
/F6 SF 0 423 M(NAT)S
/F5 SF 36 409.8 M(N)S
/F4 SF (etwork)S
/F5 SF ( A)S
/F4 SF (ddress)S
/F5 SF ( T)S
/F4 SF (ranslation, a process by which firewall machines may change the addresses on)S
36 396.6 M(packets as they go through. For discussion, see our background section.)S
/F6 SF 0 383.4 M(NIST)S
/F4 SF 36 370.2 M(The US National Institute of Standards and Technology, responsible for FIPS standards including)S
36 357 M(DES and its replacement, AES.)S
/F6 SF 0 343.8 M(Nonce)S
/F4 SF 36 330.6 M(A random value used in an authentication protocol.)S
/F6 SF 0 317.4 M(Non-routable IP address)S
/F4 SF 36 304.2 M(An IP address not normally allowed in the "to" or "from" IP address field header of IP packets.)S
36 277.8 M(Almost invariably, the phrase "non-routable address" means one of the addresses reserved by RFC)S
36 264.6 M(1918 for private networks:)S
72 238.2 M(10.anything)S
/Fc SF 63.816 238.2 M(\340 )S
/F4 SF 72 225 M(172.x.anything with 16 <= x <= 31)S
/Fc SF 63.816 225 M(\340 )S
/F4 SF 72 211.8 M(192.168.anything)S
/Fc SF 63.816 211.8 M(\340 )S
/F4 SF 36 198.6 M(These addresses are commonly used on private networks, e.g. behind a Linux machines doing IP)S
36 185.4 M(masquerade. Machines within the private network can address each other with these addresses. All)S
36 172.2 M(packets going outside that network, however, have these addresses replaced before they reach the)S
36 159 M(Internet.)S
36 132.6 M(If any packets using these addresses do leak out, they do not go far. Most routers automatically)S
36 119.4 M(discard all such packets.)S
36 93 M(Various other addresses -- the 127.0.0.0/8 block reserved for local use, 0.0.0.0, various broadcast and)S
36 79.8 M(network addresses -- cannot be routed over the Internet, but are not normally included in the)S
36 66.6 M(meaning when the phrase "non-routable address" is used.)S
/F6 SF 0 53.4 M(NSA)S
/F4 SF 36 40.2 M(The US National Security Agency, the American organisation for signals intelligence, the protection)S
36 27 M(of US government messages and the interception and analysis of other messages. For details, see)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(279)S
GR
SP
%%Page: 280 309
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(Bamford's "The Puzzle Palace".)S
36 660.6 M(Some history of NSA documents were declassified in response to a FOIA \(Freedom of Information)S
36 647.4 M(Act\) request.)S
/F6 SF 0 634.2 M(O)S
0 621 M(Oakley)S
/F4 SF 36 607.8 M(A key determination protocol, defined in RFC 2412.)S
/F6 SF 0 594.6 M(Oakley groups)S
/F4 SF 36 581.4 M(The groups used as the basis of Diffie-Hellman key exchange in the Oakley protocol, and in IKE.)S
36 568.2 M(Four were defined in the original RFC, and a fifth has been added since.)S
36 541.8 M(Linux FreeS/WAN currently supports the three groups based on finite fields modulo a prime \(Groups)S
36 528.6 M(1, 2 and 5\) and does not support the elliptic curve groups \(3 and 4\). For a description of the difference)S
36 515.4 M(of the types, see discrete logarithms.)S
/F6 SF 0 502.2 M(One time pad)S
/F4 SF 36 489 M(A cipher in which the key is:)S
72 475.8 M(as long as the total set of messages to be enciphered)S
/Fc SF 63.816 475.8 M(\340 )S
/F4 SF 72 462.6 M(absolutely random)S
/Fc SF 63.816 462.6 M(\340 )S
/F4 SF 72 449.4 M(never re-used)S
/Fc SF 63.816 449.4 M(\340 )S
/F4 SF 36 436.2 M(Given those three conditions, it can easily be proved that the cipher is perfectly secure, in the sense)S
36 423 M(that an attacker with intercepted message in hand has no better chance of guessing the message than)S
36 409.8 M(an attacker who has not intercepted the message and only knows the message length. No such proof)S
36 396.6 M(exists for any other cipher.)S
36 370.2 M(There are, however, several problems with this "perfect" cipher.)S
36 343.8 M(First, it is)S
/F7 SF ( wildly impractical)S
/F4 SF ( for most applications. Key management is at best difficult, often)S
36 330.6 M(completely impossible.)S
36 304.2 M(Second, it is)S
/F7 SF ( extremely fragile)S
/F4 SF (. Small changes which violate the conditions listed above do not just)S
36 291 M(weaken the cipher liitle. Quite often they destroy its security completely.)S
72 264.6 M(Re-using the pad weakens the cipher to the point where it can be broken with pencil and)S
72 251.4 M(paper. With a computer, the attack is trivially easy.)S
/Fc SF 63.816 264.6 M(\340 )S
/F4 SF 72 238.2 M(Using)S
/F6 SF ( anything)S
/F4 SF ( less than truly random numbers)S
/F6 SF ( completely)S
/F4 SF ( invalidates the security proof.)S
/Fc SF 63.816 238.2 M(\340 )S
/F4 SF 72 225 M(In particular, using computer-generated pseudo-random numbers may give an extremely)S
72 211.8 M(weak cipher. It might also produce a good stream cipher, if the pseudo-random generator is)S
72 198.6 M(both well-designed and properely seeded.)S
/Fc SF 63.816 225 M(\340 )S
/F4 SF 36 185.4 M(Marketing claims about the "unbreakable" security of various products which somewhat resemble)S
36 172.2 M(one-time pads are common. Such claims are one of the surest signs of cryptographic snake oil; most)S
36 159 M(systems marketed with such claims are worthless.)S
36 132.6 M(Finally, even if the system is implemented and used correctly, it is)S
/F7 SF ( highly vulnerable to a substitution)S
36 119.4 M(attack)S
/F4 SF (. If an attacker knows some plaintext and has an intercepted message, he can discover the pad.)S
72 93 M(This does not matter if the attacker is just a passive eavesdropper. It gives him no plaintext he)S
72 79.8 M(didn't already know and we don't care that he learns a pad which we will never re-use.)S
/Fc SF 63.816 93 M(\340 )S
/F4 SF 72 66.6 M(However, an active attacker who knows the plaintext can recover the pad, then use it to)S
72 53.4 M(encode with whatever he chooses. If he can get his version delivered instead of yours, this)S
72 40.2 M(may be a disaster. If you send "attack at dawn", the delivered message can be anything the)S
72 27 M(same length -- perhaps "retreat to east" or "shoot generals".)S
/Fc SF 63.816 66.6 M(\340 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(280)S
GR
SP
%%Page: 281 310
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 72 687 M(An active attacker with only a reasonable guess at the plaintext can try the same attack. If the)S
72 673.8 M(guess is correct, this works and the attacker's bogus message is delivered. If the guess is)S
72 660.6 M(wrong, a garbled message is delivered.)S
/Fc SF 63.816 687 M(\340 )S
/F4 SF 36 647.4 M(In general then, despite its theoretical perfection, the one-time-pad has very limited practical)S
36 634.2 M(application.)S
36 607.8 M(See also the one time pad FAQ.)S
/F6 SF 0 594.6 M(Opportunistic encryption \(OE\))S
/F4 SF 36 581.4 M(A situation in which any two IPsec-aware machines can secure their communications, without a)S
36 568.2 M(pre-shared secret and without a common PKI or previous exchange of public keys. This is one of the)S
36 555 M(goals of the Linux FreeS/WAN project, discussed in our introduction section.)S
36 528.6 M(Setting up for opportunistic encryption is described in our quickstart document.)S
/F6 SF 0 515.4 M(Opportunistic responder)S
/F4 SF 36 502.2 M(A host which accepts, but does not initiate, requests for opportunistic encryption \(OE\). An)S
36 489 M(opportunistic responder has enabled OE in its passive form \(pOE\) only. A web server or file server)S
36 475.8 M(may be usefully set up as an opportunistic responder.)S
36 449.4 M(Configuring passive OE is described in our policy groups document.)S
/F6 SF 0 436.2 M(Orange book)S
/F4 SF 36 423 M(the most basic and best known of the US government's Rainbow Book series of computer security)S
36 409.8 M(standards.)S
/F6 SF 0 396.6 M(P)S
0 383.4 M(P1363 standard)S
/F4 SF 36 370.2 M(An IEEE standard for public key cryptography. Web page.)S
/F6 SF 0 357 M(pOE)S
/F4 SF 36 343.8 M(See Passive opportunistic encryption.)S
/F6 SF 0 330.6 M(Passive attack)S
/F4 SF 36 317.4 M(An attack in which the attacker only eavesdrops and attempts to analyse intercepted messages, as)S
36 304.2 M(opposed to an active attack in which he diverts messages or generates his own.)S
/F6 SF 0 291 M(Passive opportunistic encryption \(pOE\))S
/F4 SF 36 277.8 M(A form of opportunistic encryption \(OE\) in which the host will accept opportunistic connection)S
36 264.6 M(requests, but will not initiate such requests. A host which runs OE in its passive form only is known)S
36 251.4 M(as an opportunistic responder.)S
36 225 M(Configuring passive OE is described in our policy groups document.)S
/F6 SF 0 211.8 M(Path MTU discovery)S
/F4 SF 36 198.6 M(The process of discovering the largest packet size which all links on a path can handle without)S
36 185.4 M(fragmentation -- that is, without any router having to break the packet up into smaller pieces to)S
36 172.2 M(match the MTU of its outgoing link.)S
36 145.8 M(This is done as follows:)S
72 119.4 M(originator sends the largest packets allowed by MTU of the first link, setting the DF \()S
/F7 SF (d)S
/F4 SF (on't)S
/F7 SF 72 106.2 M(f)S
/F4 SF (ragment\) bit in the packet header)S
/Fc SF 63.816 119.4 M(\340 )S
/F4 SF 72 93 M(any router which cannot send the packet on \(outgoing MTU is too small for it, and DF)S
72 79.8 M(prevents fragmenting it to match\) sends back an ICMP packet reporting the problem)S
/Fc SF 63.816 93 M(\340 )S
/F4 SF 72 66.6 M(originator looks at ICMP message and tries a smaller size)S
/Fc SF 63.816 66.6 M(\340 )S
/F4 SF 72 53.4 M(eventually, you settle on a size that can pass all routers)S
/Fc SF 63.816 53.4 M(\340 )S
/F4 SF 72 40.2 M(thereafter, originator just sends that size and no-one has to fragment)S
/Fc SF 63.816 40.2 M(\340 )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(281)S
GR
SP
%%Page: 282 311
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(Since this requires co-operation of many systems, and since the next packet may travel a different)S
36 673.8 M(path, this is one of the trickier areas of IP programming. Bugs that have shown up over the years have)S
36 660.6 M(included:)S
72 634.2 M(malformed ICMP messages)S
/Fc SF 63.816 634.2 M(\340 )S
/F4 SF 72 621 M(hosts that ignore or mishandle these ICMP messages)S
/Fc SF 63.816 621 M(\340 )S
/F4 SF 72 607.8 M(firewalls blocking the ICMP messages so host does not see them)S
/Fc SF 63.816 607.8 M(\340 )S
/F4 SF 36 594.6 M(Since IPsec adds a header, it increases packet size and may require fragmentation even where)S
36 581.4 M(incoming and outgoing MTU are equal.)S
/F6 SF 0 568.2 M(Perfect forward secrecy \(PFS\))S
/F4 SF 36 555 M(A property of systems such as Diffie-Hellman key exchange which use a long-term key \(such as the)S
36 541.8 M(shared secret in IKE\) and generate short-term keys as required. If an attacker who acquires the)S
36 528.6 M(long-term key)S
/F6 SF ( provably)S
/F4 SF ( can)S
/F6 SF 72 515.4 M(neither)S
/F4 SF ( read previous messages which he may have archived)S
/Fc SF 63.816 515.4 M(\340 )S
/F6 SF 72 502.2 M(nor)S
/F4 SF ( read future messages without performing additional successful attacks)S
/Fc SF 63.816 502.2 M(\340 )S
/F4 SF 36 489 M(then the system has PFS. The attacker needs the short-term keys in order to read the trafiic and)S
36 475.8 M(merely having the long-term key does not allow him to infer those. Of course, it may allow him to)S
36 462.6 M(conduct another attack \(such as man-in-the-middle\) which gives him some short-term keys, but he)S
36 449.4 M(does not automatically get them just by acquiring the long-term key.)S
36 423 M(See also Phil Karn's definition.)S
/F6 SF 0 409.8 M(PFS)S
/F4 SF 36 396.6 M(see Perfect Forward Secrecy)S
/F6 SF 0 383.4 M(PGP)S
/F5 SF 36 370.2 M(P)S
/F4 SF (retty)S
/F5 SF ( G)S
/F4 SF (ood)S
/F5 SF ( P)S
/F4 SF (rivacy, a personal encryption system for email based on public key technology, written)S
36 357 M(by Phil Zimmerman.)S
36 330.6 M(The 2.xx versions of PGP used the RSA public key algorithm and used IDEA as the symmetric)S
36 317.4 M(cipher. These versions are described in RFC 1991 and in Garfinkel's book. Since version 5, the)S
36 304.2 M(products from PGP Inc. have used Diffie-Hellman public key methods and CAST-128 symmetric)S
36 291 M(encryption. These can verify signatures from the 2.xx versions, but cannot exchange encryted)S
36 277.8 M(messages with them.)S
36 251.4 M(An IETF working group has issued RFC 2440 for an "Open PGP" standard, similar to the 5.x)S
36 238.2 M(versions. PGP Inc. staff were among the authors. A free Gnu Privacy Guard based on that standard is)S
36 225 M(now available.)S
36 198.6 M(For more information on PGP, including how to obtain it, see our cryptography links.)S
/F6 SF 0 185.4 M(PGP Inc.)S
/F4 SF 36 172.2 M(A company founded by Zimmerman, the author of PGP, now a division of NAI. See the corporate)S
36 159 M(website. Zimmerman left in 2001, and early in 2002 NAI announced that they would no longer sell)S
36 145.8 M(PGP..)S
36 119.4 M(Versions 6.5 and later of the PGP product include PGPnet, an IPsec client for Macintosh or for)S
36 106.2 M(Windows 95/98/NT. See our interoperation document.)S
/F6 SF 0 93 M(Photuris)S
/F4 SF 36 79.8 M(Another key negotiation protocol, an alternative to IKE, described in RFCs 2522 and 2523.)S
/F6 SF 0 66.6 M(PPP)S
/F5 SF 36 53.4 M(P)S
/F4 SF (oint-to-)S
/F5 SF (P)S
/F4 SF (oint)S
/F5 SF ( P)S
/F4 SF (rotocol, originally a method of connecting over modems or serial lines, but see also)S
36 40.2 M(PPPoE.)S
/F6 SF 0 27 M(PPPoE)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(282)S
GR
SP
%%Page: 283 312
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F5 SF 36 687 M(PPP o)S
/F4 SF (ver)S
/F5 SF ( E)S
/F4 SF (thernet, a somewhat odd protocol that makes Ethernet look like a point-to-point serial)S
36 673.8 M(link. It is widely used for cable or ADSL Internet services, apparently mainly because it lets the)S
36 660.6 M(providers use access control and address assignmment mechanisms developed for dialup networks.)S
36 647.4 M(Roaring Penguin provide a widely used Linux implementation.)S
/F6 SF 0 634.2 M(PPTP)S
/F5 SF 36 621 M(P)S
/F4 SF (oint-to-)S
/F5 SF (P)S
/F4 SF (oint)S
/F5 SF ( T)S
/F4 SF (unneling)S
/F5 SF ( P)S
/F4 SF (rotocol, used in some Microsoft VPN implementations. Papers)S
36 607.8 M(discussing weaknesses in it are on counterpane.com. It is now largely obsolete, replaced by L2TP.)S
/F6 SF 0 594.6 M(PKI)S
/F5 SF 36 581.4 M(P)S
/F4 SF (ublic)S
/F5 SF ( K)S
/F4 SF (ey)S
/F5 SF ( I)S
/F4 SF (nfrastructure, the things an organisation or community needs to set up in order to make)S
36 568.2 M(public key cryptographic technology a standard part of their operating procedures.)S
36 541.8 M(There are several PKI products on the market. Typically they use a hierarchy of Certification)S
36 528.6 M(Authorities \(CAs\). Often they use LDAP access to X.509 directories to implement this.)S
36 502.2 M(See Web of Trust for a different sort of infrastructure.)S
/F6 SF 0 489 M(PKIX)S
/F5 SF 36 475.8 M(PKI)S
/F4 SF ( e)S
/F5 SF (X)S
/F4 SF (change, an IETF standard that allows PKIs to talk to each other.)S
36 449.4 M(This is required, for example, when users of a corporate PKI need to communicate with people at)S
36 436.2 M(client, supplier or government organisations, any of which may have a different PKI in place. I should)S
36 423 M(be able to talk to you securely whenever:)S
72 396.6 M(your organisation and mine each have a PKI in place)S
/Fc SF 63.816 396.6 M(\340 )S
/F4 SF 72 383.4 M(you and I are each set up to use those PKIs)S
/Fc SF 63.816 383.4 M(\340 )S
/F4 SF 72 370.2 M(the two PKIs speak PKIX)S
/Fc SF 63.816 370.2 M(\340 )S
/F4 SF 72 357 M(the configuration allows the conversation)S
/Fc SF 63.816 357 M(\340 )S
/F4 SF 36 343.8 M(At time of writing \(March 1999\), this is not yet widely implemented but is under quite active)S
36 330.6 M(development by several groups.)S
/F6 SF 0 317.4 M(Plaintext)S
/F4 SF 36 304.2 M(The unencrypted input to a cipher, as opposed to the encrypted ciphertext output.)S
/F6 SF 0 291 M(Pluto)S
/F4 SF 36 277.8 M(The Linux FreeS/WAN daemon which handles key exchange via the IKE protocol, connection)S
36 264.6 M(negotiation, and other higher-level tasks. Pluto calls the KLIPS kernel code as required. For details,)S
36 251.4 M(see the manual page ipsec_pluto\(8\).)S
/F6 SF 0 238.2 M(Public Key Cryptography)S
/F4 SF 36 225 M(In public key cryptography, keys are created in matched pairs. Encrypt with one half of a pair and)S
36 211.8 M(only the matching other half can decrypt it. This contrasts with symmetric or secret key cryptography)S
36 198.6 M(in which a single key known to both parties is used for both encryption and decryption.)S
36 172.2 M(One half of each pair, called the public key, is made public. The other half, called the private key, is)S
36 159 M(kept secret. Messages can then be sent by anyone who knows the public key to the holder of the)S
36 145.8 M(private key. Encrypt with the public key and you know that only someone with the matching private)S
36 132.6 M(key can decrypt.)S
36 106.2 M(Public key techniques can be used to create digital signatures and to deal with key management)S
36 93 M(issues, perhaps the hardest part of effective deployment of symmetric ciphers. The resulting hybrid)S
36 79.8 M(cryptosystems use public key methods to manage keys for symmetric ciphers.)S
36 53.4 M(Many organisations are currently creating PKIs, public key infrastructures to make these benefits)S
36 40.2 M(widely available.)S
/F6 SF 0 27 M(Public Key Infrastructure)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(283)S
GR
SP
%%Page: 284 313
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(see PKI)S
/F6 SF 0 673.8 M(Q)S
0 660.6 M(R)S
0 647.4 M(Rainbow books)S
/F4 SF 36 634.2 M(A set of US government standards for evaluation of "trusted computer systems", of which the best)S
36 621 M(known was the Orange Book. One fairly often hears references to "C2 security" or a product)S
36 607.8 M("evaluated at B1". The Rainbow books define the standards referred to in those comments.)S
36 581.4 M(See this reference page.)S
36 555 M(The Rainbow books are now mainly obsolete, replaced by the international Common Criteria)S
36 541.8 M(standards.)S
/F6 SF 0 528.6 M(Random)S
/F4 SF 36 515.4 M(A remarkably tricky term, far too much so for me to attempt a definition here. Quite a few)S
36 502.2 M(cryptosystems have been broken via attacks on weak random number generators, even when the rest)S
36 489 M(of the system was sound.)S
36 462.6 M(See RFC 1750 for the theory.)S
36 436.2 M(See the manual pages for ipsec_ranbits\(8\) and ipsec_prng\(3\) for more on FreeS/WAN's use of)S
36 423 M(randomness. Both depend on the random\(4\) device driver..)S
36 396.6 M(A couple of years ago, there was extensive mailing list discussion \(archived here\)of Linux)S
36 383.4 M(/dev/random and FreeS/WAN. Since then, the design of the random\(4\) driver has changed)S
36 370.2 M(considerably. Linux 2.4 kernels have the new driver..)S
/F6 SF 0 357 M(Raptor)S
/F4 SF 36 343.8 M(A firewall product for Windows NT offerring IPsec-based VPN services. Linux FreeS/WAN)S
36 330.6 M(interoperates with Raptor; see our interop document for details. Raptor have recently merged with)S
36 317.4 M(Axent.)S
/F6 SF 0 304.2 M(RC4)S
/F5 SF 36 291 M(R)S
/F4 SF (ivest)S
/F5 SF ( C)S
/F4 SF (ipher four, designed by Ron Rivest of RSA and widely used. Believed highly secure with)S
36 277.8 M(adequate key length, but often implemented with inadequate key length to comply with export)S
36 264.6 M(restrictions.)S
/F6 SF 0 251.4 M(RC6)S
/F5 SF 36 238.2 M(R)S
/F4 SF (ivest)S
/F5 SF ( C)S
/F4 SF (ipher six, RSA's AES candidate cipher.)S
/F6 SF 0 225 M(Replay attack)S
/F4 SF 36 211.8 M(An attack in which the attacker records data and later replays it in an attempt to deceive the recipient.)S
/F6 SF 0 198.6 M(Reverse map)S
/F4 SF 36 185.4 M(In DNS, a table where IP addresses can be used as the key for lookups which return a system name)S
36 172.2 M(and/or other information.)S
/F6 SF 0 159 M(RFC)S
/F5 SF 36 145.8 M(R)S
/F4 SF (equest)S
/F5 SF ( F)S
/F4 SF (or)S
/F5 SF ( C)S
/F4 SF (omments, an Internet document. Some RFCs are just informative. Others are standards.)S
36 119.4 M(Our list of IPsec and other security-related RFCs is here, along with information on methods of)S
36 106.2 M(obtaining them.)S
/F6 SF 0 93 M(Rijndael)S
/F4 SF 36 79.8 M(a block cipher designed by two Belgian cryptographers, winner of the US government's AES contest)S
36 66.6 M(to pick a replacement for DES. See the Rijndael home page.)S
/F6 SF 0 53.4 M(RIPEMD)S
/F4 SF 36 40.2 M(A message digest algorithm. The current version is RIPEMD-160 which gives a 160-bit hash.)S
/F6 SF 0 27 M(Root CA)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(284)S
GR
SP
%%Page: 285 314
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(The top level Certification Authority in a hierachy of such authorities.)S
/F6 SF 0 673.8 M(Routable IP address)S
/F4 SF 36 660.6 M(Most IP addresses can be used as "to" and "from" addresses in packet headers. These are the routable)S
36 647.4 M(addresses; we expect routing to be possible for them. If we send a packet to one of them, we expect)S
36 634.2 M(\(in most cases; there are various complications\) that it will be delivered if the address is in use and)S
36 621 M(will cause an ICMP error packet to come back to us if not.)S
36 594.6 M(There are also several classes of non-routable IP addresses.)S
/F6 SF 0 581.4 M(RSA algorithm)S
/F5 SF 36 568.2 M(R)S
/F4 SF (ivest)S
/F5 SF ( S)S
/F4 SF (hamir)S
/F5 SF ( A)S
/F4 SF (dleman public key algorithm, named for its three inventors. It is widely used and)S
36 555 M(likely to become moreso since it became free of patent encumbrances in September 2000.)S
36 528.6 M(RSA can be used to provide either encryption or digital signatures. In IPsec, it is used only for)S
36 515.4 M(signatures. These provide gateway-to-gateway authentication for IKE negotiations.)S
36 489 M(For a full explanation of the algorithm, consult one of the standard references such as Applied)S
36 475.8 M(Cryptography. A simple explanation is:)S
36 449.4 M(The great 17th century French mathematician Fermat proved that,)S
36 423 M(for any prime p and number x, 0 <= x < p:)S
9 FS/F0 SF 36 398.6 M(        x^p == x         modulo p)S
36 387.8 M(        x^\(p-1\) == 1     modulo p, non-zero x)S
11 FS/F4 SF 36 351 M(From this it follows that if we have a pair of primes p, q and two numbers e, d such that:)S
9 FS/F0 SF 36 326.6 M(        ed == 1          modulo lcm\( p-1, q-1\))S
11 FS/F4 SF 36 289.8 M(where lcm\(\) is least common multiple, then)S
36 276.6 M(for all x, 0 <= x < pq:)S
9 FS/F0 SF 36 252.2 M(      x^ed == x           modulo pq)S
11 FS/F4 SF 36 215.4 M(So we construct such as set of numbers p, q, e, d and publish the product N=pq and e as the public)S
36 202.2 M(key. Using c for ciphertext and i for the input plaintext, encryption is then:)S
9 FS/F0 SF 36 177.8 M(        c = i^e           modulo N)S
11 FS/F4 SF 36 141 M(An attacker cannot deduce i from the cyphertext c, short of either factoring N or solving the discrete)S
36 127.8 M(logarithm problem for this field. If p, q are large primes \(hundreds or thousands of bits\) no efficient)S
36 114.6 M(solution to either problem is known.)S
36 88.2 M(The receiver, knowing the private key \(N and d\), can readily recover the plaintext p since:)S
9 FS/F0 SF 36 63.8 M(        c^d == \(i^e\)^d    modulo N)S
36 53 M(            == i^ed       modulo N)S
36 42.2 M(            == i          modulo N)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(285)S
GR
SP
%%Page: 286 315
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(This gives an effective public key technique, with only a couple of problems. It uses a good deal of)S
36 673.8 M(computer time, since calculations with large integers are not cheap, and there is no proof it is)S
36 660.6 M(necessarily secure since no-one has proven either factoring or discrete log cannot be done efficiently.)S
36 647.4 M(Quite a few good mathematicians have tried both problems, and no-one has announced success, but)S
36 634.2 M(there is no proof they are insoluble.)S
/F6 SF 0 621 M(RSA Data Security)S
/F4 SF 36 607.8 M(A company founded by the inventors of the RSA public key algorithm.)S
/F6 SF 0 594.6 M(S)S
0 581.4 M(SA)S
/F5 SF 36 568.2 M(S)S
/F4 SF (ecurity)S
/F5 SF ( A)S
/F4 SF (ssociation, the channel negotiated by the higher levels of an IPsec implementation \(IKE\))S
36 555 M(and used by the lower \(ESP and AH\). SAs are unidirectional; you need a pair of them for two-way)S
36 541.8 M(communication.)S
36 515.4 M(An SA is defined by three things -- the destination, the protocol \(AH orESP\) and the SPI, security)S
36 502.2 M(parameters index. It is used as an index to look up other things such as session keys and intialisation)S
36 489 M(vectors.)S
36 462.6 M(For more detail, see our section on IPsec and/or RFC 2401.)S
/F6 SF 0 449.4 M(SE Linux)S
/F7 SF 36 436.2 M(S)S
/F4 SF (ecurity)S
/F7 SF ( E)S
/F4 SF (nhanced Linux, an NSA-funded project to add mandatory access control to Linux. See the)S
36 423 M(project home page.)S
36 396.6 M(According to their web pages, this work will include extending mandatory access controls to IPsec)S
36 383.4 M(tunnels.)S
36 357 M(Recent versions of SE Linux code use the Linux Security Module interface.)S
/F6 SF 0 343.8 M(Secure DNS)S
/F4 SF 36 330.6 M(A version of the DNS or Domain Name Service enhanced with authentication services. This is being)S
36 317.4 M(designed by the IETF DNS security working group. Check the Internet Software Consortium for)S
36 304.2 M(information on implementation progress and for the latest version of BIND. Another site has more)S
36 291 M(information.)S
36 264.6 M(IPsec can use this plus Diffie-Hellman key exchange to bootstrap itself. This allows opportunistic)S
36 251.4 M(encryption. Any pair of machines which can authenticate each other via DNS can communicate)S
36 238.2 M(securely, without either a pre-existing shared secret or a shared PKI.)S
/F6 SF 0 225 M(Secret key cryptography)S
/F4 SF 36 211.8 M(See symmetric cryptography)S
/F6 SF 0 198.6 M(Security Association)S
/F4 SF 36 185.4 M(see SA)S
/F6 SF 0 172.2 M(Security Enhanced Linux)S
/F4 SF 36 159 M(see SE Linux)S
/F6 SF 0 145.8 M(Sequence number)S
/F4 SF 36 132.6 M(A number added to a packet or message which indicates its position in a sequence of packets or)S
36 119.4 M(messages. This provides some security against replay attacks.)S
36 93 M(For automatic keying mode, the IPsec RFCs require that the sender generate sequence numbers for)S
36 79.8 M(each packet, but leave it optional whether the receiver does anything with them.)S
/F6 SF 0 66.6 M(SHA)S
0 53.4 M(SHA-1)S
/F5 SF 36 40.2 M(S)S
/F4 SF (ecure)S
/F5 SF ( H)S
/F4 SF (ash)S
/F5 SF ( A)S
/F4 SF (lgorithm, a message digest algorithm developed by the NSA for use in the Digital)S
36 27 M(Signature standard, FIPS number 186 from NIST. SHA is an improved variant of MD4 producing a)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(286)S
GR
SP
%%Page: 287 316
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(160-bit hash.)S
36 660.6 M(SHA is one of two message digest algorithms available in IPsec. The other is MD5. Some people do)S
36 647.4 M(not trust SHA because it was developed by the NSA. There is, as far as we know, no cryptographic)S
36 634.2 M(evidence that SHA is untrustworthy, but this does not prevent that view from being strongly held.)S
36 607.8 M(The NSA made one small change after the release of the original SHA. They did not give reasons. Iit)S
36 594.6 M(may be a defense against some attack they found and do not wish to disclose. Technically the)S
36 581.4 M(modified algorithm should be called SHA-1, but since it has replaced the original algorithm in nearly)S
36 568.2 M(all applications, it is generally just referred to as SHA..)S
/F6 SF 0 555 M(SHA-256)S
0 541.8 M(SHA-384)S
0 528.6 M(SHA-512)S
/F4 SF 36 515.4 M(Newer variants of SHA designed to match the strength of the 128, 192 and 256-bit keys of AES. The)S
36 502.2 M(work to break an encryption algorithm's strength by brute force is 2 keylength operations but a)S
36 489 M(birthday attack on a hash needs only 2 hashlength / 2 , so as a general rule you need a hash twice the)S
36 475.8 M(size of the key to get similar strength. SHA-256, SHA-384 and SHA-512 are designed to match the)S
36 462.6 M(128, 192 and 256-bit key sizes of AES, respectively.)S
/F6 SF 0 449.4 M(Signals intelligence \(SIGINT\))S
/F4 SF 36 436.2 M(Activities of government agencies from various nations aimed at protecting their own)S
36 423 M(communications and reading those of others. Cryptography, cryptanalysis, wiretapping, interception)S
36 409.8 M(and monitoring of various sorts of signals. The players include the American NSA, British GCHQ and)S
36 396.6 M(Canadian CSE.)S
/F6 SF 0 383.4 M(SKIP)S
/F5 SF 36 370.2 M(S)S
/F4 SF (imple)S
/F5 SF ( K)S
/F4 SF (ey management for)S
/F5 SF ( I)S
/F4 SF (nternet)S
/F5 SF ( P)S
/F4 SF (rotocols, an alternative to IKE developed by Sun and being)S
36 357 M(marketed by their Internet Commerce Group.)S
/F6 SF 0 343.8 M(Snake oil)S
/F4 SF 36 330.6 M(Bogus cryptography. See the Snake Oil FAQ or this paper by Schneier.)S
/F6 SF 0 317.4 M(SPI)S
/F5 SF 36 304.2 M(S)S
/F4 SF (ecurity)S
/F5 SF ( P)S
/F4 SF (arameter)S
/F5 SF ( I)S
/F4 SF (ndex, an index used within IPsec to keep connections distinct. A Security)S
36 291 M(Association \(SA\) is defined by destination, protocol and SPI. Without the SPI, two connections to the)S
36 277.8 M(same gateway using the same protocol could not be distinguished.)S
36 251.4 M(For more detail, see our IPsec section and/or RFC 2401.)S
/F6 SF 0 238.2 M(SSH)S
/F5 SF 36 225 M(S)S
/F4 SF (ecure)S
/F5 SF ( SH)S
/F4 SF (ell, an encrypting replacement for the insecure Berkeley commands whose names begin)S
36 211.8 M(with "r" for "remote": rsh, rlogin, etc.)S
36 185.4 M(For more information on SSH, including how to obtain it, see our cryptography links.)S
/F6 SF 0 172.2 M(SSH Communications Security)S
/F4 SF 36 159 M(A company founded by the authors of SSH. Offices are in Finland and California. They have a toolkit)S
36 145.8 M(for developers of IPsec applications.)S
/F6 SF 0 132.6 M(SSL)S
/F4 SF 36 119.4 M(Secure Sockets Layer, a set of encryption and authentication services for web browsers, developed by)S
36 106.2 M(Netscape. Widely used in Internet commerce. Also known as TLS.)S
/F6 SF 0 93 M(SSLeay)S
/F4 SF 36 79.8 M(A free implementation of SSL by Eric Young \(eay\) and others. Developed in Australia; not subject to)S
36 66.6 M(US export controls.)S
/F6 SF 0 53.4 M(static IP address)S
/F4 SF 36 40.2 M(an IP adddress which is pre-set on the machine itself, as opposed to a dynamic address which is)S
36 27 M(assigned by a DHCP server or obtained as part of the process of establishing a PPP or PPPoE)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(287)S
GR
SP
%%Page: 288 317
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(connection)S
/F6 SF 0 673.8 M(Stream cipher)S
/F4 SF 36 660.6 M(A symmetric cipher which produces a stream of output which can be combined \(often using XOR or)S
36 647.4 M(bytewise addition\) with the plaintext to produce ciphertext. Contrasts with block cipher.)S
36 621 M(IPsec does not use stream ciphers. Their main application is link-level encryption, for example of)S
36 607.8 M(voice, video or data streams on a wire or a radio signal.)S
/F6 SF 0 594.6 M(subnet)S
/F4 SF 36 581.4 M(A group of IP addresses which are logically one network, typically \(but not always\) assigned to a)S
36 568.2 M(group of physically connected machines. The range of addresses in a subnet is described using a)S
36 555 M(subnet mask. See next entry.)S
/F6 SF 0 541.8 M(subnet mask)S
/F4 SF 36 528.6 M(A method of indicating the addresses included in a subnet. Here are two equivalent examples:)S
72 515.4 M(101.101.101.0/24)S
/Fc SF 63.816 515.4 M(\340 )S
/F4 SF 72 502.2 M(101.101.101.0 with mask 255.255.255.0)S
/Fc SF 63.816 502.2 M(\340 )S
/F4 SF 36 489 M(The '24' is shorthand for a mask with the top 24 bits one and the rest zero. This is exactly the same as)S
36 475.8 M(255.255.255.0 which has three all-ones bytes and one all-zeros byte.)S
36 449.4 M(These indicate that, for this range of addresses, the top 24 bits are to be treated as naming a network)S
36 436.2 M(\(often referred to as "the 101.101.101.0/24 subnet"\) while most combinations of the low 8 bits can be)S
36 423 M(used to designate machines on that network. Two addresses are reserved; 101.101.101.0 refers to the)S
36 409.8 M(subnet rather than a specific machine while 101.101.101.255 is a broadcast address. 1 to 254 are)S
36 396.6 M(available for machines.)S
36 370.2 M(It is common to find subnets arranged in a hierarchy. For example, a large company might have a /16)S
36 357 M(subnet and allocate /24 subnets within that to departments. An ISP might have a large subnet and)S
36 343.8 M(allocate /26 subnets \(64 addresses, 62 usable\) to business customers and /29 subnets \(8 addresses, 6)S
36 330.6 M(usable\) to residential clients.)S
/F6 SF 0 317.4 M(S/WAN)S
/F4 SF 36 304.2 M(Secure Wide Area Network, a project involving RSA Data Security and a number of other companies.)S
36 291 M(The goal was to ensure that all their IPsec implementations would interoperate so that their customers)S
36 277.8 M(can communicate with each other securely.)S
/F6 SF 0 264.6 M(Symmetric cryptography)S
/F4 SF 36 251.4 M(Symmetric cryptography, also referred to as conventional or secret key cryptography, relies on a)S
/F6 SF 36 238.2 M(shared secret key)S
/F4 SF (, identical for sender and receiver. Sender encrypts with that key, receiver decrypts)S
36 225 M(with it. The idea is that an eavesdropper without the key be unable to read the messages. There are)S
36 211.8 M(two main types of symmetric cipher, block ciphers and stream ciphers.)S
36 185.4 M(Symmetric cryptography contrasts with public key or asymmetric systems where the two players use)S
36 172.2 M(different keys.)S
36 145.8 M(The great difficulty in symmetric cryptography is, of course, key management. Sender and receiver)S
/F6 SF 36 132.6 M(must)S
/F4 SF ( have identical keys and those keys)S
/F6 SF ( must)S
/F4 SF ( be kept secret from everyone else. Not too much of a)S
36 119.4 M(problem if only two people are involved and they can conveniently meet privately or employ a trusted)S
36 106.2 M(courier. Quite a problem, though, in other circumstances.)S
36 79.8 M(It gets much worse if there are many people. An application might be written to use only one key for)S
36 66.6 M(communication among 100 people, for example, but there would be serious problems. Do you)S
36 53.4 M(actually trust all of them that much? Do they trust each other that much? Should they? What is at risk)S
36 40.2 M(if that key is compromised? How are you going to distribute that key to everyone without risking its)S
36 27 M(secrecy? What do you do when one of them leaves the company? Will you even know?)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(288)S
GR
SP
%%Page: 289 318
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(On the other hand, if you need unique keys for every possible connection between a group of 100,)S
36 673.8 M(then each user must have 99 keys. You need either 99*100/2 = 4950)S
/F6 SF ( secure)S
/F4 SF ( key exchanges between)S
36 660.6 M(users or a central authority that)S
/F6 SF ( securely)S
/F4 SF ( distributes 100 key packets, each with a different set of 99)S
36 647.4 M(keys.)S
36 621 M(Either of these is possible, though tricky, for 100 users. Either becomes an administrative nightmare)S
36 607.8 M(for larger numbers. Moreover, keys)S
/F6 SF ( must)S
/F4 SF ( be changed regularly, so the problem of key distribution)S
36 594.6 M(comes up again and again. If you use the same key for many messages then an attacker has more text)S
36 581.4 M(to work with in an attempt to crack that key. Moreover, one successful crack will give him or her the)S
36 568.2 M(text of all those messages.)S
36 541.8 M(In short, the)S
/F6 SF ( hardest part of conventional cryptography is key management)S
/F4 SF (. Today the standard)S
36 528.6 M(solution is to build a hybrid system using public key techniques to manage keys.)S
/F6 SF 0 515.4 M(T)S
0 502.2 M(TIS)S
/F4 SF 36 489 M(Trusted Information Systems, a firewall vendor now part of NAI. Their Gauntlet product offers IPsec)S
36 475.8 M(VPN services. TIS implemented the first version of Secure DNS on a DARPA contract.)S
/F6 SF 0 462.6 M(TLS)S
/F5 SF 36 449.4 M(T)S
/F4 SF (ransport)S
/F5 SF ( L)S
/F4 SF (ayer)S
/F5 SF ( S)S
/F4 SF (ecurity, a newer name for SSL.)S
/F6 SF 0 436.2 M(TOS field)S
/F4 SF 36 423 M(The)S
/F7 SF ( T)S
/F4 SF (ype)S
/F7 SF ( O)S
/F4 SF (f)S
/F7 SF ( S)S
/F4 SF (ervice field in an IP header, used to control qualkity of service routing.)S
/F6 SF 0 409.8 M(Traffic analysis)S
/F4 SF 36 396.6 M(Deducing useful intelligence from patterns of message traffic, without breaking codes or reading the)S
36 383.4 M(messages. In one case during World War II, the British guessed an attack was coming because all)S
36 370.2 M(German radio traffic stopped. The "radio silence" order, intended to preserve security, actually gave)S
36 357 M(the game away.)S
36 330.6 M(In an industrial espionage situation, one might deduce something interesting just by knowing that)S
36 317.4 M(company A and company B were talking, especially if one were able to tell which departments were)S
36 304.2 M(involved, or if one already knew that A was looking for acquisitions and B was seeking funds for)S
36 291 M(expansion.)S
36 264.6 M(In general, traffic analysis by itself is not very useful. However, in the context of a larger intelligence)S
36 251.4 M(effort where quite a bit is already known, it can be very useful. When you are solving a complex)S
36 238.2 M(puzzle, every little bit helps.)S
36 211.8 M(IPsec itself does not defend against traffic analysis, but carefully thought out systems using IPsec can)S
36 198.6 M(provide at least partial protection. In particular, one might want to encrypt more traffic than was)S
36 185.4 M(strictly necessary, route things in odd ways, or even encrypt dummy packets, to confuse the analyst.)S
36 172.2 M(We discuss this here.)S
/F6 SF 0 159 M(Transport mode)S
/F4 SF 36 145.8 M(An IPsec application in which the IPsec gateway is the destination of the protected packets, a machine)S
36 132.6 M(acts as its own gateway. Contrast with tunnel mode.)S
/F6 SF 0 119.4 M(Triple DES)S
/F4 SF 36 106.2 M(see 3DES)S
/F6 SF 0 93 M(TTL)S
/F7 SF 36 79.8 M(T)S
/F4 SF (ime)S
/F7 SF ( T)S
/F4 SF (o)S
/F7 SF ( L)S
/F4 SF (ive, used to control DNS caching. Servers discard cached records whose TTL expires)S
/F6 SF 0 66.6 M(Tunnel mode)S
/F4 SF 36 53.4 M(An IPsec application in which an IPsec gateway provides protection for packets to and from other)S
36 40.2 M(systems. Contrast with transport mode.)S
/F6 SF 0 27 M(Two-key Triple DES)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(289)S
GR
SP
%%Page: 290 319
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(A variant of triple DES or 3DES in which only two keys are used. As in the three-key version, the)S
36 673.8 M(order of operations is EDE or encrypt-decrypt-encrypt, but in the two-key variant the first and third)S
36 660.6 M(keys are the same.)S
36 634.2 M(3DES with three keys has 3*56 = 168 bits of key but has only 112-bit strength against a)S
36 621 M(meet-in-the-middle attack, so it is possible that the two key version is just as strong. Last I looked,)S
36 607.8 M(this was an open question in the research literature.)S
36 581.4 M(RFC 2451 defines triple DES for IPsec as the three-key variant. The two-key variant should not be)S
36 568.2 M(used and is not implemented directly in Linux FreeS/WAN. It cannot be used in automatically keyed)S
36 555 M(mode without major fiddles in the source code. For manually keyed connections, you could make)S
36 541.8 M(Linux FreeS/WAN talk to a two-key implementation by setting two keys the same in /etc/ipsec.conf.)S
/F6 SF 0 528.6 M(U)S
0 515.4 M(V)S
0 502.2 M(Virtual Interface)S
/F4 SF 36 489 M(A Linux feature which allows one physical network interface to have two or more IP addresses. See)S
36 475.8 M(the)S
/F6 SF ( Linux Network Administrator's Guide)S
/F4 SF ( in book form or on the web for details.)S
/F6 SF 0 462.6 M(Virtual Private Network)S
/F4 SF 36 449.4 M(see VPN)S
/F6 SF 0 436.2 M(VPN)S
/F5 SF 36 423 M(V)S
/F4 SF (irtual)S
/F5 SF ( P)S
/F4 SF (rivate)S
/F5 SF ( N)S
/F4 SF (etwork, a network which can safely be used as if it were private, even though some)S
36 409.8 M(of its communication uses insecure connections. All traffic on those connections is encrypted.)S
36 383.4 M(IPsec is not the only technique available for building VPNs, but it is the only method defined by)S
36 370.2 M(RFCs and supported by many vendors. VPNs are by no means the only thing you can do with IPsec,)S
36 357 M(but they may be the most important application for many users.)S
/F6 SF 0 343.8 M(VPNC)S
/F4 SF 36 330.6 M(Virtual Private Network Consortium, an association of vendors of VPN products.)S
/F6 SF 0 317.4 M(W)S
0 304.2 M(Wassenaar Arrangement)S
/F4 SF 36 291 M(An international agreement restricting export of munitions and other tools of war. Unfortunately,)S
36 277.8 M(cryptographic software is also restricted under the current version of the agreement. Discussion.)S
/F6 SF 0 264.6 M(Web of Trust)S
/F4 SF 36 251.4 M(PGP's method of certifying keys. Any user can sign a key; you decide which signatures or)S
36 238.2 M(combinations of signatures to accept as certification. This contrasts with the hierarchy of CAs)S
36 225 M(\(Certification Authorities\) used in many PKIs \(Public Key Infrastructures\).)S
36 198.6 M(See Global Trust Register for an interesting addition to the web of trust.)S
/F6 SF 0 185.4 M(WEP \(Wired Equivalent Privacy\))S
/F4 SF 36 172.2 M(The cryptographic part of the IEEE standard for wireless LANs. As the name suggests, this is)S
36 159 M(designed to be only as secure as a normal wired ethernet. Anyone with a network conection can tap it.)S
36 145.8 M(Its advocates would claim this is good design, refusing to build in complex features beyond the actual)S
36 132.6 M(requirements.)S
36 106.2 M(Critics refer to WEP as "Wire)S
/F6 SF (tap)S
/F4 SF ( Equivalent Privacy", and consider it a horribly flawed design based)S
36 93 M(on bogus "requirements". You do not control radio waves as you might control your wires, so the)S
36 79.8 M(metaphor in the rationale is utterly inapplicable. A security policy that chooses not to invest resources)S
36 66.6 M(in protecting against certain attacks which can only be conducted by people physically plugged into)S
36 53.4 M(your LAN may or may not be reasonable. The same policy is completely unreasonable when someone)S
36 40.2 M(can "plug in" from a laptop half a block away..)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(290)S
GR
SP
%%Page: 291 320
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(There has been considerable analysis indicating that WEP is seriously flawed. A FAQ on attacks)S
36 673.8 M(against WEP is available. Part of it reads:)S
72 647.4 M(... attacks are practical to mount using only inexpensive off-the-shelf equipment. We)S
72 634.2 M(recommend that anyone using an 802.11 wireless network not rely on WEP for)S
72 621 M(security, and employ other security measures to protect their wireless network. Note)S
72 607.8 M(that our attacks apply to both 40-bit and the so-called 128-bit versions of WEP)S
72 594.6 M(equally well.)S
36 568.2 M(WEP appears to be yet another instance of governments, and unfortunately some vendors and)S
36 555 M(standards bodies, deliberately promoting hopelessly flawed "security" products, apparently mainly for)S
36 541.8 M(the benefit of eavesdropping agencies. See this discussion.)S
/F6 SF 0 528.6 M(X)S
0 515.4 M(X.509)S
/F4 SF 36 502.2 M(A standard from the ITU \(International Telecommunication Union\), for hierarchical directories with)S
36 489 M(authentication services, used in many PKI implementations.)S
36 462.6 M(Use of X.509 services, via the LDAP protocol, for certification of keys is allowed but not required by)S
36 449.4 M(the IPsec RFCs. It is not yet implemented in Linux FreeS/WAN.)S
/F6 SF 0 436.2 M(Xedia)S
/F4 SF 36 423 M(A vendor of router and Internet access products, now part of Lucent. Their QVPN products)S
36 409.8 M(interoperate with Linux FreeS/WAN; see our interop document.)S
/F6 SF 0 396.6 M(Y)S
0 383.4 M(Z)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Definitions)S
468.652 0 M(291)S
GR
SP
%%Page: 292 321
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
0 612.6 M 487.0 2.0 F
0 531.4 M 487.0 2.0 F
0 463.4 M 487.0 2.0 F
0 369 M 487.0 2.0 F
0 327.4 M 487.0 2.0 F
0 272.6 M 487.0 2.0 F
0 204.6 M 487.0 2.0 F
0 163 M 487.0 2.0 F
0 55.4 M 487.0 2.0 F
20 FS/F9 SF 0 678 M(Bibliography for the Linux FreeS/WAN project)S
11 FS/F4 SF 0 649.8 M(For extensive bibliographic links, see the Collection of Computer Science Bibliographies)S
0 623.4 M(See our web links for material available online.)S
0 595 M(Carlisle Adams and Steve Lloyd)S
/F6 SF ( Understanding Public Key Infrastructure)S
/F4 SF 0 581.8 M(Macmillan 1999 ISBN 1-57870-166-x)S
0 555.4 M(An overview, mainly concentrating on policy and strategic issues rather than the technical details. Both)S
0 542.2 M(authors work for PKI vendor Entrust.)S
0 513.8 M(Albitz, Liu & Loukides)S
/F6 SF ( DNS & BIND)S
/F4 SF ( 3rd edition)S
0 500.6 M(O'Reilly 1998 ISBN 1-56592-512-2)S
0 474.2 M(The standard reference on the Domain Name Service and Berkeley Internet Name Daemon.)S
0 445.8 M(Ross Anderson,)S
/F6 SF ( Security Engineering - a Guide to Building Dependable Distributed Systems)S
/F4 SF 0 432.6 M(Wiley, 2001, ISBN 0471389226)S
0 406.2 M(Easily the best book for the security professional I have seen.)S
/F7 SF ( Highly recommended)S
/F4 SF (. See the book web page.)S
0 379.8 M(This is quite readable, but Schneier's Secrets and Lies might be an easier introduction.)S
0 351.4 M(Bamford)S
/F6 SF ( The Puzzle Palace, A report on NSA, Americas's most Secret Agency)S
/F4 SF 0 338.2 M(Houghton Mifflin 1982 ISBN 0-395-31286-8)S
0 309.8 M(Bamford)S
/F6 SF ( Body of Secrets)S
/F4 SF 0 283.4 M(The sequel.)S
0 255 M(David Bander,)S
/F6 SF ( Linux Security Toolkit)S
/F4 SF 0 241.8 M(IDG Books, 2000, ISBN: 0764546902)S
0 215.4 M(This book has a short section on FreeS/WAN and includes Caldera Linux on CD.)S
0 187 M(Chapman, Zwicky & Russell,)S
/F6 SF ( Building Internet Firewalls)S
/F4 SF 0 173.8 M(O'Reilly 1995 ISBN 1-56592-124-0)S
0 145.4 M(Cheswick and Bellovin)S
/F6 SF ( Firewalls and Internet Security: Repelling the Wily Hacker)S
/F4 SF 0 132.2 M(Addison-Wesley 1994 ISBN 0201633574)S
0 105.8 M(A fine book on firewalls in particular and security in general from two of AT&T's system adminstrators.)S
0 79.4 M(Bellovin has also done a number of papers on IPsec and co-authored a paper on a large FreeS/WAN)S
0 66.2 M(application.)S
0 37.8 M(Comer)S
/F6 SF ( Internetworking with TCP/IP)S
/F4 SF 0 24.6 M(Prentice Hall)S
/F8 SF 0 0 M(Bibliography for the Linux FreeS/WAN project)S
468.652 0 M(292)S
GR
SP
%%Page: 293 322
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
0 570.6 M 487.0 2.0 F
0 529 M 487.0 2.0 F
0 474.2 M 487.0 2.0 F
0 300.6 M 487.0 2.0 F
0 219.4 M 487.0 2.0 F
0 177.8 M 487.0 2.0 F
0 109.8 M 487.0 2.0 F
11 FS/F4 SF 36 687 M(Vol. I: Principles, Protocols, & Architecture, 3rd Ed. 1995 ISBN:0-13-216987-8)S
/Fc SF 28.19 687 M(\267 )S
/F4 SF 36 673.8 M(Vol. II: Design, Implementation, & Internals, 2nd Ed. 1994 ISBN:0-13-125527-4)S
/Fc SF 28.19 673.8 M(\267 )S
/F4 SF 36 660.6 M(Vol. III: Client/Server Programming & Applications)S
72 647.4 M(AT&T TLI Version 1994 ISBN:0-13-474230-3)S
/Fc SF 60.967 647.4 M(\250 )S
/F4 SF 72 634.2 M(BSD Socket Version 1996 ISBN:0-13-260969-X)S
/Fc SF 60.967 634.2 M(\250 )S
/F4 SF 72 621 M(Windows Sockets Version 1997 ISBN:0-13-848714-6)S
/Fc SF 60.967 621 M(\250 )S
28.19 660.6 M(\267 )S
/F4 SF 0 594.6 M(If you need to deal with the details of the network protocols, read either this series or the Stevens and Wright)S
0 581.4 M(series before you start reading the RFCs.)S
0 553 M(Diffie and Landau)S
/F6 SF ( Privacy on the Line: The Politics of Wiretapping and Encryption)S
/F4 SF 0 539.8 M(MIT press 1998 ISBN 0-262-04167-7 \(hardcover\) or 0-262-54100-9)S
0 511.4 M(Doraswamy and Harkins)S
/F6 SF ( IP Sec: The New Security Standard for the Internet, Intranets and Virtual Private)S
0 498.2 M(Networks)S
/F4 SF 0 485 M(Prentice Hall 1999 ISBN: 0130118982)S
0 456.6 M(Electronic Frontier Foundation)S
/F6 SF ( Cracking DES: Secrets of Encryption Research, Wiretap Politics and Chip)S
0 443.4 M(Design)S
/F4 SF 0 430.2 M(O'Reilly 1998 ISBN 1-56592-520-3)S
0 403.8 M(To conclusively demonstrate that DES is inadequate for continued use, the EFF built a machine for just over)S
0 390.6 M($200,000 that breaks DES encryption in under five days on average, under nine in the worst case.)S
0 364.2 M(The book provides details of their design and, perhaps even more important, discusses why they felt the)S
0 351 M(project was necessary. Recommended for anyone interested in any of the three topics mentioned in the)S
0 337.8 M(subtitle.)S
0 311.4 M(See also the EFF page on this project and our discussion of DES insecurity.)S
0 283 M(Martin Freiss)S
/F6 SF ( Protecting Networks with SATAN)S
/F4 SF 0 269.8 M(O'Reilly 1998 ISBN 1-56592-425-8)S
0 256.6 M(translated from a 1996 work in German)S
0 230.2 M(SATAN is a Security Administrator's Tool for Analysing Networks. This book is a tutorial in its use.)S
0 201.8 M(Gaidosch and Kunzinger)S
/F6 SF ( A Guide to Virtual Private Networks)S
/F4 SF 0 188.6 M(Prentice Hall 1999 ISBN: 0130839647)S
0 160.2 M(Simson Garfinkel)S
/F6 SF ( Database Nation: the death of privacy in the 21st century)S
/F4 SF 0 147 M(O'Reilly 2000 ISBN 1-56592-653-6)S
0 120.6 M(A thoughtful and rather scary book.)S
0 92.2 M(Simson Garfinkel)S
/F6 SF ( PGP: Pretty Good Privacy)S
/F4 SF 0 79 M(O'Reilly 1995 ISBN 1-56592-098-8)S
0 52.6 M(An excellent introduction and user manual for the PGP email-encryption package. PGP is a good package)S
0 39.4 M(with a complex and poorly-designed user interface. This book or one like it is a must for anyone who has to)S
0 26.2 M(use it at length.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Bibliography for the Linux FreeS/WAN project)S
468.652 0 M(293)S
GR
SP
%%Page: 294 323
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
0 623.4 M 487.0 2.0 F
0 529 M 487.0 2.0 F
0 434.6 M 487.0 2.0 F
0 393 M 487.0 2.0 F
0 325 M 487.0 2.0 F
0 257 M 487.0 2.0 F
0 215.4 M 487.0 2.0 F
0 94.6 M 487.0 2.0 F
11 FS/F4 SF 0 687 M(The book covers using PGP in Unix, PC and Macintosh environments, plus considerable background material)S
0 673.8 M(on both the technical and political issues around cryptography.)S
0 647.4 M(The book is now seriously out of date. It does not cover recent developments such as commercial versions)S
0 634.2 M(since PGP 5, the Open PGP standard or GNU PG..)S
0 605.8 M(Garfinkel and Spafford)S
/F6 SF ( Practical Unix Security)S
/F4 SF 0 592.6 M(O'Reilly 1996 ISBN 1-56592-148-8)S
0 566.2 M(A standard reference.)S
0 539.8 M(Spafford's web page has an excellent collection of crypto and security links.)S
0 511.4 M(David Kahn)S
/F6 SF ( The Codebreakers: the Comprehensive History of Secret Communications from Ancient Times to)S
0 498.2 M(the Internet)S
/F4 SF 0 485 M(second edition Scribner 1996 ISBN 0684831309)S
0 458.6 M(A history of codes and code-breaking from ancient Egypt to the 20th century. Well-written and exhaustively)S
0 445.4 M(researched.)S
/F7 SF ( Highly recommended)S
/F4 SF (, even though it does not have much on computer cryptography.)S
0 417 M(David Kahn)S
/F6 SF ( Seizing the Enigma, The Race to Break the German U-Boat codes, 1939-1943)S
/F4 SF 0 403.8 M(Houghton Mifflin 1991 ISBN 0-395-42739-8)S
0 375.4 M(Olaf Kirch)S
/F6 SF ( Linux Network Administrator's Guide)S
/F4 SF 0 362.2 M(O'Reilly 1995 ISBN 1-56592-087-2)S
0 335.8 M(Now becoming somewhat dated in places, but still a good introductory book and general reference.)S
0 307.4 M(Kolesnikov and Hatch,)S
/F6 SF ( Building Linux Virtual Private Networks \(VPNs\))S
/F4 SF 0 294.2 M(New Riders 2002)S
0 267.8 M(This has had a number of favorable reviews, including this one on Slashdot. The book has a web site.)S
0 239.4 M(Pete Loshin)S
/F6 SF ( Big Book of IPsec RFCs)S
/F4 SF 0 226.2 M(Morgan Kaufmann 2000 ISBN: 0-12-455839-9)S
0 197.8 M(Steven Levy)S
/F6 SF ( Crypto: How the Code Rebels Beat the Government -- Saving Privacy in the Digital Age)S
/F4 SF 0 184.6 M(Penguin 2001, ISBN 0-670--85950-8)S
/F7 SF 0 158.2 M(Highly recommended)S
/F4 SF (. A fine history of recent \(about 1970-2000\) developments in the field, and the related)S
0 145 M(political controversies. FreeS/WAN project founder and leader John Gilmore appears several times.)S
0 118.6 M(The book does not cover IPsec or FreeS/WAN, but this project is very much another battle in the same war.)S
0 105.4 M(See our discussion of the politics.)S
0 77 M(Matyas, Anderson et al.)S
/F6 SF ( The Global Trust Register)S
/F4 SF 0 63.8 M(Northgate Consultants Ltd 1998 ISBN: 0953239705)S
0 50.6 M(hard cover edition MIT Press 1999 ISBN 0262511053)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Bibliography for the Linux FreeS/WAN project)S
468.652 0 M(294)S
GR
SP
%%Page: 295 324
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
0 623.4 M 487.0 2.0 F
0 542.2 M 487.0 2.0 F
0 461 M 487.0 2.0 F
0 366.6 M 487.0 2.0 F
0 245.8 M 487.0 2.0 F
0 151.4 M 487.0 2.0 F
0 30.6 M 487.0 2.0 F
11 FS/F4 SF 0 687 M(From their web page:)S
36 660.6 M(This book is a register of the fingerprints of the world's most important public keys; it)S
36 647.4 M(implements a top-level certification authority \(CA\) using paper and ink rather than in an)S
36 634.2 M(electronic system.)S
0 605.8 M(Menezies, van Oorschot and Vanstone)S
/F6 SF ( Handbook of Applied Cryptography)S
/F4 SF 0 592.6 M(CRC Press 1997)S
0 579.4 M(ISBN 0-8493-8523-7)S
0 553 M(An excellent reference. Read Schneier before tackling this.)S
0 524.6 M(Michael Padlipsky)S
/F6 SF ( Elements of Networking Style)S
/F4 SF 0 511.4 M(Prentice-Hall 1985 ISBN 0-13-268111-0 or 0-13-268129-3)S
0 485 M(Probably)S
/F7 SF ( the funniest technical book ever written)S
/F4 SF (, this is a vicious but well-reasoned attack on the OSI)S
0 471.8 M("seven layer model" and all that went with it. Several chapters of it are also available as RFCs 871 to 875.)S
0 443.4 M(John S. Quarterman)S
/F6 SF ( The Matrix: Computer Networks and Conferencing Systems Worldwide)S
/F4 SF 0 430.2 M(Digital Press 1990 ISBN 155558-033-5)S
0 417 M(Prentice-Hall ISBN 0-13-565607-9)S
0 390.6 M(The best general treatment of computer-mediated communication we have seen. It naturally has much to say)S
0 377.4 M(about the Internet, but also covers UUCP, Fidonet and so on.)S
0 349 M(David Ranch)S
/F6 SF ( Securing Linux Step by Step)S
/F4 SF 0 335.8 M(SANS Institute, 1999)S
0 309.4 M(SANS is a respected organisation, this guide is part of a well-known series, and Ranch has previously written)S
0 296.2 M(the useful Trinity OS guide to securing Linux, so my guess would be this is a pretty good book. I haven't read)S
0 283 M(it yet, so I'm not certain. It can be ordered online from SANS.)S
0 256.6 M(Note \(Mar 1, 2002\): a new edition with different editors in the works. Expect it this year.)S
0 228.2 M(Bruce Schneier)S
/F6 SF ( Applied Cryptography, Second Edition)S
/F4 SF 0 215 M(John Wiley & Sons, 1996)S
0 201.8 M(ISBN 0-471-12845-7 hardcover)S
0 188.6 M(ISBN 0-471-11709-9 paperback)S
0 162.2 M(A standard reference on computer cryptography. For more recent essays, see the author's company's web site.)S
0 133.8 M(Bruce Schneier)S
/F6 SF ( Secrets and Lies)S
/F4 SF 0 120.6 M(Wiley 2000, ISBN 0-471-25311-1)S
0 94.2 M(An interesting discussion of security and privacy issues, written with more of an "executive overview")S
0 81 M(approach rather than a narrow focus on the technical issues.)S
/F7 SF ( Highly recommended)S
/F4 SF (.)S
0 54.6 M(This is worth reading even if you already understand security issues, or think you do. To go deeper, follow it)S
0 41.4 M(with Anderson's Security Engineering.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Bibliography for the Linux FreeS/WAN project)S
468.652 0 M(295)S
GR
SP
%%Page: 296 325
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
0 557.4 M 487.0 2.0 F
0 502.6 M 487.0 2.0 F
0 434.6 M 487.0 2.0 F
0 327 M 487.0 2.0 F
0 179.8 M 487.0 2.0 F
0 138.2 M 487.0 2.0 F
11 FS/F4 SF 0 687 M(Scott, Wolfe and Irwin)S
/F6 SF ( Virtual Private Networks)S
/F4 SF 0 673.8 M(2nd edition, O'Reilly 1999 ISBN: 1-56592-529-7)S
0 647.4 M(This is the only O'Reilly book, out of a dozen I own, that I'm disappointed with. It deals mainly with building)S
0 634.2 M(VPNs with various proprietary tools -- PPTP, SSH, Cisco PIX, ... -- and touches only lightly on)S
0 621 M(IPsec-based approaches.)S
0 594.6 M(That said, it appears to deal competently with what it does cover and it has readable explanations of many)S
0 581.4 M(basic VPN and security concepts. It may be exactly what some readers require, even if I find the emphasis)S
0 568.2 M(unfortunate.)S
0 539.8 M(Kurt Seifried)S
/F6 SF ( Linux Administrator's Security Guide)S
/F4 SF 0 513.4 M(Available online from Security Portal. It has fairly extensive coverage of IPsec.)S
0 485 M(Richard E Smith)S
/F6 SF ( Internet Cryptography)S
/F4 SF 0 471.8 M(ISBN 0-201-92480-3, Addison Wesley, 1997)S
0 445.4 M(See the book's home page)S
0 417 M(Neal Stephenson)S
/F6 SF ( Cryptonomicon)S
/F4 SF 0 403.8 M(Hardcover ISBN -380-97346-4, Avon, 1999.)S
0 377.4 M(A novel in which cryptography and the net figure prominently.)S
/F7 SF ( Highly recommended)S
/F4 SF (: I liked it enough I)S
0 364.2 M(immediately went out and bought all the author's other books.)S
0 337.8 M(There is also a paperback edition. Sequels are expected.)S
0 309.4 M(Stevens and Wright)S
/F6 SF ( TCP/IP Illustrated)S
/F4 SF 0 296.2 M(Addison-Wesley)S
36 269.8 M(Vol. I: The Protocols 1994 ISBN:0-201-63346-9)S
/Fc SF 28.19 269.8 M(\267 )S
/F4 SF 36 256.6 M(Vol. II: The Implementation 1995 ISBN:0-201-63354-X)S
/Fc SF 28.19 256.6 M(\267 )S
/F4 SF 36 243.4 M(Vol. III: TCP for Transactions, HTTP, NNTP, and the UNIX Domain Protocols 1996 ISBN:)S
36 230.2 M(0-201-63495-3)S
/Fc SF 28.19 243.4 M(\267 )S
/F4 SF 0 203.8 M(If you need to deal with the details of the network protocols, read either this series or the Comer series before)S
0 190.6 M(you start reading the RFCs.)S
0 162.2 M(Rubini)S
/F6 SF ( Linux Device Drivers)S
/F4 SF 0 149 M(O'Reilly & Associates, Inc. 1998 ISBN 1-56592-292-1)S
0 120.6 M(Robert Zeigler)S
/F6 SF ( Linux Firewalls)S
/F4 SF 0 107.4 M(Newriders Publishing, 2000 ISBN 0-7537-0900-9)S
0 81 M(A good book, with detailed coverage of ipchains\(8\) firewalls and of many related issues.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Bibliography for the Linux FreeS/WAN project)S
468.652 0 M(296)S
GR
SP
%%Page: 297 326
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(IPsec RFCs and related documents)S
17 FS/F9 SF 0 643.8 M(The RFCs.tar.gz Distribution File)S
11 FS/F4 SF 0 616.2 M(The Linux FreeS/WAN distribution is available from our primary distribution site and various mirror sites. To)S
0 603 M(give people more control over their downloads, the RFCs that define IP security are bundled separately in the)S
0 589.8 M(file RFCs.tar.gz.)S
0 563.4 M(The file you are reading is included in the main distribution and is available on the web site. It describes the)S
0 550.2 M(RFCs included in the RFCs.tar.gz bundle and gives some pointers to other ways to get them.)S
17 FS/F9 SF 0 517.8 M(Other sources for RFCs & Internet drafts)S
14 FS/F9 SF 0 487.2 M(RFCs)S
11 FS/F4 SF 0 460.2 M(RFCs are downloadble at many places around the net such as:)S
36 433.8 M(http://www.rfc-editor.org)S
/Fc SF 28.19 433.8 M(\267 )S
/F4 SF 36 420.6 M(NSF.net)S
/Fc SF 28.19 420.6 M(\267 )S
/F4 SF 36 407.4 M(Sunsite in the UK)S
/Fc SF 28.19 407.4 M(\267 )S
/F4 SF 0 381 M(browsable in HTML form at others such as:)S
36 354.6 M(landfield.com)S
/Fc SF 28.19 354.6 M(\267 )S
/F4 SF 36 341.4 M(Connected Internet Encyclopedia)S
/Fc SF 28.19 341.4 M(\267 )S
/F4 SF 0 315 M(and some of them are available in translation:)S
36 288.6 M(French)S
/Fc SF 28.19 288.6 M(\267 )S
/F4 SF 0 262.2 M(There is also a published Big Book of IPSEC RFCs.)S
14 FS/F9 SF 0 232.8 M(Internet Drafts)S
11 FS/F4 SF 0 205.8 M(Internet Drafts, working documents which sometimes evolve into RFCs, are also available.)S
36 179.4 M(Overall reference page)S
/Fc SF 28.19 179.4 M(\267 )S
/F4 SF 36 166.2 M(IPsec working group)S
/Fc SF 28.19 166.2 M(\267 )S
/F4 SF 36 153 M(IPSRA \(IPsec Remote Access\) working group)S
/Fc SF 28.19 153 M(\267 )S
/F4 SF 36 139.8 M(IPsec Policy working group)S
/Fc SF 28.19 139.8 M(\267 )S
/F4 SF 36 126.6 M(KINK \(Kerberized Internet Negotiation of Keys\) working group)S
/Fc SF 28.19 126.6 M(\267 )S
/F4 SF 0 100.2 M(Note: some of these may be obsolete, replaced by later drafts or by RFCs.)S
14 FS/F9 SF 0 70.8 M(FIPS standards)S
11 FS/F4 SF 0 43.8 M(Some things used by IPsec, such as DES and SHA, are defined by US government standards called FIPS. The)S
0 30.6 M(issuing organisation, NIST, have a FIPS home page.)S
/F8 SF 0 0 M(IPsec RFCs and related documents)S
468.652 0 M(297)S
GR
SP
%%Page: 298 327
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
17 FS/F9 SF 0 681 M(What's in the RFCs.tar.gz bundle?)S
11 FS/F4 SF 0 653.4 M(All filenames are of the form rfc*.txt, with the * replaced with the RFC number.)S
9 FS/F0 SF 0 629 M(RFC#        Title)S
14 FS/F9 SF 0 600 M(Overview RFCs)S
9 FS/F0 SF 0 575 M(2401        Security Architecture for the Internet Protocol)S
0 564.2 M(2411        IP Security Document Roadmap)S
14 FS/F9 SF 0 535.2 M(Basic protocols)S
9 FS/F0 SF 0 510.2 M(2402        IP Authentication Header)S
0 499.4 M(2406        IP Encapsulating Security Payload \(ESP\))S
14 FS/F9 SF 0 470.4 M(Key management)S
9 FS/F0 SF 0 445.4 M(2367        PF_KEY Key Management API, Version 2)S
0 434.6 M(2407        The Internet IP Security Domain of Interpretation for ISAKMP)S
0 423.8 M(2408        Internet Security Association and Key Management Protocol \(ISAKMP\))S
0 413 M(2409        The Internet Key Exchange \(IKE\))S
0 402.2 M(2412        The OAKLEY Key Determination Protocol)S
0 391.4 M(2528        Internet X.509 Public Key Infrastructure)S
14 FS/F9 SF 0 362.4 M(Details of various things used)S
9 FS/F0 SF 0 337.4 M(2085        HMAC-MD5 IP Authentication with Replay Prevention)S
0 326.6 M(2104        HMAC: Keyed-Hashing for Message Authentication)S
0 315.8 M(2202        Test Cases for HMAC-MD5 and HMAC-SHA-1)S
0 305 M(2207        RSVP Extensions for IPSEC Data Flows)S
0 294.2 M(2403        The Use of HMAC-MD5-96 within ESP and AH)S
0 283.4 M(2404        The Use of HMAC-SHA-1-96 within ESP and AH)S
0 272.6 M(2405        The ESP DES-CBC Cipher Algorithm With Explicit IV)S
0 261.8 M(2410        The NULL Encryption Algorithm and Its Use With IPsec)S
0 251 M(2451        The ESP CBC-Mode Cipher Algorithms)S
0 240.2 M(2521        ICMP Security Failures Messages)S
14 FS/F9 SF 0 211.2 M(Older RFCs which may be referenced)S
9 FS/F0 SF 0 186.2 M(1321        The MD5 Message-Digest Algorithm)S
0 175.4 M(1828        IP Authentication using Keyed MD5)S
0 164.6 M(1829        The ESP DES-CBC Transform)S
0 153.8 M(1851        The ESP Triple DES Transform)S
0 143 M(1852        IP Authentication using Keyed SHA)S
14 FS/F9 SF 0 114 M(RFCs for secure DNS service, which IPsec may use)S
9 FS/F0 SF 0 89 M(2137        Secure Domain Name System Dynamic Update)S
0 78.2 M(2230        Key Exchange Delegation Record for the DNS)S
0 67.4 M(2535        Domain Name System Security Extensions)S
0 56.6 M(2536        DSA KEYs and SIGs in the Domain Name System \(DNS\))S
0 45.8 M(2537        RSA/MD5 KEYs and SIGs in the Domain Name System \(DNS\))S
0 35 M(2538        Storing Certificates in the Domain Name System \(DNS\))S
0 24.2 M(2539        Storage of Diffie-Hellman Keys in the Domain Name System \(DNS\))S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(What's in the RFCs.tar.gz bundle?)S
468.652 0 M(298)S
GR
SP
%%Page: 299 328
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
14 FS/F9 SF 0 684 M(RFCs labelled "experimental")S
9 FS/F0 SF 0 659 M(2521        ICMP Security Failures Messages)S
0 648.2 M(2522        Photuris: Session-Key Management Protocol)S
0 637.4 M(2523        Photuris: Extended Schemes and Attributes)S
14 FS/F9 SF 0 608.4 M(Related RFCs)S
9 FS/F0 SF 0 583.4 M(1750        Randomness Recommendations for Security)S
0 572.6 M(1918        Address Allocation for Private Internets)S
0 561.8 M(1984        IAB and IESG Statement on Cryptographic Technology and the Internet)S
0 551 M(2144        The CAST-128 Encryption Algorithm)S
11 FS/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(RFCs labelled "experimental")S
468.652 0 M(299)S
GR
SP
%%Page: 300 329
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(Distribution Roadmap: What's Where in Linux)S
0 654 M(FreeS/WAN)S
11 FS/F4 SF 0 625.8 M(This file is a guide to the locations of files within the FreeS/WAN distribution. Everything described here)S
0 612.6 M(should be on your system once you download, gunzip, and untar the distribution.)S
0 586.2 M(This distribution contains two major subsystems)S
/F6 SF 0 559.8 M(KLIPS)S
/F4 SF 36 546.6 M(the kernel code)S
/F6 SF 0 533.4 M(Pluto)S
/F4 SF 36 520.2 M(the user-level key-management daemon)S
0 493.8 M(plus assorted odds and ends.)S
17 FS/F9 SF 0 461.4 M(Top directory)S
11 FS/F4 SF 0 433.8 M(The top directory has essential information in text files:)S
/F6 SF 0 407.4 M(README)S
/F4 SF 36 394.2 M(introduction to the software)S
/F6 SF 0 381 M(INSTALL)S
/F4 SF 36 367.8 M(short experts-only installation procedures. More detalied procedures are in installation and)S
36 354.6 M(configuration HTML documents.)S
/F6 SF 0 341.4 M(BUGS)S
/F4 SF 36 328.2 M(major known bugs in the current release.)S
/F6 SF 0 315 M(CHANGES)S
/F4 SF 36 301.8 M(changes from previous releases)S
/F6 SF 0 288.6 M(CREDITS)S
/F4 SF 36 275.4 M(acknowledgement of contributors)S
/F6 SF 0 262.2 M(COPYING)S
/F4 SF 36 249 M(licensing and distribution information)S
17 FS/F9 SF 0 216.6 M(Documentation)S
11 FS/F4 SF 0 189 M(The doc directory contains the bulk of the documentation, most of it in HTML format. See the index file for)S
0 175.8 M(details.)S
17 FS/F9 SF 0 143.4 M(KLIPS: kernel IP security)S
11 FS/F4 SF 0 115.8 M(KLIPS is)S
/F7 SF ( K)S
/F4 SF (erne)S
/F7 SF (L IP S)S
/F4 SF (ecurity. It lives in the klips directory, of course.)S
/F6 SF 0 89.4 M(klips/doc)S
/F4 SF 36 76.2 M(documentation)S
/F6 SF 0 63 M(klips/patches)S
/F4 SF 36 49.8 M(patches for existing kernel files)S
/F6 SF 0 36.6 M(klips/test)S
/F8 SF 0 0 M(Distribution Roadmap: What's Where in Linux FreeS/WAN)S
468.652 0 M(300)S
GR
SP
%%Page: 301 330
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(test stuff)S
/F6 SF 0 673.8 M(klips/utils)S
/F4 SF 36 660.6 M(low-level user utilities)S
/F6 SF 0 647.4 M(klips/net/ipsec)S
/F4 SF 36 634.2 M(actual klips kernel files)S
/F6 SF 0 621 M(klips/src)S
/F4 SF 36 607.8 M(symbolic link to klips/net/ipsec)S
36 581.4 M(The "make insert" step of installation installs the patches and makes a symbolic link from the kernel)S
36 568.2 M(tree to klips/net/ipsec. The odd name of klips/net/ipsec is dictated by some annoying limitations of the)S
36 555 M(scripts which build the Linux kernel. The symbolic-link business is a bit messy, but all the)S
36 541.8 M(alternatives are worse.)S
/F6 SF 0 528.6 M(klips/utils)S
/F4 SF 36 515.4 M(Utility programs:)S
/F6 SF 36 489 M(eroute)S
/F4 SF 72 475.8 M(manipulate IPsec extended routing tables)S
/F6 SF 36 462.6 M(klipsdebug)S
/F4 SF 72 449.4 M(set Klips \(kernel IPsec support\) debug features and level)S
/F6 SF 36 436.2 M(spi)S
/F4 SF 72 423 M(manage IPsec Security Associations)S
/F6 SF 36 409.8 M(spigrp)S
/F4 SF 72 396.6 M(group/ungroup IPsec Security Associations)S
/F6 SF 36 383.4 M(tncfg)S
/F4 SF 72 370.2 M(associate IPsec virtual interface with real interface)S
36 357 M(These are all normally invoked by ipsec\(8\) with commands such as)S
9 FS/F0 SF 36 332.6 M(        ipsec tncfg )S
/Fa SF (arguments)S
11 FS/F4 SF 36 306.6 M(There are section 8 man pages for all of these; the names have "ipsec_" as a prefix, so your man)S
36 293.4 M(command should be something like:)S
9 FS/F0 SF 36 269 M(        man 8 ipsec_tncfg)S
17 FS/F9 SF 0 237 M(Pluto key and connection management daemon)S
11 FS/F4 SF 0 209.4 M(Pluto is our key management and negotiation daemon. It lives in the pluto directory, along with its low-level)S
0 196.2 M(user utility, whack.)S
0 169.8 M(There are no subdirectories. Documentation is a man page, pluto.8. This covers whack as well.)S
17 FS/F9 SF 0 137.4 M(Utils)S
11 FS/F4 SF 0 109.8 M(The utils directory contains a growing collection of higher-level user utilities, the commands that administer)S
0 96.6 M(and control the software. Most of the things that you will actually have to run yourself are in there.)S
/F6 SF 0 70.2 M(ipsec)S
/F4 SF 36 57 M(invoke IPsec utilities)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Pluto key and connection management daemon)S
468.652 0 M(301)S
GR
SP
%%Page: 302 331
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(ipsec\(8\) is normally the only program installed in a standard directory, /usr/local/sbin. It is used to)S
36 673.8 M(invoke the others, both those listed below and the ones in klips/utils mentioned above.)S
/F6 SF 0 660.6 M(auto)S
/F4 SF 36 647.4 M(control automatically-keyed IPsec connections)S
/F6 SF 0 634.2 M(manual)S
/F4 SF 36 621 M(take manually-keyed IPsec connections up and down)S
/F6 SF 0 607.8 M(barf)S
/F4 SF 36 594.6 M(generate copious debugging output)S
/F6 SF 0 581.4 M(look)S
/F4 SF 36 568.2 M(generate moderate amounts of debugging output)S
0 541.8 M(There are .8 manual pages for these. look is covered in barf.8. The man pages have an "ipsec_" prefix so your)S
0 528.6 M(man command should be something like:)S
9 FS/F0 SF 0 504.2 M(        man 8 ipsec_auto)S
11 FS/F4 SF 0 478.2 M(Examples are in various files with names utils/*.eg)S
17 FS/F9 SF 0 445.8 M(Libraries)S
14 FS/F9 SF 0 415.2 M(FreeS/WAN Library)S
11 FS/F4 SF 0 388.2 M(The lib directory is the FreeS/WAN library, also steadily growing, used by both user-level and kernel code.)S
0 375 M(It includes section 3 man pages for the library routines.)S
14 FS/F9 SF 0 345.6 M(Imported Libraries)S
11 FS/F9 SF 0 318.6 M(LibDES)S
/F4 SF 0 292.2 M(The libdes library, originally from SSLeay, is used by both Klips and Pluto for Triple DES encryption. Single)S
0 279 M(DES is not used because it is insecure.)S
0 252.6 M(Note that this library has its own license, different from the GPL used for other code in FreeS/WAN.)S
0 226.2 M(The library includes its own documentation.)S
/F9 SF 0 199.8 M(GMP)S
/F4 SF 0 173.4 M(The GMP \(GNU multi-precision\) library is used for multi-precision arithmetic in Pluto's key-exchange code)S
0 160.2 M(and public key code.)S
0 133.8 M(Older versions \(up to 1.7\) of FreeS/WAN included a copy of this library in the FreeS/WAN distribution.)S
0 107.4 M(Since 1.8, we have begun to rely on the system copy of GMP.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Libraries)S
468.652 0 M(302)S
GR
SP
%%Page: 303 332
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(User-Mode-Linux Testing guide)S
11 FS/F4 SF 0 649.8 M(User mode linux is a way to compile a linux kernel such that it can run as a process in another linux system)S
0 636.6 M(\(potentially as a *BSD or Windows process later\). See http://user-mode-linux.sourceforge.net/)S
0 610.2 M(UML is a good platform for testing and experimenting with FreeS/WAN. It allows several network nodes to)S
0 597 M(be simulated on a single machine. Creating, configuring, installing, monitoring, and controling these nodes is)S
0 583.8 M(generally easier and easier to script with UML than real hardware.)S
0 557.4 M(You'll need about 500Mb of disk space for a full sunrise-east-west-sunset setup. You can possibly get this)S
0 544.2 M(down by 130Mb if you remove the sunrise/sunset kernel build. If you just want to run, then you can even)S
0 531 M(remove the east/west kernel build.)S
0 504.6 M(Nothing need be done as super user. In a couple of steps, we note where super user is required to install)S
0 491.4 M(commands in system-wide directories, but ~/bin could be used instead. UML seems to use a system-wide)S
0 478.2 M(/tmp/uml directory so different users may interfere with one another. Later UMLs use ~/.uml instead, so)S
0 465 M(multiple users running UML tests should not be a problem, but note that a single user running the UML tests)S
0 451.8 M(will only be able run one set. Further, UMLs sometimes get stuck and hang around. These "zombies" \(most)S
0 438.6 M(will actually be in the "T" state in the process table\) will interfere with subsequent tests.)S
17 FS/F9 SF 0 406.2 M(Preliminary Notes on BIND)S
11 FS/F4 SF 0 378.6 M(As of 2003/3/1, the Light-Weight Resolver is used by pluto. This requires that BIND9 be running. It also)S
0 365.4 M(requires that BIND9 development libraries be present in the build environment. The DNSSEC code is only)S
0 352.2 M(truly functional in BIND9 snapshots. The library code could be 9.2.2, we believe. We are using BIND9)S
0 339 M(20021115 snapshot code from ftp://ftp.isc.org/isc/bind9/snapshots.)S
0 312.6 M(FreeS/WAN may well require a newer BIND than is on your system. Many distributions have moved to)S
0 299.4 M(BIND9.2.2 recently due to a security advisory. BIND is five components.)S
36 273 M(named)S
25 273 M(1. )S
36 259.8 M(dnssec-*)S
25 259.8 M(2. )S
36 246.6 M(client side resolver libraries)S
25 246.6 M(3. )S
36 233.4 M(client side utility libraries I thought there were lib and named parts to dnsssec...)S
25 233.4 M(4. )S
36 220.2 M(dynamic DNS update utilities)S
25 220.2 M(5. )S
0 193.8 M(The only piece that we need for *building* is #4. That's the only part that has to be on the build host. What is)S
0 180.6 M(the difference between resolver and util libs? If you want to edit testing/baseconfigs/all/etc/bind, you'll need a)S
0 167.4 M(snapshot version. The resolver library contains the resolver. FreeS/WAN has its own copy of that in)S
0 154.2 M(lib/liblwres.)S
17 FS/F9 SF 0 121.8 M(Steps to Install UML for FreeS/WAN)S
11 FS/F4 SF 36 94.2 M(Get the following files:)S
72 81 M(from http://www.sandelman.ottawa.on.ca/freeswan/uml/ umlfreeroot-15.1.tar.gz \(or highest)S
72 67.8 M(numbered one\). This is a debian potato root file system. You can use this even on a Redhat)S
72 54.6 M(host, as it has the newer GLIBC2.2 libraries as well.)S
61.616 81 M(a. )S
72 41.4 M(From ftp://ftp.xs4all.nl/pub/crypto/freeswan/ a snapshot or release \(1.92 or better\))S
61 41.4 M(b. )S
25 94.2 M(1. )S
/F8 SF 0 0 M(User-Mode-Linux Testing guide)S
468.652 0 M(303)S
GR
SP
%%Page: 304 333
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 72 687 M(From a http://www.kernel.org mirror, the virgin 2.4.19 kernel. Please realize that we have)S
72 673.8 M(defaults in our tree for kernel configuration. We try to track the latest UML kernels. If you)S
72 660.6 M(use a newer kernel, you may have faults in the kernel build process. You can see what the)S
72 647.4 M(latest that is being regularly tested by visiting freeswan-regress-env.sh.)S
61.616 687 M(c. )S
72 634.2 M(Get http://ftp.nl.linux.org/uml/ uml-patch-2.4.19-47.bz2 or the one associated with your)S
72 621 M(kernel. As of 2003/03/05, uml-patch-2.4.19-47.bz2 works for us.)S
/F7 SF ( More recent versions of)S
72 607.8 M(the patch have not been tested by us.)S
/F4 SF 61 634.2 M(d. )S
72 594.6 M(You'll probably want to visit http://user-mode-linux.sourceforge.net and get the UML)S
72 581.4 M(utilities. These are not needed for the build or interactive use \(but recommended\). They are)S
72 568.2 M(necessary for the regression testing procedures used by "make check". We currently use)S
72 555 M(uml_utilities_20020212.tar.bz2.)S
61.616 594.6 M(e. )S
72 541.8 M(You need tcpdump version 3.7.1 or better. This is newer than the version included in most)S
72 528.6 M(LINUX distributions. You can check the version of an installed tcpdump with the --version)S
72 515.4 M(flag. If you need a newer tcpdump fetch both tcpdump and libpcap source tar files from)S
72 502.2 M(http://www.tcpdump.org/ or a mirror.)S
62.837 541.8 M(f. )S
36 489 M(Pick a suitable place, and extract the following files:)S
72 475.8 M(2.4.19 kernel. For instance:)S
9 FS/F0 SF 77.4 451.4 M(           cd /c2/kernel)S
72 440.6 M(           tar xzvf ../download/pub/linux/kernel/v2.4/linux-2.4.19.tar.gz)S
11 FS/F4 SF 61.616 475.8 M(a. )S
72 417 M(extract the umlfreeroot file)S
9 FS/F0 SF 77.4 392.6 M(           mkdir -p /c2/user-mode-linux/basic-root)S
72 381.8 M(           cd /c2/user-mode-linux/basic-root)S
72 371 M(           tar xzvf ../download/umlfreeroot-15.1.tar.gz)S
11 FS/F4 SF 61 417 M(b. )S
72 347.4 M(FreeSWAN itself \(or checkout "all" from CVS\))S
9 FS/F0 SF 77.4 323 M(           mkdir -p /c2/freeswan/sandbox)S
72 312.2 M(           cd /c2/freeswan/sandbox)S
72 301.4 M(           tar xzvf ../download/snapshot.tar.gz)S
11 FS/F4 SF 61.616 347.4 M(c. )S
25 489 M(2. )S
36 277.8 M(If you need to build a newer tcpdump:)S
72 264.6 M(Make sure you have OpenSSL installed -- it is needed for cryptographic routines.)S
/Fc SF 60.967 264.6 M(\250 )S
/F4 SF 72 251.4 M(Unpack libpcap and tcpdump source in parallel directories \(the tcpdump build procedures)S
72 238.2 M(look for libpcap next door\).)S
/Fc SF 60.967 251.4 M(\250 )S
/F4 SF 72 225 M(Change directory into the libpcap source directory and then build the library:)S
9 FS/F0 SF 77.4 200.6 M(       ./configure)S
72 189.8 M(        make)S
11 FS/Fc SF 60.967 225 M(\250 )S
/F4 SF 72 166.2 M(Change into the tcpdump source directory, build tcpdump, and install it.)S
9 FS/F0 SF 77.4 141.8 M(       ./configure)S
72 131 M(        make)S
72 120.2 M(        # Need to be superuser to install in system directories.)S
72 109.4 M(        # Installing in ~/bin would be an alternative.)S
72 98.6 M(        su -c "make install")S
11 FS/Fc SF 60.967 166.2 M(\250 )S
/F4 SF 25 277.8 M(3. )S
36 75 M(If you need the uml utilities, unpack them somewhere then build and install them:)S
9 FS/F0 SF 41.4 50.6 M(       cd tools)S
36 39.8 M(        make all)S
36 29 M(        # Need to be superuser to install in system directories.)S
11 FS/F4 SF 25 75 M(4. )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(User-Mode-Linux Testing guide)S
468.652 0 M(304)S
GR
SP
%%Page: 305 334
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 36 689 M(        # Installing in ~/bin would be an alternative.)S
36 678.2 M(        su -c "make install BIN_DIR=/usr/local/bin")S
11 FS/F4 SF 36 654.6 M(set up the configuration file)S
/F0 SF 72 641.4 M(cd /c2/freeswan/sandbox/freeswan-1.97/testing/utils)S
/Fc SF 60.967 641.4 M(\250 )S
/F4 SF 72 628.2 M(copy umlsetup-sample.sh to ../../umlsetup.sh: )S
/F0 SF ( cp umlsetup-sample.sh)S
72 615 M(../../umlsetup.sh)S
/Fc SF 60.967 628.2 M(\250 )S
/F4 SF 72 601.8 M(open up ../../umlsetup.sh in your favorite editor.)S
/Fc SF 60.967 601.8 M(\250 )S
/F4 SF 72 588.6 M(change POOLSPACE= to point to the place with at least 500Mb of disk. Best if it is on the)S
72 575.4 M(same partition as the "umlfreeroot" extraction, as it will attempt to use hard links if possible)S
72 562.2 M(to save disk space.)S
/Fc SF 60.967 588.6 M(\250 )S
/F4 SF 72 549 M(Set TESTINGROOT if you intend to run the script outside of the sandbox/snapshot/release)S
72 535.8 M(directory. Otherwise, it will configure itself.)S
/Fc SF 60.967 549 M(\250 )S
/F4 SF 72 522.6 M(KERNPOOL should point to the directory with your 2.4.19 kernel tree. This tree should be)S
72 509.4 M(unconfigured! This is the directory you used in step 2a.)S
/Fc SF 60.967 522.6 M(\250 )S
/F4 SF 72 496.2 M(UMLPATCH should point at the bz2 file you downloaded at 1d. If using a kernel that already)S
72 483 M(includes the patch, set this to /dev/null.)S
/Fc SF 60.967 496.2 M(\250 )S
/F4 SF 72 469.8 M(FREESWANDIR should point at the directory where you unpacked the snapshot/release.)S
72 456.6 M(Include the "freeswan-snap2001sep16b" or whatever in it. If you are running from CVS, then)S
72 443.4 M(you point at the directory where top, klips, etc. are. The script will fix up the directory so that)S
72 430.2 M(it can be used.)S
/Fc SF 60.967 469.8 M(\250 )S
/F4 SF 72 417 M(BASICROOT should be set to the directory used in 2b, or to the directory that you created)S
72 403.8 M(with RPMs.)S
/Fc SF 60.967 417 M(\250 )S
/F4 SF 72 390.6 M(SHAREDIR should be set to the directory used in 2c, to /usr/share for Debian potato users, or)S
72 377.4 M(to $BASICROOT/usr/share.)S
/Fc SF 60.967 390.6 M(\250 )S
/F4 SF 25 654.6 M(5. )S
9 FS/F0 SF 36 366.2 M(cd $TESTINGROOT/utils)S
36 355.4 M(sh make-uml.sh)S
11 FS/F4 SF 36 329.4 M(It will grind for awhile. If there are errors it will bail. If so, run it under "script" and send the output to)S
36 316.2 M(bugs@lists.freeswan.org.)S
25 364.2 M(6. )S
36 303 M(You will have a bunch of stuff under $POOLSPACE. Open four xterms:)S
9 FS/F0 SF 36 278.6 M(    for i in sunrise sunset east west)S
36 267.8 M(    do)S
36 257 M(        xterm -name $i -title $i -e $POOLSPACE/$i/start.sh &    done)S
11 FS/F4 SF 25 303 M(7. )S
36 244.2 M(Login as root. Password is "root" \(Note, these virtual machines are networked together, but are not)S
36 231 M(configured to talk to the rest of the world.\))S
25 244.2 M(8. )S
36 217.8 M(verify that pluto started on east/west, run "ipsec look")S
25 217.8 M(9. )S
36 204.6 M(login to sunrise. run "ping sunset")S
19.5 204.6 M(10. )S
36 191.4 M(login to west. run "tcpdump -p -i eth1 -n" \(tcpdump must be version 3.7.1 or newer\))S
19.5 191.4 M(11. )S
36 178.2 M(Closing a console xterm will shut down that UML.)S
19.5 178.2 M(12. )S
36 165 M(You can "make check", if you want to. It is run from /c2/freeswan/sandbox/freeswan-1.97.)S
19.5 165 M(13. )S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(User-Mode-Linux Testing guide)S
468.652 0 M(305)S
GR
SP
%%Page: 306 335
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(Debugging the kernel with GDB)S
11 FS/F4 SF 0 649.8 M(With User-Mode-Linux, you can debug the kernel using GDB. See)S
0 636.6 M(http://user-mode-linux.sourceforge.net/debugging.html.)S
0 610.2 M(Typically, one will want to address a test case for a failing situation. Running GDB from Emacs, or from other)S
0 597 M(front ends is possible. First start GDB.)S
0 570.6 M(Tell it to open the UMLPOOL/swan/linux program.)S
0 544.2 M(Note the PID of GDB:)S
9 FS/F0 SF 0 519.8 M(marajade-[projects/freeswan/mgmt/planning] mcr 1029 %ps ax | grep gdb)S
0 509 M( 1659 pts/9    SN     0:00 /usr/bin/gdb -fullname -cd /mara4/freeswan/kernpatch/UMLPOOL/swan/ linux)S
11 FS/F4 SF 0 483 M(Set the following in the environment:)S
9 FS/F0 SF 0 458.6 M(UML_east_OPT="debug gdb-pid=1659")S
11 FS/F4 SF 0 432.6 M(Then start the user-mode-linux in the test scheme you wish:)S
9 FS/F0 SF 0 408.2 M(marajade-[kernpatch/testing/klips/east-icmp-02] mcr 1220 %../../utils/runme.sh)S
11 FS/F4 SF 0 382.2 M(The user-mode-linux will stop on boot, giving you a chance to attach to the process:)S
9 FS/F0 SF 0 357.8 M(\(gdb\) file linux)S
0 347 M(Reading symbols from linux...done.)S
0 336.2 M(\(gdb\) attach 1)S
0 325.4 M(Attaching to program: /mara4/freeswan/kernpatch/UMLPOOL/swan/linux, process 1)S
0 314.6 M(0xa0118bc1 in kill \(\) at hostfs_kern.c:770)S
11 FS/F4 SF 0 288.6 M(At this point, break points should be created as appropriate.)S
17 FS/F9 SF 0 256.2 M(Other notes about debugging)S
11 FS/F4 SF 0 228.6 M(If you are running a standard test, after all the packets are sent, the UML will be shutdown. This can cause)S
0 215.4 M(problems, because the UML may get terminated while you are debugging.)S
0 189 M(The environment variable )S
/F0 SF (NETJIGWAITUSER)S
/F4 SF ( can be set to "waituser". If so, then the testing system will)S
0 175.8 M(prompt before exiting the test.)S
0 149.4 M(The environment variable )S
/F0 SF (UML_GETTY)S
/F4 SF ( if set, will cause each UML to spawn a getty on /dev/tty1, and will)S
0 136.2 M(wait for it to exit before continuing.)S
/F8 SF 0 0 M(Debugging the kernel with GDB)S
468.652 0 M(306)S
GR
SP
%%Page: 307 336
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(User-Mode-Linux mysteries)S
11 FS/F4 SF 36 649.8 M(running more than one UML of the same name \(e.g. "west"\) can cause problems.)S
/Fc SF 28.19 649.8 M(\267 )S
/F4 SF 36 636.6 M(running more than one UML from the same root file system is not a good idea.)S
/Fc SF 28.19 636.6 M(\267 )S
/F4 SF 36 623.4 M(all this means that running "make check" twice on the same machine is probably not a good idea.)S
/Fc SF 28.19 623.4 M(\267 )S
/F4 SF 36 610.2 M(occationally, UMLs will get stuck. This can happen like: 15134 ? T 0:00)S
36 597 M(/spare/hugh/uml/uml2.4.18-sept5/umlbuild/east/linux \(east\) [/bin/sh] 15138 ? T 0:00)S
36 583.8 M(/spare/hugh/uml/uml2.4.18-sept5/umlbuild/east/linux \(east\) [halt] these will need to be killed. Note)S
36 570.6 M(that they are in "T"racing mode.)S
/Fc SF 28.19 610.2 M(\267 )S
/F4 SF 36 557.4 M(UMLs can also hang, and will report "Tracing myself and I can't get out". This is a bug in UML.)S
36 544.2 M(There are ways to find out what is going on and report this to the UML people, but we don't know the)S
36 531 M(magic right now.)S
/Fc SF 28.19 557.4 M(\267 )S
/F8 SF 0 0 M(User-Mode-Linux mysteries)S
468.652 0 M(307)S
GR
SP
%%Page: 308 337
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(Getting more info from uml_netjig)S
11 FS/F4 SF 0 649.8 M(uml_netjig can be compiled with a built-in tcpdump. This uses not-yet-released code from)S
0 636.6 M(www.tcpdump.org. Please see the instructions in )S
/F0 SF (testing/utils/uml_netjig/Makefile)S
/F4 SF (.)S
/F8 SF 0 0 M(Getting more info from uml_netjig)S
468.652 0 M(308)S
GR
SP
%%Page: 309 338
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(How to configure to use "make check")S
17 FS/F9 SF 0 643.8 M(What is "make check")S
11 FS/F4 SF 0 616.2 M("make check" is a target in the top level makefile. It takes care of running a number of unit and system tests to)S
0 603 M(confirm that FreeSWAN has been compiled correctly, and that no new bugs have been introduced.)S
0 576.6 M(As FreeSWAN contains both kernel and userspace components, doing testing of FreeSWAN requires that the)S
0 563.4 M(kernel be simulated. This is typically difficult to do as a kernel requires that it be run on bare hardware. A)S
0 550.2 M(technology has emerged that makes this simpler. This is User Mode Linux.)S
0 523.8 M(User-Mode Linux is a way to build a Linux kernel such that it can run as a process under another Linux \(or in)S
0 510.6 M(the future other\) kernel. Presently, this can only be done for 2.4 guest kernels. The host kernel can be 2.2 or)S
0 497.4 M(2.4.)S
0 471 M("make check" expects to be able to build User-Mode Linux kernels with FreeSWAN included. To do this it)S
0 457.8 M(needs to have some files downloaded and extracted prior to running "make check". This is described in the)S
0 444.6 M(UML testing document.)S
0 418.2 M(After having run the example in the UML testing document and successfully brought up the four machine)S
0 405 M(combination, you are ready to use "make check")S
17 FS/F9 SF 0 372.6 M(Running "make check")S
11 FS/F4 SF 0 345 M("make check" works by walking the FreeSWAN source tree invoking the "check" target at each node. At)S
0 331.8 M(present there are tests defined only for the )S
/F0 SF (klips)S
/F4 SF ( directory. These tests will use the UML infrastructure to)S
0 318.6 M(test out pieces of the )S
/F0 SF (klips)S
/F4 SF ( code.)S
0 292.2 M(The results of the tests can be recorded. If the environment variable )S
/F0 SF ($REGRESSRESULTS)S
/F4 SF ( is non-null, then)S
0 279 M(the results of each test will be recorded. This can be used as part of a nightly regression testing system, see)S
0 265.8 M(Nightly testing for more details.)S
0 239.4 M("make check" otherwise prints a minimal amount of output for each test, and indicates pass/fail status of each)S
0 226.2 M(test as they are run. Failed tests do not cause failure of the target in the form of exit codes.)S
/F8 SF 0 0 M(How to configure to use "make check")S
468.652 0 M(309)S
GR
SP
%%Page: 310 339
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(How to write a "make check" test)S
17 FS/F9 SF 0 643.8 M(Structure of a test)S
11 FS/F4 SF 0 616.2 M(Each test consists of a set of directories under )S
/F0 SF (testing/)S
/F4 SF (. There are directories for )S
/F0 SF (klips)S
/F4 SF (, )S
/F0 SF (pluto)S
/F4 SF (,)S
/F0 SF 0 603 M(packaging)S
/F4 SF ( and )S
/F0 SF (libraries)S
/F4 SF (. Each directory has a list of tests to run is stored in a file called )S
/F0 SF (TESTLIST)S
/F4 SF ( in)S
0 589.8 M(that directory. e.g. )S
/F0 SF (testing/klips/TESTLIST)S
/F4 SF (.)S
17 FS/F9 SF 0 557.4 M(The TESTLIST)S
11 FS/F4 SF 0 529.8 M(This isn't actually a shell script. It just looks like one. Some tools other than /bin/sh process it. Lines that start)S
0 516.6 M(with # are comments.)S
9 FS/F0 SF 0 492.2 M(# test-kind     directory-containing-test       expectation     [PR#])S
11 FS/F4 SF 0 466.2 M(The first word provides the test type, detailed below.)S
0 439.8 M(The second word is the name of the test to run. This the directory in which the test case is to be found..)S
0 413.4 M(The third word may be one of:)S
/F6 SF 0 387 M(blank/good)S
/F4 SF 36 373.8 M(the test is believed to function, report failure)S
/F6 SF 0 360.6 M(bad)S
/F4 SF 36 347.4 M(the test is known to fail, report unexpected success)S
/F6 SF 0 334.2 M(suspended)S
/F4 SF 36 321 M(the test should not be run)S
0 294.6 M(The fourth word may be a number, which is a PR# if the test is failing.)S
17 FS/F9 SF 0 262.2 M(Test kinds)S
11 FS/F4 SF 0 234.6 M(The test types are:)S
/F6 SF 0 208.2 M(skiptest)S
/F4 SF 36 195 M(means run no test.)S
/F6 SF 0 181.8 M(ctltest)S
/F4 SF 36 168.6 M(means run a single system without input/output.)S
/F6 SF 0 155.4 M(klipstest)S
/F4 SF 36 142.2 M(means run a single system with input/output networks)S
/F6 SF 0 129 M(umlplutotest)S
/F4 SF 36 115.8 M(means run a pair of systems)S
/F6 SF 0 102.6 M(umlXhost)S
/F4 SF 36 89.4 M(run an arbitrary number of systems)S
/F6 SF 0 76.2 M(suntest \(TBD\))S
/F4 SF 36 63 M(means run a quad of east/west/sunrise/sunset)S
/F6 SF 0 49.8 M(roadtest \(TBD\))S
/F4 SF 36 36.6 M(means run a trio of east-sunrise + warrior)S
/F8 SF 0 0 M(How to write a "make check" test)S
468.652 0 M(310)S
GR
SP
%%Page: 311 340
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F6 SF 0 687 M(extrudedtest \(TBD\))S
/F4 SF 36 673.8 M(means run a quad of east-sunrise + warriorsouth + park)S
/F6 SF 0 660.6 M(mkinsttest)S
/F4 SF 36 647.4 M(a test of the "make install" machinery.)S
/F6 SF 0 634.2 M(kernel_test_patch)S
/F4 SF 36 621 M(a test of the "make kernelpatch" machinery.)S
0 594.6 M(Tests marked \(TBD\) have yet to be fully defined.)S
0 568.2 M(Each test directory has a file in it called )S
/F0 SF (testparams.sh)S
/F4 SF (. This file sets a number of environment variables)S
0 555 M(to define the parameters of the test.)S
17 FS/F9 SF 0 522.6 M(Common parameters)S
11 FS/F6 SF 0 495 M(TESTNAME)S
/F4 SF 36 481.8 M(the name of the test \(repeated for checking purposes\))S
/F6 SF 0 468.6 M(TEST_TYPE)S
/F4 SF 36 455.4 M(the type of the test \(repeat of type type above\))S
/F6 SF 0 442.2 M(TESTHOST)S
/F4 SF 36 429 M(the name of the UML machine to run for the test, typically "east" or "west")S
/F6 SF 0 415.8 M(TEST_PURPOSE)S
/F4 SF 36 402.6 M(The purpose of the test is one of:)S
/F6 SF 36 389.4 M(goal)S
/F4 SF 72 376.2 M(The goal purpose is where a test is defined for code that is not yet finished. The test indicates)S
72 363 M(when the goals have in fact been reached.)S
/F6 SF 36 349.8 M(regress)S
/F4 SF 72 336.6 M(This is a test to determine that a previously existing bug has been repaired. This test will)S
72 323.4 M(initially be created to reproduce the bug in isolation, and then the bug will be fixed.)S
/F6 SF 36 310.2 M(exploit)S
/F4 SF 72 297 M(This is a set of packets/programs that causes a vulnerability to be exposed. It is a specific)S
72 283.8 M(variation of the regress option.)S
/F6 SF 0 270.6 M(TEST_GOAL_ITEM)S
/F4 SF 36 257.4 M(in the case of a goal test, this is a reference to the requirements document)S
/F6 SF 0 244.2 M(TEST_PROB_REPORT)S
/F4 SF 36 231 M(in the case of regression test, this the problem report number from GNATS)S
/F6 SF 0 217.8 M(TEST_EXPLOIT_URL)S
/F4 SF 36 204.6 M(in the case of an exploit, this is a URL referencing the paper explaining the origin of the test and the)S
36 191.4 M(origin of exploit software)S
/F6 SF 0 178.2 M(REF_CONSOLE_OUTPUT)S
/F4 SF 36 165 M(a file in the test directory that contains the sanitized console output against which to compare the)S
36 151.8 M(output of the actual test.)S
/F6 SF 0 138.6 M(REF_CONSOLE_FIXUPS)S
/F4 SF 36 125.4 M(a list of scripts \(found in )S
/F0 SF (klips/test/fixups)S
/F4 SF (\) to apply to sanitize the console output of the)S
36 112.2 M(machine under test. These are typically perl, awk or sed scripts that remove things in the kernel output)S
36 99 M(that change each time the test is run and/or compiled.)S
/F6 SF 0 85.8 M(INIT_SCRIPT)S
/F4 SF 36 72.6 M(a file of commands that is fed into the virtual machine's console in single user mode prior to starting)S
36 59.4 M(the tests. This file will usually set up any eroute's and SADB entries that are required for the test.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(Common parameters)S
468.652 0 M(311)S
GR
SP
%%Page: 312 341
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(Lines beginning with # are skipped. Blank lines are skipped. Otherwise, a shell prompted is waited for)S
36 673.8 M(each time \(consisting of )S
/F0 SF (\\n#)S
/F4 SF (\) and then the command is sent. Note that the prompt is waited for before)S
36 660.6 M(the command and not after, so completion of the last command in the script is not required. This is)S
36 647.4 M(often used to invoke a program to monitor the system, e.g. )S
/F0 SF (ipsec pf_key)S
/F4 SF (.)S
/F6 SF 0 634.2 M(RUN_SCRIPT)S
/F4 SF 36 621 M(a file of commands that is fed into the virtual machine's console in single user mode, before the)S
36 607.8 M(packets are sent. On single machine tests, this script doesn't provide any more power than)S
36 594.6 M(INIT_SCRIPT, but is implemented for consistency's sake.)S
/F6 SF 0 581.4 M(FINAL_SCRIPT)S
/F4 SF 36 568.2 M(a file of commands that is fed into the virtual machine's console in single user mode after the final)S
36 555 M(packet is sent. Similar to INIT_SCRIPT, above. If not specified, then the single command "halt" is)S
36 541.8 M(sent. If specified, then the script should end with a halt command to nicely shutdown the UML.)S
/F6 SF 0 528.6 M(CONSOLEDIFFDEBUG)S
/F4 SF 36 515.4 M(If set to "true" then the series of console fixups \(see REF_CONSOLE_FIXUPS\) will be output after it)S
36 502.2 M(is constructed. \(It should be set to "false", or unset otherwise\))S
/F6 SF 0 489 M(NETJIGDEBUG)S
/F4 SF 36 475.8 M(If set to "true" then the series of console fixups \(see REF_CONSOLE_FIXUPS\) will be output after it)S
36 462.6 M(is constructed. \(It should be set to "false", or unset otherwise\))S
/F6 SF 0 449.4 M(NETJIGTESTDEBUG)S
/F4 SF 36 436.2 M(If set to "netjig", then the results of talking to the )S
/F0 SF (uml_netjig)S
/F4 SF ( will be printed to stderr during the)S
36 423 M(test. In addition, the jig will be invoked with --debug, which causes it to log its process ID, and wait)S
36 409.8 M(60 seconds before continuing. This can be used if you are trying to debug the )S
/F0 SF (uml_netjig)S
/F4 SF ( program)S
36 396.6 M(itself.)S
/F6 SF 0 383.4 M(HOSTTESTDEBUG)S
/F4 SF 36 370.2 M(If set to "hosttest", then the results of taling to the consoles of the UMLs will be printed to stderr)S
36 357 M(during the test.)S
/F6 SF 0 343.8 M(NETJIGWAITUSER)S
/F4 SF 36 330.6 M(If set to "waituser", then the scripts will wait forever for user input before they shut the tests down.)S
36 317.4 M(Use this is if you are debugging through the kernel.)S
/F6 SF 0 304.2 M(PACKETRATE)S
/F4 SF 36 291 M(A number, in miliseconds \(default is 500ms\) at which packets will be replayed by the netjig.)S
17 FS/F9 SF 0 258.6 M(KLIPStest paramaters)S
11 FS/F4 SF 0 231 M(The klipstest function starts a program \()S
/F0 SF (testing/utils/uml_netjig/uml_netjig)S
/F4 SF (\) to setup a bunch)S
0 217.8 M(of I/O sockets \(that simulate network interfaces\). It then exports the references to these sockets to the)S
0 204.6 M(environment and invokes \(using system\(\)\) a given script. It waits for the script to finish.)S
0 178.2 M(The script invoked \()S
/F0 SF (testing/utils/host-test.tcl)S
/F4 SF (\) is a TCL expect script that arranges to start the)S
0 165 M(UML and configure it appropriately for the test. The configuration is done with the script given above for)S
/Fa SF 0 151.8 M(INIT_SCRIPT)S
/F4 SF (. The TCL script then forks, leaves the UML in the background and exits. uml_netjig)S
0 138.6 M(continues. It then starts listening to the simulated network answering ARPs and inserting packets as)S
0 125.4 M(appropriate.)S
0 99 M(The klipstest function invokes )S
/F0 SF (uml_netjig)S
/F4 SF ( with arguments to capture output from network interface\(s\) and)S
0 85.8 M(insert packets as appropriate:)S
/F6 SF 0 59.4 M(PUB_INPUT)S
/F4 SF 36 46.2 M(a pcap file to feed in on the public \(encrypted\) interface. \(typically, eth1\))S
/F6 SF 0 33 M(PRIV_INPUT)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(KLIPStest paramaters)S
468.652 0 M(312)S
GR
SP
%%Page: 313 342
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(a pcap file to feed in on the private \(plain-text\) interface \(typically, eth0\).)S
/F6 SF 0 673.8 M(REF_PUB_OUTPUT)S
/F4 SF 36 660.6 M(a text file containing tcpdump output. Packets on the public \(eth1\) interface are captured to a pcap file)S
36 647.4 M(by )S
/F0 SF (uml_netjig)S
/F4 SF (. The klipstest function then uses tcpdump on the file to produce text output, which)S
36 634.2 M(is compared to the file given.)S
/F6 SF 0 621 M(REF_PUB_FILTER)S
/F4 SF 36 607.8 M(a program that will filter the TCPDUMP output to do further processing. Defaults to "cat".)S
/F6 SF 0 594.6 M(REF_PRIV_OUTPUT)S
/F4 SF 36 581.4 M(a text file containing tcpdump output. Packets on the private \(eth0\) interface are captured and)S
36 568.2 M(compared after conversion by tcpdump, as with)S
/Fa SF ( REFPUBOUTPUT)S
/F4 SF (.)S
/F6 SF 0 555 M(REF_PRIV_FILTER)S
/F4 SF 36 541.8 M(a program that will filter the TCPDUMP output to do further processing. Defaults to "cat".)S
/F6 SF 0 528.6 M(EXITONEMPTY)S
/F4 SF 36 515.4 M(a flag for )S
/F0 SF (uml_netjig)S
/F4 SF (. It should contain "--exitonempty" of uml_netjig should exit when all of the)S
36 502.2 M(input \()S
/Fa SF (PUBINPUT)S
/F4 SF (,)S
/Fa SF (PRIVINPUT)S
/F4 SF (\) packets have been injected.)S
/F6 SF 0 489 M(ARPREPLY)S
/F4 SF 36 475.8 M(a flag for )S
/F0 SF (uml_netjig)S
/F4 SF (. It should contain "--arpreply" if )S
/F0 SF (uml_netjig)S
/F4 SF ( should reply to ARP)S
36 462.6 M(requests. One will typically set this to avoid having to fudge the ARP cache manually.)S
/F6 SF 0 449.4 M(TCPDUMPFLAGS)S
/F4 SF 36 436.2 M(a set of flags for the tcpdump used when converting captured output. Typical values will include "-n")S
36 423 M(to turn off DNS, and often "-E" to set the decryption key \(tcpdump 3.7.1 and higher only\) for ESP)S
36 409.8 M(packets. The "-t" flag \(turn off timestamps\) is provided automatically)S
/F6 SF 0 396.6 M(NETJIG_EXTRA)S
/F4 SF 36 383.4 M(additional comments to be sent to the netjig. This may arrange to record or create additional networks,)S
36 370.2 M(or may toggle options.)S
17 FS/F9 SF 0 337.8 M(mkinsttest paramaters)S
11 FS/F4 SF 0 310.2 M(The basic concept of the )S
/F0 SF (mkinsttest)S
/F4 SF ( test type is that it performs a "make install" to a temporary)S
0 297 M($DESTDIR. The resulting tree can then be examined to determine if it was done properly. The files can be)S
0 283.8 M(uninstalled to determine if the file list was correct, or the contents of files can be examined more precisely.)S
/F6 SF 0 257.4 M(INSTALL_FLAGS)S
/F4 SF 36 244.2 M(If set, then an install will be done. This provides the set of flags to provide for the install. The target to)S
36 231 M(be used \(usually "install"\) must be among the flags.)S
/F6 SF 0 217.8 M(POSTINSTALL_SCRIPT)S
/F4 SF 36 204.6 M(If set, a script to run after initial "make install". Two arguments are provided: an absolute path to the)S
36 191.4 M(root of the FreeSWAN src tree, and an absolute path to the temporary installation area.)S
/F6 SF 0 178.2 M(INSTALL2_FLAGS)S
/F4 SF 36 165 M(If set, a second install will be done using these flags. Similarly to INSTALL_FLAGS, the target must)S
36 151.8 M(be among the flags.)S
/F6 SF 0 138.6 M(UNINSTALL_FLAGS)S
/F4 SF 36 125.4 M(If set, an uninstall will be done using these flags. Similarly to INSTALL_FLAGS, the target \(usually)S
36 112.2 M("uninstall"\) must be among the flags.)S
/F6 SF 0 99 M(REF_FIND_f_l_OUTPUT)S
/F4 SF 36 85.8 M(If set, a )S
/F0 SF (find $ROOT \( -type f -or -type -l \))S
/F4 SF ( will be done to get a list of a real files)S
36 72.6 M(and symlinks. The resulting file will be compared to the file listed by this option.)S
/F6 SF 0 59.4 M(REF_FILE_CONTENTS)S
/F4 SF 36 46.2 M(If set, it should point to a file containing records for the form:)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(mkinsttest paramaters)S
468.652 0 M(313)S
GR
SP
%%Page: 314 343
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 46.8 689 M(reffile)S
100.8 689 M(samplefile)S
11 FS/F4 SF 36 663 M(one record per line. A diff between the provided reference file, and the sample file \(located in the)S
36 649.8 M(temporary installation root\) will be done for each record.)S
17 FS/F9 SF 0 617.4 M(rpm_build_install_test paramaters)S
11 FS/F4 SF 0 589.8 M(The )S
/F0 SF (rpm_build_install_test)S
/F4 SF ( type is to verify that the proper packing list is produced by "make rpm",)S
0 576.6 M(and that the mechanisms for building the kernel modules produce consistent results.)S
/F6 SF 0 550.2 M(RPM_KERNEL_SOURCE)S
/F4 SF 36 537 M(Point to an extracted copy of the RedHat kernel source code. Variables from the environment may be)S
36 523.8 M(used.)S
/F6 SF 0 510.6 M(REF_RPM_CONTENTS)S
/F4 SF 36 497.4 M(This is a file containing one record per line. Each record consists of a RPM name \(may contain)S
36 484.2 M(wildcards\) and a filename to compare the contents to. The RPM will be located and a file list will be)S
36 471 M(produced with rpm2cpio.)S
17 FS/F9 SF 0 438.6 M(libtest paramaters)S
11 FS/F4 SF 0 411 M(The libtest test is for testing library routines. The library file is expected to provided an )S
/F0 SF (#ifdef)S
/F4 SF ( by the name)S
0 397.8 M(of)S
/Fa SF ( library)S
/F4 SF (. The libtest type invokes the C compiler to compile this file, links it against )S
/F0 SF (libfreeswan.a)S
/F4 SF ( \(to)S
0 384.6 M(resolve any other dependancies\) and runs the test with the )S
/F0 SF (-r)S
/F4 SF ( argument to invoke a regression test.)S
0 358.2 M(The library test case is expected to do a self-test, exiting with status code 0 if everything is okay, and with)S
0 345 M(non-zero otherwise. A core dump \(exit code greater than 128\) is noted specifically.)S
0 318.6 M(Unlike other tests, there are no subdirectories required, or other parameters to set.)S
17 FS/F9 SF 0 286.2 M(umlplutotest paramaters)S
11 FS/F4 SF 0 258.6 M(The umlplutotest function starts a pair of user mode line processes. This is a 2-host version of umlXhost. The)S
0 245.4 M("EAST" and "WEST" slots are defined.)S
17 FS/F9 SF 0 213 M(umlXhost parameters)S
11 FS/F4 SF 0 185.4 M(The umlXtest function starts an arbitrary number of user mode line processes.)S
0 159 M(The script invoked \()S
/F0 SF (testing/utils/Xhost-test.tcl)S
/F4 SF (\) is a TCL expect script that arranges to start)S
0 145.8 M(each UML and configure it appropriately for the test. It then starts listening \(using uml_netjig\) to the)S
0 132.6 M(simulated network answering ARPs and inserting packets as appropriate.)S
0 106.2 M(umlXtest has a series of slots, each of which should be filled by a host. The list of slots is controlled by the)S
0 93 M(variable, XHOST_LIST. This variable should be set to a space seperated list of slots. The former umlplutotest)S
0 79.8 M(is now implemented as a variation of the umlXhost test, with XHOST_LIST="EAST WEST".)S
0 53.4 M(For each host slot that is defined, a series of variables should be filled in, defining what configuration scripts)S
0 40.2 M(to use for that host.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(rpm_build_install_test paramaters)S
468.652 0 M(314)S
GR
SP
%%Page: 315 344
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(The following are used to control the console input and output to the system. Where the string ${host} is)S
0 673.8 M(present, the host slot should be filled in. I.e. for the two host system with XHOST_LIST="EAST WEST",)S
0 660.6 M(then the variables: EAST_INIT_SCRIPT and WEST_INIT_SCRIPT will exist.)S
/F6 SF 0 634.2 M(${host}HOST)S
/F4 SF 36 621 M(The name of the UML host which will fill this slot)S
/F6 SF 0 607.8 M(${host}_INIT_SCRIPT)S
/F4 SF 36 594.6 M(a file of commands that is fed into the virtual machine's console in single user mode prior to starting)S
36 581.4 M(the tests. This file will usually set up any eroute's and SADB entries that are required for the test.)S
36 568.2 M(Similar to INIT_SCRIPT, above.)S
/F6 SF 0 555 M(${host}_RUN_SCRIPT)S
/F4 SF 36 541.8 M(a file of commands that is fed into the virtual machine's console in single user mode, before the)S
36 528.6 M(packets are sent. This set of commands is run after all of the virtual machines are initialized. I.e. after)S
36 515.4 M(EAST_INIT_SCRIPT)S
/F5 SF ( AND)S
/F4 SF ( WEST_INIT_SCRIPT. This script can therefore do things that require)S
36 502.2 M(that all machines are properly configured.)S
/F6 SF 0 489 M(${host}_RUN2_SCRIPT)S
/F4 SF 36 475.8 M(a file of commands that is fed into the virtual machine's console in single user mode, after the packets)S
36 462.6 M(are sent. This set of commands is run before any of the virtual machines have been shut down. \(I.e.)S
36 449.4 M(before EAST_FINAL_SCRIPT)S
/F5 SF ( AND)S
/F4 SF ( WEST_FINAL_SCRIPT.\) This script can therefore catch)S
36 436.2 M(post-activity status reports.)S
/F6 SF 0 423 M(${host}_FINAL_SCRIPT)S
/F4 SF 36 409.8 M(a file of commands that is fed into the virtual machine's console in single user mode after the final)S
36 396.6 M(packet is sent. Similar to INIT_SCRIPT, above. If not specified, then the single command "halt" is)S
36 383.4 M(sent. Note that when this script is run, the other virtual machines may already have been killed. If)S
36 370.2 M(specified, then the script should end with a halt command to nicely shutdown the UML.)S
/F6 SF 0 357 M(REF_${host}_CONSOLE_OUTPUT)S
/F4 SF 36 343.8 M(Similar to REF_CONSOLE_OUTPUT, above.)S
0 317.4 M(Some additional flags apply to all hosts:)S
/F6 SF 0 291 M(REF_CONSOLE_FIXUPS)S
/F4 SF 36 277.8 M(a list of scripts \(found in )S
/F0 SF (klips/test/fixups)S
/F4 SF (\) to apply to sanitize the console output of the)S
36 264.6 M(machine under test. These are typically perl, awk or sed scripts that remove things in the kernel output)S
36 251.4 M(that change each time the test is run and/or compiled.)S
0 225 M(In addition to input to the console, the networks may have input fed to them:)S
/F6 SF 0 198.6 M(EAST_INPUT/WEST_INPUT)S
/F4 SF 36 185.4 M(a pcap file to feed in on the private network side of each network. The "EAST" and "WEST" here)S
36 172.2 M(refer to the networks, not the hosts.)S
/F6 SF 0 159 M(REF_PUB_FILTER)S
/F4 SF 36 145.8 M(a program that will filter the TCPDUMP output to do further processing. Defaults to "cat".)S
/F6 SF 0 132.6 M(REF_EAST_FILTER/REF_WEST_FILTER)S
/F4 SF 36 119.4 M(a program that will filter the TCPDUMP output to do further processing. Defaults to "cat".)S
36 106.2 M(<)S
/F6 SF 0 93 M(TCPDUMPFLAGS)S
/F4 SF 36 79.8 M(a set of flags for the tcpdump used when converting captured output. Typical values will include "-n")S
36 66.6 M(to turn off DNS, and often "-E" to set the decryption key \(tcpdump 3.7.1 and higher only\) for ESP)S
36 53.4 M(packets. The "-t" flag \(turn off timestamps\) is provided automatically)S
/F6 SF 0 40.2 M(REF_EAST_OUTPUT/REF_WEST_OUTPUT)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(rpm_build_install_test paramaters)S
468.652 0 M(315)S
GR
SP
%%Page: 316 345
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(a text file containing tcpdump output. Packets on the private \(eth0\) interface are captured and)S
36 673.8 M(compared after conversion by tcpdump, as with)S
/Fa SF ( REF_PUB_OUTPUT)S
/F4 SF (.)S
36 660.6 M(There are two additional environment variables that may be set on the command line:)S
/F6 SF 36 634.2 M(NETJIGVERBOSE=verbose export NETJIGVERBOSE)S
/F4 SF 72 621 M(If set, then the test output will be "chatty", and let you know what commands it is running,)S
72 607.8 M(and as packets are sent. Without it set, the output is limited to success/failure messages.)S
/F6 SF 36 594.6 M(NETJIGTESTDEBUG=netjig export NETJIGTESTDEBUG)S
/F4 SF 72 581.4 M(This will enable debugging of the communication with uml_netjig, and turn on debugging in)S
72 568.2 M(this utility. This does not imply NETJIGVERBOSE.)S
/F6 SF 0 555 M(HOSTTESTDEBUG=hosttest export HOSTTESTDEBUG)S
/F4 SF 36 541.8 M(This will show all interactions with the user-mode-linux consoles)S
17 FS/F9 SF 0 509.4 M(kernel_patch_test paramaters)S
11 FS/F4 SF 0 481.8 M(The kernel_patch_test function takes some kernel source, copies it with lndir, and then applies the patch as)S
0 468.6 M(produced by "make kernelpatch".)S
0 442.2 M(The following are used to control the input and output to the system:)S
/F6 SF 0 415.8 M(KERNEL_NAME)S
/F4 SF 36 402.6 M(the kernel name, typically something like "linus" or "rh")S
/F6 SF 0 389.4 M(KERNEL_VERSION)S
/F4 SF 36 376.2 M(the kernel version number, as in "2.2" or "2.4".)S
/F6 SF 0 363 M(KERNEL_${KERNEL_NAME}${KERNEL_VERSION}_SRC)S
/F4 SF 36 349.8 M(This variable should set in the environment, probably in ~/freeswan-regress-env.sh. Examples of this)S
36 336.6 M(variables would be KERNEL_LINUS2_0_SRC or KERNEL_RH7_3_SRC. This variable should)S
36 323.4 M(point to an extracted copy of the kernel source in question.)S
/F6 SF 0 310.2 M(REF_PATCH_OUTPUT)S
/F4 SF 36 297 M(a copy of the patch output to compare against)S
/F6 SF 0 283.8 M(KERNEL_PATCH_LEAVE_SOURCE)S
/F4 SF 36 270.6 M(If set to a non-empty string, then the patched kernel source is not removed at the end of the test. This)S
36 257.4 M(will typically be set in the environment while debugging.)S
17 FS/F9 SF 0 225 M(module_compile paramaters)S
11 FS/F4 SF 0 197.4 M(The module_compile test attempts to build the KLIPS module against a given set of kernel source. This is also)S
0 184.2 M(done by the RPM tests, but in a very specific manner.)S
0 157.8 M(There are two variations of this test - one where the kernel either doesn't need to be configured, or is already)S
0 144.6 M(done, and tests were there is a local configuration file.)S
0 118.2 M(Where the kernel doesn't need to be configured, the kernel source that is found is simply used. It may be a)S
0 105 M(RedHat-style kernel, where one can cause it to configure itself via rhconfig.h-style definitions. Or, it may)S
0 91.8 M(just be a kernel tree that has been configured.)S
0 65.4 M(If the variable KERNEL_CONFIG_FILE is set, then a new directory is created for the kernel source. It is)S
0 52.2 M(populated with lndir\(1\). The referenced file is then copied in as .config, and "make oldconfig" is used to)S
0 39 M(configure the kernel. This resulting kernel is then used as the reference source.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(kernel_patch_test paramaters)S
468.652 0 M(316)S
GR
SP
%%Page: 317 346
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(In all cases, the kernel source is found the same was for the kernelpatch test, i.e. via)S
0 673.8 M(KERNEL_VERSION/KERNEL_NAME and)S
0 660.6 M(KERNEL_${KERNEL_NAME}${KERNEL_VERSION}_SRC.)S
0 634.2 M(Once there is kernel source, the module is compiled using the top-level "make module" target.)S
0 607.8 M(The test is considered successful if an executable is found in OUTPUT/module/ipsec.o at the end of the test.)S
/F6 SF 0 581.4 M(KERNEL_NAME)S
/F4 SF 36 568.2 M(the kernel name, typically something like "linus" or "rh")S
/F6 SF 0 555 M(KERNEL_VERSION)S
/F4 SF 36 541.8 M(the kernel version number, as in "2.2" or "2.4".)S
/F6 SF 0 528.6 M(KERNEL_${KERNEL_NAME}${KERNEL_VERSION}_SRC)S
/F4 SF 36 515.4 M(This variable should set in the environment, probably in ~/freeswan-regress-env.sh. Examples of this)S
36 502.2 M(variables would be KERNEL_LINUS2_0_SRC or KERNEL_RH7_3_SRC. This variable should)S
36 489 M(point to an extracted copy of the kernel source in question.)S
/F6 SF 0 475.8 M(KERNEL_CONFIG_FILE)S
/F4 SF 36 462.6 M(The configuration file for the kernel.)S
/F6 SF 0 449.4 M(KERNEL_PATCH_LEAVE_SOURCE)S
/F4 SF 36 436.2 M(If set to a non-empty string, then the configured kernel source is not removed at the end of the test.)S
36 423 M(This will typically be set in the environment while debugging.)S
/F6 SF 0 409.8 M(MODULE_DEF_INCLUDE)S
/F4 SF 36 396.6 M(The include file that will be used to configure the KLIPS module, and possibly the kernel source.)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(kernel_patch_test paramaters)S
468.652 0 M(317)S
GR
SP
%%Page: 318 347
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(Current pitfalls)S
11 FS/F6 SF 0 649.8 M("tcpdump dissector" not available.)S
/F4 SF 36 636.6 M(This is a non-fatal warning. If uml_netjig is invoked with the -t option, then it will attempt to use)S
36 623.4 M(tcpdump's dissector to decode each packet that it processes. The dissector is presently not available,)S
36 610.2 M(so this option it normally turned off at compile time. The dissector library will be released with)S
36 597 M(tcpdump version 4.0.)S
/F8 SF 0 0 M(Current pitfalls)S
468.652 0 M(318)S
GR
SP
%%Page: 319 348
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(Nightly regression testing)S
11 FS/F4 SF 0 649.8 M(The nightly regression testing system consists of several shell scripts and some perl scripts. The goal is to)S
0 636.6 M(check out a fresh tree, run "make check" on it, record the results and summarize the results to the team and to)S
0 623.4 M(the web site.)S
0 597 M(Output can be found on adams, although the tests are actually run on another project machine.)S
/F8 SF 0 0 M(Nightly regression testing)S
468.652 0 M(319)S
GR
SP
%%Page: 320 349
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
20 FS/F9 SF 0 678 M(How to setup the nightly build)S
11 FS/F4 SF 0 649.8 M(The best way to do nightly testing is to setup a new account. We call the account "build" - you could call it)S
0 636.6 M(something else, but there may still be some references to ~build in the scripts.)S
17 FS/F9 SF 0 604.2 M(Files you need to know about)S
11 FS/F4 SF 0 576.6 M(As few files as possible need to be extracted from the source tree - files are run from the source tree whenever)S
0 563.4 M(possible. However, there are some bootstrap and configuration files that are necessary.)S
0 537 M(There are 7 files in testing/utils that are involved:)S
/F6 SF 0 510.6 M(nightly-sample.sh)S
/F4 SF 36 497.4 M(This is the root of the build process. This file should be copied out of the CVS tree, to)S
36 484.2 M($HOME/bin/nightly.sh of the build account. This file should be invoked from cron.)S
/F6 SF 0 471 M(freeswan-regress-env-sample.sh)S
/F4 SF 36 457.8 M(This file should be copied to $HOME/freeswan-regress-env.sh. It should be edited to localize the)S
36 444.6 M(values. See below.)S
/F6 SF 0 431.4 M(regress-cleanup.pl)S
/F4 SF 36 418.2 M(This file needs to be copied to $HOME/bin/regress-cleanup.pl. It is invoked by the nightly file before)S
36 405 M(doing anything else. It removes previous nights builds in order to free up disk space for the build)S
36 391.8 M(about to be done.)S
/F6 SF 0 378.6 M(teammail-sample.sh)S
/F4 SF 36 365.4 M(A script used to send results email to the "team". This sample script could be copied to)S
36 352.2 M($HOME/bin/teammail.sh. This version will PGP encrypt all the output to the team members. If this)S
36 339 M(script is used, then PGP will have to be properly setup to have the right keys.)S
/F6 SF 0 325.8 M(regress-nightly.sh)S
/F4 SF 36 312.6 M(This is the first stage of the nightly build. This stage will call other scripts as appropriate, and will)S
36 299.4 M(extract the source code from CVS. This script should be copied to $HOME/bin/regress-nightly.sh)S
/F6 SF 0 286.2 M(regress-stage2.sh)S
/F4 SF 36 273 M(This is the second stage of the nightly build. It is called in place. It essentially sets up the UML setup)S
36 259.8 M(in umlsetup.sh, and calls "make check".)S
/F6 SF 0 246.6 M(regress-summarize-results.pl)S
/F4 SF 36 233.4 M(This script will summarize the results from the tests to a permanent directory set by)S
36 220.2 M($REGRESSRESULTS. It is invoked from the stage2 nightly script.)S
/F6 SF 0 207 M(regress-chart.sh)S
/F4 SF 36 193.8 M(This script is called at the end of the build process, and will summarize each night's results \(as saved)S
36 180.6 M(into $REGRESSRESULTS by regress-summarize-results.pl\) as a chart using gnuplot. Note that this)S
36 167.4 M(requires at least gnuplot 3.7.2.)S
17 FS/F9 SF 0 135 M(Configuring freeswan-regress-env.sh)S
11 FS/F4 SF 0 107.4 M(For more info on KERNPOOL, UMLPATCH, BASICROOT and SHAREDIR, see User-Mode-Linux testing)S
0 94.2 M(guide.)S
/F6 SF 0 67.8 M(KERNPOOL)S
/F4 SF 36 54.6 M(Extract copy of some kernel source to be used for UML builds)S
/F6 SF 0 41.4 M(UMLPATCH)S
/F4 SF 36 28.2 M(matching User-Mode-Linux patch.)S
/F8 SF 0 0 M(How to setup the nightly build)S
468.652 0 M(320)S
GR
SP
%%Page: 321 350
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F6 SF 0 687 M(BASICROOT)S
/F4 SF 36 673.8 M(the root file system image \(see User-Mode-Linux testing guide\).)S
/F6 SF 0 660.6 M(SHAREDIR=${BASICROOT}/usr/share)S
/F4 SF 36 647.4 M(The /usr/share to use.)S
/F6 SF 0 634.2 M(REGRESSTREE)S
/F4 SF 36 621 M(A directory in which to store the nightly regression results. Directories will be created by date in this)S
36 607.8 M(tree.)S
/F6 SF 0 594.6 M(TCPDUMP=tcpdump-3.7.1)S
/F4 SF 36 581.4 M(The path to the tcpdump to use. This must have crypto compiled in, and must be at least 3.7.1)S
/F6 SF 0 568.2 M(KERNEL_RH7_2_SRC=/a3/kernel_sources/linux-2.4.9-13/)S
/F4 SF 36 555 M(An extracted copy of the RedHat 7.2. kernel source. If set, then the packaging/rpm-rh72-install-01)S
36 541.8 M(test will be run, and an RPM will be built as a test.)S
/F6 SF 0 528.6 M(KERNEL_RH7_3_SRC=/a3/kernel_sources/rh/linux-2.4.18-5)S
/F4 SF 36 515.4 M(An extracted copy of the RedHat 7.3. kernel source. If set, then the packaging/rpm-rh73-install-01)S
36 502.2 M(test will be run, and an RPM will be built as a test.)S
/F6 SF 0 489 M(NIGHTLY_WATCHERS="userid,userid,userid")S
/F4 SF 36 475.8 M(The list of people who should receive nightly output. This is used by teammail.sh)S
/F6 SF 0 462.6 M(FAILLINES=128)S
/F4 SF 36 449.4 M(How many lines of failed test output to include in the nightly output)S
/F6 SF 0 436.2 M(PATH=$PATH:/sandel/bin export PATH)S
/F4 SF 36 423 M(You can also override the path if necessary here.)S
/F6 SF 0 409.8 M(CVSROOT=:pserver:anoncvs@ip212.xs4net.freeswan.org:/freeswan/MASTER)S
/F4 SF 36 396.6 M(The CVSROOT to use. This example may work for anonymous CVS, but will be 12 hours behind the)S
36 383.4 M(primary, and is still experimental)S
/F6 SF 0 370.2 M(SNAPSHOTSIGDIR=$HOME/snapshot-sig)S
/F4 SF 36 357 M(For the release tools, where to put the generated per-snapshot signature keys)S
/F6 SF 0 343.8 M(LASTREL=1.97)S
/F4 SF 36 330.6 M(the name of the last release branch \(to find the right per-snapshot signature)S
/F8 SF 177.78 709 M(Introduction to FreeS/WAN)S
0 0 M(How to setup the nightly build)S
468.652 0 M(321)S
GR
SP
%%Trailer
%%EOF
